var Pb=Object.defineProperty,kb=Object.defineProperties,Fb=Object.getOwnPropertyDescriptors,qE=Object.getOwnPropertySymbols,Lb=Object.prototype.hasOwnProperty,Vb=Object.prototype.propertyIsEnumerable,KE=(tn,ot,H)=>ot in tn?Pb(tn,ot,{enumerable:!0,configurable:!0,writable:!0,value:H}):tn[ot]=H,ZE=(tn,ot)=>{for(var H in ot||(ot={}))Lb.call(ot,H)&&KE(tn,H,ot[H]);if(qE)for(var H of qE(ot))Vb.call(ot,H)&&KE(tn,H,ot[H]);return tn},QE=(tn,ot)=>kb(tn,Fb(ot));(self.webpackChunkapp=self.webpackChunkapp||[]).push([[179],{6439:(tn,ot,H)=>{"use strict";var a=H(2313),ne=H(5e3),Y=H(4740),Pe=H(4153);let Le=(()=>{class h{constructor(){}}return h.\u0275fac=function(c){return new(c||h)},h.\u0275cmp=ne.Xpm({type:h,selectors:[["app-root"]],decls:2,vars:0,template:function(c,y){1&c&&(ne.TgZ(0,"ion-app"),ne._UZ(1,"ion-router-outlet"),ne.qZA())},dependencies:[Pe.dr,Pe.jP]}),h})();const he=[{path:"home",loadChildren:()=>Promise.all([H.e(8592),H.e(5158)]).then(H.bind(H,5158)).then(h=>h.HomePageModule)},{path:"",redirectTo:"home",pathMatch:"full"},{path:"view-student",loadChildren:()=>Promise.all([H.e(8592),H.e(3822)]).then(H.bind(H,3822)).then(h=>h.ViewStudentPageModule)},{path:"new-student",loadChildren:()=>Promise.all([H.e(8592),H.e(2174)]).then(H.bind(H,2174)).then(h=>h.NewStudentPageModule)},{path:"edit-student",loadChildren:()=>Promise.all([H.e(8592),H.e(3912)]).then(H.bind(H,3912)).then(h=>h.EditStudentPageModule)}];let Ee=(()=>{class h{}return h.\u0275fac=function(c){return new(c||h)},h.\u0275mod=ne.oAB({type:h}),h.\u0275inj=ne.cJS({imports:[Y.Bz.forRoot(he,{preloadingStrategy:Y.wm}),Y.Bz]}),h})();var pe=H(2011),be=H(353),ce=H(6498),de=H(1086),ie=H(6787),Ie=H(4850),Ge=H(2474),st=H(7545),et=H(2014),Re=H(5778),De=H(826),ct=H(448);class vt{constructor(u,c){this.observables=u,this.project=c}call(u,c){return c.subscribe(new mt(u,this.observables,this.project))}}class mt extends De.L{constructor(u,c,y){super(u),this.observables=c,this.project=y,this.toRespond=[];const D=c.length;this.values=new Array(D);for(let k=0;k<D;k++)this.toRespond.push(k);for(let k=0;k<D;k++)this.add((0,ct.D)(this,c[k],void 0,k))}notifyNext(u,c,y){this.values[y]=c;const D=this.toRespond;if(D.length>0){const k=D.indexOf(y);-1!==k&&D.splice(k,1)}}notifyComplete(){}_next(u){if(0===this.toRespond.length){const c=[u,...this.values];this.project?this._tryProject(c):this.destination.next(c)}}_tryProject(u){let c;try{c=this.project.apply(this,u)}catch(y){return void this.destination.error(y)}this.destination.next(c)}}var xt=H(3489);class ht{constructor(u){this.predicate=u}call(u,c){return c.subscribe(new ye(u,this.predicate))}}class ye extends xt.L{constructor(u,c){super(u),this.predicate=c,this.skipping=!0,this.index=0}_next(u){const c=this.destination;this.skipping&&this.tryCallPredicate(u),this.skipping||c.next(u)}tryCallPredicate(u){try{const c=this.predicate(u,this.index++);this.skipping=Boolean(c)}catch(c){this.destination.error(c)}}}var Oe=H(6351),oe=(H(1277),H(3942)),Ce=H(4859),Te=H(5861),lt=H(9681),J=H(2090),Gt=H(1877);const bt="@firebase/database",at="0.13.10";let $e="";function Ue(h){$e=h}class Je{constructor(u){this.domStorage_=u,this.prefix_="firebase:"}set(u,c){null==c?this.domStorage_.removeItem(this.prefixedName_(u)):this.domStorage_.setItem(this.prefixedName_(u),(0,J.Wl)(c))}get(u){const c=this.domStorage_.getItem(this.prefixedName_(u));return null==c?null:(0,J.cI)(c)}remove(u){this.domStorage_.removeItem(this.prefixedName_(u))}prefixedName_(u){return this.prefix_+u}toString(){return this.domStorage_.toString()}}class Qe{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(u,c){null==c?delete this.cache_[u]:this.cache_[u]=c}get(u){return(0,J.r3)(this.cache_,u)?this.cache_[u]:null}remove(u){delete this.cache_[u]}}const ft=function(h){try{if("undefined"!=typeof window&&void 0!==window[h]){const u=window[h];return u.setItem("firebase:sentinel","cache"),u.removeItem("firebase:sentinel"),new Je(u)}}catch(u){}return new Qe},pt=ft("localStorage"),Vt=ft("sessionStorage"),Nt=new Gt.Yd("@firebase/database"),bn=function(){let h=1;return function(){return h++}}(),In=function(h){const u=(0,J.dS)(h),c=new J.gQ;c.update(u);const y=c.digest();return J.US.encodeByteArray(y)},Qn=function(...h){let u="";for(let c=0;c<h.length;c++){const y=h[c];Array.isArray(y)||y&&"object"==typeof y&&"number"==typeof y.length?u+=Qn.apply(null,y):u+="object"==typeof y?(0,J.Wl)(y):y,u+=" "}return u};let Rn=null,Wn=!0;const cr=function(h,u){(0,J.hu)(!u||!0===h||!1===h,"Can't turn on custom loggers persistently."),!0===h?(Nt.logLevel=Gt.in.VERBOSE,Rn=Nt.log.bind(Nt),u&&Vt.set("logging_enabled",!0)):"function"==typeof h?Rn=h:(Rn=null,Vt.remove("logging_enabled"))},Hn=function(...h){if(!0===Wn&&(Wn=!1,null===Rn&&!0===Vt.get("logging_enabled")&&cr(!0)),Rn){const u=Qn.apply(null,h);Rn(u)}},or=function(h){return function(...u){Hn(h,...u)}},mr=function(...h){const u="FIREBASE INTERNAL ERROR: "+Qn(...h);Nt.error(u)},Wt=function(...h){const u=`FIREBASE FATAL ERROR: ${Qn(...h)}`;throw Nt.error(u),new Error(u)},rr=function(...h){const u="FIREBASE WARNING: "+Qn(...h);Nt.warn(u)},tr=function(h){return"number"==typeof h&&(h!=h||h===Number.POSITIVE_INFINITY||h===Number.NEGATIVE_INFINITY)},Cr="[MIN_NAME]",an="[MAX_NAME]",fr=function(h,u){if(h===u)return 0;if(h===Cr||u===an)return-1;if(u===Cr||h===an)return 1;{const c=Yr(h),y=Yr(u);return null!==c?null!==y?c-y==0?h.length-u.length:c-y:-1:null!==y?1:h<u?-1:1}},Tn=function(h,u){return h===u?0:h<u?-1:1},gn=function(h,u){if(u&&h in u)return u[h];throw new Error("Missing required key ("+h+") in object: "+(0,J.Wl)(u))},Tt=function(h){if("object"!=typeof h||null===h)return(0,J.Wl)(h);const u=[];for(const y in h)u.push(y);u.sort();let c="{";for(let y=0;y<u.length;y++)0!==y&&(c+=","),c+=(0,J.Wl)(u[y]),c+=":",c+=Tt(h[u[y]]);return c+="}",c},yr=function(h,u){const c=h.length;if(c<=u)return[h];const y=[];for(let D=0;D<c;D+=u)y.push(h.substring(D,D+u>c?c:D+u));return y};function Bn(h,u){for(const c in h)h.hasOwnProperty(c)&&u(c,h[c])}const Dr=function(h){(0,J.hu)(!tr(h),"Invalid JSON number");const y=1023;let D,k,W,ae,Me;0===h?(k=0,W=0,D=1/h==-1/0?1:0):(D=h<0,(h=Math.abs(h))>=Math.pow(2,1-y)?(ae=Math.min(Math.floor(Math.log(h)/Math.LN2),y),k=ae+y,W=Math.round(h*Math.pow(2,52-ae)-Math.pow(2,52))):(k=0,W=Math.round(h/Math.pow(2,-1074))));const We=[];for(Me=52;Me;Me-=1)We.push(W%2?1:0),W=Math.floor(W/2);for(Me=11;Me;Me-=1)We.push(k%2?1:0),k=Math.floor(k/2);We.push(D?1:0),We.reverse();const Lt=We.join("");let Ft="";for(Me=0;Me<64;Me+=8){let Yt=parseInt(Lt.substr(Me,8),2).toString(16);1===Yt.length&&(Yt="0"+Yt),Ft+=Yt}return Ft.toLowerCase()},Ln=new RegExp("^-?(0*)\\d{1,10}$"),si=-2147483648,ir=2147483647,Yr=function(h){if(Ln.test(h)){const u=Number(h);if(u>=si&&u<=ir)return u}return null},ei=function(h){try{h()}catch(u){setTimeout(()=>{throw rr("Exception was thrown by user callback.",u.stack||""),u},Math.floor(0))}},$t=function(h,u){const c=setTimeout(h,u);return"number"==typeof c&&"undefined"!=typeof Deno&&Deno.unrefTimer?Deno.unrefTimer(c):"object"==typeof c&&c.unref&&c.unref(),c};class ln{constructor(u,c){this.appName_=u,this.appCheckProvider=c,this.appCheck=null==c?void 0:c.getImmediate({optional:!0}),this.appCheck||null==c||c.get().then(y=>this.appCheck=y)}getToken(u){return this.appCheck?this.appCheck.getToken(u):new Promise((c,y)=>{setTimeout(()=>{this.appCheck?this.getToken(u).then(c,y):c(null)},0)})}addTokenChangeListener(u){var c;null===(c=this.appCheckProvider)||void 0===c||c.get().then(y=>y.addTokenListener(u))}notifyForInvalidToken(){rr(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class kn{constructor(u,c,y){this.appName_=u,this.firebaseOptions_=c,this.authProvider_=y,this.auth_=null,this.auth_=y.getImmediate({optional:!0}),this.auth_||y.onInit(D=>this.auth_=D)}getToken(u){return this.auth_?this.auth_.getToken(u).catch(c=>c&&"auth/token-not-initialized"===c.code?(Hn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(c)):new Promise((c,y)=>{setTimeout(()=>{this.auth_?this.getToken(u).then(c,y):c(null)},0)})}addTokenChangeListener(u){this.auth_?this.auth_.addAuthTokenListener(u):this.authProvider_.get().then(c=>c.addAuthTokenListener(u))}removeTokenChangeListener(u){this.authProvider_.get().then(c=>c.removeAuthTokenListener(u))}notifyForInvalidToken(){let u='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';u+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',rr(u)}}let Cn=(()=>{class h{constructor(c){this.accessToken=c}getToken(c){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(c){c(this.accessToken)}removeTokenChangeListener(c){}notifyForInvalidToken(){}}return h.OWNER="owner",h})();const tt=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,_r="websocket",Rr="long_polling";class gt{constructor(u,c,y,D,k=!1,W="",ae=!1){this.secure=c,this.namespace=y,this.webSocketOnly=D,this.nodeAdmin=k,this.persistenceKey=W,this.includeNamespaceInQueryParams=ae,this._host=u.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=pt.get("host:"+u)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(u){u!==this.internalHost&&(this.internalHost=u,this.isCacheableHost()&&pt.set("host:"+this._host,this.internalHost))}toString(){let u=this.toURLString();return this.persistenceKey&&(u+="<"+this.persistenceKey+">"),u}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function xe(h,u,c){let y;if((0,J.hu)("string"==typeof u,"typeof type must == string"),(0,J.hu)("object"==typeof c,"typeof params must == object"),u===_r)y=(h.secure?"wss://":"ws://")+h.internalHost+"/.ws?";else{if(u!==Rr)throw new Error("Unknown connection type: "+u);y=(h.secure?"https://":"http://")+h.internalHost+"/.lp?"}(function Ve(h){return h.host!==h.internalHost||h.isCustomHost()||h.includeNamespaceInQueryParams})(h)&&(c.ns=h.namespace);const D=[];return Bn(c,(k,W)=>{D.push(k+"="+W)}),y+D.join("&")}class Et{constructor(){this.counters_={}}incrementCounter(u,c=1){(0,J.r3)(this.counters_,u)||(this.counters_[u]=0),this.counters_[u]+=c}get(){return(0,J.p$)(this.counters_)}}const Mt={},fn={};function pn(h){const u=h.toString();return Mt[u]||(Mt[u]=new Et),Mt[u]}class Dn{constructor(u){this.onMessage_=u,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(u,c){this.closeAfterResponse=u,this.onClose=c,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(u,c){for(this.pendingResponses[u]=c;this.pendingResponses[this.currentResponseNum];){const y=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let D=0;D<y.length;++D)y[D]&&ei(()=>{this.onMessage_(y[D])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class fi{constructor(u,c,y,D,k,W,ae){this.connId=u,this.repoInfo=c,this.applicationId=y,this.appCheckToken=D,this.authToken=k,this.transportSessionId=W,this.lastSessionId=ae,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=or(u),this.stats_=pn(c),this.urlFn=Me=>(this.appCheckToken&&(Me.ac=this.appCheckToken),xe(c,Rr,Me))}open(u,c){this.curSegmentNum=0,this.onDisconnect_=c,this.myPacketOrderer=new Dn(u),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(h){if((0,J.Yr)()||"complete"===document.readyState)h();else{let u=!1;const c=function(){document.body?u||(u=!0,h()):setTimeout(c,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",c,!1),window.addEventListener("load",c,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&c()}),window.attachEvent("onload",c))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Li((...k)=>{const[W,ae,Me,We,Lt]=k;if(this.incrementIncomingBytes_(k),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===W)this.id=ae,this.password=Me;else{if("close"!==W)throw new Error("Unrecognized command received: "+W);ae?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(ae,()=>{this.onClosed_()})):this.onClosed_()}},(...k)=>{const[W,ae]=k;this.incrementIncomingBytes_(k),this.myPacketOrderer.handleResponse(W,ae)},()=>{this.onClosed_()},this.urlFn);const y={start:"t"};y.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(y.cb=this.scriptTagHolder.uniqueCallbackIdentifier),y.v="5",this.transportSessionId&&(y.s=this.transportSessionId),this.lastSessionId&&(y.ls=this.lastSessionId),this.applicationId&&(y.p=this.applicationId),this.appCheckToken&&(y.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&tt.test(location.hostname)&&(y.r="f");const D=this.urlFn(y);this.log_("Connecting via long-poll to "+D),this.scriptTagHolder.addTag(D,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){fi.forceAllow_=!0}static forceDisallow(){fi.forceDisallow_=!0}static isAvailable(){return!((0,J.Yr)()||!fi.forceAllow_&&(fi.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(u){const c=(0,J.Wl)(u);this.bytesSent+=c.length,this.stats_.incrementCounter("bytes_sent",c.length);const y=(0,J.h$)(c),D=yr(y,1840);for(let k=0;k<D.length;k++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,D.length,D[k]),this.curSegmentNum++}addDisconnectPingFrame(u,c){if((0,J.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const y={dframe:"t"};y.id=u,y.pw=c,this.myDisconnFrame.src=this.urlFn(y),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(u){const c=(0,J.Wl)(u).length;this.bytesReceived+=c,this.stats_.incrementCounter("bytes_received",c)}}class Li{constructor(u,c,y,D){if(this.onDisconnect=y,this.urlFn=D,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,J.Yr)())this.commandCB=u,this.onMessageCB=c;else{this.uniqueCallbackIdentifier=bn(),window["pLPCommand"+this.uniqueCallbackIdentifier]=u,window["pRTLPCB"+this.uniqueCallbackIdentifier]=c,this.myIFrame=Li.createIFrame_();let k="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(k='<script>document.domain="'+document.domain+'";<\/script>');const W="<html><body>"+k+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(W),this.myIFrame.doc.close()}catch(ae){Hn("frame writing exception"),ae.stack&&Hn(ae.stack),Hn(ae)}}}static createIFrame_(){const u=document.createElement("iframe");if(u.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(u);try{u.contentWindow.document||Hn("No IE domain setting required")}catch(c){const y=document.domain;u.src="javascript:void((function(){document.open();document.domain='"+y+"';document.close();})())"}return u.contentDocument?u.doc=u.contentDocument:u.contentWindow?u.doc=u.contentWindow.document:u.document&&(u.doc=u.document),u}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const u=this.onDisconnect;u&&(this.onDisconnect=null,u())}startLongPoll(u,c){for(this.myID=u,this.myPW=c,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const u={};u.id=this.myID,u.pw=this.myPW,u.ser=this.currentSerial;let c=this.urlFn(u),y="",D=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+y.length<=1870;){const W=this.pendingSegs.shift();y=y+"&seg"+D+"="+W.seg+"&ts"+D+"="+W.ts+"&d"+D+"="+W.d,D++}return c+=y,this.addLongPollTag_(c,this.currentSerial),!0}return!1}enqueueSegment(u,c,y){this.pendingSegs.push({seg:u,ts:c,d:y}),this.alive&&this.newRequest_()}addLongPollTag_(u,c){this.outstandingRequests.add(c);const y=()=>{this.outstandingRequests.delete(c),this.newRequest_()},D=setTimeout(y,Math.floor(25e3));this.addTag(u,()=>{clearTimeout(D),y()})}addTag(u,c){(0,J.Yr)()?this.doNodeLongPoll(u,c):setTimeout(()=>{try{if(!this.sendNewPolls)return;const y=this.myIFrame.doc.createElement("script");y.type="text/javascript",y.async=!0,y.src=u,y.onload=y.onreadystatechange=function(){const D=y.readyState;(!D||"loaded"===D||"complete"===D)&&(y.onload=y.onreadystatechange=null,y.parentNode&&y.parentNode.removeChild(y),c())},y.onerror=()=>{Hn("Long-poll script failed to load: "+u),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(y)}catch(y){}},Math.floor(1))}}let Ze=null;"undefined"!=typeof MozWebSocket?Ze=MozWebSocket:"undefined"!=typeof WebSocket&&(Ze=WebSocket);let Xe=(()=>{class h{constructor(c,y,D,k,W,ae,Me){this.connId=c,this.applicationId=D,this.appCheckToken=k,this.authToken=W,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=or(this.connId),this.stats_=pn(y),this.connURL=h.connectionURL_(y,ae,Me,k,D),this.nodeAdmin=y.nodeAdmin}static connectionURL_(c,y,D,k,W){const ae={v:"5"};return!(0,J.Yr)()&&"undefined"!=typeof location&&location.hostname&&tt.test(location.hostname)&&(ae.r="f"),y&&(ae.s=y),D&&(ae.ls=D),k&&(ae.ac=k),W&&(ae.p=W),xe(c,_r,ae)}open(c,y){this.onDisconnect=y,this.onMessage=c,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,pt.set("previous_websocket_failure",!0);try{let D;if((0,J.Yr)()){D={headers:{"User-Agent":`Firebase/5/${$e}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(D.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(D.headers["X-Firebase-AppCheck"]=this.appCheckToken);const W=process.env,ae=0===this.connURL.indexOf("wss://")?W.HTTPS_PROXY||W.https_proxy:W.HTTP_PROXY||W.http_proxy;ae&&(D.proxy={origin:ae})}this.mySock=new Ze(this.connURL,[],D)}catch(D){this.log_("Error instantiating WebSocket.");const k=D.message||D.data;return k&&this.log_(k),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=D=>{this.handleIncomingFrame(D)},this.mySock.onerror=D=>{this.log_("WebSocket error.  Closing connection.");const k=D.message||D.data;k&&this.log_(k),this.onClosed_()}}start(){}static forceDisallow(){h.forceDisallow_=!0}static isAvailable(){let c=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const D=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);D&&D.length>1&&parseFloat(D[1])<4.4&&(c=!0)}return!c&&null!==Ze&&!h.forceDisallow_}static previouslyFailed(){return pt.isInMemoryStorage||!0===pt.get("previous_websocket_failure")}markConnectionHealthy(){pt.remove("previous_websocket_failure")}appendFrame_(c){if(this.frames.push(c),this.frames.length===this.totalFrames){const y=this.frames.join("");this.frames=null;const D=(0,J.cI)(y);this.onMessage(D)}}handleNewFrameCount_(c){this.totalFrames=c,this.frames=[]}extractFrameCount_(c){if((0,J.hu)(null===this.frames,"We already have a frame buffer"),c.length<=6){const y=Number(c);if(!isNaN(y))return this.handleNewFrameCount_(y),null}return this.handleNewFrameCount_(1),c}handleIncomingFrame(c){if(null===this.mySock)return;const y=c.data;if(this.bytesReceived+=y.length,this.stats_.incrementCounter("bytes_received",y.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(y);else{const D=this.extractFrameCount_(y);null!==D&&this.appendFrame_(D)}}send(c){this.resetKeepAlive();const y=(0,J.Wl)(c);this.bytesSent+=y.length,this.stats_.incrementCounter("bytes_sent",y.length);const D=yr(y,16384);D.length>1&&this.sendString_(String(D.length));for(let k=0;k<D.length;k++)this.sendString_(D[k])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(c){try{this.mySock.send(c)}catch(y){this.log_("Exception thrown from WebSocket.send():",y.message||y.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return h.responsesRequiredToBeHealthy=2,h.healthyTimeout=3e4,h})(),Ct=(()=>{class h{constructor(c){this.initTransports_(c)}static get ALL_TRANSPORTS(){return[fi,Xe]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(c){const y=Xe&&Xe.isAvailable();let D=y&&!Xe.previouslyFailed();if(c.webSocketOnly&&(y||rr("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),D=!0),D)this.transports_=[Xe];else{const k=this.transports_=[];for(const W of h.ALL_TRANSPORTS)W&&W.isAvailable()&&k.push(W);h.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return h.globalTransportInitialized_=!1,h})();class en{constructor(u,c,y,D,k,W,ae,Me,We,Lt){this.id=u,this.repoInfo_=c,this.applicationId_=y,this.appCheckToken_=D,this.authToken_=k,this.onMessage_=W,this.onReady_=ae,this.onDisconnect_=Me,this.onKill_=We,this.lastSessionId=Lt,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=or("c:"+this.id+":"),this.transportManager_=new Ct(c),this.log_("Connection created"),this.start_()}start_(){const u=this.transportManager_.initialTransport();this.conn_=new u(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=u.responsesRequiredToBeHealthy||0;const c=this.connReceiver_(this.conn_),y=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(c,y)},Math.floor(0));const D=u.healthyTimeout||0;D>0&&(this.healthyTimeout_=$t(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(D)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(u){return c=>{u===this.conn_?this.onConnectionLost_(c):u===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(u){return c=>{2!==this.state_&&(u===this.rx_?this.onPrimaryMessageReceived_(c):u===this.secondaryConn_?this.onSecondaryMessageReceived_(c):this.log_("message on old connection"))}}sendRequest(u){this.sendData_({t:"d",d:u})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(u){if("t"in u){const c=u.t;"a"===c?this.upgradeIfSecondaryHealthy_():"r"===c?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===c&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(u){const c=gn("t",u),y=gn("d",u);if("c"===c)this.onSecondaryControl_(y);else{if("d"!==c)throw new Error("Unknown protocol layer: "+c);this.pendingDataMessages.push(y)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(u){const c=gn("t",u),y=gn("d",u);"c"===c?this.onControl_(y):"d"===c&&this.onDataMessage_(y)}onDataMessage_(u){this.onPrimaryResponse_(),this.onMessage_(u)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(u){const c=gn("t",u);if("d"in u){const y=u.d;if("h"===c)this.onHandshake_(y);else if("n"===c){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let D=0;D<this.pendingDataMessages.length;++D)this.onDataMessage_(this.pendingDataMessages[D]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===c?this.onConnectionShutdown_(y):"r"===c?this.onReset_(y):"e"===c?mr("Server Error: "+y):"o"===c?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):mr("Unknown control packet command: "+c)}}onHandshake_(u){const c=u.ts,y=u.v,D=u.h;this.sessionId=u.s,this.repoInfo_.host=D,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,c),"5"!==y&&rr("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const u=this.transportManager_.upgradeTransport();u&&this.startUpgrade_(u)}startUpgrade_(u){this.secondaryConn_=new u(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=u.responsesRequiredToBeHealthy||0;const c=this.connReceiver_(this.secondaryConn_),y=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(c,y),$t(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(u){this.log_("Reset packet received.  New host: "+u),this.repoInfo_.host=u,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(u,c){this.log_("Realtime connection established."),this.conn_=u,this.state_=1,this.onReady_&&(this.onReady_(c,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):$t(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const u=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===u||this.rx_===u)&&this.close()}onConnectionLost_(u){this.conn_=null,u||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(pt.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(u){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(u),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(u){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(u)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Sn{put(u,c,y,D){}merge(u,c,y,D){}refreshAuthToken(u){}refreshAppCheckToken(u){}onDisconnectPut(u,c,y){}onDisconnectMerge(u,c,y){}onDisconnectCancel(u,c){}reportStats(u){}}class qn{constructor(u){this.allowedEvents_=u,this.listeners_={},(0,J.hu)(Array.isArray(u)&&u.length>0,"Requires a non-empty array")}trigger(u,...c){if(Array.isArray(this.listeners_[u])){const y=[...this.listeners_[u]];for(let D=0;D<y.length;D++)y[D].callback.apply(y[D].context,c)}}on(u,c,y){this.validateEventType_(u),this.listeners_[u]=this.listeners_[u]||[],this.listeners_[u].push({callback:c,context:y});const D=this.getInitialEvent(u);D&&c.apply(y,D)}off(u,c,y){this.validateEventType_(u);const D=this.listeners_[u]||[];for(let k=0;k<D.length;k++)if(D[k].callback===c&&(!y||y===D[k].context))return void D.splice(k,1)}validateEventType_(u){(0,J.hu)(this.allowedEvents_.find(c=>c===u),"Unknown event: "+u)}}class ui extends qn{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,J.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new ui}getInitialEvent(u){return(0,J.hu)("online"===u,"Unknown event type: "+u),[this.online_]}currentlyOnline(){return this.online_}}class Sr{constructor(u,c){if(void 0===c){this.pieces_=u.split("/");let y=0;for(let D=0;D<this.pieces_.length;D++)this.pieces_[D].length>0&&(this.pieces_[y]=this.pieces_[D],y++);this.pieces_.length=y,this.pieceNum_=0}else this.pieces_=u,this.pieceNum_=c}toString(){let u="";for(let c=this.pieceNum_;c<this.pieces_.length;c++)""!==this.pieces_[c]&&(u+="/"+this.pieces_[c]);return u||"/"}}function Ir(){return new Sr("")}function Xn(h){return h.pieceNum_>=h.pieces_.length?null:h.pieces_[h.pieceNum_]}function Ji(h){return h.pieces_.length-h.pieceNum_}function Zr(h){let u=h.pieceNum_;return u<h.pieces_.length&&u++,new Sr(h.pieces_,u)}function Os(h){return h.pieceNum_<h.pieces_.length?h.pieces_[h.pieces_.length-1]:null}function es(h,u=0){return h.pieces_.slice(h.pieceNum_+u)}function Bs(h){if(h.pieceNum_>=h.pieces_.length)return null;const u=[];for(let c=h.pieceNum_;c<h.pieces_.length-1;c++)u.push(h.pieces_[c]);return new Sr(u,0)}function Tr(h,u){const c=[];for(let y=h.pieceNum_;y<h.pieces_.length;y++)c.push(h.pieces_[y]);if(u instanceof Sr)for(let y=u.pieceNum_;y<u.pieces_.length;y++)c.push(u.pieces_[y]);else{const y=u.split("/");for(let D=0;D<y.length;D++)y[D].length>0&&c.push(y[D])}return new Sr(c,0)}function dr(h){return h.pieceNum_>=h.pieces_.length}function mi(h,u){const c=Xn(h),y=Xn(u);if(null===c)return u;if(c===y)return mi(Zr(h),Zr(u));throw new Error("INTERNAL ERROR: innerPath ("+u+") is not within outerPath ("+h+")")}function Ys(h,u){const c=es(h,0),y=es(u,0);for(let D=0;D<c.length&&D<y.length;D++){const k=fr(c[D],y[D]);if(0!==k)return k}return c.length===y.length?0:c.length<y.length?-1:1}function $s(h,u){if(Ji(h)!==Ji(u))return!1;for(let c=h.pieceNum_,y=u.pieceNum_;c<=h.pieces_.length;c++,y++)if(h.pieces_[c]!==u.pieces_[y])return!1;return!0}function pi(h,u){let c=h.pieceNum_,y=u.pieceNum_;if(Ji(h)>Ji(u))return!1;for(;c<h.pieces_.length;){if(h.pieces_[c]!==u.pieces_[y])return!1;++c,++y}return!0}class as{constructor(u,c){this.errorPrefix_=c,this.parts_=es(u,0),this.byteLength_=Math.max(1,this.parts_.length);for(let y=0;y<this.parts_.length;y++)this.byteLength_+=(0,J.ug)(this.parts_[y]);gs(this)}}function gs(h){if(h.byteLength_>768)throw new Error(h.errorPrefix_+"has a key path longer than 768 bytes ("+h.byteLength_+").");if(h.parts_.length>32)throw new Error(h.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Ci(h))}function Ci(h){return 0===h.parts_.length?"":"in property '"+h.parts_.join(".")+"'"}class No extends qn{constructor(){let u,c;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(c="visibilitychange",u="hidden"):void 0!==document.mozHidden?(c="mozvisibilitychange",u="mozHidden"):void 0!==document.msHidden?(c="msvisibilitychange",u="msHidden"):void 0!==document.webkitHidden&&(c="webkitvisibilitychange",u="webkitHidden")),this.visible_=!0,c&&document.addEventListener(c,()=>{const y=!document[u];y!==this.visible_&&(this.visible_=y,this.trigger("visible",y))},!1)}static getInstance(){return new No}getInitialEvent(u){return(0,J.hu)("visible"===u,"Unknown event type: "+u),[this.visible_]}}const Hi=1e3;let Ns,yi=(()=>{class h extends Sn{constructor(c,y,D,k,W,ae,Me,We){if(super(),this.repoInfo_=c,this.applicationId_=y,this.onDataUpdate_=D,this.onConnectStatus_=k,this.onServerInfoUpdate_=W,this.authTokenProvider_=ae,this.appCheckTokenProvider_=Me,this.authOverride_=We,this.id=h.nextPersistentConnectionId_++,this.log_=or("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Hi,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,We&&!(0,J.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");No.getInstance().on("visible",this.onVisible_,this),-1===c.host.indexOf("fblocal")&&ui.getInstance().on("online",this.onOnline_,this)}sendRequest(c,y,D){const k=++this.requestNumber_,W={r:k,a:c,b:y};this.log_((0,J.Wl)(W)),(0,J.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(W),D&&(this.requestCBHash_[k]=D)}get(c){this.initConnection_();const y=new J.BH,D={p:c._path.toString(),q:c._queryObject};return this.outstandingGets_.push({action:"g",request:D,onComplete:ae=>{const Me=ae.d;"ok"===ae.s?y.resolve(Me):y.reject(Me)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),y.promise}listen(c,y,D,k){this.initConnection_();const W=c._queryIdentifier,ae=c._path.toString();this.log_("Listen called for "+ae+" "+W),this.listens.has(ae)||this.listens.set(ae,new Map),(0,J.hu)(c._queryParams.isDefault()||!c._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,J.hu)(!this.listens.get(ae).has(W),"listen() called twice for same path/queryId.");const Me={onComplete:k,hashFn:y,query:c,tag:D};this.listens.get(ae).set(W,Me),this.connected_&&this.sendListen_(Me)}sendGet_(c){const y=this.outstandingGets_[c];this.sendRequest("g",y.request,D=>{delete this.outstandingGets_[c],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),y.onComplete&&y.onComplete(D)})}sendListen_(c){const y=c.query,D=y._path.toString(),k=y._queryIdentifier;this.log_("Listen on "+D+" for "+k);const W={p:D};c.tag&&(W.q=y._queryObject,W.t=c.tag),W.h=c.hashFn(),this.sendRequest("q",W,Me=>{const We=Me.d,Lt=Me.s;h.warnOnListenWarnings_(We,y),(this.listens.get(D)&&this.listens.get(D).get(k))===c&&(this.log_("listen response",Me),"ok"!==Lt&&this.removeListen_(D,k),c.onComplete&&c.onComplete(Lt,We))})}static warnOnListenWarnings_(c,y){if(c&&"object"==typeof c&&(0,J.r3)(c,"w")){const D=(0,J.DV)(c,"w");if(Array.isArray(D)&&~D.indexOf("no_index")){const k='".indexOn": "'+y._queryParams.getIndex().toString()+'"',W=y._path.toString();rr(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${k} at ${W} to your security rules for better performance.`)}}}refreshAuthToken(c){this.authToken_=c,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(c)}reduceReconnectDelayIfAdminCredential_(c){(c&&40===c.length||(0,J.GJ)(c))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(c){this.appCheckToken_=c,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const c=this.authToken_,y=(0,J.w9)(c)?"auth":"gauth",D={cred:c};null===this.authOverride_?D.noauth=!0:"object"==typeof this.authOverride_&&(D.authvar=this.authOverride_),this.sendRequest(y,D,k=>{const W=k.s,ae=k.d||"error";this.authToken_===c&&("ok"===W?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(W,ae))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},c=>{const y=c.s,D=c.d||"error";"ok"===y?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(y,D)})}unlisten(c,y){const D=c._path.toString(),k=c._queryIdentifier;this.log_("Unlisten called for "+D+" "+k),(0,J.hu)(c._queryParams.isDefault()||!c._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(D,k)&&this.connected_&&this.sendUnlisten_(D,k,c._queryObject,y)}sendUnlisten_(c,y,D,k){this.log_("Unlisten on "+c+" for "+y);const W={p:c};k&&(W.q=D,W.t=k),this.sendRequest("n",W)}onDisconnectPut(c,y,D){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",c,y,D):this.onDisconnectRequestQueue_.push({pathString:c,action:"o",data:y,onComplete:D})}onDisconnectMerge(c,y,D){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",c,y,D):this.onDisconnectRequestQueue_.push({pathString:c,action:"om",data:y,onComplete:D})}onDisconnectCancel(c,y){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",c,null,y):this.onDisconnectRequestQueue_.push({pathString:c,action:"oc",data:null,onComplete:y})}sendOnDisconnect_(c,y,D,k){const W={p:y,d:D};this.log_("onDisconnect "+c,W),this.sendRequest(c,W,ae=>{k&&setTimeout(()=>{k(ae.s,ae.d)},Math.floor(0))})}put(c,y,D,k){this.putInternal("p",c,y,D,k)}merge(c,y,D,k){this.putInternal("m",c,y,D,k)}putInternal(c,y,D,k,W){this.initConnection_();const ae={p:y,d:D};void 0!==W&&(ae.h=W),this.outstandingPuts_.push({action:c,request:ae,onComplete:k}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+y)}sendPut_(c){const y=this.outstandingPuts_[c].action,D=this.outstandingPuts_[c].request,k=this.outstandingPuts_[c].onComplete;this.outstandingPuts_[c].queued=this.connected_,this.sendRequest(y,D,W=>{this.log_(y+" response",W),delete this.outstandingPuts_[c],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),k&&k(W.s,W.d)})}reportStats(c){if(this.connected_){const y={c};this.log_("reportStats",y),this.sendRequest("s",y,D=>{"ok"!==D.s&&this.log_("reportStats","Error sending stats: "+D.d)})}}onDataMessage_(c){if("r"in c){this.log_("from server: "+(0,J.Wl)(c));const y=c.r,D=this.requestCBHash_[y];D&&(delete this.requestCBHash_[y],D(c.b))}else{if("error"in c)throw"A server-side error has occurred: "+c.error;"a"in c&&this.onDataPush_(c.a,c.b)}}onDataPush_(c,y){this.log_("handleServerMessage",c,y),"d"===c?this.onDataUpdate_(y.p,y.d,!1,y.t):"m"===c?this.onDataUpdate_(y.p,y.d,!0,y.t):"c"===c?this.onListenRevoked_(y.p,y.q):"ac"===c?this.onAuthRevoked_(y.s,y.d):"apc"===c?this.onAppCheckRevoked_(y.s,y.d):"sd"===c?this.onSecurityDebugPacket_(y):mr("Unrecognized action received from server: "+(0,J.Wl)(c)+"\nAre you using the latest client?")}onReady_(c,y){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(c),this.lastSessionId=y,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(c){(0,J.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(c))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(c){c&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Hi,this.realtime_||this.scheduleConnect_(0)),this.visible_=c}onOnline_(c){c?(this.log_("Browser went online."),this.reconnectDelay_=Hi,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Hi),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const c=(new Date).getTime()-this.lastConnectionAttemptTime_;let y=Math.max(0,this.reconnectDelay_-c);y=Math.random()*y,this.log_("Trying to reconnect in "+y+"ms"),this.scheduleConnect_(y),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var c=this;return(0,Te.Z)(function*(){if(c.shouldReconnect_()){c.log_("Making a connection attempt"),c.lastConnectionAttemptTime_=(new Date).getTime(),c.lastConnectionEstablishedTime_=null;const y=c.onDataMessage_.bind(c),D=c.onReady_.bind(c),k=c.onRealtimeDisconnect_.bind(c),W=c.id+":"+h.nextConnectionId_++,ae=c.lastSessionId;let Me=!1,We=null;const Lt=function(){We?We.close():(Me=!0,k())};c.realtime_={close:Lt,sendRequest:function(Mn){(0,J.hu)(We,"sendRequest call when we're not connected not allowed."),We.sendRequest(Mn)}};const Yt=c.forceTokenRefresh_;c.forceTokenRefresh_=!1;try{const[Mn,hr]=yield Promise.all([c.authTokenProvider_.getToken(Yt),c.appCheckTokenProvider_.getToken(Yt)]);Me?Hn("getToken() completed but was canceled"):(Hn("getToken() completed. Creating connection."),c.authToken_=Mn&&Mn.accessToken,c.appCheckToken_=hr&&hr.token,We=new en(W,c.repoInfo_,c.applicationId_,c.appCheckToken_,c.authToken_,y,D,k,ki=>{rr(ki+" ("+c.repoInfo_.toString()+")"),c.interrupt("server_kill")},ae))}catch(Mn){c.log_("Failed to get token: "+Mn),Me||(c.repoInfo_.nodeAdmin&&rr(Mn),Lt())}}})()}interrupt(c){Hn("Interrupting connection for reason: "+c),this.interruptReasons_[c]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(c){Hn("Resuming connection for reason: "+c),delete this.interruptReasons_[c],(0,J.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Hi,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(c){const y=c-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:y})}cancelSentTransactions_(){for(let c=0;c<this.outstandingPuts_.length;c++){const y=this.outstandingPuts_[c];y&&"h"in y.request&&y.queued&&(y.onComplete&&y.onComplete("disconnect"),delete this.outstandingPuts_[c],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(c,y){let D;D=y?y.map(W=>Tt(W)).join("$"):"default";const k=this.removeListen_(c,D);k&&k.onComplete&&k.onComplete("permission_denied")}removeListen_(c,y){const D=new Sr(c).toString();let k;if(this.listens.has(D)){const W=this.listens.get(D);k=W.get(y),W.delete(y),0===W.size&&this.listens.delete(D)}else k=void 0;return k}onAuthRevoked_(c,y){Hn("Auth token revoked: "+c+"/"+y),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===c||"permission_denied"===c)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(c,y){Hn("App check token revoked: "+c+"/"+y),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===c||"permission_denied"===c)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(c){this.securityDebugCallback_?this.securityDebugCallback_(c):"msg"in c&&console.log("FIREBASE: "+c.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const c of this.listens.values())for(const y of c.values())this.sendListen_(y);for(let c=0;c<this.outstandingPuts_.length;c++)this.outstandingPuts_[c]&&this.sendPut_(c);for(;this.onDisconnectRequestQueue_.length;){const c=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(c.action,c.pathString,c.data,c.onComplete)}for(let c=0;c<this.outstandingGets_.length;c++)this.outstandingGets_[c]&&this.sendGet_(c)}sendConnectStats_(){const c={};let y="js";(0,J.Yr)()&&(y=this.repoInfo_.nodeAdmin?"admin_node":"node"),c["sdk."+y+"."+$e.replace(/\./g,"-")]=1,(0,J.uI)()?c["framework.cordova"]=1:(0,J.b$)()&&(c["framework.reactnative"]=1),this.reportStats(c)}shouldReconnect_(){const c=ui.getInstance().currentlyOnline();return(0,J.xb)(this.interruptReasons_)&&c}}return h.nextPersistentConnectionId_=0,h.nextConnectionId_=0,h})();class nr{constructor(u,c){this.name=u,this.node=c}static Wrap(u,c){return new nr(u,c)}}class ys{getCompare(){return this.compare.bind(this)}indexedValueChanged(u,c){const y=new nr(Cr,u),D=new nr(Cr,c);return 0!==this.compare(y,D)}minPost(){return nr.MIN}}class Or extends ys{static get __EMPTY_NODE(){return Ns}static set __EMPTY_NODE(u){Ns=u}compare(u,c){return fr(u.name,c.name)}isDefinedOn(u){throw(0,J.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(u,c){return!1}minPost(){return nr.MIN}maxPost(){return new nr(an,Ns)}makePost(u,c){return(0,J.hu)("string"==typeof u,"KeyIndex indexValue must always be a string."),new nr(u,Ns)}toString(){return".key"}}const ls=new Or;class Ts{constructor(u,c,y,D,k=null){this.isReverse_=D,this.resultGenerator_=k,this.nodeStack_=[];let W=1;for(;!u.isEmpty();)if(W=c?y(u.key,c):1,D&&(W*=-1),W<0)u=this.isReverse_?u.left:u.right;else{if(0===W){this.nodeStack_.push(u);break}this.nodeStack_.push(u),u=this.isReverse_?u.right:u.left}}getNext(){if(0===this.nodeStack_.length)return null;let c,u=this.nodeStack_.pop();if(c=this.resultGenerator_?this.resultGenerator_(u.key,u.value):{key:u.key,value:u.value},this.isReverse_)for(u=u.left;!u.isEmpty();)this.nodeStack_.push(u),u=u.right;else for(u=u.right;!u.isEmpty();)this.nodeStack_.push(u),u=u.left;return c}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const u=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(u.key,u.value):{key:u.key,value:u.value}}}let to,us=(()=>{class h{constructor(c,y,D,k,W){this.key=c,this.value=y,this.color=null!=D?D:h.RED,this.left=null!=k?k:Ri.EMPTY_NODE,this.right=null!=W?W:Ri.EMPTY_NODE}copy(c,y,D,k,W){return new h(null!=c?c:this.key,null!=y?y:this.value,null!=D?D:this.color,null!=k?k:this.left,null!=W?W:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(c){return this.left.inorderTraversal(c)||!!c(this.key,this.value)||this.right.inorderTraversal(c)}reverseTraversal(c){return this.right.reverseTraversal(c)||c(this.key,this.value)||this.left.reverseTraversal(c)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(c,y,D){let k=this;const W=D(c,k.key);return k=W<0?k.copy(null,null,null,k.left.insert(c,y,D),null):0===W?k.copy(null,y,null,null,null):k.copy(null,null,null,null,k.right.insert(c,y,D)),k.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ri.EMPTY_NODE;let c=this;return!c.left.isRed_()&&!c.left.left.isRed_()&&(c=c.moveRedLeft_()),c=c.copy(null,null,null,c.left.removeMin_(),null),c.fixUp_()}remove(c,y){let D,k;if(D=this,y(c,D.key)<0)!D.left.isEmpty()&&!D.left.isRed_()&&!D.left.left.isRed_()&&(D=D.moveRedLeft_()),D=D.copy(null,null,null,D.left.remove(c,y),null);else{if(D.left.isRed_()&&(D=D.rotateRight_()),!D.right.isEmpty()&&!D.right.isRed_()&&!D.right.left.isRed_()&&(D=D.moveRedRight_()),0===y(c,D.key)){if(D.right.isEmpty())return Ri.EMPTY_NODE;k=D.right.min_(),D=D.copy(k.key,k.value,null,null,D.right.removeMin_())}D=D.copy(null,null,null,null,D.right.remove(c,y))}return D.fixUp_()}isRed_(){return this.color}fixUp_(){let c=this;return c.right.isRed_()&&!c.left.isRed_()&&(c=c.rotateLeft_()),c.left.isRed_()&&c.left.left.isRed_()&&(c=c.rotateRight_()),c.left.isRed_()&&c.right.isRed_()&&(c=c.colorFlip_()),c}moveRedLeft_(){let c=this.colorFlip_();return c.right.left.isRed_()&&(c=c.copy(null,null,null,null,c.right.rotateRight_()),c=c.rotateLeft_(),c=c.colorFlip_()),c}moveRedRight_(){let c=this.colorFlip_();return c.left.left.isRed_()&&(c=c.rotateRight_(),c=c.colorFlip_()),c}rotateLeft_(){const c=this.copy(null,null,h.RED,null,this.right.left);return this.right.copy(null,null,this.color,c,null)}rotateRight_(){const c=this.copy(null,null,h.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,c)}colorFlip_(){const c=this.left.copy(null,null,!this.left.color,null,null),y=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,c,y)}checkMaxDepth_(){const c=this.check_();return Math.pow(2,c)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const c=this.left.check_();if(c!==this.right.check_())throw new Error("Black depths differ");return c+(this.isRed_()?0:1)}}return h.RED=!0,h.BLACK=!1,h})();class Ri{constructor(u,c=Ri.EMPTY_NODE){this.comparator_=u,this.root_=c}insert(u,c){return new Ri(this.comparator_,this.root_.insert(u,c,this.comparator_).copy(null,null,us.BLACK,null,null))}remove(u){return new Ri(this.comparator_,this.root_.remove(u,this.comparator_).copy(null,null,us.BLACK,null,null))}get(u){let c,y=this.root_;for(;!y.isEmpty();){if(c=this.comparator_(u,y.key),0===c)return y.value;c<0?y=y.left:c>0&&(y=y.right)}return null}getPredecessorKey(u){let c,y=this.root_,D=null;for(;!y.isEmpty();){if(c=this.comparator_(u,y.key),0===c){if(y.left.isEmpty())return D?D.key:null;for(y=y.left;!y.right.isEmpty();)y=y.right;return y.key}c<0?y=y.left:c>0&&(D=y,y=y.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(u){return this.root_.inorderTraversal(u)}reverseTraversal(u){return this.root_.reverseTraversal(u)}getIterator(u){return new Ts(this.root_,null,this.comparator_,!1,u)}getIteratorFrom(u,c){return new Ts(this.root_,u,this.comparator_,!1,c)}getReverseIteratorFrom(u,c){return new Ts(this.root_,u,this.comparator_,!0,c)}getReverseIterator(u){return new Ts(this.root_,null,this.comparator_,!0,u)}}function Vr(h,u){return fr(h.name,u.name)}function Kn(h,u){return fr(h,u)}Ri.EMPTY_NODE=new class Is{copy(u,c,y,D,k){return this}insert(u,c,y){return new us(u,c,null)}remove(u,c){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(u){return!1}reverseTraversal(u){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const Ks=function(h){return"number"==typeof h?"number:"+Dr(h):"string:"+h},Po=function(h){if(h.isLeafNode()){const u=h.val();(0,J.hu)("string"==typeof u||"number"==typeof u||"object"==typeof u&&(0,J.r3)(u,".sv"),"Priority must be a string or number.")}else(0,J.hu)(h===to||h.isEmpty(),"priority of unexpected type.");(0,J.hu)(h===to||h.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let ya,va,wo,Ps=(()=>{class h{constructor(c,y=h.__childrenNodeConstructor.EMPTY_NODE){this.value_=c,this.priorityNode_=y,this.lazyHash_=null,(0,J.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Po(this.priorityNode_)}static set __childrenNodeConstructor(c){ya=c}static get __childrenNodeConstructor(){return ya}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(c){return new h(this.value_,c)}getImmediateChild(c){return".priority"===c?this.priorityNode_:h.__childrenNodeConstructor.EMPTY_NODE}getChild(c){return dr(c)?this:".priority"===Xn(c)?this.priorityNode_:h.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(c,y){return null}updateImmediateChild(c,y){return".priority"===c?this.updatePriority(y):y.isEmpty()&&".priority"!==c?this:h.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(c,y).updatePriority(this.priorityNode_)}updateChild(c,y){const D=Xn(c);return null===D?y:y.isEmpty()&&".priority"!==D?this:((0,J.hu)(".priority"!==D||1===Ji(c),".priority must be the last token in a path"),this.updateImmediateChild(D,h.__childrenNodeConstructor.EMPTY_NODE.updateChild(Zr(c),y)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(c,y){return!1}val(c){return c&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let c="";this.priorityNode_.isEmpty()||(c+="priority:"+Ks(this.priorityNode_.val())+":");const y=typeof this.value_;c+=y+":",c+="number"===y?Dr(this.value_):this.value_,this.lazyHash_=In(c)}return this.lazyHash_}getValue(){return this.value_}compareTo(c){return c===h.__childrenNodeConstructor.EMPTY_NODE?1:c instanceof h.__childrenNodeConstructor?-1:((0,J.hu)(c.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(c))}compareToLeafNode_(c){const y=typeof c.value_,D=typeof this.value_,k=h.VALUE_TYPE_ORDER.indexOf(y),W=h.VALUE_TYPE_ORDER.indexOf(D);return(0,J.hu)(k>=0,"Unknown leaf type: "+y),(0,J.hu)(W>=0,"Unknown leaf type: "+D),k===W?"object"===D?0:this.value_<c.value_?-1:this.value_===c.value_?0:1:W-k}withIndex(){return this}isIndexed(){return!0}equals(c){if(c===this)return!0;if(c.isLeafNode()){const y=c;return this.value_===y.value_&&this.priorityNode_.equals(y.priorityNode_)}return!1}}return h.VALUE_TYPE_ORDER=["object","boolean","number","string"],h})();const ri=new class Ko extends ys{compare(u,c){const y=u.node.getPriority(),D=c.node.getPriority(),k=y.compareTo(D);return 0===k?fr(u.name,c.name):k}isDefinedOn(u){return!u.getPriority().isEmpty()}indexedValueChanged(u,c){return!u.getPriority().equals(c.getPriority())}minPost(){return nr.MIN}maxPost(){return new nr(an,new Ps("[PRIORITY-POST]",wo))}makePost(u,c){const y=va(u);return new nr(c,new Ps("[PRIORITY-POST]",y))}toString(){return".priority"}},Ti=Math.log(2);class bo{constructor(u){this.count=parseInt(Math.log(u+1)/Ti,10),this.current_=this.count-1;const D=(k=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=u+1&D}nextBitIsOne(){const u=!(this.bits_&1<<this.current_);return this.current_--,u}}const Gi=function(h,u,c,y){h.sort(u);const D=function(Me,We){const Lt=We-Me;let Ft,Yt;if(0===Lt)return null;if(1===Lt)return Ft=h[Me],Yt=c?c(Ft):Ft,new us(Yt,Ft.node,us.BLACK,null,null);{const Mn=parseInt(Lt/2,10)+Me,hr=D(Me,Mn),ki=D(Mn+1,We);return Ft=h[Mn],Yt=c?c(Ft):Ft,new us(Yt,Ft.node,us.BLACK,hr,ki)}},ae=function(Me){let We=null,Lt=null,Ft=h.length;const Yt=function(hr,ki){const co=Ft-hr,El=Ft;Ft-=hr;const Bl=D(co+1,El),ac=h[co],nh=c?c(ac):ac;Mn(new us(nh,ac.node,ki,null,Bl))},Mn=function(hr){We?(We.left=hr,We=hr):(Lt=hr,We=hr)};for(let hr=0;hr<Me.count;++hr){const ki=Me.nextBitIsOne(),co=Math.pow(2,Me.count-(hr+1));ki?Yt(co,us.BLACK):(Yt(co,us.BLACK),Yt(co,us.RED))}return Lt}(new bo(h.length));return new Ri(y||u,ae)};let ws;const As={};class G{constructor(u,c){this.indexes_=u,this.indexSet_=c}static get Default(){return(0,J.hu)(As&&ri,"ChildrenNode.ts has not been loaded"),ws=ws||new G({".priority":As},{".priority":ri}),ws}get(u){const c=(0,J.DV)(this.indexes_,u);if(!c)throw new Error("No index defined for "+u);return c instanceof Ri?c:null}hasIndex(u){return(0,J.r3)(this.indexSet_,u.toString())}addIndex(u,c){(0,J.hu)(u!==ls,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const y=[];let D=!1;const k=c.getIterator(nr.Wrap);let ae,W=k.getNext();for(;W;)D=D||u.isDefinedOn(W.node),y.push(W),W=k.getNext();ae=D?Gi(y,u.getCompare()):As;const Me=u.toString(),We=Object.assign({},this.indexSet_);We[Me]=u;const Lt=Object.assign({},this.indexes_);return Lt[Me]=ae,new G(Lt,We)}addToIndexes(u,c){const y=(0,J.UI)(this.indexes_,(D,k)=>{const W=(0,J.DV)(this.indexSet_,k);if((0,J.hu)(W,"Missing index implementation for "+k),D===As){if(W.isDefinedOn(u.node)){const ae=[],Me=c.getIterator(nr.Wrap);let We=Me.getNext();for(;We;)We.name!==u.name&&ae.push(We),We=Me.getNext();return ae.push(u),Gi(ae,W.getCompare())}return As}{const ae=c.get(u.name);let Me=D;return ae&&(Me=Me.remove(new nr(u.name,ae))),Me.insert(u,u.node)}});return new G(y,this.indexSet_)}removeFromIndexes(u,c){const y=(0,J.UI)(this.indexes_,D=>{if(D===As)return D;{const k=c.get(u.name);return k?D.remove(new nr(u.name,k)):D}});return new G(y,this.indexSet_)}}let B,M=(()=>{class h{constructor(c,y,D){this.children_=c,this.priorityNode_=y,this.indexMap_=D,this.lazyHash_=null,this.priorityNode_&&Po(this.priorityNode_),this.children_.isEmpty()&&(0,J.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return B||(B=new h(new Ri(Kn),null,G.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||B}updatePriority(c){return this.children_.isEmpty()?this:new h(this.children_,c,this.indexMap_)}getImmediateChild(c){if(".priority"===c)return this.getPriority();{const y=this.children_.get(c);return null===y?B:y}}getChild(c){const y=Xn(c);return null===y?this:this.getImmediateChild(y).getChild(Zr(c))}hasChild(c){return null!==this.children_.get(c)}updateImmediateChild(c,y){if((0,J.hu)(y,"We should always be passing snapshot nodes"),".priority"===c)return this.updatePriority(y);{const D=new nr(c,y);let k,W;y.isEmpty()?(k=this.children_.remove(c),W=this.indexMap_.removeFromIndexes(D,this.children_)):(k=this.children_.insert(c,y),W=this.indexMap_.addToIndexes(D,this.children_));const ae=k.isEmpty()?B:this.priorityNode_;return new h(k,ae,W)}}updateChild(c,y){const D=Xn(c);if(null===D)return y;{(0,J.hu)(".priority"!==Xn(c)||1===Ji(c),".priority must be the last token in a path");const k=this.getImmediateChild(D).updateChild(Zr(c),y);return this.updateImmediateChild(D,k)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(c){if(this.isEmpty())return null;const y={};let D=0,k=0,W=!0;if(this.forEachChild(ri,(ae,Me)=>{y[ae]=Me.val(c),D++,W&&h.INTEGER_REGEXP_.test(ae)?k=Math.max(k,Number(ae)):W=!1}),!c&&W&&k<2*D){const ae=[];for(const Me in y)ae[Me]=y[Me];return ae}return c&&!this.getPriority().isEmpty()&&(y[".priority"]=this.getPriority().val()),y}hash(){if(null===this.lazyHash_){let c="";this.getPriority().isEmpty()||(c+="priority:"+Ks(this.getPriority().val())+":"),this.forEachChild(ri,(y,D)=>{const k=D.hash();""!==k&&(c+=":"+y+":"+k)}),this.lazyHash_=""===c?"":In(c)}return this.lazyHash_}getPredecessorChildName(c,y,D){const k=this.resolveIndex_(D);if(k){const W=k.getPredecessorKey(new nr(c,y));return W?W.name:null}return this.children_.getPredecessorKey(c)}getFirstChildName(c){const y=this.resolveIndex_(c);if(y){const D=y.minKey();return D&&D.name}return this.children_.minKey()}getFirstChild(c){const y=this.getFirstChildName(c);return y?new nr(y,this.children_.get(y)):null}getLastChildName(c){const y=this.resolveIndex_(c);if(y){const D=y.maxKey();return D&&D.name}return this.children_.maxKey()}getLastChild(c){const y=this.getLastChildName(c);return y?new nr(y,this.children_.get(y)):null}forEachChild(c,y){const D=this.resolveIndex_(c);return D?D.inorderTraversal(k=>y(k.name,k.node)):this.children_.inorderTraversal(y)}getIterator(c){return this.getIteratorFrom(c.minPost(),c)}getIteratorFrom(c,y){const D=this.resolveIndex_(y);if(D)return D.getIteratorFrom(c,k=>k);{const k=this.children_.getIteratorFrom(c.name,nr.Wrap);let W=k.peek();for(;null!=W&&y.compare(W,c)<0;)k.getNext(),W=k.peek();return k}}getReverseIterator(c){return this.getReverseIteratorFrom(c.maxPost(),c)}getReverseIteratorFrom(c,y){const D=this.resolveIndex_(y);if(D)return D.getReverseIteratorFrom(c,k=>k);{const k=this.children_.getReverseIteratorFrom(c.name,nr.Wrap);let W=k.peek();for(;null!=W&&y.compare(W,c)>0;)k.getNext(),W=k.peek();return k}}compareTo(c){return this.isEmpty()?c.isEmpty()?0:-1:c.isLeafNode()||c.isEmpty()?1:c===P?-1:0}withIndex(c){if(c===ls||this.indexMap_.hasIndex(c))return this;{const y=this.indexMap_.addIndex(c,this.children_);return new h(this.children_,this.priorityNode_,y)}}isIndexed(c){return c===ls||this.indexMap_.hasIndex(c)}equals(c){if(c===this)return!0;if(c.isLeafNode())return!1;{const y=c;if(this.getPriority().equals(y.getPriority())){if(this.children_.count()===y.children_.count()){const D=this.getIterator(ri),k=y.getIterator(ri);let W=D.getNext(),ae=k.getNext();for(;W&&ae;){if(W.name!==ae.name||!W.node.equals(ae.node))return!1;W=D.getNext(),ae=k.getNext()}return null===W&&null===ae}return!1}return!1}}resolveIndex_(c){return c===ls?null:this.indexMap_.get(c.toString())}}return h.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,h})();const P=new class g extends M{constructor(){super(new Ri(Kn),M.EMPTY_NODE,G.Default)}compareTo(u){return u===this?0:1}equals(u){return u===this}getPriority(){return this}getImmediateChild(u){return M.EMPTY_NODE}isEmpty(){return!1}};function V(h,u=null){if(null===h)return M.EMPTY_NODE;if("object"==typeof h&&".priority"in h&&(u=h[".priority"]),(0,J.hu)(null===u||"string"==typeof u||"number"==typeof u||"object"==typeof u&&".sv"in u,"Invalid priority type found: "+typeof u),"object"==typeof h&&".value"in h&&null!==h[".value"]&&(h=h[".value"]),"object"!=typeof h||".sv"in h)return new Ps(h,V(u));if(h instanceof Array){let c=M.EMPTY_NODE;return Bn(h,(y,D)=>{if((0,J.r3)(h,y)&&"."!==y.substring(0,1)){const k=V(D);(k.isLeafNode()||!k.isEmpty())&&(c=c.updateImmediateChild(y,k))}}),c.updatePriority(V(u))}{const c=[];let y=!1;if(Bn(h,(W,ae)=>{if("."!==W.substring(0,1)){const Me=V(ae);Me.isEmpty()||(y=y||!Me.getPriority().isEmpty(),c.push(new nr(W,Me)))}}),0===c.length)return M.EMPTY_NODE;const k=Gi(c,Vr,W=>W.name,Kn);if(y){const W=Gi(c,ri.getCompare());return new M(k,V(u),new G({".priority":W},{".priority":ri}))}return new M(k,V(u),G.Default)}}Object.defineProperties(nr,{MIN:{value:new nr(Cr,M.EMPTY_NODE)},MAX:{value:new nr(an,P)}}),Or.__EMPTY_NODE=M.EMPTY_NODE,Ps.__childrenNodeConstructor=M,function qo(h){to=h}(P),function br(h){wo=h}(P),function qt(h){va=h}(V);class se extends ys{constructor(u){super(),this.indexPath_=u,(0,J.hu)(!dr(u)&&".priority"!==Xn(u),"Can't create PathIndex with empty path or .priority key")}extractChild(u){return u.getChild(this.indexPath_)}isDefinedOn(u){return!u.getChild(this.indexPath_).isEmpty()}compare(u,c){const y=this.extractChild(u.node),D=this.extractChild(c.node),k=y.compareTo(D);return 0===k?fr(u.name,c.name):k}makePost(u,c){const y=V(u),D=M.EMPTY_NODE.updateChild(this.indexPath_,y);return new nr(c,D)}maxPost(){const u=M.EMPTY_NODE.updateChild(this.indexPath_,P);return new nr(an,u)}toString(){return es(this.indexPath_,0).join("/")}}const Xt=new class ut extends ys{compare(u,c){const y=u.node.compareTo(c.node);return 0===y?fr(u.name,c.name):y}isDefinedOn(u){return!0}indexedValueChanged(u,c){return!u.equals(c)}minPost(){return nr.MIN}maxPost(){return nr.MAX}makePost(u,c){const y=V(u);return new nr(c,y)}toString(){return".value"}},yn="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",ci=function(){let h=0;const u=[];return function(c){const y=c===h;let D;h=c;const k=new Array(8);for(D=7;D>=0;D--)k[D]=yn.charAt(c%64),c=Math.floor(c/64);(0,J.hu)(0===c,"Cannot push at time == 0");let W=k.join("");if(y){for(D=11;D>=0&&63===u[D];D--)u[D]=0;u[D]++}else for(D=0;D<12;D++)u[D]=Math.floor(64*Math.random());for(D=0;D<12;D++)W+=yn.charAt(u[D]);return(0,J.hu)(20===W.length,"nextPushId: Length should be 20."),W}}(),ns=function(h){if(h===""+ir)return"-";const u=Yr(h);if(null!=u)return""+(u+1);const c=new Array(h.length);for(let W=0;W<c.length;W++)c[W]=h.charAt(W);if(c.length<786)return c.push("-"),c.join("");let y=c.length-1;for(;y>=0&&"z"===c[y];)y--;if(-1===y)return an;const k=yn.charAt(yn.indexOf(c[y])+1);return c[y]=k,c.slice(0,y+1).join("")},bs=function(h){if(h===""+si)return Cr;const u=Yr(h);if(null!=u)return""+(u-1);const c=new Array(h.length);for(let y=0;y<c.length;y++)c[y]=h.charAt(y);return"-"===c[c.length-1]?1===c.length?""+ir:(delete c[c.length-1],c.join("")):(c[c.length-1]=yn.charAt(yn.indexOf(c[c.length-1])-1),c.join("")+"z".repeat(786-c.length))};function Cs(h){return{type:"value",snapshotNode:h}}function cs(h,u){return{type:"child_added",snapshotNode:u,childName:h}}function ks(h,u){return{type:"child_removed",snapshotNode:u,childName:h}}function Co(h,u,c){return{type:"child_changed",snapshotNode:u,childName:h,oldSnap:c}}class Zs{constructor(u){this.index_=u}updateChild(u,c,y,D,k,W){(0,J.hu)(u.isIndexed(this.index_),"A node must be indexed if only a child is updated");const ae=u.getImmediateChild(c);return ae.getChild(D).equals(y.getChild(D))&&ae.isEmpty()===y.isEmpty()||(null!=W&&(y.isEmpty()?u.hasChild(c)?W.trackChildChange(ks(c,ae)):(0,J.hu)(u.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):ae.isEmpty()?W.trackChildChange(cs(c,y)):W.trackChildChange(Co(c,y,ae))),u.isLeafNode()&&y.isEmpty())?u:u.updateImmediateChild(c,y).withIndex(this.index_)}updateFullNode(u,c,y){return null!=y&&(u.isLeafNode()||u.forEachChild(ri,(D,k)=>{c.hasChild(D)||y.trackChildChange(ks(D,k))}),c.isLeafNode()||c.forEachChild(ri,(D,k)=>{if(u.hasChild(D)){const W=u.getImmediateChild(D);W.equals(k)||y.trackChildChange(Co(D,k,W))}else y.trackChildChange(cs(D,k))})),c.withIndex(this.index_)}updatePriority(u,c){return u.isEmpty()?M.EMPTY_NODE:u.updatePriority(c)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class ua{constructor(u){this.indexedFilter_=new Zs(u.getIndex()),this.index_=u.getIndex(),this.startPost_=ua.getStartPost_(u),this.endPost_=ua.getEndPost_(u)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(u){return this.index_.compare(this.getStartPost(),u)<=0&&this.index_.compare(u,this.getEndPost())<=0}updateChild(u,c,y,D,k,W){return this.matches(new nr(c,y))||(y=M.EMPTY_NODE),this.indexedFilter_.updateChild(u,c,y,D,k,W)}updateFullNode(u,c,y){c.isLeafNode()&&(c=M.EMPTY_NODE);let D=c.withIndex(this.index_);D=D.updatePriority(M.EMPTY_NODE);const k=this;return c.forEachChild(ri,(W,ae)=>{k.matches(new nr(W,ae))||(D=D.updateImmediateChild(W,M.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(u,D,y)}updatePriority(u,c){return u}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(u){if(u.hasStart()){const c=u.getIndexStartName();return u.getIndex().makePost(u.getIndexStartValue(),c)}return u.getIndex().minPost()}static getEndPost_(u){if(u.hasEnd()){const c=u.getIndexEndName();return u.getIndex().makePost(u.getIndexEndValue(),c)}return u.getIndex().maxPost()}}class F{constructor(u){this.rangedFilter_=new ua(u),this.index_=u.getIndex(),this.limit_=u.getLimit(),this.reverse_=!u.isViewFromLeft()}updateChild(u,c,y,D,k,W){return this.rangedFilter_.matches(new nr(c,y))||(y=M.EMPTY_NODE),u.getImmediateChild(c).equals(y)?u:u.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(u,c,y,D,k,W):this.fullLimitUpdateChild_(u,c,y,k,W)}updateFullNode(u,c,y){let D;if(c.isLeafNode()||c.isEmpty())D=M.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<c.numChildren()&&c.isIndexed(this.index_)){let k;D=M.EMPTY_NODE.withIndex(this.index_),k=this.reverse_?c.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):c.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let W=0;for(;k.hasNext()&&W<this.limit_;){const ae=k.getNext();let Me;if(Me=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),ae)<=0:this.index_.compare(ae,this.rangedFilter_.getEndPost())<=0,!Me)break;D=D.updateImmediateChild(ae.name,ae.node),W++}}else{let k,W,ae,Me;if(D=c.withIndex(this.index_),D=D.updatePriority(M.EMPTY_NODE),this.reverse_){Me=D.getReverseIterator(this.index_),k=this.rangedFilter_.getEndPost(),W=this.rangedFilter_.getStartPost();const Ft=this.index_.getCompare();ae=(Yt,Mn)=>Ft(Mn,Yt)}else Me=D.getIterator(this.index_),k=this.rangedFilter_.getStartPost(),W=this.rangedFilter_.getEndPost(),ae=this.index_.getCompare();let We=0,Lt=!1;for(;Me.hasNext();){const Ft=Me.getNext();!Lt&&ae(k,Ft)<=0&&(Lt=!0),Lt&&We<this.limit_&&ae(Ft,W)<=0?We++:D=D.updateImmediateChild(Ft.name,M.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(u,D,y)}updatePriority(u,c){return u}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(u,c,y,D,k){let W;if(this.reverse_){const Ft=this.index_.getCompare();W=(Yt,Mn)=>Ft(Mn,Yt)}else W=this.index_.getCompare();const ae=u;(0,J.hu)(ae.numChildren()===this.limit_,"");const Me=new nr(c,y),We=this.reverse_?ae.getFirstChild(this.index_):ae.getLastChild(this.index_),Lt=this.rangedFilter_.matches(Me);if(ae.hasChild(c)){const Ft=ae.getImmediateChild(c);let Yt=D.getChildAfterChild(this.index_,We,this.reverse_);for(;null!=Yt&&(Yt.name===c||ae.hasChild(Yt.name));)Yt=D.getChildAfterChild(this.index_,Yt,this.reverse_);const Mn=null==Yt?1:W(Yt,Me);if(Lt&&!y.isEmpty()&&Mn>=0)return null!=k&&k.trackChildChange(Co(c,y,Ft)),ae.updateImmediateChild(c,y);{null!=k&&k.trackChildChange(ks(c,Ft));const ki=ae.updateImmediateChild(c,M.EMPTY_NODE);return null!=Yt&&this.rangedFilter_.matches(Yt)?(null!=k&&k.trackChildChange(cs(Yt.name,Yt.node)),ki.updateImmediateChild(Yt.name,Yt.node)):ki}}return y.isEmpty()?u:Lt&&W(We,Me)>=0?(null!=k&&(k.trackChildChange(ks(We.name,We.node)),k.trackChildChange(cs(c,y))),ae.updateImmediateChild(c,y).updateImmediateChild(We.name,M.EMPTY_NODE)):u}}class Z{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ri}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,J.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,J.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Cr}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,J.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,J.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:an}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,J.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ri}copy(){const u=new Z;return u.limitSet_=this.limitSet_,u.limit_=this.limit_,u.startSet_=this.startSet_,u.indexStartValue_=this.indexStartValue_,u.startNameSet_=this.startNameSet_,u.indexStartName_=this.indexStartName_,u.endSet_=this.endSet_,u.indexEndValue_=this.indexEndValue_,u.endNameSet_=this.endNameSet_,u.indexEndName_=this.indexEndName_,u.index_=this.index_,u.viewFrom_=this.viewFrom_,u}}function St(h,u,c){const y=h.copy();return y.startSet_=!0,void 0===u&&(u=null),y.indexStartValue_=u,null!=c?(y.startNameSet_=!0,y.indexStartName_=c):(y.startNameSet_=!1,y.indexStartName_=""),y}function xn(h,u,c){const y=h.copy();return y.endSet_=!0,void 0===u&&(u=null),y.indexEndValue_=u,void 0!==c?(y.endNameSet_=!0,y.indexEndName_=c):(y.endNameSet_=!1,y.indexEndName_=""),y}function Gr(h,u){const c=h.copy();return c.index_=u,c}function Wr(h){const u={};if(h.isDefault())return u;let c;return h.index_===ri?c="$priority":h.index_===Xt?c="$value":h.index_===ls?c="$key":((0,J.hu)(h.index_ instanceof se,"Unrecognized index type!"),c=h.index_.toString()),u.orderBy=(0,J.Wl)(c),h.startSet_&&(u.startAt=(0,J.Wl)(h.indexStartValue_),h.startNameSet_&&(u.startAt+=","+(0,J.Wl)(h.indexStartName_))),h.endSet_&&(u.endAt=(0,J.Wl)(h.indexEndValue_),h.endNameSet_&&(u.endAt+=","+(0,J.Wl)(h.indexEndName_))),h.limitSet_&&(h.isViewFromLeft()?u.limitToFirst=h.limit_:u.limitToLast=h.limit_),u}function $r(h){const u={};if(h.startSet_&&(u.sp=h.indexStartValue_,h.startNameSet_&&(u.sn=h.indexStartName_)),h.endSet_&&(u.ep=h.indexEndValue_,h.endNameSet_&&(u.en=h.indexEndName_)),h.limitSet_){u.l=h.limit_;let c=h.viewFrom_;""===c&&(c=h.isViewFromLeft()?"l":"r"),u.vf=c}return h.index_!==ri&&(u.i=h.index_.toString()),u}class Oi extends Sn{constructor(u,c,y,D){super(),this.repoInfo_=u,this.onDataUpdate_=c,this.authTokenProvider_=y,this.appCheckTokenProvider_=D,this.log_=or("p:rest:"),this.listens_={}}reportStats(u){throw new Error("Method not implemented.")}static getListenId_(u,c){return void 0!==c?"tag$"+c:((0,J.hu)(u._queryParams.isDefault(),"should have a tag if it's not a default query."),u._path.toString())}listen(u,c,y,D){const k=u._path.toString();this.log_("Listen called for "+k+" "+u._queryIdentifier);const W=Oi.getListenId_(u,y),ae={};this.listens_[W]=ae;const Me=Wr(u._queryParams);this.restRequest_(k+".json",Me,(We,Lt)=>{let Ft=Lt;if(404===We&&(Ft=null,We=null),null===We&&this.onDataUpdate_(k,Ft,!1,y),(0,J.DV)(this.listens_,W)===ae){let Yt;Yt=We?401===We?"permission_denied":"rest_error:"+We:"ok",D(Yt,null)}})}unlisten(u,c){const y=Oi.getListenId_(u,c);delete this.listens_[y]}get(u){const c=Wr(u._queryParams),y=u._path.toString(),D=new J.BH;return this.restRequest_(y+".json",c,(k,W)=>{let ae=W;404===k&&(ae=null,k=null),null===k?(this.onDataUpdate_(y,ae,!1,null),D.resolve(ae)):D.reject(new Error(ae))}),D.promise}refreshAuthToken(u){}restRequest_(u,c={},y){return c.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([D,k])=>{D&&D.accessToken&&(c.auth=D.accessToken),k&&k.token&&(c.ac=k.token);const W=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+u+"?ns="+this.repoInfo_.namespace+(0,J.xO)(c);this.log_("Sending REST request for "+W);const ae=new XMLHttpRequest;ae.onreadystatechange=()=>{if(y&&4===ae.readyState){this.log_("REST Response for "+W+" received. status:",ae.status,"response:",ae.responseText);let Me=null;if(ae.status>=200&&ae.status<300){try{Me=(0,J.cI)(ae.responseText)}catch(We){rr("Failed to parse JSON response for "+W+": "+ae.responseText)}y(null,Me)}else 401!==ae.status&&404!==ae.status&&rr("Got unsuccessful REST response for "+W+" Status: "+ae.status),y(ae.status);y=null}},ae.open("GET",W,!0),ae.send()})}}class ii{constructor(){this.rootNode_=M.EMPTY_NODE}getNode(u){return this.rootNode_.getChild(u)}updateSnapshot(u,c){this.rootNode_=this.rootNode_.updateChild(u,c)}}function xi(){return{value:null,children:new Map}}function vs(h,u,c){if(dr(u))h.value=c,h.children.clear();else if(null!==h.value)h.value=h.value.updateChild(u,c);else{const y=Xn(u);h.children.has(y)||h.children.set(y,xi()),vs(h.children.get(y),u=Zr(u),c)}}function no(h,u){if(dr(u))return h.value=null,h.children.clear(),!0;if(null!==h.value){if(h.value.isLeafNode())return!1;{const c=h.value;return h.value=null,c.forEachChild(ri,(y,D)=>{vs(h,new Sr(y),D)}),no(h,u)}}if(h.children.size>0){const c=Xn(u);return u=Zr(u),h.children.has(c)&&no(h.children.get(c),u)&&h.children.delete(c),0===h.children.size}return!0}function ro(h,u,c){null!==h.value?c(u,h.value):function Do(h,u){h.children.forEach((c,y)=>{u(y,c)})}(h,(y,D)=>{ro(D,new Sr(u.toString()+"/"+y),c)})}class ho{constructor(u){this.collection_=u,this.last_=null}get(){const u=this.collection_.get(),c=Object.assign({},u);return this.last_&&Bn(this.last_,(y,D)=>{c[y]=c[y]-D}),this.last_=u,c}}class rs{constructor(u,c){this.server_=c,this.statsToReport_={},this.statsListener_=new ho(u);const y=1e4+2e4*Math.random();$t(this.reportStats_.bind(this),Math.floor(y))}reportStats_(){const u=this.statsListener_.get(),c={};let y=!1;Bn(u,(D,k)=>{k>0&&(0,J.r3)(this.statsToReport_,D)&&(c[D]=k,y=!0)}),y&&this.server_.reportStats(c),$t(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Wi=(()=>{return(h=Wi||(Wi={}))[h.OVERWRITE=0]="OVERWRITE",h[h.MERGE=1]="MERGE",h[h.ACK_USER_WRITE=2]="ACK_USER_WRITE",h[h.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Wi;var h})();function Xa(h){return{fromUser:!1,fromServer:!0,queryId:h,tagged:!0}}class Ha{constructor(u,c,y){this.path=u,this.affectedTree=c,this.revert=y,this.type=Wi.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(u){if(dr(this.path)){if(null!=this.affectedTree.value)return(0,J.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const c=this.affectedTree.subtree(new Sr(u));return new Ha(Ir(),c,this.revert)}}return(0,J.hu)(Xn(this.path)===u,"operationForChild called for unrelated child."),new Ha(Zr(this.path),this.affectedTree,this.revert)}}class Ma{constructor(u,c){this.source=u,this.path=c,this.type=Wi.LISTEN_COMPLETE}operationForChild(u){return dr(this.path)?new Ma(this.source,Ir()):new Ma(this.source,Zr(this.path))}}class fo{constructor(u,c,y){this.source=u,this.path=c,this.snap=y,this.type=Wi.OVERWRITE}operationForChild(u){return dr(this.path)?new fo(this.source,Ir(),this.snap.getImmediateChild(u)):new fo(this.source,Zr(this.path),this.snap)}}class Zo{constructor(u,c,y){this.source=u,this.path=c,this.children=y,this.type=Wi.MERGE}operationForChild(u){if(dr(this.path)){const c=this.children.subtree(new Sr(u));return c.isEmpty()?null:c.value?new fo(this.source,Ir(),c.value):new Zo(this.source,Ir(),c)}return(0,J.hu)(Xn(this.path)===u,"Can't get a merge for a child not on the path of the operation"),new Zo(this.source,Zr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class po{constructor(u,c,y){this.node_=u,this.fullyInitialized_=c,this.filtered_=y}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(u){if(dr(u))return this.isFullyInitialized()&&!this.filtered_;const c=Xn(u);return this.isCompleteForChild(c)}isCompleteForChild(u){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(u)}getNode(){return this.node_}}class du{constructor(u){this.query_=u,this.index_=this.query_._queryParams.getIndex()}}function zr(h,u,c,y,D,k){const W=y.filter(ae=>ae.type===c);W.sort((ae,Me)=>function ko(h,u,c){if(null==u.childName||null==c.childName)throw(0,J.g5)("Should only compare child_ events.");const y=new nr(u.childName,u.snapshotNode),D=new nr(c.childName,c.snapshotNode);return h.index_.compare(y,D)}(h,ae,Me)),W.forEach(ae=>{const Me=function _a(h,u,c){return"value"===u.type||"child_removed"===u.type||(u.prevName=c.getPredecessorChildName(u.childName,u.snapshotNode,h.index_)),u}(h,ae,k);D.forEach(We=>{We.respondsTo(ae.type)&&u.push(We.createEvent(Me,h.query_))})})}function io(h,u){return{eventCache:h,serverCache:u}}function ca(h,u,c,y){return io(new po(u,c,y),h.serverCache)}function rn(h,u,c,y){return io(h.eventCache,new po(u,c,y))}function vi(h){return h.eventCache.isFullyInitialized()?h.eventCache.getNode():null}function js(h){return h.serverCache.isFullyInitialized()?h.serverCache.getNode():null}let zi;class En{constructor(u,c=(()=>(zi||(zi=new Ri(Tn)),zi))()){this.value=u,this.children=c}static fromObject(u){let c=new En(null);return Bn(u,(y,D)=>{c=c.set(new Sr(y),D)}),c}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(u,c){if(null!=this.value&&c(this.value))return{path:Ir(),value:this.value};if(dr(u))return null;{const y=Xn(u),D=this.children.get(y);if(null!==D){const k=D.findRootMostMatchingPathAndValue(Zr(u),c);return null!=k?{path:Tr(new Sr(y),k.path),value:k.value}:null}return null}}findRootMostValueAndPath(u){return this.findRootMostMatchingPathAndValue(u,()=>!0)}subtree(u){if(dr(u))return this;{const c=Xn(u),y=this.children.get(c);return null!==y?y.subtree(Zr(u)):new En(null)}}set(u,c){if(dr(u))return new En(c,this.children);{const y=Xn(u),k=(this.children.get(y)||new En(null)).set(Zr(u),c),W=this.children.insert(y,k);return new En(this.value,W)}}remove(u){if(dr(u))return this.children.isEmpty()?new En(null):new En(null,this.children);{const c=Xn(u),y=this.children.get(c);if(y){const D=y.remove(Zr(u));let k;return k=D.isEmpty()?this.children.remove(c):this.children.insert(c,D),null===this.value&&k.isEmpty()?new En(null):new En(this.value,k)}return this}}get(u){if(dr(u))return this.value;{const c=Xn(u),y=this.children.get(c);return y?y.get(Zr(u)):null}}setTree(u,c){if(dr(u))return c;{const y=Xn(u),k=(this.children.get(y)||new En(null)).setTree(Zr(u),c);let W;return W=k.isEmpty()?this.children.remove(y):this.children.insert(y,k),new En(this.value,W)}}fold(u){return this.fold_(Ir(),u)}fold_(u,c){const y={};return this.children.inorderTraversal((D,k)=>{y[D]=k.fold_(Tr(u,D),c)}),c(u,this.value,y)}findOnPath(u,c){return this.findOnPath_(u,Ir(),c)}findOnPath_(u,c,y){const D=!!this.value&&y(c,this.value);if(D)return D;if(dr(u))return null;{const k=Xn(u),W=this.children.get(k);return W?W.findOnPath_(Zr(u),Tr(c,k),y):null}}foreachOnPath(u,c){return this.foreachOnPath_(u,Ir(),c)}foreachOnPath_(u,c,y){if(dr(u))return this;{this.value&&y(c,this.value);const D=Xn(u),k=this.children.get(D);return k?k.foreachOnPath_(Zr(u),Tr(c,D),y):new En(null)}}foreach(u){this.foreach_(Ir(),u)}foreach_(u,c){this.children.inorderTraversal((y,D)=>{D.foreach_(Tr(u,y),c)}),this.value&&c(u,this.value)}foreachChild(u){this.children.inorderTraversal((c,y)=>{y.value&&u(c,y.value)})}}class Hs{constructor(u){this.writeTree_=u}static empty(){return new Hs(new En(null))}}function cn(h,u,c){if(dr(u))return new Hs(new En(c));{const y=h.writeTree_.findRootMostValueAndPath(u);if(null!=y){const D=y.path;let k=y.value;const W=mi(D,u);return k=k.updateChild(W,c),new Hs(h.writeTree_.set(D,k))}{const D=new En(c),k=h.writeTree_.setTree(u,D);return new Hs(k)}}}function Pt(h,u,c){let y=h;return Bn(c,(D,k)=>{y=cn(y,Tr(u,D),k)}),y}function Qt(h,u){if(dr(u))return Hs.empty();{const c=h.writeTree_.setTree(u,new En(null));return new Hs(c)}}function Ni(h,u){return null!=Ra(h,u)}function Ra(h,u){const c=h.writeTree_.findRootMostValueAndPath(u);return null!=c?h.writeTree_.get(c.path).getChild(mi(c.path,u)):null}function Ea(h){const u=[],c=h.writeTree_.value;return null!=c?c.isLeafNode()||c.forEachChild(ri,(y,D)=>{u.push(new nr(y,D))}):h.writeTree_.children.inorderTraversal((y,D)=>{null!=D.value&&u.push(new nr(y,D.value))}),u}function Fo(h,u){if(dr(u))return h;{const c=Ra(h,u);return new Hs(null!=c?new En(c):h.writeTree_.subtree(u))}}function Qo(h){return h.writeTree_.isEmpty()}function Xo(h,u){return zl(Ir(),h.writeTree_,u)}function zl(h,u,c){if(null!=u.value)return c.updateChild(h,u.value);{let y=null;return u.children.inorderTraversal((D,k)=>{".priority"===D?((0,J.hu)(null!==k.value,"Priority writes must always be leaf nodes"),y=k.value):c=zl(Tr(h,D),k,c)}),!c.getChild(h).isEmpty()&&null!==y&&(c=c.updateChild(Tr(h,".priority"),y)),c}}function Jo(h,u){return Yl(u,h)}function ur(h,u){if(h.snap)return pi(h.path,u);for(const c in h.children)if(h.children.hasOwnProperty(c)&&pi(Tr(h.path,c),u))return!0;return!1}function ll(h){return h.visible}function Mi(h,u,c){let y=Hs.empty();for(let D=0;D<h.length;++D){const k=h[D];if(u(k)){const W=k.path;let ae;if(k.snap)pi(c,W)?(ae=mi(c,W),y=cn(y,ae,k.snap)):pi(W,c)&&(ae=mi(W,c),y=cn(y,Ir(),k.snap.getChild(ae)));else{if(!k.children)throw(0,J.g5)("WriteRecord should have .snap or .children");if(pi(c,W))ae=mi(c,W),y=Pt(y,ae,k.children);else if(pi(W,c))if(ae=mi(W,c),dr(ae))y=Pt(y,Ir(),k.children);else{const Me=(0,J.DV)(k.children,Xn(ae));if(Me){const We=Me.getChild(Zr(ae));y=cn(y,Ir(),We)}}}}}return y}function er(h,u,c,y,D){if(y||D){const k=Fo(h.visibleWrites,u);return!D&&Qo(k)?c:D||null!=c||Ni(k,Ir())?Xo(Mi(h.allWrites,function(We){return(We.visible||D)&&(!y||!~y.indexOf(We.writeId))&&(pi(We.path,u)||pi(u,We.path))},u),c||M.EMPTY_NODE):null}{const k=Ra(h.visibleWrites,u);if(null!=k)return k;{const W=Fo(h.visibleWrites,u);return Qo(W)?c:null!=c||Ni(W,Ir())?Xo(W,c||M.EMPTY_NODE):null}}}function ta(h,u,c,y){return er(h.writeTree,h.treePath,u,c,y)}function di(h,u){return function ea(h,u,c){let y=M.EMPTY_NODE;const D=Ra(h.visibleWrites,u);if(D)return D.isLeafNode()||D.forEachChild(ri,(k,W)=>{y=y.updateImmediateChild(k,W)}),y;if(c){const k=Fo(h.visibleWrites,u);return c.forEachChild(ri,(W,ae)=>{const Me=Xo(Fo(k,new Sr(W)),ae);y=y.updateImmediateChild(W,Me)}),Ea(k).forEach(W=>{y=y.updateImmediateChild(W.name,W.node)}),y}return Ea(Fo(h.visibleWrites,u)).forEach(W=>{y=y.updateImmediateChild(W.name,W.node)}),y}(h.writeTree,h.treePath,u)}function ba(h,u,c,y){return function Qr(h,u,c,y,D){(0,J.hu)(y||D,"Either existingEventSnap or existingServerSnap must exist");const k=Tr(u,c);if(Ni(h.visibleWrites,k))return null;{const W=Fo(h.visibleWrites,k);return Qo(W)?D.getChild(c):Xo(W,D.getChild(c))}}(h.writeTree,h.treePath,u,c,y)}function So(h,u){return function _i(h,u){return Ra(h.visibleWrites,u)}(h.writeTree,Tr(h.treePath,u))}function Na(h,u,c){return function go(h,u,c,y){const D=Tr(u,c),k=Ra(h.visibleWrites,D);return null!=k?k:y.isCompleteForChild(c)?Xo(Fo(h.visibleWrites,D),y.getNode().getImmediateChild(c)):null}(h.writeTree,h.treePath,u,c)}function fu(h,u){return Yl(Tr(h.treePath,u),h.writeTree)}function Yl(h,u){return{treePath:h,writeTree:u}}class To{constructor(){this.changeMap=new Map}trackChildChange(u){const c=u.type,y=u.childName;(0,J.hu)("child_added"===c||"child_changed"===c||"child_removed"===c,"Only child changes supported for tracking"),(0,J.hu)(".priority"!==y,"Only non-priority child changes can be tracked.");const D=this.changeMap.get(y);if(D){const k=D.type;if("child_added"===c&&"child_removed"===k)this.changeMap.set(y,Co(y,u.snapshotNode,D.snapshotNode));else if("child_removed"===c&&"child_added"===k)this.changeMap.delete(y);else if("child_removed"===c&&"child_changed"===k)this.changeMap.set(y,ks(y,D.oldSnap));else if("child_changed"===c&&"child_added"===k)this.changeMap.set(y,cs(y,u.snapshotNode));else{if("child_changed"!==c||"child_changed"!==k)throw(0,J.g5)("Illegal combination of changes: "+u+" occurred after "+D);this.changeMap.set(y,Co(y,u.snapshotNode,D.oldSnap))}}else this.changeMap.set(y,u)}getChanges(){return Array.from(this.changeMap.values())}}const ql=new class pu{getCompleteChild(u){return null}getChildAfterChild(u,c,y){return null}};class gu{constructor(u,c,y=null){this.writes_=u,this.viewCache_=c,this.optCompleteServerCache_=y}getCompleteChild(u){const c=this.viewCache_.eventCache;if(c.isCompleteForChild(u))return c.getNode().getImmediateChild(u);{const y=null!=this.optCompleteServerCache_?new po(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Na(this.writes_,u,y)}}getChildAfterChild(u,c,y){const D=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:js(this.viewCache_),k=function Di(h,u,c,y,D,k){return function dn(h,u,c,y,D,k,W){let ae;const Me=Fo(h.visibleWrites,u),We=Ra(Me,Ir());if(null!=We)ae=We;else{if(null==c)return[];ae=Xo(Me,c)}if(ae=ae.withIndex(W),ae.isEmpty()||ae.isLeafNode())return[];{const Lt=[],Ft=W.getCompare(),Yt=k?ae.getReverseIteratorFrom(y,W):ae.getIteratorFrom(y,W);let Mn=Yt.getNext();for(;Mn&&Lt.length<D;)0!==Ft(Mn,y)&&Lt.push(Mn),Mn=Yt.getNext();return Lt}}(h.writeTree,h.treePath,u,c,y,D,k)}(this.writes_,D,c,1,y,u);return 0===k.length?null:k[0]}}function so(h,u,c,y,D,k){const W=u.eventCache;if(null!=So(y,c))return u;{let ae,Me;if(dr(c))if((0,J.hu)(u.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),u.serverCache.isFiltered()){const We=js(u),Ft=di(y,We instanceof M?We:M.EMPTY_NODE);ae=h.filter.updateFullNode(u.eventCache.getNode(),Ft,k)}else{const We=ta(y,js(u));ae=h.filter.updateFullNode(u.eventCache.getNode(),We,k)}else{const We=Xn(c);if(".priority"===We){(0,J.hu)(1===Ji(c),"Can't have a priority with additional path components");const Lt=W.getNode();Me=u.serverCache.getNode();const Ft=ba(y,c,Lt,Me);ae=null!=Ft?h.filter.updatePriority(Lt,Ft):W.getNode()}else{const Lt=Zr(c);let Ft;if(W.isCompleteForChild(We)){Me=u.serverCache.getNode();const Yt=ba(y,c,W.getNode(),Me);Ft=null!=Yt?W.getNode().getImmediateChild(We).updateChild(Lt,Yt):W.getNode().getImmediateChild(We)}else Ft=Na(y,We,u.serverCache);ae=null!=Ft?h.filter.updateChild(W.getNode(),We,Ft,Lt,D,k):W.getNode()}}return ca(u,ae,W.isFullyInitialized()||dr(c),h.filter.filtersNodes())}}function mo(h,u,c,y,D,k,W,ae){const Me=u.serverCache;let We;const Lt=W?h.filter:h.filter.getIndexedFilter();if(dr(c))We=Lt.updateFullNode(Me.getNode(),y,null);else if(Lt.filtersNodes()&&!Me.isFiltered()){const Mn=Me.getNode().updateChild(c,y);We=Lt.updateFullNode(Me.getNode(),Mn,null)}else{const Mn=Xn(c);if(!Me.isCompleteForPath(c)&&Ji(c)>1)return u;const hr=Zr(c),co=Me.getNode().getImmediateChild(Mn).updateChild(hr,y);We=".priority"===Mn?Lt.updatePriority(Me.getNode(),co):Lt.updateChild(Me.getNode(),Mn,co,hr,ql,null)}const Ft=rn(u,We,Me.isFullyInitialized()||dr(c),Lt.filtersNodes());return so(h,Ft,c,D,new gu(D,Ft,k),ae)}function Ca(h,u,c,y,D,k,W){const ae=u.eventCache;let Me,We;const Lt=new gu(D,u,k);if(dr(c))We=h.filter.updateFullNode(u.eventCache.getNode(),y,W),Me=ca(u,We,!0,h.filter.filtersNodes());else{const Ft=Xn(c);if(".priority"===Ft)We=h.filter.updatePriority(u.eventCache.getNode(),y),Me=ca(u,We,ae.isFullyInitialized(),ae.isFiltered());else{const Yt=Zr(c),Mn=ae.getNode().getImmediateChild(Ft);let hr;if(dr(Yt))hr=y;else{const ki=Lt.getCompleteChild(Ft);hr=null!=ki?".priority"===Os(Yt)&&ki.getChild(Bs(Yt)).isEmpty()?ki:ki.updateChild(Yt,y):M.EMPTY_NODE}Me=Mn.equals(hr)?u:ca(u,h.filter.updateChild(ae.getNode(),Ft,hr,Yt,Lt,W),ae.isFullyInitialized(),h.filter.filtersNodes())}}return Me}function na(h,u){return h.eventCache.isCompleteForChild(u)}function xs(h,u,c){return c.foreach((y,D)=>{u=u.updateChild(y,D)}),u}function Ga(h,u,c,y,D,k,W,ae){if(u.serverCache.getNode().isEmpty()&&!u.serverCache.isFullyInitialized())return u;let We,Me=u;We=dr(c)?y:new En(null).setTree(c,y);const Lt=u.serverCache.getNode();return We.children.inorderTraversal((Ft,Yt)=>{if(Lt.hasChild(Ft)){const hr=xs(0,u.serverCache.getNode().getImmediateChild(Ft),Yt);Me=mo(h,Me,new Sr(Ft),hr,D,k,W,ae)}}),We.children.inorderTraversal((Ft,Yt)=>{const Mn=!u.serverCache.isCompleteForChild(Ft)&&null===Yt.value;if(!Lt.hasChild(Ft)&&!Mn){const ki=xs(0,u.serverCache.getNode().getImmediateChild(Ft),Yt);Me=mo(h,Me,new Sr(Ft),ki,D,k,W,ae)}}),Me}class oo{constructor(u,c){this.query_=u,this.eventRegistrations_=[];const y=this.query_._queryParams,D=new Zs(y.getIndex()),k=function $(h){return h.loadsAllData()?new Zs(h.getIndex()):h.hasLimit()?new F(h):new ua(h)}(y);this.processor_=function Ao(h){return{filter:h}}(k);const W=c.serverCache,ae=c.eventCache,Me=D.updateFullNode(M.EMPTY_NODE,W.getNode(),null),We=k.updateFullNode(M.EMPTY_NODE,ae.getNode(),null),Lt=new po(Me,W.isFullyInitialized(),D.filtersNodes()),Ft=new po(We,ae.isFullyInitialized(),k.filtersNodes());this.viewCache_=io(Ft,Lt),this.eventGenerator_=new du(this.query_)}get query(){return this.query_}}function Lo(h,u){const c=js(h.viewCache_);return c&&(h.query._queryParams.loadsAllData()||!dr(u)&&!c.getImmediateChild(Xn(u)).isEmpty())?c.getChild(u):null}function Pi(h){return 0===h.eventRegistrations_.length}function ds(h,u,c){const y=[];if(c){(0,J.hu)(null==u,"A cancel should cancel all event registrations.");const D=h.query._path;h.eventRegistrations_.forEach(k=>{const W=k.createCancelEvent(c,D);W&&y.push(W)})}if(u){let D=[];for(let k=0;k<h.eventRegistrations_.length;++k){const W=h.eventRegistrations_[k];if(W.matches(u)){if(u.hasAnyCallback()){D=D.concat(h.eventRegistrations_.slice(k+1));break}}else D.push(W)}h.eventRegistrations_=D}else h.eventRegistrations_=[];return y}function Xr(h,u,c,y){u.type===Wi.MERGE&&null!==u.source.queryId&&((0,J.hu)(js(h.viewCache_),"We should always have a full cache before handling merges"),(0,J.hu)(vi(h.viewCache_),"Missing event cache, even though we have a server cache"));const D=h.viewCache_,k=function Rt(h,u,c,y,D){const k=new To;let W,ae;if(c.type===Wi.OVERWRITE){const We=c;We.source.fromUser?W=Ca(h,u,We.path,We.snap,y,D,k):((0,J.hu)(We.source.fromServer,"Unknown source."),ae=We.source.tagged||u.serverCache.isFiltered()&&!dr(We.path),W=mo(h,u,We.path,We.snap,y,D,ae,k))}else if(c.type===Wi.MERGE){const We=c;We.source.fromUser?W=function yo(h,u,c,y,D,k,W){let ae=u;return y.foreach((Me,We)=>{const Lt=Tr(c,Me);na(u,Xn(Lt))&&(ae=Ca(h,ae,Lt,We,D,k,W))}),y.foreach((Me,We)=>{const Lt=Tr(c,Me);na(u,Xn(Lt))||(ae=Ca(h,ae,Lt,We,D,k,W))}),ae}(h,u,We.path,We.children,y,D,k):((0,J.hu)(We.source.fromServer,"Unknown source."),ae=We.source.tagged||u.serverCache.isFiltered(),W=Ga(h,u,We.path,We.children,y,D,ae,k))}else if(c.type===Wi.ACK_USER_WRITE){const We=c;W=We.revert?function Dl(h,u,c,y,D,k){let W;if(null!=So(y,c))return u;{const ae=new gu(y,u,D),Me=u.eventCache.getNode();let We;if(dr(c)||".priority"===Xn(c)){let Lt;if(u.serverCache.isFullyInitialized())Lt=ta(y,js(u));else{const Ft=u.serverCache.getNode();(0,J.hu)(Ft instanceof M,"serverChildren would be complete if leaf node"),Lt=di(y,Ft)}We=h.filter.updateFullNode(Me,Lt,k)}else{const Lt=Xn(c);let Ft=Na(y,Lt,u.serverCache);null==Ft&&u.serverCache.isCompleteForChild(Lt)&&(Ft=Me.getImmediateChild(Lt)),We=null!=Ft?h.filter.updateChild(Me,Lt,Ft,Zr(c),ae,k):u.eventCache.getNode().hasChild(Lt)?h.filter.updateChild(Me,Lt,M.EMPTY_NODE,Zr(c),ae,k):Me,We.isEmpty()&&u.serverCache.isFullyInitialized()&&(W=ta(y,js(u)),W.isLeafNode()&&(We=h.filter.updateFullNode(We,W,k)))}return W=u.serverCache.isFullyInitialized()||null!=So(y,Ir()),ca(u,We,W,h.filter.filtersNodes())}}(h,u,We.path,y,D,k):function Pa(h,u,c,y,D,k,W){if(null!=So(D,c))return u;const ae=u.serverCache.isFiltered(),Me=u.serverCache;if(null!=y.value){if(dr(c)&&Me.isFullyInitialized()||Me.isCompleteForPath(c))return mo(h,u,c,Me.getNode().getChild(c),D,k,ae,W);if(dr(c)){let We=new En(null);return Me.getNode().forEachChild(ls,(Lt,Ft)=>{We=We.set(new Sr(Lt),Ft)}),Ga(h,u,c,We,D,k,ae,W)}return u}{let We=new En(null);return y.foreach((Lt,Ft)=>{const Yt=Tr(c,Lt);Me.isCompleteForPath(Yt)&&(We=We.set(Lt,Me.getNode().getChild(Yt)))}),Ga(h,u,c,We,D,k,ae,W)}}(h,u,We.path,We.affectedTree,y,D,k)}else{if(c.type!==Wi.LISTEN_COMPLETE)throw(0,J.g5)("Unknown operation type: "+c.type);W=function ka(h,u,c,y,D){const k=u.serverCache;return so(h,rn(u,k.getNode(),k.isFullyInitialized()||dr(c),k.isFiltered()),c,y,ql,D)}(h,u,c.path,y,k)}const Me=k.getChanges();return function Ds(h,u,c){const y=u.eventCache;if(y.isFullyInitialized()){const D=y.getNode().isLeafNode()||y.getNode().isEmpty(),k=vi(h);(c.length>0||!h.eventCache.isFullyInitialized()||D&&!y.getNode().equals(k)||!y.getNode().getPriority().equals(k.getPriority()))&&c.push(Cs(vi(u)))}}(u,W,Me),{viewCache:W,changes:Me}}(h.processor_,D,u,c,y);return function Kl(h,u){(0,J.hu)(u.eventCache.getNode().isIndexed(h.filter.getIndex()),"Event snap not indexed"),(0,J.hu)(u.serverCache.getNode().isIndexed(h.filter.getIndex()),"Server snap not indexed")}(h.processor_,k.viewCache),(0,J.hu)(k.viewCache.serverCache.isFullyInitialized()||!D.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),h.viewCache_=k.viewCache,Fa(h,k.changes,k.viewCache.eventCache.getNode(),null)}function Fa(h,u,c,y){return function Wl(h,u,c,y){const D=[],k=[];return u.forEach(W=>{"child_changed"===W.type&&h.index_.indexedValueChanged(W.oldSnap,W.snapshotNode)&&k.push(function la(h,u){return{type:"child_moved",snapshotNode:u,childName:h}}(W.childName,W.snapshotNode))}),zr(h,D,"child_removed",u,y,c),zr(h,D,"child_added",u,y,c),zr(h,D,"child_moved",k,y,c),zr(h,D,"child_changed",u,y,c),zr(h,D,"value",u,y,c),D}(h.eventGenerator_,u,c,y?[y]:h.eventRegistrations_)}let ao,It;class yu{constructor(){this.views=new Map}}function Yi(h,u,c,y){const D=u.source.queryId;if(null!==D){const k=h.views.get(D);return(0,J.hu)(null!=k,"SyncTree gave us an op for an invalid query."),Xr(k,u,c,y)}{let k=[];for(const W of h.views.values())k=k.concat(Xr(W,u,c,y));return k}}function ia(h,u,c,y,D){const W=h.views.get(u._queryIdentifier);if(!W){let ae=ta(c,D?y:null),Me=!1;ae?Me=!0:y instanceof M?(ae=di(c,y),Me=!1):(ae=M.EMPTY_NODE,Me=!1);const We=io(new po(ae,Me,!1),new po(y,D,!1));return new oo(u,We)}return W}function w(h){const u=[];for(const c of h.views.values())c.query._queryParams.loadsAllData()||u.push(c);return u}function N(h,u){let c=null;for(const y of h.views.values())c=c||Lo(y,u);return c}function j(h,u){return u._queryParams.loadsAllData()?Fe(h):h.views.get(u._queryIdentifier)}function te(h,u){return null!=j(h,u)}function Ae(h){return null!=Fe(h)}function Fe(h){for(const u of h.views.values())if(u.query._queryParams.loadsAllData())return u;return null}let Q=1;class fe{constructor(u){this.listenProvider_=u,this.syncPointTree_=new En(null),this.pendingWriteTree_=function wa(){return{visibleWrites:Hs.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Ye(h,u,c,y,D){return function Oa(h,u,c,y,D){(0,J.hu)(y>h.lastWriteId,"Stacking an older write on top of newer ones"),void 0===D&&(D=!0),h.allWrites.push({path:u,snap:c,writeId:y,visible:D}),D&&(h.visibleWrites=cn(h.visibleWrites,u,c)),h.lastWriteId=y}(h.pendingWriteTree_,u,c,y,D),D?ha(h,new fo({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},u,c)):[]}function Ht(h,u,c=!1){const y=function Cl(h,u){for(let c=0;c<h.allWrites.length;c++){const y=h.allWrites[c];if(y.writeId===u)return y}return null}(h.pendingWriteTree_,u);if(function da(h,u){const c=h.allWrites.findIndex(ae=>ae.writeId===u);(0,J.hu)(c>=0,"removeWrite called with nonexistent writeId.");const y=h.allWrites[c];h.allWrites.splice(c,1);let D=y.visible,k=!1,W=h.allWrites.length-1;for(;D&&W>=0;){const ae=h.allWrites[W];ae.visible&&(W>=c&&ur(ae,y.path)?D=!1:pi(y.path,ae.path)&&(k=!0)),W--}return!!D&&(k?(function Ia(h){h.visibleWrites=Mi(h.allWrites,ll,Ir()),h.lastWriteId=h.allWrites.length>0?h.allWrites[h.allWrites.length-1].writeId:-1}(h),!0):(y.snap?h.visibleWrites=Qt(h.visibleWrites,y.path):Bn(y.children,Me=>{h.visibleWrites=Qt(h.visibleWrites,Tr(y.path,Me))}),!0))}(h.pendingWriteTree_,u)){let k=new En(null);return null!=y.snap?k=k.set(Ir(),!0):Bn(y.children,W=>{k=k.set(new Sr(W),!0)}),ha(h,new Ha(y.path,k,c))}return[]}function sn(h,u,c){return ha(h,new fo({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},u,c))}function Fn(h,u,c,y,D=!1){const k=u._path,W=h.syncPointTree_.get(k);let ae=[];if(W&&("default"===u._queryIdentifier||te(W,u))){const Me=function T(h,u,c,y){const D=u._queryIdentifier,k=[];let W=[];const ae=Ae(h);if("default"===D)for(const[Me,We]of h.views.entries())W=W.concat(ds(We,c,y)),Pi(We)&&(h.views.delete(Me),We.query._queryParams.loadsAllData()||k.push(We.query));else{const Me=h.views.get(D);Me&&(W=W.concat(ds(Me,c,y)),Pi(Me)&&(h.views.delete(D),Me.query._queryParams.loadsAllData()||k.push(Me.query)))}return ae&&!Ae(h)&&k.push(new(function el(){return(0,J.hu)(ao,"Reference.ts has not been loaded"),ao}())(u._repo,u._path)),{removed:k,events:W}}(W,u,c,y);(function Vo(h){return 0===h.views.size})(W)&&(h.syncPointTree_=h.syncPointTree_.remove(k));const We=Me.removed;if(ae=Me.events,!D){const Lt=-1!==We.findIndex(Yt=>Yt._queryParams.loadsAllData()),Ft=h.syncPointTree_.findOnPath(k,(Yt,Mn)=>Ae(Mn));if(Lt&&!Ft){const Yt=h.syncPointTree_.subtree(k);if(!Yt.isEmpty()){const Mn=function Fd(h){return h.fold((u,c,y)=>{if(c&&Ae(c))return[Fe(c)];{let D=[];return c&&(D=w(c)),Bn(y,(k,W)=>{D=D.concat(W)}),D}})}(Yt);for(let hr=0;hr<Mn.length;++hr){const ki=Mn[hr],co=ki.query,El=is(h,ki);h.listenProvider_.startListening(ul(co),fa(h,co),El.hashFn,El.onComplete)}}}!Ft&&We.length>0&&!y&&(Lt?h.listenProvider_.stopListening(ul(u),null):We.forEach(Yt=>{const Mn=h.queryToTagMap.get(li(Yt));h.listenProvider_.stopListening(ul(Yt),Mn)}))}!function Vu(h,u){for(let c=0;c<u.length;++c){const y=u[c];if(!y._queryParams.loadsAllData()){const D=li(y),k=h.queryToTagMap.get(D);h.queryToTagMap.delete(D),h.tagToQueryMap.delete(k)}}}(h,We)}return ae}function hs(h,u,c,y){const D=Sl(h,y);if(null!=D){const k=vu(D),W=k.path,ae=k.queryId,Me=mi(W,u);return Tl(h,W,new fo(Xa(ae),Me,c))}return[]}function lo(h,u,c,y=!1){const D=u._path;let k=null,W=!1;h.syncPointTree_.foreachOnPath(D,(Yt,Mn)=>{const hr=mi(Yt,D);k=k||N(Mn,hr),W=W||Ae(Mn)});let Me,ae=h.syncPointTree_.get(D);ae?(W=W||Ae(ae),k=k||N(ae,Ir())):(ae=new yu,h.syncPointTree_=h.syncPointTree_.set(D,ae)),null!=k?Me=!0:(Me=!1,k=M.EMPTY_NODE,h.syncPointTree_.subtree(D).foreachChild((Mn,hr)=>{const ki=N(hr,Ir());ki&&(k=k.updateImmediateChild(Mn,ki))}));const We=te(ae,u);if(!We&&!u._queryParams.loadsAllData()){const Yt=li(u);(0,J.hu)(!h.queryToTagMap.has(Yt),"View does not exist, but we have a tag");const Mn=function yc(){return Q++}();h.queryToTagMap.set(Yt,Mn),h.tagToQueryMap.set(Mn,Yt)}let Ft=function S(h,u,c,y,D,k){const W=ia(h,u,y,D,k);return h.views.has(u._queryIdentifier)||h.views.set(u._queryIdentifier,W),function Ms(h,u){h.eventRegistrations_.push(u)}(W,c),function mu(h,u){const c=h.viewCache_.eventCache,y=[];return c.getNode().isLeafNode()||c.getNode().forEachChild(ri,(k,W)=>{y.push(cs(k,W))}),c.isFullyInitialized()&&y.push(Cs(c.getNode())),Fa(h,y,c.getNode(),u)}(W,c)}(ae,u,c,Jo(h.pendingWriteTree_,D),k,Me);if(!We&&!W&&!y){const Yt=j(ae,u);Ft=Ft.concat(function Ld(h,u,c){const y=u._path,D=fa(h,u),k=is(h,c),W=h.listenProvider_.startListening(ul(u),D,k.hashFn,k.onComplete),ae=h.syncPointTree_.subtree(y);if(D)(0,J.hu)(!Ae(ae.value),"If we're adding a query, it shouldn't be shadowed");else{const Me=ae.fold((We,Lt,Ft)=>{if(!dr(We)&&Lt&&Ae(Lt))return[Fe(Lt).query];{let Yt=[];return Lt&&(Yt=Yt.concat(w(Lt).map(Mn=>Mn.query))),Bn(Ft,(Mn,hr)=>{Yt=Yt.concat(hr)}),Yt}});for(let We=0;We<Me.length;++We){const Lt=Me[We];h.listenProvider_.stopListening(ul(Lt),fa(h,Lt))}}return W}(h,u,Yt))}return Ft}function Da(h,u,c){const D=h.pendingWriteTree_,k=h.syncPointTree_.findOnPath(u,(W,ae)=>{const We=N(ae,mi(W,u));if(We)return We});return er(D,u,k,c,!0)}function ha(h,u){return nl(u,h.syncPointTree_,null,Jo(h.pendingWriteTree_,Ir()))}function nl(h,u,c,y){if(dr(h.path))return Wa(h,u,c,y);{const D=u.get(Ir());null==c&&null!=D&&(c=N(D,Ir()));let k=[];const W=Xn(h.path),ae=h.operationForChild(W),Me=u.children.get(W);if(Me&&ae){const We=c?c.getImmediateChild(W):null,Lt=fu(y,W);k=k.concat(nl(ae,Me,We,Lt))}return D&&(k=k.concat(Yi(D,h,y,c))),k}}function Wa(h,u,c,y){const D=u.get(Ir());null==c&&null!=D&&(c=N(D,Ir()));let k=[];return u.children.inorderTraversal((W,ae)=>{const Me=c?c.getImmediateChild(W):null,We=fu(y,W),Lt=h.operationForChild(W);Lt&&(k=k.concat(Wa(Lt,ae,Me,We)))}),D&&(k=k.concat(Yi(D,h,y,c))),k}function is(h,u){const c=u.query,y=fa(h,c);return{hashFn:()=>(function Ja(h){return h.viewCache_.serverCache.getNode()}(u)||M.EMPTY_NODE).hash(),onComplete:D=>{if("ok"===D)return y?function Ar(h,u,c){const y=Sl(h,c);if(y){const D=vu(y),k=D.path,W=D.queryId,ae=mi(k,u);return Tl(h,k,new Ma(Xa(W),ae))}return[]}(h,c._path,y):function pr(h,u){return ha(h,new Ma({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},u))}(h,c._path);{const k=function ji(h,u){let c="Unknown Error";"too_big"===h?c="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===h?c="Client doesn't have permission to access the desired data.":"unavailable"===h&&(c="The service is unavailable");const y=new Error(h+" at "+u._path.toString()+": "+c);return y.code=h.toUpperCase(),y}(D,c);return Fn(h,c,null,k)}}}}function fa(h,u){const c=li(u);return h.queryToTagMap.get(c)}function li(h){return h._path.toString()+"$"+h._queryIdentifier}function Sl(h,u){return h.tagToQueryMap.get(u)}function vu(h){const u=h.indexOf("$");return(0,J.hu)(-1!==u&&u<h.length-1,"Bad queryKey."),{queryId:h.substr(u+1),path:new Sr(h.substr(0,u))}}function Tl(h,u,c){const y=h.syncPointTree_.get(u);return(0,J.hu)(y,"Missing sync point for query tag that we're tracking"),Yi(y,c,Jo(h.pendingWriteTree_,u),null)}function ul(h){return h._queryParams.loadsAllData()&&!h._queryParams.isDefault()?new(function U(){return(0,J.hu)(It,"Reference.ts has not been loaded"),It}())(h._repo,h._path):h}class Bu{constructor(u){this.node_=u}getImmediateChild(u){const c=this.node_.getImmediateChild(u);return new Bu(c)}node(){return this.node_}}class Fs{constructor(u,c){this.syncTree_=u,this.path_=c}getImmediateChild(u){const c=Tr(this.path_,u);return new Fs(this.syncTree_,c)}node(){return Da(this.syncTree_,this.path_)}}const Vd=function(h,u,c){return h&&"object"==typeof h?((0,J.hu)(".sv"in h,"Unexpected leaf node or priority contents"),"string"==typeof h[".sv"]?Bd(h[".sv"],u,c):"object"==typeof h[".sv"]?Oh(h[".sv"],u):void(0,J.hu)(!1,"Unexpected server value: "+JSON.stringify(h,null,2))):h},Bd=function(h,u,c){if("timestamp"===h)return c.timestamp;(0,J.hu)(!1,"Unexpected server value: "+h)},Oh=function(h,u,c){h.hasOwnProperty("increment")||(0,J.hu)(!1,"Unexpected server value: "+JSON.stringify(h,null,2));const y=h.increment;"number"!=typeof y&&(0,J.hu)(!1,"Unexpected increment value: "+y);const D=u.node();if((0,J.hu)(null!=D,"Expected ChildrenNode.EMPTY_NODE for nulls"),!D.isLeafNode())return y;const W=D.getValue();return"number"!=typeof W?y:W+y},Qc=function(h,u,c,y){return Uu(u,new Fs(c,h),y)},$d=function(h,u,c){return Uu(h,new Bu(u),c)};function Uu(h,u,c){const y=h.getPriority().val(),D=Vd(y,u.getImmediateChild(".priority"),c);let k;if(h.isLeafNode()){const W=h,ae=Vd(W.getValue(),u,c);return ae!==W.getValue()||D!==W.getPriority().val()?new Ps(ae,V(D)):h}{const W=h;return k=W,D!==W.getPriority().val()&&(k=k.updatePriority(new Ps(D))),W.forEachChild(ri,(ae,Me)=>{const We=Uu(Me,u.getImmediateChild(ae),c);We!==Me&&(k=k.updateImmediateChild(ae,We))}),k}}class Xc{constructor(u="",c=null,y={children:{},childCount:0}){this.name=u,this.parent=c,this.node=y}}function La(h,u){let c=u instanceof Sr?u:new Sr(u),y=h,D=Xn(c);for(;null!==D;){const k=(0,J.DV)(y.node.children,D)||{children:{},childCount:0};y=new Xc(D,y,k),c=Zr(c),D=Xn(c)}return y}function xo(h){return h.node.value}function ju(h,u){h.node.value=u,_u(h)}function Al(h){return h.node.childCount>0}function Va(h,u){Bn(h.node.children,(c,y)=>{u(new Xc(c,h,y))})}function jd(h,u,c,y){c&&!y&&u(h),Va(h,D=>{jd(D,u,!0,y)}),c&&y&&u(h)}function xl(h){return new Sr(null===h.parent?h.name:xl(h.parent)+"/"+h.name)}function _u(h){null!==h.parent&&function vc(h,u,c){const y=function Ud(h){return void 0===xo(h)&&!Al(h)}(c),D=(0,J.r3)(h.node.children,u);y&&D?(delete h.node.children[u],h.node.childCount--,_u(h)):!y&&!D&&(h.node.children[u]=c.node,h.node.childCount++,_u(h))}(h.parent,h.name,h)}const _c=/[\[\].#$\/\u0000-\u001F\u007F]/,cl=/[\[\].#$\u0000-\u001F\u007F]/,Mo=10485760,dl=function(h){return"string"==typeof h&&0!==h.length&&!_c.test(h)},Eu=function(h){return"string"==typeof h&&0!==h.length&&!cl.test(h)},Zl=function(h){return null===h||"string"==typeof h||"number"==typeof h&&!tr(h)||h&&"object"==typeof h&&(0,J.r3)(h,".sv")},Ws=function(h,u,c,y){y&&void 0===u||il((0,J.gK)(h,"value"),u,c)},il=function(h,u,c){const y=c instanceof Sr?new as(c,h):c;if(void 0===u)throw new Error(h+"contains undefined "+Ci(y));if("function"==typeof u)throw new Error(h+"contains a function "+Ci(y)+" with contents = "+u.toString());if(tr(u))throw new Error(h+"contains "+u.toString()+" "+Ci(y));if("string"==typeof u&&u.length>Mo/3&&(0,J.ug)(u)>Mo)throw new Error(h+"contains a string greater than "+Mo+" utf8 bytes "+Ci(y)+" ('"+u.substring(0,50)+"...')");if(u&&"object"==typeof u){let D=!1,k=!1;if(Bn(u,(W,ae)=>{if(".value"===W)D=!0;else if(".priority"!==W&&".sv"!==W&&(k=!0,!dl(W)))throw new Error(h+" contains an invalid key ("+W+") "+Ci(y)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function ps(h,u){h.parts_.length>0&&(h.byteLength_+=1),h.parts_.push(u),h.byteLength_+=(0,J.ug)(u),gs(h)})(y,W),il(h,ae,y),function Es(h){const u=h.parts_.pop();h.byteLength_-=(0,J.ug)(u),h.parts_.length>0&&(h.byteLength_-=1)}(y)}),D&&k)throw new Error(h+' contains ".value" child '+Ci(y)+" in addition to actual children.")}},Hd=function(h,u,c,y){if(y&&void 0===u)return;const D=(0,J.gK)(h,"values");if(!u||"object"!=typeof u||Array.isArray(u))throw new Error(D+" must be an object containing the children to replace.");const k=[];Bn(u,(W,ae)=>{const Me=new Sr(W);if(il(D,ae,Tr(c,Me)),".priority"===Os(Me)&&!Zl(ae))throw new Error(D+"contains an invalid value for '"+Me.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");k.push(Me)}),function(h,u){let c,y;for(c=0;c<u.length;c++){y=u[c];const k=es(y);for(let W=0;W<k.length;W++)if((".priority"!==k[W]||W!==k.length-1)&&!dl(k[W]))throw new Error(h+"contains an invalid key ("+k[W]+") in path "+y.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}u.sort(Ys);let D=null;for(c=0;c<u.length;c++){if(y=u[c],null!==D&&pi(D,y))throw new Error(h+"contains a path "+D.toString()+" that is ancestor of another path "+y.toString());D=y}}(D,k)},td=function(h,u,c){if(!c||void 0!==u){if(tr(u))throw new Error((0,J.gK)(h,"priority")+"is "+u.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Zl(u))throw new Error((0,J.gK)(h,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Hu=function(h,u,c,y){if(!(y&&void 0===c||dl(c)))throw new Error((0,J.gK)(h,u)+'was an invalid key = "'+c+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Gu=function(h,u,c,y){if(!(y&&void 0===c||Eu(c)))throw new Error((0,J.gK)(h,u)+'was an invalid path = "'+c+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Sa=function(h,u){if(".info"===Xn(u))throw new Error(h+" failed = Can't modify data under /.info/")},rd=function(h,u){const c=u.path.toString();if("string"!=typeof u.repoInfo.host||0===u.repoInfo.host.length||!dl(u.repoInfo.namespace)&&"localhost"!==u.repoInfo.host.split(":")[0]||0!==c.length&&!function(h){return h&&(h=h.replace(/^\/*\.info(\/|$)/,"/")),Eu(h)}(c))throw new Error((0,J.gK)(h,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Gd{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Ml(h,u){let c=null;for(let y=0;y<u.length;y++){const D=u[y],k=D.getPath();null!==c&&!$s(k,c.path)&&(h.eventLists_.push(c),c=null),null===c&&(c={events:[],path:k}),c.events.push(D)}c&&h.eventLists_.push(c)}function pa(h,u,c){Ml(h,c),$o(h,y=>$s(y,u))}function Bo(h,u,c){Ml(h,c),$o(h,y=>pi(y,u)||pi(u,y))}function $o(h,u){h.recursionDepth_++;let c=!0;for(let y=0;y<h.eventLists_.length;y++){const D=h.eventLists_[y];D&&(u(D.path)?(Rl(h.eventLists_[y]),h.eventLists_[y]=null):c=!1)}c&&(h.eventLists_=[]),h.recursionDepth_--}function Rl(h){for(let u=0;u<h.events.length;u++){const c=h.events[u];if(null!==c){h.events[u]=null;const y=c.getEventRunner();Rn&&Hn("event: "+c.toString()),ei(y)}}}const Ol="repo_interrupt";class id{constructor(u,c,y,D){this.repoInfo_=u,this.forceRestClient_=c,this.authTokenProvider_=y,this.appCheckProvider_=D,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Gd,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=xi(),this.transactionQueueTree_=new Xc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function sd(h){const c=h.infoData_.getNode(new Sr(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+c}function Ic(h){return function(h){return(h=h||{}).timestamp=h.timestamp||(new Date).getTime(),h}({timestamp:sd(h)})}function ss(h,u,c,y,D){h.dataUpdateCount++;const k=new Sr(u);c=h.interceptServerDataCallback_?h.interceptServerDataCallback_(u,c):c;let W=[];if(D)if(y){const Me=(0,J.UI)(c,We=>V(We));W=function Gs(h,u,c,y){const D=Sl(h,y);if(D){const k=vu(D),W=k.path,ae=k.queryId,Me=mi(W,u),We=En.fromObject(c);return Tl(h,W,new Zo(Xa(ae),Me,We))}return[]}(h.serverSyncTree_,k,Me,D)}else{const Me=V(c);W=hs(h.serverSyncTree_,k,Me,D)}else if(y){const Me=(0,J.UI)(c,We=>V(We));W=function Vn(h,u,c){const y=En.fromObject(c);return ha(h,new Zo({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},u,y))}(h.serverSyncTree_,k,Me)}else{const Me=V(c);W=sn(h.serverSyncTree_,k,Me)}let ae=k;W.length>0&&(ae=Ql(h,k)),Bo(h.eventQueue_,ae,W)}function hl(h,u){ad(h,"connected",u),!1===u&&function Nl(h){Kr(h,"onDisconnectEvents");const u=Ic(h),c=xi();ro(h.onDisconnect_,Ir(),(D,k)=>{const W=Qc(D,k,h.serverSyncTree_,u);vs(c,D,W)});let y=[];ro(c,Ir(),(D,k)=>{y=y.concat(sn(h.serverSyncTree_,D,k));const W=Cc(h,D);Ql(h,W)}),h.onDisconnect_=xi(),Bo(h.eventQueue_,Ir(),y)}(h)}function ad(h,u,c){const y=new Sr("/.info/"+u),D=V(c);h.infoData_.updateSnapshot(y,D);const k=sn(h.infoSyncTree_,y,D);Bo(h.eventQueue_,y,k)}function zu(h){return h.nextWriteId_++}function ld(h,u,c,y,D){Kr(h,"set",{path:u.toString(),value:c,priority:y});const k=Ic(h),W=V(c,y),ae=Da(h.serverSyncTree_,u),Me=$d(W,ae,k),We=zu(h),Lt=Ye(h.serverSyncTree_,u,Me,We,!0);Ml(h.eventQueue_,Lt),h.server_.put(u.toString(),W.val(!0),(Yt,Mn)=>{const hr="ok"===Yt;hr||rr("set at "+u+" failed: "+Yt);const ki=Ht(h.serverSyncTree_,We,!hr);Bo(h.eventQueue_,u,ki),ol(0,D,Yt,Mn)});const Ft=Cc(h,u);Ql(h,Ft),Bo(h.eventQueue_,Ft,[])}function sl(h,u,c){h.server_.onDisconnectCancel(u.toString(),(y,D)=>{"ok"===y&&no(h.onDisconnect_,u),ol(0,c,y,D)})}function Iu(h,u,c,y){const D=V(c);h.server_.onDisconnectPut(u.toString(),D.val(!0),(k,W)=>{"ok"===k&&vs(h.onDisconnect_,u,D),ol(0,y,k,W)})}function Ss(h,u,c){let y;y=".info"===Xn(u._path)?Fn(h.infoSyncTree_,u,c):Fn(h.serverSyncTree_,u,c),pa(h.eventQueue_,u._path,y)}function qu(h){h.persistentConnection_&&h.persistentConnection_.interrupt(Ol)}function Kr(h,...u){let c="";h.persistentConnection_&&(c=h.persistentConnection_.id+":"),Hn(c,...u)}function ol(h,u,c,y){u&&ei(()=>{if("ok"===c)u(null);else{const D=(c||"error").toUpperCase();let k=D;y&&(k+=": "+y);const W=new Error(k);W.code=D,u(W)}})}function al(h,u,c){return Da(h.serverSyncTree_,u,c)||M.EMPTY_NODE}function bc(h,u=h.transactionQueueTree_){if(u||fl(h,u),xo(u)){const c=Uo(h,u);(0,J.hu)(c.length>0,"Sending zero length transaction queue"),c.every(D=>0===D.status)&&function ga(h,u,c){const y=c.map(We=>We.currentWriteId),D=al(h,u,y);let k=D;const W=D.hash();for(let We=0;We<c.length;We++){const Lt=c[We];(0,J.hu)(0===Lt.status,"tryToSendTransactionQueue_: items in queue should all be run."),Lt.status=1,Lt.retryCount++;const Ft=mi(u,Lt.path);k=k.updateChild(Ft,Lt.currentOutputSnapshotRaw)}const ae=k.val(!0),Me=u;h.server_.put(Me.toString(),ae,We=>{Kr(h,"transaction put response",{path:Me.toString(),status:We});let Lt=[];if("ok"===We){const Ft=[];for(let Yt=0;Yt<c.length;Yt++)c[Yt].status=2,Lt=Lt.concat(Ht(h.serverSyncTree_,c[Yt].currentWriteId)),c[Yt].onComplete&&Ft.push(()=>c[Yt].onComplete(null,!0,c[Yt].currentOutputSnapshotResolved)),c[Yt].unwatcher();fl(h,La(h.transactionQueueTree_,u)),bc(h,h.transactionQueueTree_),Bo(h.eventQueue_,u,Lt);for(let Yt=0;Yt<Ft.length;Yt++)ei(Ft[Yt])}else{if("datastale"===We)for(let Ft=0;Ft<c.length;Ft++)c[Ft].status=3===c[Ft].status?4:0;else{rr("transaction at "+Me.toString()+" failed: "+We);for(let Ft=0;Ft<c.length;Ft++)c[Ft].status=4,c[Ft].abortReason=We}Ql(h,u)}},W)}(h,xl(u),c)}else Al(u)&&Va(u,c=>{bc(h,c)})}function Ql(h,u){const c=Wd(h,u),y=xl(c);return function Pl(h,u,c){if(0===u.length)return;const y=[];let D=[];const W=u.filter(ae=>0===ae.status).map(ae=>ae.currentWriteId);for(let ae=0;ae<u.length;ae++){const Me=u[ae],We=mi(c,Me.path);let Ft,Lt=!1;if((0,J.hu)(null!==We,"rerunTransactionsUnderNode_: relativePath should not be null."),4===Me.status)Lt=!0,Ft=Me.abortReason,D=D.concat(Ht(h.serverSyncTree_,Me.currentWriteId,!0));else if(0===Me.status)if(Me.retryCount>=25)Lt=!0,Ft="maxretry",D=D.concat(Ht(h.serverSyncTree_,Me.currentWriteId,!0));else{const Yt=al(h,Me.path,W);Me.currentInputSnapshot=Yt;const Mn=u[ae].update(Yt.val());if(void 0!==Mn){il("transaction failed: Data returned ",Mn,Me.path);let hr=V(Mn);"object"==typeof Mn&&null!=Mn&&(0,J.r3)(Mn,".priority")||(hr=hr.updatePriority(Yt.getPriority()));const co=Me.currentWriteId,El=Ic(h),Bl=$d(hr,Yt,El);Me.currentOutputSnapshotRaw=hr,Me.currentOutputSnapshotResolved=Bl,Me.currentWriteId=zu(h),W.splice(W.indexOf(co),1),D=D.concat(Ye(h.serverSyncTree_,Me.path,Bl,Me.currentWriteId,Me.applyLocally)),D=D.concat(Ht(h.serverSyncTree_,co,!0))}else Lt=!0,Ft="nodata",D=D.concat(Ht(h.serverSyncTree_,Me.currentWriteId,!0))}Bo(h.eventQueue_,c,D),D=[],Lt&&(u[ae].status=2,setTimeout(u[ae].unwatcher,Math.floor(0)),u[ae].onComplete&&y.push("nodata"===Ft?()=>u[ae].onComplete(null,!1,u[ae].currentInputSnapshot):()=>u[ae].onComplete(new Error(Ft),!1,null)))}fl(h,h.transactionQueueTree_);for(let ae=0;ae<y.length;ae++)ei(y[ae]);bc(h,h.transactionQueueTree_)}(h,Uo(h,c),y),y}function Wd(h,u){let c,y=h.transactionQueueTree_;for(c=Xn(u);null!==c&&void 0===xo(y);)y=La(y,c),c=Xn(u=Zr(u));return y}function Uo(h,u){const c=[];return Ku(h,u,c),c.sort((y,D)=>y.order-D.order),c}function Ku(h,u,c){const y=xo(u);if(y)for(let D=0;D<y.length;D++)c.push(y[D]);Va(u,D=>{Ku(h,D,c)})}function fl(h,u){const c=xo(u);if(c){let y=0;for(let D=0;D<c.length;D++)2!==c[D].status&&(c[y]=c[D],y++);c.length=y,ju(u,c.length>0?c:void 0)}Va(u,y=>{fl(h,y)})}function Cc(h,u){const c=xl(Wd(h,u)),y=La(h.transactionQueueTree_,u);return function rl(h,u,c){let y=c?h:h.parent;for(;null!==y;){if(u(y))return!0;y=y.parent}}(y,D=>{Dc(h,D)}),Dc(h,y),jd(y,D=>{Dc(h,D)}),c}function Dc(h,u){const c=xo(u);if(c){const y=[];let D=[],k=-1;for(let W=0;W<c.length;W++)3===c[W].status||(1===c[W].status?((0,J.hu)(k===W-1,"All SENT items should be at beginning of queue."),k=W,c[W].status=3,c[W].abortReason="set"):((0,J.hu)(0===c[W].status,"Unexpected transaction status in abort"),c[W].unwatcher(),D=D.concat(Ht(h.serverSyncTree_,c[W].currentWriteId,!0)),c[W].onComplete&&y.push(c[W].onComplete.bind(null,new Error("set"),!1,null))));-1===k?ju(u,void 0):c.length=k+1,Bo(h.eventQueue_,xl(u),D);for(let W=0;W<y.length;W++)ei(y[W])}}const pl=function(h,u){const c=kl(h),y=c.namespace;return"firebase.com"===c.domain&&Wt(c.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!y||"undefined"===y)&&"localhost"!==c.domain&&Wt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),c.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&rr("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new gt(c.host,c.secure,y,"ws"===c.scheme||"wss"===c.scheme,u,"",y!==c.subdomain),path:new Sr(c.pathString)}},kl=function(h){let u="",c="",y="",D="",k="",W=!0,ae="https",Me=443;if("string"==typeof h){let We=h.indexOf("//");We>=0&&(ae=h.substring(0,We-1),h=h.substring(We+2));let Lt=h.indexOf("/");-1===Lt&&(Lt=h.length);let Ft=h.indexOf("?");-1===Ft&&(Ft=h.length),u=h.substring(0,Math.min(Lt,Ft)),Lt<Ft&&(D=function jr(h){let u="";const c=h.split("/");for(let y=0;y<c.length;y++)if(c[y].length>0){let D=c[y];try{D=decodeURIComponent(D.replace(/\+/g," "))}catch(k){}u+="/"+D}return u}(h.substring(Lt,Ft)));const Yt=function Sc(h){const u={};"?"===h.charAt(0)&&(h=h.substring(1));for(const c of h.split("&")){if(0===c.length)continue;const y=c.split("=");2===y.length?u[decodeURIComponent(y[0])]=decodeURIComponent(y[1]):rr(`Invalid query segment '${c}' in query '${h}'`)}return u}(h.substring(Math.min(h.length,Ft)));We=u.indexOf(":"),We>=0?(W="https"===ae||"wss"===ae,Me=parseInt(u.substring(We+1),10)):We=u.length;const Mn=u.slice(0,We);if("localhost"===Mn.toLowerCase())c="localhost";else if(Mn.split(".").length<=2)c=Mn;else{const hr=u.indexOf(".");y=u.substring(0,hr).toLowerCase(),c=u.substring(hr+1),k=y}"ns"in Yt&&(k=Yt.ns)}return{host:u,port:Me,domain:c,subdomain:y,secure:W,scheme:ae,pathString:D,namespace:k}};class Zu{constructor(u,c,y,D){this.eventType=u,this.eventRegistration=c,this.snapshot=y,this.prevName=D}getPath(){const u=this.snapshot.ref;return"value"===this.eventType?u._path:u.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,J.Wl)(this.snapshot.exportVal())}}class Xl{constructor(u,c,y){this.eventRegistration=u,this.error=c,this.path=y}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Cu{constructor(u,c){this.snapshotCallback=u,this.cancelCallback=c}onValue(u,c){this.snapshotCallback.call(null,u,c)}onCancel(u){return(0,J.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,u)}get hasCancelCallback(){return!!this.cancelCallback}matches(u){return this.snapshotCallback===u.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===u.snapshotCallback.userCallback&&this.snapshotCallback.context===u.snapshotCallback.context}}class jo{constructor(u,c){this._repo=u,this._path=c}cancel(){const u=new J.BH;return sl(this._repo,this._path,u.wrapCallback(()=>{})),u.promise}remove(){Sa("OnDisconnect.remove",this._path);const u=new J.BH;return Iu(this._repo,this._path,null,u.wrapCallback(()=>{})),u.promise}set(u){Sa("OnDisconnect.set",this._path),Ws("OnDisconnect.set",u,this._path,!1);const c=new J.BH;return Iu(this._repo,this._path,u,c.wrapCallback(()=>{})),c.promise}setWithPriority(u,c){Sa("OnDisconnect.setWithPriority",this._path),Ws("OnDisconnect.setWithPriority",u,this._path,!1),td("OnDisconnect.setWithPriority",c,!1);const y=new J.BH;return function wc(h,u,c,y,D){const k=V(c,y);h.server_.onDisconnectPut(u.toString(),k.val(!0),(W,ae)=>{"ok"===W&&vs(h.onDisconnect_,u,k),ol(0,D,W,ae)})}(this._repo,this._path,u,c,y.wrapCallback(()=>{})),y.promise}update(u){Sa("OnDisconnect.update",this._path),Hd("OnDisconnect.update",u,this._path,!1);const c=new J.BH;return function wu(h,u,c,y){if((0,J.xb)(c))return Hn("onDisconnect().update() called with empty data.  Don't do anything."),void ol(0,y,"ok",void 0);h.server_.onDisconnectMerge(u.toString(),c,(D,k)=>{"ok"===D&&Bn(c,(W,ae)=>{const Me=V(ae);vs(h.onDisconnect_,Tr(u,W),Me)}),ol(0,y,D,k)})}(this._repo,this._path,u,c.wrapCallback(()=>{})),c.promise}}class Js{constructor(u,c,y,D){this._repo=u,this._path=c,this._queryParams=y,this._orderByCalled=D}get key(){return dr(this._path)?null:Os(this._path)}get ref(){return new Ro(this._repo,this._path)}get _queryIdentifier(){const u=$r(this._queryParams),c=Tt(u);return"{}"===c?"default":c}get _queryObject(){return $r(this._queryParams)}isEqual(u){if(!((u=(0,J.m9)(u))instanceof Js))return!1;const c=this._repo===u._repo,y=$s(this._path,u._path);return c&&y&&this._queryIdentifier===u._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function aa(h){let u="";for(let c=h.pieceNum_;c<h.pieces_.length;c++)""!==h.pieces_[c]&&(u+="/"+encodeURIComponent(String(h.pieces_[c])));return u||"/"}(this._path)}}function za(h,u){if(!0===h._orderByCalled)throw new Error(u+": You can't combine multiple orderBy calls.")}function gl(h){let u=null,c=null;if(h.hasStart()&&(u=h.getIndexStartValue()),h.hasEnd()&&(c=h.getIndexEndValue()),h.getIndex()===ls){const y="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",D="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(h.hasStart()){if(h.getIndexStartName()!==Cr)throw new Error(y);if("string"!=typeof u)throw new Error(D)}if(h.hasEnd()){if(h.getIndexEndName()!==an)throw new Error(y);if("string"!=typeof c)throw new Error(D)}}else if(h.getIndex()===ri){if(null!=u&&!Zl(u)||null!=c&&!Zl(c))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,J.hu)(h.getIndex()instanceof se||h.getIndex()===Xt,"unknown index type."),null!=u&&"object"==typeof u||null!=c&&"object"==typeof c)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function ml(h){if(h.hasStart()&&h.hasEnd()&&h.hasLimit()&&!h.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Ro extends Js{constructor(u,c){super(u,c,new Z,!1)}get parent(){const u=Bs(this._path);return null===u?null:new Ro(this._repo,u)}get root(){let u=this;for(;null!==u.parent;)u=u.parent;return u}}class Jl{constructor(u,c,y){this._node=u,this.ref=c,this._index=y}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(u){const c=new Sr(u),y=zs(this.ref,u);return new Jl(this._node.getChild(c),y,ri)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(u){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(y,D)=>u(new Jl(D,zs(this.ref,y),ri)))}hasChild(u){const c=new Sr(u);return!this._node.getChild(c).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Qu(h,u){return(h=(0,J.m9)(h))._checkNotDeleted("ref"),void 0!==u?zs(h._root,u):h._root}function yl(h,u){(h=(0,J.m9)(h))._checkNotDeleted("refFromURL");const c=pl(u,h._repo.repoInfo_.nodeAdmin);rd("refFromURL",c);const y=c.repoInfo;return!h._repo.repoInfo_.isCustomHost()&&y.host!==h._repo.repoInfo_.host&&Wt("refFromURL: Host name does not match the current database: (found "+y.host+" but expected "+h._repo.repoInfo_.host+")"),Qu(h,c.path.toString())}function zs(h,u){return null===Xn((h=(0,J.m9)(h))._path)?(c=u,c&&(c=c.replace(/^\/*\.info(\/|$)/,"/")),Gu("child","path",c,!1)):Gu("child","path",u,!1),new Ro(h._repo,Tr(h._path,u));var c}function Tc(h,u){h=(0,J.m9)(h),Sa("set",h._path),Ws("set",u,h._path,!1);const c=new J.BH;return ld(h._repo,h._path,u,null,c.wrapCallback(()=>{})),c.promise}function Xu(h,u){Hd("update",u,h._path,!1);const c=new J.BH;return function ud(h,u,c,y){Kr(h,"update",{path:u.toString(),value:c});let D=!0;const k=Ic(h),W={};if(Bn(c,(ae,Me)=>{D=!1,W[ae]=Qc(Tr(u,ae),V(Me),h.serverSyncTree_,k)}),D)Hn("update() called with empty data.  Don't do anything."),ol(0,y,"ok",void 0);else{const ae=zu(h),Me=function wt(h,u,c,y){!function hu(h,u,c,y){(0,J.hu)(y>h.lastWriteId,"Stacking an older merge on top of newer ones"),h.allWrites.push({path:u,children:c,writeId:y,visible:!0}),h.visibleWrites=Pt(h.visibleWrites,u,c),h.lastWriteId=y}(h.pendingWriteTree_,u,c,y);const D=En.fromObject(c);return ha(h,new Zo({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},u,D))}(h.serverSyncTree_,u,W,ae);Ml(h.eventQueue_,Me),h.server_.merge(u.toString(),c,(We,Lt)=>{const Ft="ok"===We;Ft||rr("update at "+u+" failed: "+We);const Yt=Ht(h.serverSyncTree_,ae,!Ft),Mn=Yt.length>0?Ql(h,u):u;Bo(h.eventQueue_,Mn,Yt),ol(0,y,We,Lt)}),Bn(c,We=>{const Lt=Cc(h,Tr(u,We));Ql(h,Lt)}),Bo(h.eventQueue_,u,[])}}(h._repo,h._path,u,c.wrapCallback(()=>{})),c.promise}function Ac(h){h=(0,J.m9)(h);const u=new Cu(()=>{}),c=new vl(u);return function Yu(h,u,c){const y=function tl(h,u){const c=u._path;let y=null;h.syncPointTree_.foreachOnPath(c,(We,Lt)=>{const Ft=mi(We,c);y=y||N(Lt,Ft)});let D=h.syncPointTree_.get(c);D?y=y||N(D,Ir()):(D=new yu,h.syncPointTree_=h.syncPointTree_.set(c,D));const k=null!=y,W=k?new po(y,!0,!1):null;return function ra(h){return vi(h.viewCache_)}(ia(D,u,Jo(h.pendingWriteTree_,u._path),k?W.getNode():M.EMPTY_NODE,k))}(h.serverSyncTree_,u);return null!=y?Promise.resolve(y):h.server_.get(u).then(D=>{const k=V(D).withIndex(u._queryParams.getIndex());let W;if(lo(h.serverSyncTree_,u,c,!0),u._queryParams.loadsAllData())W=sn(h.serverSyncTree_,u._path,k);else{const ae=fa(h.serverSyncTree_,u);W=hs(h.serverSyncTree_,u._path,k,ae)}return Bo(h.eventQueue_,u._path,W),Fn(h.serverSyncTree_,u,c,null,!0),k},D=>(Kr(h,"get for query "+(0,J.Wl)(u)+" failed: "+D),Promise.reject(new Error(D))))}(h._repo,h,c).then(y=>new Jl(y,new Ro(h._repo,h._path),h._queryParams.getIndex()))}class vl{constructor(u){this.callbackContext=u}respondsTo(u){return"value"===u}createEvent(u,c){const y=c._queryParams.getIndex();return new Zu("value",this,new Jl(u.snapshotNode,new Ro(c._repo,c._path),y))}getEventRunner(u){return"cancel"===u.getEventType()?()=>this.callbackContext.onCancel(u.error):()=>this.callbackContext.onValue(u.snapshot,null)}createCancelEvent(u,c){return this.callbackContext.hasCancelCallback?new Xl(this,u,c):null}matches(u){return u instanceof vl&&(!u.callbackContext||!this.callbackContext||u.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Ta{constructor(u,c){this.eventType=u,this.callbackContext=c}respondsTo(u){let c="children_added"===u?"child_added":u;return c="children_removed"===c?"child_removed":c,this.eventType===c}createCancelEvent(u,c){return this.callbackContext.hasCancelCallback?new Xl(this,u,c):null}createEvent(u,c){(0,J.hu)(null!=u.childName,"Child events should have a childName.");const y=zs(new Ro(c._repo,c._path),u.childName),D=c._queryParams.getIndex();return new Zu(u.type,this,new Jl(u.snapshotNode,y,D),u.prevName)}getEventRunner(u){return"cancel"===u.getEventType()?()=>this.callbackContext.onCancel(u.error):()=>this.callbackContext.onValue(u.snapshot,u.prevName)}matches(u){return u instanceof Ta&&this.eventType===u.eventType&&(!this.callbackContext||!u.callbackContext||this.callbackContext.matches(u.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Ba(h,u,c,y,D){let k;if("object"==typeof y&&(k=void 0,D=y),"function"==typeof y&&(k=y),D&&D.onlyOnce){const Me=c,We=(Lt,Ft)=>{Ss(h._repo,h,ae),Me(Lt,Ft)};We.userCallback=c.userCallback,We.context=c.context,c=We}const W=new Cu(c,k||void 0),ae="value"===u?new vl(W):new Ta(u,W);return function bu(h,u,c){let y;y=".info"===Xn(u._path)?lo(h.infoSyncTree_,u,c):lo(h.serverSyncTree_,u,c),pa(h.eventQueue_,u._path,y)}(h._repo,h,ae),()=>Ss(h._repo,h,ae)}function Ju(h,u,c,y){return Ba(h,"value",u,c,y)}function xc(h,u,c,y){return Ba(h,"child_added",u,c,y)}function Yd(h,u,c,y){return Ba(h,"child_changed",u,c,y)}function _l(h,u,c,y){return Ba(h,"child_moved",u,c,y)}function hd(h,u,c,y){return Ba(h,"child_removed",u,c,y)}function qd(h,u,c){let y=null;const D=c?new Cu(c):null;"value"===u?y=new vl(D):u&&(y=new Ta(u,D)),Ss(h._repo,h,y)}class Ho{}class Mc extends Ho{constructor(u,c){super(),this._value=u,this._key=c}_apply(u){Ws("endAt",this._value,u._path,!0);const c=xn(u._queryParams,this._value,this._key);if(ml(c),gl(c),u._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Js(u._repo,u._path,c,u._orderByCalled)}}class p extends Ho{constructor(u,c){super(),this._value=u,this._key=c}_apply(u){Ws("endBefore",this._value,u._path,!1);const c=function qr(h,u,c){let y,D;return h.index_===ls?("string"==typeof u&&(u=bs(u)),D=xn(h,u,c)):(y=null==c?Cr:bs(c),D=xn(h,u,y)),D.endBeforeSet_=!0,D}(u._queryParams,this._value,this._key);if(ml(c),gl(c),u._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Js(u._repo,u._path,c,u._orderByCalled)}}class A extends Ho{constructor(u,c){super(),this._value=u,this._key=c}_apply(u){Ws("startAt",this._value,u._path,!0);const c=St(u._queryParams,this._value,this._key);if(ml(c),gl(c),u._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Js(u._repo,u._path,c,u._orderByCalled)}}class ue extends Ho{constructor(u,c){super(),this._value=u,this._key=c}_apply(u){Ws("startAfter",this._value,u._path,!1);const c=function kt(h,u,c){let y;if(h.index_===ls)"string"==typeof u&&(u=ns(u)),y=St(h,u,c);else{let D;D=null==c?an:ns(c),y=St(h,u,D)}return y.startAfterSet_=!0,y}(u._queryParams,this._value,this._key);if(ml(c),gl(c),u._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Js(u._repo,u._path,c,u._orderByCalled)}}class Bt extends Ho{constructor(u){super(),this._limit=u}_apply(u){if(u._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Js(u._repo,u._path,function re(h,u){const c=h.copy();return c.limitSet_=!0,c.limit_=u,c.viewFrom_="l",c}(u._queryParams,this._limit),u._orderByCalled)}}class Un extends Ho{constructor(u){super(),this._limit=u}_apply(u){if(u._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Js(u._repo,u._path,function ke(h,u){const c=h.copy();return c.limitSet_=!0,c.limit_=u,c.viewFrom_="r",c}(u._queryParams,this._limit),u._orderByCalled)}}class jn extends Ho{constructor(u){super(),this._path=u}_apply(u){za(u,"orderByChild");const c=new Sr(this._path);if(dr(c))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const y=new se(c),D=Gr(u._queryParams,y);return gl(D),new Js(u._repo,u._path,D,!0)}}class ma extends Ho{_apply(u){za(u,"orderByKey");const c=Gr(u._queryParams,ls);return gl(c),new Js(u._repo,u._path,c,!0)}}class Kd extends Ho{_apply(u){za(u,"orderByPriority");const c=Gr(u._queryParams,ri);return gl(c),new Js(u._repo,u._path,c,!0)}}class Zd extends Ho{_apply(u){za(u,"orderByValue");const c=Gr(u._queryParams,Xt);return gl(c),new Js(u._repo,u._path,c,!0)}}class Qd extends Ho{constructor(u,c){super(),this._value=u,this._key=c}_apply(u){if(Ws("equalTo",this._value,u._path,!1),u._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(u._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Mc(this._value,this._key)._apply(new A(this._value,this._key)._apply(u))}}function Ya(h,...u){let c=(0,J.m9)(h);for(const y of u)c=y._apply(c);return c}(function _s(h){(0,J.hu)(!ao,"__referenceConstructor has already been defined"),ao=h})(Ro),function O(h){(0,J.hu)(!It,"__referenceConstructor has already been defined"),It=h}(Ro);const ec={};function pd(h,u,c,y,D){let k=y||h.options.databaseURL;void 0===k&&(h.options.projectId||Wt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Hn("Using default host for project ",h.options.projectId),k=`${h.options.projectId}-default-rtdb.firebaseio.com`);let Me,We,W=pl(k,D),ae=W.repoInfo;"undefined"!=typeof process&&process.env&&(We=process.env.FIREBASE_DATABASE_EMULATOR_HOST),We?(Me=!0,k=`http://${We}?ns=${ae.namespace}`,W=pl(k,D),ae=W.repoInfo):Me=!W.repoInfo.secure;const Lt=D&&Me?new Cn(Cn.OWNER):new kn(h.name,h.options,u);rd("Invalid Firebase Database URL",W),dr(W.path)||Wt("Database URL must point to the root of a Firebase Database (not including a child path).");const Ft=function kh(h,u,c,y){let D=ec[u.name];D||(D={},ec[u.name]=D);let k=D[h.toURLString()];return k&&Wt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),k=new id(h,false,c,y),D[h.toURLString()]=k,k}(ae,h,Lt,new ln(h.name,c));return new Fh(Ft,h)}class Fh{constructor(u,c){this._repoInternal=u,this.app=c,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Ec(h,u,c){if(h.stats_=pn(h.repoInfo_),h.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)h.server_=new Oi(h.repoInfo_,(y,D,k,W)=>{ss(h,y,D,k,W)},h.authTokenProvider_,h.appCheckProvider_),setTimeout(()=>hl(h,!0),0);else{if(null!=c){if("object"!=typeof c)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,J.Wl)(c)}catch(y){throw new Error("Invalid authOverride provided: "+y)}}h.persistentConnection_=new yi(h.repoInfo_,u,(y,D,k,W)=>{ss(h,y,D,k,W)},y=>{hl(h,y)},y=>{!function od(h,u){Bn(u,(c,y)=>{ad(h,c,y)})}(h,y)},h.authTokenProvider_,h.appCheckProvider_,c),h.server_=h.persistentConnection_}h.authTokenProvider_.addTokenChangeListener(y=>{h.server_.refreshAuthToken(y)}),h.appCheckProvider_.addTokenChangeListener(y=>{h.server_.refreshAppCheckToken(y.token)}),h.statsReporter_=function Zt(h,u){const c=h.toString();return fn[c]||(fn[c]=u()),fn[c]}(h.repoInfo_,()=>new rs(h.stats_,h.server_)),h.infoData_=new ii,h.infoSyncTree_=new fe({startListening:(y,D,k,W)=>{let ae=[];const Me=h.infoData_.getNode(y._path);return Me.isEmpty()||(ae=sn(h.infoSyncTree_,y._path,Me),setTimeout(()=>{W("ok")},0)),ae},stopListening:()=>{}}),ad(h,"connected",!1),h.serverSyncTree_=new fe({startListening:(y,D,k,W)=>(h.server_.listen(y,k,D,(ae,Me)=>{const We=W(ae,Me);Bo(h.eventQueue_,y._path,We)}),[]),stopListening:(y,D)=>{h.server_.unlisten(y,D)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ro(this._repo,Ir())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function Tf(h,u){const c=ec[u];(!c||c[h.key]!==h)&&Wt(`Database ${u}(${h.repoInfo_}) has already been deleted.`),qu(h),delete c[h.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(u){null===this._rootInternal&&Wt("Cannot call "+u+" on a deleted database.")}}function Nc(){Ct.IS_TRANSPORT_INITIALIZED&&rr("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Bp(){Nc(),fi.forceDisallow()}function Af(){Nc(),Xe.forceDisallow(),fi.forceAllow()}function Lh(h,u){cr(h,u)}const gd={".sv":"timestamp"};class Du{constructor(u,c){this.committed=u,this.snapshot=c}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}yi.prototype.simpleListen=function(h,u){this.sendRequest("q",{p:h},u)},yi.prototype.echo=function(h,u){this.sendRequest("echo",{d:h},u)},function Go(h){Ue(lt.SDK_VERSION),(0,lt._registerComponent)(new Ce.wA("database",(u,{instanceIdentifier:c})=>pd(u.getProvider("app").getImmediate(),u.getProvider("auth-internal"),u.getProvider("app-check-internal"),c),"PUBLIC").setMultipleInstances(!0)),(0,lt.registerVersion)(bt,at,h),(0,lt.registerVersion)(bt,at,"esm2017")}();const Su=new Gt.Yd("@firebase/database-compat"),Ll=function(h){Su.warn("FIREBASE WARNING: "+h)};class Jd{constructor(u){this._delegate=u}cancel(u){(0,J.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,J.Wj)("OnDisconnect.cancel","onComplete",u,!0);const c=this._delegate.cancel();return u&&c.then(()=>u(null),y=>u(y)),c}remove(u){(0,J.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,J.Wj)("OnDisconnect.remove","onComplete",u,!0);const c=this._delegate.remove();return u&&c.then(()=>u(null),y=>u(y)),c}set(u,c){(0,J.Dv)("OnDisconnect.set",1,2,arguments.length),(0,J.Wj)("OnDisconnect.set","onComplete",c,!0);const y=this._delegate.set(u);return c&&y.then(()=>c(null),D=>c(D)),y}setWithPriority(u,c,y){(0,J.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,J.Wj)("OnDisconnect.setWithPriority","onComplete",y,!0);const D=this._delegate.setWithPriority(u,c);return y&&D.then(()=>y(null),k=>y(k)),D}update(u,c){if((0,J.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(u)){const D={};for(let k=0;k<u.length;++k)D[""+k]=u[k];u=D,Ll("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,J.Wj)("OnDisconnect.update","onComplete",c,!0);const y=this._delegate.update(u);return c&&y.then(()=>c(null),D=>c(D)),y}}class Uh{constructor(u,c){this.committed=u,this.snapshot=c}toJSON(){return(0,J.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class nu{constructor(u,c){this._database=u,this._delegate=c}val(){return(0,J.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,J.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,J.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,J.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(u){return(0,J.Dv)("DataSnapshot.child",0,1,arguments.length),u=String(u),Gu("DataSnapshot.child","path",u,!1),new nu(this._database,this._delegate.child(u))}hasChild(u){return(0,J.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Gu("DataSnapshot.hasChild","path",u,!1),this._delegate.hasChild(u)}getPriority(){return(0,J.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(u){return(0,J.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,J.Wj)("DataSnapshot.forEach","action",u,!1),this._delegate.forEach(c=>u(new nu(this._database,c)))}hasChildren(){return(0,J.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,J.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,J.Dv)("DataSnapshot.ref",0,0,arguments.length),new qa(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Oo{constructor(u,c){this.database=u,this._delegate=c}on(u,c,y,D){var k;(0,J.Dv)("Query.on",2,4,arguments.length),(0,J.Wj)("Query.on","callback",c,!1);const W=Oo.getCancelAndContextArgs_("Query.on",y,D),ae=(We,Lt)=>{c.call(W.context,new nu(this.database,We),Lt)};ae.userCallback=c,ae.context=W.context;const Me=null===(k=W.cancel)||void 0===k?void 0:k.bind(W.context);switch(u){case"value":return Ju(this._delegate,ae,Me),c;case"child_added":return xc(this._delegate,ae,Me),c;case"child_removed":return hd(this._delegate,ae,Me),c;case"child_changed":return Yd(this._delegate,ae,Me),c;case"child_moved":return _l(this._delegate,ae,Me),c;default:throw new Error((0,J.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(u,c,y){if((0,J.Dv)("Query.off",0,3,arguments.length),function(h,u,c){if(void 0!==u)switch(u){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,J.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,u),(0,J.Wj)("Query.off","callback",c,!0),(0,J.lb)("Query.off","context",y,!0),c){const D=()=>{};D.userCallback=c,D.context=y,qd(this._delegate,u,D)}else qd(this._delegate,u)}get(){return Ac(this._delegate).then(u=>new nu(this.database,u))}once(u,c,y,D){(0,J.Dv)("Query.once",1,4,arguments.length),(0,J.Wj)("Query.once","callback",c,!0);const k=Oo.getCancelAndContextArgs_("Query.once",y,D),W=new J.BH,ae=(We,Lt)=>{const Ft=new nu(this.database,We);c&&c.call(k.context,Ft,Lt),W.resolve(Ft)};ae.userCallback=c,ae.context=k.context;const Me=We=>{k.cancel&&k.cancel.call(k.context,We),W.reject(We)};switch(u){case"value":Ju(this._delegate,ae,Me,{onlyOnce:!0});break;case"child_added":xc(this._delegate,ae,Me,{onlyOnce:!0});break;case"child_removed":hd(this._delegate,ae,Me,{onlyOnce:!0});break;case"child_changed":Yd(this._delegate,ae,Me,{onlyOnce:!0});break;case"child_moved":_l(this._delegate,ae,Me,{onlyOnce:!0});break;default:throw new Error((0,J.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return W.promise}limitToFirst(u){return(0,J.Dv)("Query.limitToFirst",1,1,arguments.length),new Oo(this.database,Ya(this._delegate,function hn(h){if("number"!=typeof h||Math.floor(h)!==h||h<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Bt(h)}(u)))}limitToLast(u){return(0,J.Dv)("Query.limitToLast",1,1,arguments.length),new Oo(this.database,Ya(this._delegate,function gr(h){if("number"!=typeof h||Math.floor(h)!==h||h<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Un(h)}(u)))}orderByChild(u){return(0,J.Dv)("Query.orderByChild",1,1,arguments.length),new Oo(this.database,Ya(this._delegate,function uo(h){if("$key"===h)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===h)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===h)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Gu("orderByChild","path",h,!1),new jn(h)}(u)))}orderByKey(){return(0,J.Dv)("Query.orderByKey",0,0,arguments.length),new Oo(this.database,Ya(this._delegate,function $a(){return new ma}()))}orderByPriority(){return(0,J.Dv)("Query.orderByPriority",0,0,arguments.length),new Oo(this.database,Ya(this._delegate,function Fl(){return new Kd}()))}orderByValue(){return(0,J.Dv)("Query.orderByValue",0,0,arguments.length),new Oo(this.database,Ya(this._delegate,function Nh(){return new Zd}()))}startAt(u=null,c){return(0,J.Dv)("Query.startAt",0,2,arguments.length),new Oo(this.database,Ya(this._delegate,function K(h=null,u){return Hu("startAt","key",u,!0),new A(h,u)}(u,c)))}startAfter(u=null,c){return(0,J.Dv)("Query.startAfter",0,2,arguments.length),new Oo(this.database,Ya(this._delegate,function rt(h,u){return Hu("startAfter","key",u,!0),new ue(h,u)}(u,c)))}endAt(u=null,c){return(0,J.Dv)("Query.endAt",0,2,arguments.length),new Oo(this.database,Ya(this._delegate,function b(h,u){return Hu("endAt","key",u,!0),new Mc(h,u)}(u,c)))}endBefore(u=null,c){return(0,J.Dv)("Query.endBefore",0,2,arguments.length),new Oo(this.database,Ya(this._delegate,function _(h,u){return Hu("endBefore","key",u,!0),new p(h,u)}(u,c)))}equalTo(u,c){return(0,J.Dv)("Query.equalTo",1,2,arguments.length),new Oo(this.database,Ya(this._delegate,function Ph(h,u){return Hu("equalTo","key",u,!0),new Qd(h,u)}(u,c)))}toString(){return(0,J.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,J.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(u){if((0,J.Dv)("Query.isEqual",1,1,arguments.length),!(u instanceof Oo))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(u._delegate)}static getCancelAndContextArgs_(u,c,y){const D={cancel:void 0,context:void 0};if(c&&y)D.cancel=c,(0,J.Wj)(u,"cancel",D.cancel,!0),D.context=y,(0,J.lb)(u,"context",D.context,!0);else if(c)if("object"==typeof c&&null!==c)D.context=c;else{if("function"!=typeof c)throw new Error((0,J.gK)(u,"cancelOrContext")+" must either be a cancel callback or a context object.");D.cancel=c}return D}get ref(){return new qa(this.database,new Ro(this._delegate._repo,this._delegate._path))}}class qa extends Oo{constructor(u,c){super(u,new Js(c._repo,c._path,new Z,!1)),this.database=u,this._delegate=c}getKey(){return(0,J.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(u){return(0,J.Dv)("Reference.child",1,1,arguments.length),"number"==typeof u&&(u=String(u)),new qa(this.database,zs(this._delegate,u))}getParent(){(0,J.Dv)("Reference.parent",0,0,arguments.length);const u=this._delegate.parent;return u?new qa(this.database,u):null}getRoot(){return(0,J.Dv)("Reference.root",0,0,arguments.length),new qa(this.database,this._delegate.root)}set(u,c){(0,J.Dv)("Reference.set",1,2,arguments.length),(0,J.Wj)("Reference.set","onComplete",c,!0);const y=Tc(this._delegate,u);return c&&y.then(()=>c(null),D=>c(D)),y}update(u,c){if((0,J.Dv)("Reference.update",1,2,arguments.length),Array.isArray(u)){const D={};for(let k=0;k<u.length;++k)D[""+k]=u[k];u=D,Ll("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Sa("Reference.update",this._delegate._path),(0,J.Wj)("Reference.update","onComplete",c,!0);const y=Xu(this._delegate,u);return c&&y.then(()=>c(null),D=>c(D)),y}setWithPriority(u,c,y){(0,J.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,J.Wj)("Reference.setWithPriority","onComplete",y,!0);const D=function qi(h,u,c){if(Sa("setWithPriority",h._path),Ws("setWithPriority",u,h._path,!1),td("setWithPriority",c,!1),".length"===h.key||".keys"===h.key)throw"setWithPriority failed: "+h.key+" is a read-only object.";const y=new J.BH;return ld(h._repo,h._path,u,c,y.wrapCallback(()=>{})),y.promise}(this._delegate,u,c);return y&&D.then(()=>y(null),k=>y(k)),D}remove(u){(0,J.Dv)("Reference.remove",0,1,arguments.length),(0,J.Wj)("Reference.remove","onComplete",u,!0);const c=function dd(h){return Sa("remove",h._path),Tc(h,null)}(this._delegate);return u&&c.then(()=>u(null),y=>u(y)),c}transaction(u,c,y){(0,J.Dv)("Reference.transaction",1,3,arguments.length),(0,J.Wj)("Reference.transaction","transactionUpdate",u,!1),(0,J.Wj)("Reference.transaction","onComplete",c,!0),function(h,u,c,y){if(void 0!==c&&"boolean"!=typeof c)throw new Error((0,J.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,y);const D=function $h(h,u,c){var y;if(h=(0,J.m9)(h),Sa("Reference.transaction",h._path),".length"===h.key||".keys"===h.key)throw"Reference.transaction failed: "+h.key+" is a read-only object.";const D=null===(y=null==c?void 0:c.applyLocally)||void 0===y||y,k=new J.BH,ae=Ju(h,()=>{});return function cd(h,u,c,y,D,k){Kr(h,"transaction on "+u);const W={path:u,update:c,onComplete:y,status:null,order:bn(),applyLocally:k,retryCount:0,unwatcher:D,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},ae=al(h,u,void 0);W.currentInputSnapshot=ae;const Me=W.update(ae.val());if(void 0===Me)W.unwatcher(),W.currentOutputSnapshotRaw=null,W.currentOutputSnapshotResolved=null,W.onComplete&&W.onComplete(null,!1,W.currentInputSnapshot);else{il("transaction failed: Data returned ",Me,W.path),W.status=0;const We=La(h.transactionQueueTree_,u),Lt=xo(We)||[];let Ft;Lt.push(W),ju(We,Lt),"object"==typeof Me&&null!==Me&&(0,J.r3)(Me,".priority")?(Ft=(0,J.DV)(Me,".priority"),(0,J.hu)(Zl(Ft),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):Ft=(Da(h.serverSyncTree_,u)||M.EMPTY_NODE).getPriority().val();const Yt=Ic(h),Mn=V(Me,Ft),hr=$d(Mn,ae,Yt);W.currentOutputSnapshotRaw=Mn,W.currentOutputSnapshotResolved=hr,W.currentWriteId=zu(h);const ki=Ye(h.serverSyncTree_,u,hr,W.currentWriteId,W.applyLocally);Bo(h.eventQueue_,u,ki),bc(h,h.transactionQueueTree_)}}(h._repo,h._path,u,(Me,We,Lt)=>{let Ft=null;Me?k.reject(Me):(Ft=new Jl(Lt,new Ro(h._repo,h._path),ri),k.resolve(new Du(We,Ft)))},ae,D),k.promise}(this._delegate,u,{applyLocally:y}).then(k=>new Uh(k.committed,new nu(this.database,k.snapshot)));return c&&D.then(k=>c(null,k.committed,k.snapshot),k=>c(k,!1,null)),D}setPriority(u,c){(0,J.Dv)("Reference.setPriority",1,2,arguments.length),(0,J.Wj)("Reference.setPriority","onComplete",c,!0);const y=function eu(h,u){h=(0,J.m9)(h),Sa("setPriority",h._path),td("setPriority",u,!1);const c=new J.BH;return ld(h._repo,Tr(h._path,".priority"),u,null,c.wrapCallback(()=>{})),c.promise}(this._delegate,u);return c&&y.then(()=>c(null),D=>c(D)),y}push(u,c){(0,J.Dv)("Reference.push",0,2,arguments.length),(0,J.Wj)("Reference.push","onComplete",c,!0);const y=function eo(h,u){h=(0,J.m9)(h),Sa("push",h._path),Ws("push",u,h._path,!0);const c=sd(h._repo),y=ci(c),D=zs(h,y),k=zs(h,y);let W;return W=null!=u?Tc(k,u).then(()=>k):Promise.resolve(k),D.then=W.then.bind(W),D.catch=W.then.bind(W,void 0),D}(this._delegate,u),D=y.then(W=>new qa(this.database,W));c&&D.then(()=>c(null),W=>c(W));const k=new qa(this.database,y);return k.then=D.then.bind(D),k.catch=D.catch.bind(D,void 0),k}onDisconnect(){return Sa("Reference.onDisconnect",this._delegate._path),new Jd(new jo(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class tc{constructor(u,c){this._delegate=u,this.app=c,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Bp,forceLongPolling:Af}}useEmulator(u,c,y={}){!function Xd(h,u,c,y={}){(h=(0,J.m9)(h))._checkNotDeleted("useEmulator"),h._instanceStarted&&Wt("Cannot call useEmulator() after instance has already been initialized.");const D=h._repoInternal;let k;if(D.repoInfo_.nodeAdmin)y.mockUserToken&&Wt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),k=new Cn(Cn.OWNER);else if(y.mockUserToken){const W="string"==typeof y.mockUserToken?y.mockUserToken:(0,J.Sg)(y.mockUserToken,h.app.options.projectId);k=new Cn(W)}!function Oc(h,u,c,y){h.repoInfo_=new gt(`${u}:${c}`,!1,h.repoInfo_.namespace,h.repoInfo_.webSocketOnly,h.repoInfo_.nodeAdmin,h.repoInfo_.persistenceKey,h.repoInfo_.includeNamespaceInQueryParams),y&&(h.authTokenProvider_=y)}(D,u,c,k)}(this._delegate,u,c,y)}ref(u){if((0,J.Dv)("database.ref",0,1,arguments.length),u instanceof qa){const c=yl(this._delegate,u.toString());return new qa(this,c)}{const c=Qu(this._delegate,u);return new qa(this,c)}}refFromURL(u){(0,J.Dv)("database.refFromURL",1,1,arguments.length);const y=yl(this._delegate,u);return new qa(this,y)}goOffline(){return(0,J.Dv)("database.goOffline",0,0,arguments.length),function xf(h){(h=(0,J.m9)(h))._checkNotDeleted("goOffline"),qu(h._repo)}(this._delegate)}goOnline(){return(0,J.Dv)("database.goOnline",0,0,arguments.length),function $p(h){(h=(0,J.m9)(h))._checkNotDeleted("goOnline"),function Xs(h){h.persistentConnection_&&h.persistentConnection_.resume(Ol)}(h._repo)}(this._delegate)}}tc.ServerValue={TIMESTAMP:function Vh(){return gd}(),increment:h=>function Bh(h){return{".sv":{increment:h}}}(h)};var md=Object.freeze({__proto__:null,initStandalone:function Mf({app:h,url:u,version:c,customAuthImpl:y,namespace:D,nodeAdmin:k=!1}){Ue(c);const W=new Ce.zt("auth-internal",new Ce.H0("database-standalone"));return W.setComponent(new Ce.wA("auth-internal",()=>y,"PRIVATE")),{instance:new tc(pd(h,W,void 0,u,k),h),namespace:D}}});const yd=tc.ServerValue;!function nc(h){h.INTERNAL.registerComponent(new Ce.wA("database-compat",(u,{instanceIdentifier:c})=>{const y=u.getProvider("app-compat").getImmediate(),D=u.getProvider("database").getImmediate({identifier:c});return new tc(D,y)},"PUBLIC").setServiceProps({Reference:qa,Query:Oo,Database:tc,DataSnapshot:nu,enableLogging:Lh,INTERNAL:md,ServerValue:yd}).setMultipleInstances(!0)),h.registerVersion("@firebase/database-compat","0.2.10")}(oe.Z);var Tu=H(4941),Rf=H(440),jp=H(127);function Fc(h){return null==h}function Au(h){return"function"==typeof h.set}function rc(h,u){return Au(u)?u:h.ref(u)}function Of(h,u){if(function kc(h){return"string"==typeof h}(h))return u.stringCase();if(Au(h))return u.firebaseCase();if(function ru(h){return"function"==typeof h.exportVal}(h))return u.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof h)}function Lc(h,u,c="on",y=be.z){return new ce.y(D=>{let k=null;return k=h[c](u,(W,ae)=>{y.schedule(()=>{D.next({snapshot:W,prevKey:ae})}),"once"===c&&y.schedule(()=>D.complete())},W=>{y.schedule(()=>D.error(W))}),"on"===c?{unsubscribe(){null!=k&&h.off(u,k)}}:{unsubscribe(){}}}).pipe((0,Ie.U)(D=>{const{snapshot:k,prevKey:W}=D;let ae=null;return k.exists()&&(ae=k.key),{type:u,payload:k,prevKey:W,key:ae}}),(0,Ge.B)())}function Ka(h,u){const c=h.length;for(let y=0;y<c;y++)if(h[y].payload.key===u)return y;return-1}function jh(h,u){const{payload:c,prevKey:y,key:D}=u,k=Ka(h,D),W=function Vc(h,u){if(Fc(u))return 0;{const c=Ka(h,u);return-1===c?h.length:c+1}}(h,y);switch(u.type){case"value":if(u.payload&&u.payload.exists()){let ae=null;u.payload.forEach(Me=>{const We={payload:Me,type:"value",prevKey:ae,key:Me.key};return ae=Me.key,h=[...h,We],!1})}return h;case"child_added":if(k>-1){const ae=h[k-1];(ae&&ae.key||null)!==y&&(h=h.filter(Me=>Me.payload.key!==c.key)).splice(W,0,u)}else{if(null==y)return[u,...h];(h=h.slice()).splice(W,0,u)}return h;case"child_removed":return h.filter(ae=>ae.payload.key!==c.key);case"child_changed":return h.map(ae=>ae.payload.key===D?u:ae);case"child_moved":if(k>-1){const ae=h.splice(k,1)[0];return(h=h.slice()).splice(W,0,ae),h}return h;default:return h}}function Hh(h){return(Fc(h)||0===h.length)&&(h=["child_added","child_removed","child_changed","child_moved"]),h}function ic(h,u,c){return function Em(h,u,c){return Lc(h,"value","once",c).pipe((0,st.w)(y=>{const D=[(0,de.of)(y)];return u.forEach(k=>D.push(Lc(h,k,"on",c))),(0,ie.T)(...D).pipe((0,et.R)(jh,[]))}),(0,Re.x)())}(h,u=Hh(u),c)}function vd(h,u,c){const y=(u=Hh(u)).map(D=>Lc(h,D,"on",c));return(0,ie.T)(...y)}function sa(h,u){return function(y,D){return Of(y,{stringCase:()=>h.child(y)[u](D),firebaseCase:()=>y[u](D),snapshotCase:()=>y.ref[u](D)})}}function eh(h){return function(c){return c?Of(c,{stringCase:()=>h.child(c).remove(),firebaseCase:()=>c.remove(),snapshotCase:()=>c.ref.remove()}):h.remove()}}function th(h,u){return function(){return Lc(h,"value","on",u)}}const Vl=new ne.OlP("angularfire2.realtimeDatabaseURL"),oc=new ne.OlP("angularfire2.database.use-emulator");let kf=(()=>{class h{constructor(c,y,D,k,W,ae,Me,We,Lt,Ft,Yt,Mn,hr,ki,co){this.schedulers=ae;const El=Me,Bl=(0,pe.on)(c,W,y);We&&(0,Tu.nw)(Bl,W,Lt,Yt,Mn,hr,Ft,ki),this.database=(0,pe.cc)(`${Bl.name}.database.${D}`,"AngularFireDatabase",Bl.name,()=>{const ac=W.runOutsideAngular(()=>Bl.database(D||void 0));return El&&ac.useEmulator(...El),ac},[El])}list(c,y){const D=this.schedulers.ngZone.runOutsideAngular(()=>rc(this.database,c));let k=D;return y&&(k=y(D)),function _d(h,u){const c=u.schedulers.outsideAngular,y=u.schedulers.ngZone.run(()=>h.ref);return{query:h,update:sa(y,"update"),set:sa(y,"set"),push:D=>y.push(D),remove:eh(y),snapshotChanges:D=>ic(h,D,c).pipe(Oe.iC),stateChanges:D=>vd(h,D,c).pipe(Oe.iC),auditTrail:D=>function iu(h,u,c){return function Pf(h,u,c){return function Nf(h,u){return Lc(h,"value","on",u).pipe((0,Ie.U)(c=>{let y;return c.payload.forEach(D=>(y=D.key,!1)),{data:c,lastKeyToLoad:y}}))}(h,c).pipe(function me(...h){return u=>{let c;return"function"==typeof h[h.length-1]&&(c=h.pop()),u.lift(new vt(h,c))}}(u),(0,Ie.U)(([D,k])=>{const W=D.lastKeyToLoad,ae=k.map(Me=>Me.key);return{actions:k,lastKeyToLoad:W,loadedKeys:ae}}),function Be(h){return u=>u.lift(new ht(h))}(D=>-1===D.loadedKeys.indexOf(D.lastKeyToLoad)),(0,Ie.U)(D=>D.actions))}(h,vd(h,u).pipe((0,et.R)((D,k)=>[...D,k],[])),c)}(h,D,c).pipe(Oe.iC),valueChanges:(D,k)=>ic(h,D,c).pipe((0,Ie.U)(ae=>ae.map(Me=>k&&k.idField?Object.assign(Object.assign({},Me.payload.val()),{[k.idField]:Me.key}):Me.payload.val())),Oe.iC)}}(k,this)}object(c){return function sc(h,u){return{query:h,snapshotChanges:()=>th(h,u.schedulers.outsideAngular)().pipe(Oe.iC),update:c=>h.ref.update(c),set:c=>h.ref.set(c),remove:()=>h.ref.remove(),valueChanges:()=>th(h,u.schedulers.outsideAngular)().pipe(Oe.iC,(0,Ie.U)(y=>y.payload.exists()?y.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>rc(this.database,c)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return h.\u0275fac=function(c){return new(c||h)(ne.LFG(pe.Dh),ne.LFG(pe.xv,8),ne.LFG(Vl,8),ne.LFG(ne.Lbi),ne.LFG(ne.R0b),ne.LFG(Oe.HU),ne.LFG(oc,8),ne.LFG(Tu.zQ,8),ne.LFG(Tu.Qv,8),ne.LFG(Tu.L6,8),ne.LFG(Tu._Q,8),ne.LFG(Tu.rT,8),ne.LFG(Tu.lh,8),ne.LFG(Tu.f7,8),ne.LFG(Rf.nm,8))},h.\u0275prov=ne.Yz7({token:h,factory:h.\u0275fac,providedIn:"any"}),h})(),su=(()=>{class h{constructor(){jp.Z.registerVersion("angularfire",Oe.q4.full,"rtdb-compat")}}return h.\u0275fac=function(c){return new(c||h)},h.\u0275mod=ne.oAB({type:h}),h.\u0275inj=ne.cJS({providers:[kf]}),h})();const Ff_firebaseConfig={apiKey:"AIzaSyAwzkd22QBN0tX2PUBqj5UVLtdvOsCqs7A",authDomain:"podriapp.firebaseapp.com",projectId:"podriapp",storageBucket:"podriapp.appspot.com",messagingSenderId:"455688318744",appId:"1:455688318744:web:c1d2dc0c021c172306386d",measurementId:"G-KH0NZ1MKRW"};var Bc=H(2796);let Lf=(()=>{class h{}return h.\u0275fac=function(c){return new(c||h)},h.\u0275mod=ne.oAB({type:h,bootstrap:[Le]}),h.\u0275inj=ne.cJS({providers:[{provide:Y.wN,useClass:Pe.r4},Bc.ST],imports:[a.b2,Pe.Pc.forRoot(),Ee,su,pe.hO.initializeApp(Ff_firebaseConfig)]}),h})();(0,ne.G48)(),a.q6().bootstrapModule(Lf).catch(h=>console.log(h))},440:(tn,ot,H)=>{"use strict";H.d(ot,{nm:()=>Li});var a=H(6351);H(5e3),H(5867);var vt=H(5861),mt=H(9681),xt=H(4859),Be=H(2090),ht=H(1877);const ye=new Map,Oe={activated:!1,tokenObservers:[]},ve={initialized:!1,enabled:!1};function oe(nt){return ye.get(nt)||Object.assign({},Oe)}function Te(){return ve}class Ue{constructor(Ke,_t,Ut,en,Sn){if(this.operation=Ke,this.retryPolicy=_t,this.getWaitDuration=Ut,this.lowerBound=en,this.upperBound=Sn,this.pending=null,this.nextErrorWaitInterval=en,en>Sn)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(Ke){var _t=this;return(0,vt.Z)(function*(){_t.stop();try{_t.pending=new Be.BH,yield function Je(nt){return new Promise(Ke=>{setTimeout(Ke,nt)})}(_t.getNextRun(Ke)),_t.pending.resolve(),yield _t.pending.promise,_t.pending=new Be.BH,yield _t.operation(),_t.pending.resolve(),yield _t.pending.promise,_t.process(!0).catch(()=>{})}catch(Ut){_t.retryPolicy(Ut)?_t.process(!1).catch(()=>{}):_t.stop()}})()}getNextRun(Ke){if(Ke)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const _t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),_t}}}const ft=new Be.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Vt(nt){if(!oe(nt).activated)throw ft.create("use-before-activation",{appName:nt.name})}function In(nt,Ke){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,vt.Z)(function*({url:nt,body:Ke},_t){var Ut,en;const Sn={"Content-Type":"application/json"},qn=_t.getImmediate({optional:!0});if(qn){const Ji=yield qn.getHeartbeatsHeader();Ji&&(Sn["X-Firebase-Client"]=Ji)}const ui={method:"POST",body:JSON.stringify(Ke),headers:Sn};let Br,Rs;try{Br=yield fetch(nt,ui)}catch(Ji){throw ft.create("fetch-network-error",{originalErrorMessage:null===(Ut=Ji)||void 0===Ut?void 0:Ut.message})}if(200!==Br.status)throw ft.create("fetch-status-error",{httpStatus:Br.status});try{Rs=yield Br.json()}catch(Ji){throw ft.create("fetch-parse-error",{originalErrorMessage:null===(en=Ji)||void 0===en?void 0:en.message})}const Sr=Rs.ttl.match(/^([\d.]+)(s)$/);if(!Sr||!Sr[2]||isNaN(Number(Sr[1])))throw ft.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Rs.ttl}`});const Ir=1e3*Number(Sr[1]),Xn=Date.now();return{token:Rs.token,expireTimeMillis:Xn+Ir,issuedAtTimeMillis:Xn}})).apply(this,arguments)}function cr(nt,Ke){const{projectId:_t,appId:Ut,apiKey:en}=nt.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${_t}/apps/${Ut}:exchangeDebugToken?key=${en}`,body:{debug_token:Ke}}}const mr="firebase-app-check-store";let rr=null;function Nr(){return rr||(rr=new Promise((nt,Ke)=>{var _t;try{const Ut=indexedDB.open("firebase-app-check-database",1);Ut.onsuccess=en=>{nt(en.target.result)},Ut.onerror=en=>{var Sn;Ke(ft.create("storage-open",{originalErrorMessage:null===(Sn=en.target.error)||void 0===Sn?void 0:Sn.message}))},Ut.onupgradeneeded=en=>{0===en.oldVersion&&en.target.result.createObjectStore(mr,{keyPath:"compositeKey"})}}catch(Ut){Ke(ft.create("storage-open",{originalErrorMessage:null===(_t=Ut)||void 0===_t?void 0:_t.message}))}}),rr)}function Tn(){return(Tn=(0,vt.Z)(function*(nt,Ke){const Ut=(yield Nr()).transaction(mr,"readwrite"),Sn=Ut.objectStore(mr).put({compositeKey:nt,value:Ke});return new Promise((qn,ui)=>{Sn.onsuccess=Br=>{qn()},Ut.onerror=Br=>{var Rs;ui(ft.create("storage-set",{originalErrorMessage:null===(Rs=Br.target.error)||void 0===Rs?void 0:Rs.message}))}})})).apply(this,arguments)}const Bn=new ht.Yd("@firebase/app-check");function $n(nt,Ke){return(0,Be.hl)()?function Jn(nt,Ke){return function fr(nt,Ke){return Tn.apply(this,arguments)}(function yr(nt){return`${nt.options.appId}-${nt.name}`}(nt),Ke)}(nt,Ke).catch(_t=>{Bn.warn(`Failed to write token to IndexedDB. Error: ${_t}`)}):Promise.resolve()}function si(){return Te().enabled}function ir(){return Yr.apply(this,arguments)}function Yr(){return(Yr=(0,vt.Z)(function*(){const nt=Te();if(nt.enabled&&nt.token)return nt.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const mn={error:"UNKNOWN_ERROR"};function $t(nt){return Be.US.encodeString(JSON.stringify(nt),!1)}function ln(nt){return kn.apply(this,arguments)}function kn(){return(kn=(0,vt.Z)(function*(nt,Ke=!1){const _t=nt.app;Vt(_t);const Ut=oe(_t);let Sn,en=Ut.token;if(en&&!dt(en)&&(Ut.token=void 0,en=void 0),!en){const Br=yield Ut.cachedTokenPromise;Br&&(dt(Br)?en=Br:yield $n(_t,void 0))}if(!Ke&&en&&dt(en))return{token:en.token};let ui,qn=!1;if(si()){Ut.exchangeTokenPromise||(Ut.exchangeTokenPromise=In(cr(_t,yield ir()),nt.heartbeatServiceProvider).finally(()=>{Ut.exchangeTokenPromise=void 0}),qn=!0);const Br=yield Ut.exchangeTokenPromise;return yield $n(_t,Br),Ut.token=Br,{token:Br.token}}try{Ut.exchangeTokenPromise||(Ut.exchangeTokenPromise=Ut.provider.getToken().finally(()=>{Ut.exchangeTokenPromise=void 0}),qn=!0),en=yield oe(_t).exchangeTokenPromise}catch(Br){"appCheck/throttled"===Br.code?Bn.warn(Br.message):Bn.error(Br),Sn=Br}return en?Sn?ui=dt(en)?{token:en.token,internalError:Sn}:tt(Sn):(ui={token:en.token},Ut.token=en,yield $n(_t,en)):ui=tt(Sn),qn&&He(_t,ui),ui})).apply(this,arguments)}function On(nt,Ke){const _t=oe(nt),Ut=_t.tokenObservers.filter(en=>en.next!==Ke);0===Ut.length&&_t.tokenRefresher&&_t.tokenRefresher.isRunning()&&_t.tokenRefresher.stop(),_t.tokenObservers=Ut}function je(nt){const{app:Ke}=nt,_t=oe(Ke);let Ut=_t.tokenRefresher;Ut||(Ut=function Ne(nt){const{app:Ke}=nt;return new Ue((0,vt.Z)(function*(){let Ut;if(Ut=oe(Ke).token?yield ln(nt,!0):yield ln(nt),Ut.error)throw Ut.error;if(Ut.internalError)throw Ut.internalError}),()=>!0,()=>{const _t=oe(Ke);if(_t.token){let Ut=_t.token.issuedAtTimeMillis+.5*(_t.token.expireTimeMillis-_t.token.issuedAtTimeMillis)+3e5;return Ut=Math.min(Ut,_t.token.expireTimeMillis-3e5),Math.max(0,Ut-Date.now())}return 0},3e4,96e4)}(nt),_t.tokenRefresher=Ut),!Ut.isRunning()&&_t.isTokenAutoRefreshEnabled&&Ut.start()}function He(nt,Ke){const _t=oe(nt).tokenObservers;for(const Ut of _t)try{"EXTERNAL"===Ut.type&&null!=Ke.error?Ut.error(Ke.error):Ut.next(Ke)}catch(en){}}function dt(nt){return nt.expireTimeMillis-Date.now()>0}function tt(nt){return{token:$t(mn),error:nt}}class on{constructor(Ke,_t){this.app=Ke,this.heartbeatServiceProvider=_t}_delete(){const{tokenObservers:Ke}=oe(this.app);for(const _t of Ke)On(this.app,_t.next);return Promise.resolve()}}const wi="app-check-internal";!function Xi(){(0,mt._registerComponent)(new xt.wA("app-check",nt=>function _n(nt,Ke){return new on(nt,Ke)}(nt.getProvider("app").getImmediate(),nt.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((nt,Ke,_t)=>{nt.getProvider(wi).initialize()})),(0,mt._registerComponent)(new xt.wA(wi,nt=>function ar(nt){return{getToken:Ke=>ln(nt,Ke),addTokenListener:Ke=>function Cn(nt,Ke,_t,Ut){const{app:en}=nt,Sn=oe(en);if(Sn.tokenObservers=[...Sn.tokenObservers,{next:_t,error:Ut,type:Ke}],Sn.token&&dt(Sn.token)){const ui=Sn.token;Promise.resolve().then(()=>{_t({token:ui.token}),je(nt)}).catch(()=>{})}Sn.cachedTokenPromise.then(()=>je(nt))}(nt,"INTERNAL",Ke),removeTokenListener:Ke=>On(nt.app,Ke)}}(nt.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,mt.registerVersion)("@firebase/app-check","0.5.17")}();class Li{constructor(){return(0,a.vb)("app-check")}}"undefined"!=typeof window&&window},4941:(tn,ot,H)=>{"use strict";H.d(ot,{zQ:()=>bt,rT:()=>Te,f7:()=>J,L6:()=>oe,_Q:()=>Ce,lh:()=>lt,Qv:()=>ve,nw:()=>Gt});var a=H(5e3),ne=H(8929),Y=H(1086),Pe=H(6498),Le=H(5254),he=H(6787),Ee=H(2102),pe=H(7545),be=H(4850),ce=H(341),de=H(2654),ie=H(5279),Ie=H(5283);class Ge extends ne.xQ{constructor(Ue=Number.POSITIVE_INFINITY,Je=Number.POSITIVE_INFINITY,Qe){super(),this.scheduler=Qe,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=Ue<1?1:Ue,this._windowTime=Je<1?1:Je,Je===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(Ue){if(!this.isStopped){const Je=this._events;Je.push(Ue),Je.length>this._bufferSize&&Je.shift()}super.next(Ue)}nextTimeWindow(Ue){this.isStopped||(this._events.push(new st(this._getNow(),Ue)),this._trimBufferThenGetEvents()),super.next(Ue)}_subscribe(Ue){const Je=this._infiniteTimeWindow,Qe=Je?this._events:this._trimBufferThenGetEvents(),ft=this.scheduler,pt=Qe.length;let Vt;if(this.closed)throw new ie.N;if(this.isStopped||this.hasError?Vt=de.w.EMPTY:(this.observers.push(Ue),Vt=new Ie.W(this,Ue)),ft&&Ue.add(Ue=new Ee.ht(Ue,ft)),Je)for(let Nt=0;Nt<pt&&!Ue.closed;Nt++)Ue.next(Qe[Nt]);else for(let Nt=0;Nt<pt&&!Ue.closed;Nt++)Ue.next(Qe[Nt].value);return this.hasError?Ue.error(this.thrownError):this.isStopped&&Ue.complete(),Vt}_getNow(){return(this.scheduler||ce.c).now()}_trimBufferThenGetEvents(){const Ue=this._getNow(),Je=this._bufferSize,Qe=this._windowTime,ft=this._events,pt=ft.length;let Vt=0;for(;Vt<pt&&!(Ue-ft[Vt].time<Qe);)Vt++;return pt>Je&&(Vt=Math.max(Vt,pt-Je)),Vt>0&&ft.splice(0,Vt),ft}}class st{constructor(Ue,Je){this.time=Ue,this.value=Je}}function et($e,Ue,Je){let Qe;return Qe=$e&&"object"==typeof $e?$e:{bufferSize:$e,windowTime:Ue,refCount:!1,scheduler:Je},ft=>ft.lift(function Re({bufferSize:$e=Number.POSITIVE_INFINITY,windowTime:Ue=Number.POSITIVE_INFINITY,refCount:Je,scheduler:Qe}){let ft,Vt,pt=0,Nt=!1,bn=!1;return function(Qn){let Rn;pt++,!ft||Nt?(Nt=!1,ft=new Ge($e,Ue,Qe),Rn=ft.subscribe(this),Vt=Qn.subscribe({next(Wn){ft.next(Wn)},error(Wn){Nt=!0,ft.error(Wn)},complete(){bn=!0,Vt=void 0,ft.complete()}}),bn&&(Vt=void 0)):Rn=ft.subscribe(this),this.add(()=>{pt--,Rn.unsubscribe(),Rn=void 0,Vt&&!bn&&Je&&0===pt&&(Vt.unsubscribe(),Vt=void 0,ft=void 0)})}}(Qe))}var De=H(7224);function ct($e,Ue){return Ue?(0,pe.w)(()=>$e,Ue):(0,pe.w)(()=>$e)}var me=H(8915),vt=H(2198),mt=H(6351),xt=H(2011),Be=H(9808),ht=H(440);H(127);const ve=new a.OlP("angularfire2.auth.use-emulator"),oe=new a.OlP("angularfire2.auth.settings"),Ce=new a.OlP("angularfire2.auth.tenant-id"),Te=new a.OlP("angularfire2.auth.langugage-code"),lt=new a.OlP("angularfire2.auth.use-device-language"),J=new a.OlP("angularfire.auth.persistence"),Gt=($e,Ue,Je,Qe,ft,pt,Vt,Nt)=>(0,xt.cc)(`${$e.name}.auth`,"AngularFireAuth",$e.name,()=>{const bn=Ue.runOutsideAngular(()=>$e.auth());if(Je&&bn.useEmulator(...Je),Qe&&(bn.tenantId=Qe),bn.languageCode=ft,pt&&bn.useDeviceLanguage(),Vt)for(const[In,Qn]of Object.entries(Vt))bn.settings[In]=Qn;return Nt&&bn.setPersistence(Nt),bn},[Je,Qe,ft,pt,Vt,Nt]);let bt=(()=>{class $e{constructor(Je,Qe,ft,pt,Vt,Nt,bn,In,Qn,Rn,Wn,cr){const Hn=new ne.xQ,or=(0,Y.of)(void 0).pipe((0,Ee.QV)(Vt.outsideAngular),(0,pe.w)(()=>pt.runOutsideAngular(()=>Promise.resolve().then(H.bind(H,1277)))),(0,be.U)(()=>(0,xt.on)(Je,pt,Qe)),(0,be.U)(mr=>Gt(mr,pt,Nt,In,Qn,Rn,bn,Wn)),et({bufferSize:1,refCount:!1}));if((0,Be.PM)(ft))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,Y.of)(null);else{or.pipe((0,De.P)()).subscribe();const Wt=or.pipe((0,pe.w)(tr=>tr.getRedirectResult().then(Jn=>Jn,()=>null)),mt.iC,et({bufferSize:1,refCount:!1})),rr=or.pipe((0,pe.w)(tr=>new Pe.y(Jn=>({unsubscribe:pt.runOutsideAngular(()=>tr.onAuthStateChanged(Cr=>Jn.next(Cr),Cr=>Jn.error(Cr),()=>Jn.complete()))})))),Nr=or.pipe((0,pe.w)(tr=>new Pe.y(Jn=>({unsubscribe:pt.runOutsideAngular(()=>tr.onIdTokenChanged(Cr=>Jn.next(Cr),Cr=>Jn.error(Cr),()=>Jn.complete()))}))));this.authState=Wt.pipe(ct(rr),(0,me.R)(Vt.outsideAngular),(0,Ee.QV)(Vt.insideAngular)),this.user=Wt.pipe(ct(Nr),(0,me.R)(Vt.outsideAngular),(0,Ee.QV)(Vt.insideAngular)),this.idToken=this.user.pipe((0,pe.w)(tr=>tr?(0,Le.D)(tr.getIdToken()):(0,Y.of)(null))),this.idTokenResult=this.user.pipe((0,pe.w)(tr=>tr?(0,Le.D)(tr.getIdTokenResult()):(0,Y.of)(null))),this.credential=(0,he.T)(Wt,Hn,this.authState.pipe((0,vt.h)(tr=>!tr))).pipe((0,be.U)(tr=>null!=tr&&tr.user?tr:null),(0,me.R)(Vt.outsideAngular),(0,Ee.QV)(Vt.insideAngular))}return(0,xt.pX)(this,or,pt,{spy:{apply:(mr,Wt,rr)=>{(mr.startsWith("signIn")||mr.startsWith("createUser"))&&rr.then(Nr=>Hn.next(Nr))}}})}}return $e.\u0275fac=function(Je){return new(Je||$e)(a.LFG(xt.Dh),a.LFG(xt.xv,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(mt.HU),a.LFG(ve,8),a.LFG(oe,8),a.LFG(Ce,8),a.LFG(Te,8),a.LFG(lt,8),a.LFG(J,8),a.LFG(ht.nm,8))},$e.\u0275prov=a.Yz7({token:$e,factory:$e.\u0275fac,providedIn:"any"}),$e})()},2796:(tn,ot,H)=>{"use strict";H.d(ot,{ST:()=>Xy});var a=H(5e3),ne=H(353),Y=H(6498),Pe=H(5254),Le=H(1086),he=H(6351),Ee=H(1059),pe=H(3489);function be(){return i=>i.lift(new ce)}class ce{call(e,t){return t.subscribe(new de(e))}}class de extends pe.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}var Oe,ie=H(4850),Ie=H(2014),Ge=H(5778),st=H(2198),et=H(2011),Re=H(9808),ct=(H(1277),H(3942)),me=H(5861),vt=H(9681),mt=H(4859),xt=H(1877),Be=H(2090),ht="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},ye={},ve=ve||{},oe=ht||self;function Ce(){}function Te(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function lt(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var Gt="closure_uid_"+(1e9*Math.random()>>>0),bt=0;function at(i,e,t){return i.call.apply(i.bind,arguments)}function $e(i,e,t){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(d,o),i.apply(e,d)}}return function(){return i.apply(e,arguments)}}function Ue(i,e,t){return(Ue=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?at:$e).apply(null,arguments)}function Je(i,e){var t=Array.prototype.slice.call(arguments,1);return function(){var o=t.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function Qe(i,e){function t(){}t.prototype=e.prototype,i.X=e.prototype,i.prototype=new t,i.prototype.constructor=i,i.Wb=function(o,d,m){for(var I=Array(arguments.length-2),R=2;R<arguments.length;R++)I[R-2]=arguments[R];return e.prototype[d].apply(o,I)}}function ft(){this.s=this.s,this.o=this.o}ft.prototype.s=!1,ft.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function J(i){Object.prototype.hasOwnProperty.call(i,Gt)&&i[Gt]||(i[Gt]=++bt)}(this)},ft.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Vt=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let t=0;t<i.length;t++)if(t in i&&i[t]===e)return t;return-1};function Nt(i){const e=i.length;if(0<e){const t=Array(e);for(let o=0;o<e;o++)t[o]=i[o];return t}return[]}function bn(i,e){for(let t=1;t<arguments.length;t++){const o=arguments[t];if(Te(o)){const d=i.length||0,m=o.length||0;i.length=d+m;for(let I=0;I<m;I++)i[d+I]=o[I]}else i.push(o)}}function In(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}In.prototype.h=function(){this.defaultPrevented=!0};var Qn=function(){if(!oe.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{oe.addEventListener("test",Ce,e),oe.removeEventListener("test",Ce,e)}catch(t){}return i}();function Rn(i){return/^[\s\xa0]*$/.test(i)}var Wn=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function cr(i,e){return i<e?-1:i>e?1:0}function Hn(){var i=oe.navigator;return i&&(i=i.userAgent)?i:""}function or(i){return-1!=Hn().indexOf(i)}function mr(i){return mr[" "](i),i}mr[" "]=Ce;var Tn,i,rr=or("Opera"),Nr=or("Trident")||or("MSIE"),tr=or("Edge"),Jn=tr||Nr,Cr=or("Gecko")&&!(-1!=Hn().toLowerCase().indexOf("webkit")&&!or("Edge"))&&!(or("Trident")||or("MSIE"))&&!or("Edge"),an=-1!=Hn().toLowerCase().indexOf("webkit")&&!or("Edge");function fr(){var i=oe.document;return i?i.documentMode:void 0}e:{var gn="",Tt=(i=Hn(),Cr?/rv:([^\);]+)(\)|;)/.exec(i):tr?/Edge\/([\d\.]+)/.exec(i):Nr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):an?/WebKit\/(\S+)/.exec(i):rr?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(Tt&&(gn=Tt?Tt[1]:""),Nr){var yr=fr();if(null!=yr&&yr>parseFloat(gn)){Tn=String(yr);break e}}Tn=gn}var Bn={};var ji=oe.document&&Nr&&(fr()||parseInt(Tn,10))||void 0;function Ln(i,e){if(In.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var t=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Cr){e:{try{mr(e.nodeName);var d=!0;break e}catch(m){}d=!1}d||(e=null)}}else"mouseover"==t?e=i.fromElement:"mouseout"==t&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:si[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Ln.X.h.call(this)}}Qe(Ln,In);var si={2:"touch",3:"pen",4:"mouse"};Ln.prototype.h=function(){Ln.X.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var ir="closure_listenable_"+(1e6*Math.random()|0),Yr=0;function ei(i,e,t,o,d){this.listener=i,this.proxy=null,this.src=e,this.type=t,this.capture=!!o,this.ha=d,this.key=++Yr,this.ba=this.ea=!1}function mn(i){i.ba=!0,i.listener=null,i.proxy=null,i.src=null,i.ha=null}function $t(i,e,t){for(const o in i)e.call(t,i[o],o,i)}function ln(i){const e={};for(const t in i)e[t]=i[t];return e}const kn="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Cn(i,e){let t,o;for(let d=1;d<arguments.length;d++){for(t in o=arguments[d],o)i[t]=o[t];for(let m=0;m<kn.length;m++)t=kn[m],Object.prototype.hasOwnProperty.call(o,t)&&(i[t]=o[t])}}function On(i){this.src=i,this.g={},this.h=0}function je(i,e){var t=e.type;if(t in i.g){var m,o=i.g[t],d=Vt(o,e);(m=0<=d)&&Array.prototype.splice.call(o,d,1),m&&(mn(e),0==i.g[t].length&&(delete i.g[t],i.h--))}}function Ne(i,e,t,o){for(var d=0;d<i.length;++d){var m=i[d];if(!m.ba&&m.listener==e&&m.capture==!!t&&m.ha==o)return d}return-1}On.prototype.add=function(i,e,t,o,d){var m=i.toString();(i=this.g[m])||(i=this.g[m]=[],this.h++);var I=Ne(i,e,o,d);return-1<I?(e=i[I],t||(e.ea=!1)):((e=new ei(e,this.src,m,!!o,d)).ea=t,i.push(e)),e};var He="closure_lm_"+(1e6*Math.random()|0),dt={};function tt(i,e,t,o,d){if(o&&o.once)return ar(i,e,t,o,d);if(Array.isArray(e)){for(var m=0;m<e.length;m++)tt(i,e[m],t,o,d);return null}return t=Mt(t),i&&i[ir]?i.N(e,t,lt(o)?!!o.capture:!!o,d):on(i,e,t,!1,o,d)}function on(i,e,t,o,d,m){if(!e)throw Error("Invalid event type");var I=lt(d)?!!d.capture:!!d,R=xe(i);if(R||(i[He]=R=new On(i)),(t=R.add(e,t,o,I,m)).proxy)return t;if(o=function _n(){const e=Ve;return function i(t){return e.call(i.src,i.listener,t)}}(),t.proxy=o,o.src=i,o.listener=t,i.addEventListener)Qn||(d=I),void 0===d&&(d=!1),i.addEventListener(e.toString(),o,d);else if(i.attachEvent)i.attachEvent(gt(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return t}function ar(i,e,t,o,d){if(Array.isArray(e)){for(var m=0;m<e.length;m++)ar(i,e[m],t,o,d);return null}return t=Mt(t),i&&i[ir]?i.O(e,t,lt(o)?!!o.capture:!!o,d):on(i,e,t,!0,o,d)}function _r(i,e,t,o,d){if(Array.isArray(e))for(var m=0;m<e.length;m++)_r(i,e[m],t,o,d);else o=lt(o)?!!o.capture:!!o,t=Mt(t),i&&i[ir]?(i=i.i,(e=String(e).toString())in i.g&&-1<(t=Ne(m=i.g[e],t,o,d))&&(mn(m[t]),Array.prototype.splice.call(m,t,1),0==m.length&&(delete i.g[e],i.h--))):i&&(i=xe(i))&&(e=i.g[e.toString()],i=-1,e&&(i=Ne(e,t,o,d)),(t=-1<i?e[i]:null)&&Rr(t))}function Rr(i){if("number"!=typeof i&&i&&!i.ba){var e=i.src;if(e&&e[ir])je(e.i,i);else{var t=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(t,o,i.capture):e.detachEvent?e.detachEvent(gt(t),o):e.addListener&&e.removeListener&&e.removeListener(o),(t=xe(e))?(je(t,i),0==t.h&&(t.src=null,e[He]=null)):mn(i)}}}function gt(i){return i in dt?dt[i]:dt[i]="on"+i}function Ve(i,e){if(i.ba)i=!0;else{e=new Ln(e,this);var t=i.listener,o=i.ha||i.src;i.ea&&Rr(i),i=t.call(o,e)}return i}function xe(i){return(i=i[He])instanceof On?i:null}var Et="__closure_events_fn_"+(1e9*Math.random()>>>0);function Mt(i){return"function"==typeof i?i:(i[Et]||(i[Et]=function(e){return i.handleEvent(e)}),i[Et])}function fn(){ft.call(this),this.i=new On(this),this.P=this,this.I=null}function pn(i,e){var t,o=i.I;if(o)for(t=[];o;o=o.I)t.push(o);if(i=i.P,o=e.type||e,"string"==typeof e)e=new In(e,i);else if(e instanceof In)e.target=e.target||i;else{var d=e;Cn(e=new In(o,i),d)}if(d=!0,t)for(var m=t.length-1;0<=m;m--){var I=e.g=t[m];d=Zt(I,o,!0,e)&&d}if(d=Zt(I=e.g=i,o,!0,e)&&d,d=Zt(I,o,!1,e)&&d,t)for(m=0;m<t.length;m++)d=Zt(I=e.g=t[m],o,!1,e)&&d}function Zt(i,e,t,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var d=!0,m=0;m<e.length;++m){var I=e[m];if(I&&!I.ba&&I.capture==t){var R=I.listener,z=I.ha||I.src;I.ea&&je(i.i,I),d=!1!==R.call(z,o)&&d}}return d&&!o.defaultPrevented}Qe(fn,ft),fn.prototype[ir]=!0,fn.prototype.removeEventListener=function(i,e,t,o){_r(this,i,e,t,o)},fn.prototype.M=function(){if(fn.X.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var t=i.g[e],o=0;o<t.length;o++)mn(t[o]);delete i.g[e],i.h--}}this.I=null},fn.prototype.N=function(i,e,t,o){return this.i.add(String(i),e,!1,t,o)},fn.prototype.O=function(i,e,t,o){return this.i.add(String(i),e,!0,t,o)};var Dn=oe.JSON.stringify;function lr(){var i=Zi;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var Fi,kr=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new ti,i=>i.reset());class ti{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function hi(i){oe.setTimeout(()=>{throw i},0)}function Er(i,e){Fi||function Ei(){var i=oe.Promise.resolve(void 0);Fi=function(){i.then(oi)}}(),zn||(Fi(),zn=!0),Zi.add(i,e)}var zn=!1,Zi=new class Hr{constructor(){this.h=this.g=null}add(e,t){const o=kr.get();o.set(e,t),this.h?this.h.next=o:this.g=o,this.h=o}};function oi(){for(var i;i=lr();){try{i.h.call(i.g)}catch(t){hi(t)}var e=kr;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}zn=!1}function Ii(i,e){fn.call(this),this.h=i||1,this.g=e||oe,this.j=Ue(this.lb,this),this.l=Date.now()}function Qi(i){i.ca=!1,i.R&&(i.g.clearTimeout(i.R),i.R=null)}function Fr(i,e,t){if("function"==typeof i)t&&(i=Ue(i,t));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=Ue(i.handleEvent,i)}return 2147483647<Number(e)?-1:oe.setTimeout(i,e||0)}function wi(i){i.g=Fr(()=>{i.g=null,i.i&&(i.i=!1,wi(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}Qe(Ii,fn),(Oe=Ii.prototype).ca=!1,Oe.R=null,Oe.lb=function(){if(this.ca){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-i):(this.R&&(this.g.clearTimeout(this.R),this.R=null),pn(this,"tick"),this.ca&&(Qi(this),this.start()))}},Oe.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Oe.M=function(){Ii.X.M.call(this),Qi(this),delete this.g};class Xi extends ft{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:wi(this)}M(){super.M(),this.g&&(oe.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function bi(i){ft.call(this),this.h=i,this.g={}}Qe(bi,ft);var fi=[];function Li(i,e,t,o){Array.isArray(t)||(t&&(fi[0]=t.toString()),t=fi);for(var d=0;d<t.length;d++){var m=tt(e,t[d],o||i.handleEvent,!1,i.h||i);if(!m)break;i.g[m.key]=m}}function ee(i){$t(i.g,function(e,t){this.g.hasOwnProperty(t)&&Rr(e)},i),i.g={}}function we(){this.g=!0}function Ct(i,e,t,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function qe(i,e){if(!i.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(i=0;i<t.length;i++)if(Array.isArray(t[i])){var o=t[i];if(!(2>o.length)){var d=o[1];if(Array.isArray(d)&&!(1>d.length)){var m=d[0];if("noop"!=m&&"stop"!=m&&"close"!=m)for(var I=1;I<d.length;I++)d[I]=""}}}return Dn(t)}catch(R){return e}}(i,t)+(o?" "+o:"")})}bi.prototype.M=function(){bi.X.M.call(this),ee(this)},bi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},we.prototype.Aa=function(){this.g=!1},we.prototype.info=function(){};var yt={},Ot=null;function jt(){return Ot=Ot||new fn}function un(i){In.call(this,yt.Pa,i)}function An(i){const e=jt();pn(e,new un(e))}function Yn(i,e){In.call(this,yt.STAT_EVENT,i),this.stat=e}function vr(i){const e=jt();pn(e,new Yn(e,i))}function Lr(i,e){In.call(this,yt.Qa,i),this.size=e}function nt(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return oe.setTimeout(function(){i()},e)}yt.Pa="serverreachability",Qe(un,In),yt.STAT_EVENT="statevent",Qe(Yn,In),yt.Qa="timingevent",Qe(Lr,In);var Ke={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},_t={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function Ut(){}function Sn(){}Ut.prototype.h=null;var Rs,qn={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function ui(){In.call(this,"d")}function Br(){In.call(this,"c")}function Sr(){}function Ir(i,e,t,o){this.l=i,this.j=e,this.m=t,this.U=o||1,this.S=new bi(this),this.O=Ji,this.T=new Ii(i=Jn?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Xn}function Xn(){this.i=null,this.g="",this.h=!1}Qe(ui,In),Qe(Br,In),Qe(Sr,Ut),Sr.prototype.g=function(){return new XMLHttpRequest},Sr.prototype.i=function(){return{}},Rs=new Sr;var Ji=45e3,Zr={},Os={};function aa(i,e,t){i.K=1,i.v=yi(ms(e)),i.s=t,i.P=!0,es(i,null)}function es(i,e){i.F=Date.now(),mi(i),i.A=ms(i.v);var t=i.A,o=i.U;Array.isArray(o)||(o=[String(o)]),qo(t.i,"t",o),i.C=0,t=i.l.H,i.h=new Xn,i.g=Do(i.l,t?e:null,!i.s),0<i.N&&(i.L=new Xi(Ue(i.La,i,i.g),i.N)),Li(i.S,i.g,"readystatechange",i.ib),e=i.H?ln(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.da(i.A,i.u,i.s,e)):(i.u="GET",i.g.da(i.A,i.u,null,e)),An(),function Ze(i,e,t,o,d,m){i.info(function(){if(i.g)if(m)for(var I="",R=m.split("&"),z=0;z<R.length;z++){var X=R[z].split("=");if(1<X.length){var ge=X[0];X=X[1];var ze=ge.split("_");I=2<=ze.length&&"type"==ze[1]?I+(ge+"=")+X+"&":I+(ge+"=redacted&")}}else I=null;else I=m;return"XMLHTTP REQ ("+o+") [attempt "+d+"]: "+e+"\n"+t+"\n"+I})}(i.j,i.u,i.A,i.m,i.U,i.s)}function Bs(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Da}function Tr(i,e,t){let d,o=!0;for(;!i.I&&i.C<t.length;){if(d=dr(i,t),d==Os){4==e&&(i.o=4,vr(14),o=!1),Ct(i.j,i.m,null,"[Incomplete Response]");break}if(d==Zr){i.o=4,vr(15),Ct(i.j,i.m,t,"[Invalid Chunk]"),o=!1;break}Ct(i.j,i.m,d,null),ps(i,d)}Bs(i)&&d!=Os&&d!=Zr&&(i.h.g="",i.C=0),4!=e||0!=t.length||i.h.h||(i.o=1,vr(16),o=!1),i.i=i.i&&o,o?0<t.length&&!i.$&&(i.$=!0,(e=i.l).g==i&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),Wr(e),e.K=!0,vr(11))):(Ct(i.j,i.m,t,"[Invalid Chunked Response]"),as(i),pi(i))}function dr(i,e){var t=i.C,o=e.indexOf("\n",t);return-1==o?Os:(t=Number(e.substring(t,o)),isNaN(t)?Zr:(o+=1)+t>e.length?Os:(e=e.substr(o,t),i.C=o+t,e))}function mi(i){i.V=Date.now()+i.O,Ys(i,i.O)}function Ys(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=nt(Ue(i.gb,i),e)}function $s(i){i.B&&(oe.clearTimeout(i.B),i.B=null)}function pi(i){0==i.l.G||i.I||ii(i.l,i)}function as(i){$s(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,Qi(i.T),ee(i.S),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function ps(i,e){try{var t=i.l;if(0!=t.G&&(t.g==i||br(t.h,i)))if(!i.J&&br(t.h,i)&&3==t.G){try{var o=t.Fa.g.parse(e)}catch(X){o=null}if(Array.isArray(o)&&3==o.length){var d=o;if(0==d[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<i.F))break e;Oi(t),Z(t)}Gr(t),vr(18)}}else t.Ba=d[1],0<t.Ba-t.T&&37500>d[2]&&t.L&&0==t.A&&!t.v&&(t.v=nt(Ue(t.cb,t),6e3));if(1>=qt(t.h)&&t.ja){try{t.ja()}catch(X){}t.ja=void 0}}else vs(t,11)}else if((i.J||t.g==i)&&Oi(t),!Rn(e))for(d=t.Fa.g.parse(e),e=0;e<d.length;e++){let X=d[e];if(t.T=X[0],X=X[1],2==t.G)if("c"==X[0]){t.I=X[1],t.ka=X[2];const ge=X[3];null!=ge&&(t.ma=ge,t.j.info("VER="+t.ma));const ze=X[4];null!=ze&&(t.Ca=ze,t.j.info("SVER="+t.Ca));const Dt=X[5];null!=Dt&&"number"==typeof Dt&&0<Dt&&(t.J=o=1.5*Dt,t.j.info("backChannelRequestTimeoutMs_="+o)),o=t;const zt=i.g;if(zt){const Jt=zt.g?zt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Jt){var m=o.h;m.g||-1==Jt.indexOf("spdy")&&-1==Jt.indexOf("quic")&&-1==Jt.indexOf("h2")||(m.j=m.l,m.g=new Set,m.h&&(Ko(m,m.h),m.h=null))}if(o.D){const Nn=zt.g?zt.g.getResponseHeader("X-HTTP-Session-Id"):null;Nn&&(o.za=Nn,wr(o.F,o.D,Nn))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-i.F,t.j.info("Handshake RTT: "+t.P+"ms"));var I=i;if((o=t).sa=ro(o,o.H?o.ka:null,o.V),I.J){ri(o.h,I);var R=I,z=o.J;z&&R.setTimeout(z),R.B&&($s(R),mi(R)),o.g=I}else qr(o);0<t.i.length&&re(t)}else"stop"!=X[0]&&"close"!=X[0]||vs(t,7);else 3==t.G&&("stop"==X[0]||"close"==X[0]?"stop"==X[0]?vs(t,7):F(t):"noop"!=X[0]&&t.l&&t.l.wa(X),t.A=0)}An()}catch(X){}}function Ci(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(Te(i)||"string"==typeof i)Array.prototype.forEach.call(i,e,void 0);else for(var t=function gs(i){if(i.oa&&"function"==typeof i.oa)return i.oa();if(!i.W||"function"!=typeof i.W){if("undefined"!=typeof Map&&i instanceof Map)return Array.from(i.keys());if(!("undefined"!=typeof Set&&i instanceof Set)){if(Te(i)||"string"==typeof i){var e=[];i=i.length;for(var t=0;t<i;t++)e.push(t);return e}e=[],t=0;for(const o in i)e[t++]=o;return e}}}(i),o=function Es(i){if(i.W&&"function"==typeof i.W)return i.W();if("undefined"!=typeof Map&&i instanceof Map||"undefined"!=typeof Set&&i instanceof Set)return Array.from(i.values());if("string"==typeof i)return i.split("");if(Te(i)){for(var e=[],t=i.length,o=0;o<t;o++)e.push(i[o]);return e}for(o in e=[],t=0,i)e[t++]=i[o];return e}(i),d=o.length,m=0;m<d;m++)e.call(void 0,o[m],t&&t[m],i)}(Oe=Ir.prototype).setTimeout=function(i){this.O=i},Oe.ib=function(i){i=i.target;const e=this.L;e&&3==cs(i)?e.l():this.La(i)},Oe.La=function(i){try{if(i==this.g)e:{const ge=cs(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>ge)&&(3!=ge||Jn||this.g&&(this.h.h||this.g.fa()||ks(this.g)))){this.I||4!=ge||7==e||An(),$s(this);var t=this.g.aa();this.Y=t;t:if(Bs(this)){var o=ks(this.g);i="";var d=o.length,m=4==cs(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){as(this),pi(this);var I="";break t}this.h.i=new oe.TextDecoder}for(e=0;e<d;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:m&&e==d-1});o.splice(0,d),this.h.g+=i,this.C=0,I=this.h.g}else I=this.g.fa();if(this.i=200==t,function Xe(i,e,t,o,d,m,I){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+d+"]: "+e+"\n"+t+"\n"+m+" "+I})}(this.j,this.u,this.A,this.m,this.U,ge,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var R,z=this.g;if((R=z.g?z.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Rn(R)){var X=R;break t}}X=null}if(!(t=X)){this.i=!1,this.o=3,vr(12),as(this),pi(this);break e}Ct(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ps(this,t)}this.P?(Tr(this,ge,I),Jn&&this.i&&3==ge&&(Li(this.S,this.T,"tick",this.hb),this.T.start())):(Ct(this.j,this.m,I,null),ps(this,I)),4==ge&&as(this),this.i&&!this.I&&(4==ge?ii(this.l,this):(this.i=!1,mi(this)))}else 400==t&&0<I.indexOf("Unknown SID")?(this.o=3,vr(12)):(this.o=0,vr(13)),as(this),pi(this)}}}catch(ge){}},Oe.hb=function(){if(this.g){var i=cs(this.g),e=this.g.fa();this.C<e.length&&($s(this),Tr(this,i,e),this.i&&4!=i&&mi(this))}},Oe.cancel=function(){this.I=!0,as(this)},Oe.gb=function(){this.B=null;const i=Date.now();0<=i-this.V?(function _e(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(An(),vr(17)),as(this),this.o=2,pi(this)):Ys(this,this.V-i)};var No=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ts(i,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof ts){this.h=void 0!==e?e:i.h,ai(this,i.j),this.s=i.s,this.g=i.g,qs(this,i.m),this.l=i.l,e=i.i;var t=new Ri;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),Us(this,t),this.o=i.o}else i&&(t=String(i).match(No))?(this.h=!!e,ai(this,t[1]||"",!0),this.s=nr(t[2]||""),this.g=nr(t[3]||"",!0),qs(this,t[4]),this.l=nr(t[5]||"",!0),Us(this,t[6]||"",!0),this.o=nr(t[7]||"")):(this.h=!!e,this.i=new Ri(null,this.h))}function ms(i){return new ts(i)}function ai(i,e,t){i.j=t?nr(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function qs(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function Us(i,e,t){e instanceof Ri?(i.i=e,function Po(i,e){e&&!i.j&&(Vr(i),i.i=null,i.g.forEach(function(t,o){var d=o.toLowerCase();o!=d&&(Kn(this,o),qo(this,d,t))},i)),i.j=e}(i.i,i.h)):(t||(e=ys(e,us)),i.i=new Ri(e,i.h))}function wr(i,e,t){i.i.set(e,t)}function yi(i){return wr(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function nr(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function ys(i,e,t){return"string"==typeof i?(i=encodeURI(i).replace(e,Ns),t&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function Ns(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}ts.prototype.toString=function(){var i=[],e=this.j;e&&i.push(ys(e,Or,!0),":");var t=this.g;return(t||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(ys(e,Or,!0),"@"),i.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&i.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&i.push("/"),i.push(ys(t,"/"==t.charAt(0)?Ts:ls,!0))),(t=this.i.toString())&&i.push("?",t),(t=this.o)&&i.push("#",ys(t,Is)),i.join("")};var Or=/[#\/\?@]/g,ls=/[#\?:]/g,Ts=/[#\?]/g,us=/[#\?@]/g,Is=/#/g;function Ri(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function Vr(i){i.g||(i.g=new Map,i.h=0,i.i&&function Hi(i,e){if(i){i=i.split("&");for(var t=0;t<i.length;t++){var o=i[t].indexOf("="),d=null;if(0<=o){var m=i[t].substring(0,o);d=i[t].substring(o+1)}else m=i[t];e(m,d?decodeURIComponent(d.replace(/\+/g," ")):"")}}}(i.i,function(e,t){i.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Kn(i,e){Vr(i),e=Ks(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function to(i,e){return Vr(i),e=Ks(i,e),i.g.has(e)}function qo(i,e,t){Kn(i,e),0<t.length&&(i.i=null,i.g.set(Ks(i,e),Nt(t)),i.h+=t.length)}function Ks(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function Ps(i){this.l=i||va,i=oe.PerformanceNavigationTiming?0<(i=oe.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(oe.g&&oe.g.Ga&&oe.g.Ga()&&oe.g.Ga().$b),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Oe=Ri.prototype).add=function(i,e){Vr(this),this.i=null,i=Ks(this,i);var t=this.g.get(i);return t||this.g.set(i,t=[]),t.push(e),this.h+=1,this},Oe.forEach=function(i,e){Vr(this),this.g.forEach(function(t,o){t.forEach(function(d){i.call(e,d,o,this)},this)},this)},Oe.oa=function(){Vr(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let o=0;o<e.length;o++){const d=i[o];for(let m=0;m<d.length;m++)t.push(e[o])}return t},Oe.W=function(i){Vr(this);let e=[];if("string"==typeof i)to(this,i)&&(e=e.concat(this.g.get(Ks(this,i))));else{i=Array.from(this.g.values());for(let t=0;t<i.length;t++)e=e.concat(i[t])}return e},Oe.set=function(i,e){return Vr(this),this.i=null,to(this,i=Ks(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},Oe.get=function(i,e){return i&&0<(i=this.W(i)).length?String(i[0]):e},Oe.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var o=e[t];const m=encodeURIComponent(String(o)),I=this.W(o);for(o=0;o<I.length;o++){var d=m;""!==I[o]&&(d+="="+encodeURIComponent(String(I[o]))),i.push(d)}}return this.i=i.join("&")};var va=10;function wo(i){return!!i.h||!!i.g&&i.g.size>=i.j}function qt(i){return i.h?1:i.g?i.g.size:0}function br(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function Ko(i,e){i.g?i.g.add(e):i.h=e}function ri(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function Ti(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const t of i.g.values())e=e.concat(t.D);return e}return Nt(i.i)}function bo(){}function Gi(){this.g=new bo}function ws(i,e,t){const o=t||"";try{Ci(i,function(d,m){let I=d;lt(d)&&(I=Dn(d)),e.push(o+m+"="+encodeURIComponent(I))})}catch(d){throw e.push(o+"type="+encodeURIComponent("_badmap")),d}}function G(i,e,t,o,d){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,d(o)}catch(m){}}function B(i){this.l=i.ac||null,this.j=i.jb||!1}function M(i,e){fn.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=g,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Ps.prototype.cancel=function(){if(this.i=Ti(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},bo.prototype.stringify=function(i){return oe.JSON.stringify(i,void 0)},bo.prototype.parse=function(i){return oe.JSON.parse(i,void 0)},Qe(B,Ut),B.prototype.g=function(){return new M(this.l,this.j)},B.prototype.i=function(i){return function(){return i}}({}),Qe(M,fn);var g=0;function P(i){i.j.read().then(i.Ta.bind(i)).catch(i.ga.bind(i))}function E(i){i.readyState=4,i.l=null,i.j=null,i.A=null,V(i)}function V(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(Oe=M.prototype).open=function(i,e){if(this.readyState!=g)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,V(this)},Oe.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||oe).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},Oe.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,E(this)),this.readyState=g},Oe.Wa=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,V(this)),this.g&&(this.readyState=3,V(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(void 0!==oe.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;P(this)}else i.text().then(this.Va.bind(this),this.ga.bind(this))},Oe.Ta=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?E(this):V(this),3==this.readyState&&P(this)}},Oe.Va=function(i){this.g&&(this.response=this.responseText=i,E(this))},Oe.Ua=function(i){this.g&&(this.response=i,E(this))},Oe.ga=function(){this.g&&E(this)},Oe.setRequestHeader=function(i,e){this.v.append(i,e)},Oe.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},Oe.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var t=e.next();!t.done;)i.push((t=t.value)[0]+": "+t[1]),t=e.next();return i.join("\r\n")},Object.defineProperty(M.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var se=oe.JSON.parse;function ut(i){fn.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Xt,this.K=this.L=!1}Qe(ut,fn);var Xt="",yn=/^https?$/i,Zn=["POST","PUT"];function Ai(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,ci(i),bs(i)}function ci(i){i.D||(i.D=!0,pn(i,"complete"),pn(i,"error"))}function ns(i){if(i.h&&void 0!==ve&&(!i.C[1]||4!=cs(i)||2!=i.aa()))if(i.v&&4==cs(i))Fr(i.Ha,0,i);else if(pn(i,"readystatechange"),4==cs(i)){i.h=!1;try{const R=i.aa();e:switch(R){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var o;if(o=0===R){var d=String(i.H).match(No)[1]||null;if(!d&&oe.self&&oe.self.location){var m=oe.self.location.protocol;d=m.substr(0,m.length-1)}o=!yn.test(d?d.toLowerCase():"")}t=o}if(t)pn(i,"complete"),pn(i,"success");else{i.m=6;try{var I=2<cs(i)?i.g.statusText:""}catch(z){I=""}i.j=I+" ["+i.aa()+"]",ci(i)}}finally{bs(i)}}}function bs(i,e){if(i.g){Cs(i);const t=i.g,o=i.C[0]?Ce:null;i.g=null,i.C=null,e||pn(i,"ready");try{t.onreadystatechange=o}catch(d){}}}function Cs(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(oe.clearTimeout(i.A),i.A=null)}function cs(i){return i.g?i.g.readyState:0}function ks(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case Xt:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Co(i){let e="";return $t(i,function(t,o){e+=o,e+=":",e+=t,e+="\r\n"}),e}function la(i,e,t){e:{for(o in t){var o=!1;break e}o=!0}o||(t=Co(t),"string"==typeof i?null!=t&&encodeURIComponent(String(t)):wr(i,e,t))}function Zs(i,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[i]||e}function ua(i){this.Ca=0,this.i=[],this.j=new we,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Zs("failFast",!1,i),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Zs("baseRetryDelayMs",5e3,i),this.bb=Zs("retryDelaySeedMs",1e4,i),this.$a=Zs("forwardChannelMaxRetries",2,i),this.ta=Zs("forwardChannelRequestTimeoutMs",2e4,i),this.ra=i&&i.xmlHttpFactory||void 0,this.Da=i&&i.Zb||!1,this.J=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.I="",this.h=new Ps(i&&i.concurrentRequestLimit),this.Fa=new Gi,this.O=i&&i.fastHandshake||!1,this.N=i&&i.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=i&&i.Xb||!1,i&&i.Aa&&this.j.Aa(),i&&i.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&i&&i.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function F(i){if($(i),3==i.G){var e=i.U++,t=ms(i.F);wr(t,"SID",i.I),wr(t,"RID",e),wr(t,"TYPE","terminate"),kt(i,t),(e=new Ir(i,i.j,e,void 0)).K=2,e.v=yi(ms(t)),t=!1,oe.navigator&&oe.navigator.sendBeacon&&(t=oe.navigator.sendBeacon(e.v.toString(),"")),!t&&oe.Image&&((new Image).src=e.v,t=!0),t||(e.g=Do(e.l,null),e.g.da(e.v)),e.F=Date.now(),mi(e)}no(i)}function Z(i){i.g&&(Wr(i),i.g.cancel(),i.g=null)}function $(i){Z(i),i.u&&(oe.clearTimeout(i.u),i.u=null),Oi(i),i.h.cancel(),i.m&&("number"==typeof i.m&&oe.clearTimeout(i.m),i.m=null)}function re(i){wo(i.h)||i.m||(i.m=!0,Er(i.Ja,i),i.C=0)}function St(i,e){var t;t=e?e.m:i.U++;const o=ms(i.F);wr(o,"SID",i.I),wr(o,"RID",t),wr(o,"AID",i.T),kt(i,o),i.o&&i.s&&la(o,i.o,i.s),t=new Ir(i,i.j,t,i.C+1),null===i.o&&(t.H=i.s),e&&(i.i=e.D.concat(i.i)),e=xn(i,t,1e3),t.setTimeout(Math.round(.5*i.ta)+Math.round(.5*i.ta*Math.random())),Ko(i.h,t),aa(t,o,e)}function kt(i,e){i.ia&&$t(i.ia,function(t,o){wr(e,o,t)}),i.l&&Ci({},function(t,o){wr(e,o,t)})}function xn(i,e,t){t=Math.min(i.i.length,t);var o=i.l?Ue(i.l.Ra,i.l,i):null;e:{var d=i.i;let m=-1;for(;;){const I=["count="+t];-1==m?0<t?(m=d[0].h,I.push("ofs="+m)):m=0:I.push("ofs="+m);let R=!0;for(let z=0;z<t;z++){let X=d[z].h;const ge=d[z].g;if(X-=m,0>X)m=Math.max(0,d[z].h-100),R=!1;else try{ws(ge,I,"req"+X+"_")}catch(ze){o&&o(ge)}}if(R){o=I.join("&");break e}}}return i=i.i.splice(0,t),e.D=i,o}function qr(i){i.g||i.u||(i.Z=1,Er(i.Ia,i),i.A=0)}function Gr(i){return!(i.g||i.u||3<=i.A||(i.Z++,i.u=nt(Ue(i.Ia,i),xi(i,i.A)),i.A++,0))}function Wr(i){null!=i.B&&(oe.clearTimeout(i.B),i.B=null)}function $r(i){i.g=new Ir(i,i.j,"rpc",i.Z),null===i.o&&(i.g.H=i.s),i.g.N=0;var e=ms(i.sa);wr(e,"RID","rpc"),wr(e,"SID",i.I),wr(e,"CI",i.L?"0":"1"),wr(e,"AID",i.T),wr(e,"TYPE","xmlhttp"),kt(i,e),i.o&&i.s&&la(e,i.o,i.s),i.J&&i.g.setTimeout(i.J);var t=i.g;i=i.ka,t.K=1,t.v=yi(ms(e)),t.s=null,t.P=!0,es(t,i)}function Oi(i){null!=i.v&&(oe.clearTimeout(i.v),i.v=null)}function ii(i,e){var t=null;if(i.g==e){Oi(i),Wr(i),i.g=null;var o=2}else{if(!br(i.h,e))return;t=e.D,ri(i.h,e),o=1}if(0!=i.G)if(i.pa=e.Y,e.i)if(1==o){t=e.s?e.s.length:0,e=Date.now()-e.F;var d=i.C;pn(o=jt(),new Lr(o,t)),re(i)}else qr(i);else if(3==(d=e.o)||0==d&&0<i.pa||!(1==o&&function ke(i,e){return!(qt(i.h)>=i.h.j-(i.m?1:0)||(i.m?(i.i=e.D.concat(i.i),0):1==i.G||2==i.G||i.C>=(i.Za?0:i.$a)||(i.m=nt(Ue(i.Ja,i,e),xi(i,i.C)),i.C++,0)))}(i,e)||2==o&&Gr(i)))switch(t&&0<t.length&&(e=i.h,e.i=e.i.concat(t)),d){case 1:vs(i,5);break;case 4:vs(i,10);break;case 3:vs(i,6);break;default:vs(i,2)}}function xi(i,e){let t=i.Xa+Math.floor(Math.random()*i.bb);return i.l||(t*=2),t*e}function vs(i,e){if(i.j.info("Error code "+e),2==e){var t=null;i.l&&(t=null);var o=Ue(i.kb,i);t||(t=new ts("//www.google.com/images/cleardot.gif"),oe.location&&"http"==oe.location.protocol||ai(t,"https"),yi(t)),function As(i,e){const t=new we;if(oe.Image){const o=new Image;o.onload=Je(G,t,o,"TestLoadImage: loaded",!0,e),o.onerror=Je(G,t,o,"TestLoadImage: error",!1,e),o.onabort=Je(G,t,o,"TestLoadImage: abort",!1,e),o.ontimeout=Je(G,t,o,"TestLoadImage: timeout",!1,e),oe.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(t.toString(),o)}else vr(2);i.G=0,i.l&&i.l.va(e),no(i),$(i)}function no(i){if(i.G=0,i.la=[],i.l){const e=Ti(i.h);(0!=e.length||0!=i.i.length)&&(bn(i.la,e),bn(i.la,i.i),i.h.i.length=0,Nt(i.i),i.i.length=0),i.l.ua()}}function ro(i,e,t){var o=t instanceof ts?ms(t):new ts(t,void 0);if(""!=o.g)e&&(o.g=e+"."+o.g),qs(o,o.m);else{var d=oe.location;o=d.protocol,e=e?e+"."+d.hostname:d.hostname,d=+d.port;var m=new ts(null,void 0);o&&ai(m,o),e&&(m.g=e),d&&qs(m,d),t&&(m.l=t),o=m}return e=i.za,(t=i.D)&&e&&wr(o,t,e),wr(o,"VER",i.ma),kt(i,o),o}function Do(i,e,t){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ut(t&&i.Da&&!i.ra?new B({jb:!0}):i.ra)).Ka(i.H),e}function ho(){}function Qs(){if(Nr&&!(10<=Number(ji)))throw Error("Environmental error: no available transport.")}function Bi(i,e){fn.call(this),this.g=new ua(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.S=i,(i=e&&e.Yb)&&!Rn(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Rn(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new Wi(this)}function xa(i){ui.call(this);var e=i.__sm__;if(e){e:{for(const t in e){i=t;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function rs(){Br.call(this),this.status=1}function Wi(i){this.g=i}(Oe=ut.prototype).Ka=function(i){this.L=i},Oe.da=function(i,e,t,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Rs.g(),this.C=function en(i){return i.h||(i.h=i.i())}(this.u?this.u:Rs),this.g.onreadystatechange=Ue(this.Ha,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(m){return void Ai(this,m)}if(i=t||"",t=new Map(this.headers),o)if(Object.getPrototypeOf(o)===Object.prototype)for(var d in o)t.set(d,o[d]);else{if("function"!=typeof o.keys||"function"!=typeof o.get)throw Error("Unknown input type for opt_headers: "+String(o));for(const m of o.keys())t.set(m,o.get(m))}o=Array.from(t.keys()).find(m=>"content-type"==m.toLowerCase()),d=oe.FormData&&i instanceof oe.FormData,!(0<=Vt(Zn,e))||o||d||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[m,I]of t)this.g.setRequestHeader(m,I);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Cs(this),0<this.B&&((this.K=function ni(i){return Nr&&function Dr(){return function Wt(i){var e=Bn;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=Wn(String(Tn)).split("."),t=Wn("9").split("."),o=Math.max(e.length,t.length);for(let I=0;0==i&&I<o;I++){var d=e[I]||"",m=t[I]||"";do{if(d=/(\d*)(\D*)(.*)/.exec(d)||["","","",""],m=/(\d*)(\D*)(.*)/.exec(m)||["","","",""],0==d[0].length&&0==m[0].length)break;i=cr(0==d[1].length?0:parseInt(d[1],10),0==m[1].length?0:parseInt(m[1],10))||cr(0==d[2].length,0==m[2].length)||cr(d[2],m[2]),d=d[3],m=m[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ue(this.qa,this)):this.A=Fr(this.qa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(m){Ai(this,m)}},Oe.qa=function(){void 0!==ve&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,pn(this,"timeout"),this.abort(8))},Oe.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,pn(this,"complete"),pn(this,"abort"),bs(this))},Oe.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),bs(this,!0)),ut.X.M.call(this)},Oe.Ha=function(){this.s||(this.F||this.v||this.l?ns(this):this.fb())},Oe.fb=function(){ns(this)},Oe.aa=function(){try{return 2<cs(this)?this.g.status:-1}catch(i){return-1}},Oe.fa=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},Oe.Sa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),se(e)}},Oe.Ea=function(){return this.m},Oe.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Oe=ua.prototype).ma=8,Oe.G=1,Oe.Ja=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.U=Math.floor(1e5*Math.random()),i=this.U++;const d=new Ir(this,this.j,i,void 0);let m=this.s;if(this.S&&(m?(m=ln(m),Cn(m,this.S)):m=this.S),null!==this.o||this.N||(d.H=m,m=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var o=this.i[t];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=xn(this,d,e),wr(t=ms(this.F),"RID",i),wr(t,"CVER",22),this.D&&wr(t,"X-HTTP-Session-Id",this.D),kt(this,t),m&&(this.N?e="headers="+encodeURIComponent(String(Co(m)))+"&"+e:this.o&&la(t,this.o,m)),Ko(this.h,d),this.Ya&&wr(t,"TYPE","init"),this.O?(wr(t,"$req",e),wr(t,"SID","null"),d.Z=!0,aa(d,t,null)):aa(d,t,e),this.G=2}}else 3==this.G&&(i?St(this,i):0==this.i.length||wo(this.h)||St(this))},Oe.Ia=function(){if(this.u=null,$r(this),this.$&&!(this.K||null==this.g||0>=this.P)){var i=2*this.P;this.j.info("BP detection timer enabled: "+i),this.B=nt(Ue(this.eb,this),i)}},Oe.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,vr(10),Z(this),$r(this))},Oe.cb=function(){null!=this.v&&(this.v=null,Z(this),Gr(this),vr(19))},Oe.kb=function(i){i?(this.j.info("Successfully pinged google.com"),vr(2)):(this.j.info("Failed to ping google.com"),vr(1))},(Oe=ho.prototype).xa=function(){},Oe.wa=function(){},Oe.va=function(){},Oe.ua=function(){},Oe.Ra=function(){},Qs.prototype.g=function(i,e){return new Bi(i,e)},Qe(Bi,fn),Bi.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,t=this.h||void 0;vr(0),i.V=e,i.ia=t||{},i.L=i.Y,i.F=ro(i,null,i.V),re(i)},Bi.prototype.close=function(){F(this.g)},Bi.prototype.u=function(i){var e=this.g;if("string"==typeof i){var t={};t.__data__=i,i=t}else this.v&&((t={}).__data__=Dn(i),i=t);e.i.push(new class{constructor(i,e){this.h=i,this.g=e}}(e.ab++,i)),3==e.G&&re(e)},Bi.prototype.M=function(){this.g.l=null,delete this.j,F(this.g),delete this.g,Bi.X.M.call(this)},Qe(xa,ui),Qe(rs,Br),Qe(Wi,ho),Wi.prototype.xa=function(){pn(this.g,"a")},Wi.prototype.wa=function(i){pn(this.g,new xa(i))},Wi.prototype.va=function(i){pn(this.g,new rs)},Wi.prototype.ua=function(){pn(this.g,"b")},Qs.prototype.createWebChannel=Qs.prototype.g,Bi.prototype.send=Bi.prototype.u,Bi.prototype.open=Bi.prototype.m,Bi.prototype.close=Bi.prototype.close,Ke.NO_ERROR=0,Ke.TIMEOUT=8,Ke.HTTP_ERROR=6,_t.COMPLETE="complete",Sn.EventType=qn,qn.OPEN="a",qn.CLOSE="b",qn.ERROR="c",qn.MESSAGE="d",fn.prototype.listen=fn.prototype.N,ut.prototype.listenOnce=ut.prototype.O,ut.prototype.getLastError=ut.prototype.Oa,ut.prototype.getLastErrorCode=ut.prototype.Ea,ut.prototype.getStatus=ut.prototype.aa,ut.prototype.getResponseJson=ut.prototype.Sa,ut.prototype.getResponseText=ut.prototype.fa,ut.prototype.send=ut.prototype.da,ut.prototype.setWithCredentials=ut.prototype.Ka;var bl=ye.createWebChannelTransport=function(){return new Qs},Gl=ye.getStatEventTarget=function(){return jt()},Xa=ye.ErrorCode=Ke,Ha=ye.EventType=_t,Ma=ye.Event=yt,fo=ye.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Zo=ye.FetchXmlHttpFactory=B,po=ye.WebChannel=Sn,du=ye.XhrIo=ut;const Wl="@firebase/firestore";class zr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}zr.UNAUTHENTICATED=new zr(null),zr.GOOGLE_CREDENTIALS=new zr("google-credentials-uid"),zr.FIRST_PARTY=new zr("first-party-uid"),zr.MOCK_USER=new zr("mock-user");let _a="9.14.0";const ko=new xt.Yd("@firebase/firestore");function io(){return ko.logLevel}function rn(i,...e){if(ko.logLevel<=xt.in.DEBUG){const t=e.map(zi);ko.debug(`Firestore (${_a}): ${i}`,...t)}}function vi(i,...e){if(ko.logLevel<=xt.in.ERROR){const t=e.map(zi);ko.error(`Firestore (${_a}): ${i}`,...t)}}function js(i,...e){if(ko.logLevel<=xt.in.WARN){const t=e.map(zi);ko.warn(`Firestore (${_a}): ${i}`,...t)}}function zi(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(t){return i}}function wn(i="Unexpected state"){const e=`FIRESTORE (${_a}) INTERNAL ASSERTION FAILED: `+i;throw vi(e),new Error(e)}function En(i,e){i||wn()}function cn(i,e){return i}const Pt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Qt extends Be.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Ni{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Ra{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Ea{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(zr.UNAUTHENTICATED))}shutdown(){}}class Fo{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Qo{constructor(e){this.t=e,this.currentUser=zr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var o=this;let d=this.i;const m=X=>this.i!==d?(d=this.i,t(X)):Promise.resolve();let I=new Ni;this.o=()=>{this.i++,this.currentUser=this.u(),I.resolve(),I=new Ni,e.enqueueRetryable(()=>m(this.currentUser))};const R=()=>{const X=I;e.enqueueRetryable((0,me.Z)(function*(){yield X.promise,yield m(o.currentUser)}))},z=X=>{rn("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=X,this.auth.addAuthTokenListener(this.o),R()};this.t.onInit(X=>z(X)),setTimeout(()=>{if(!this.auth){const X=this.t.getImmediate({optional:!0});X?z(X):(rn("FirebaseAuthCredentialsProvider","Auth not yet detected"),I.resolve(),I=new Ni)}},0),R()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(o=>this.i!==e?(rn("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(En("string"==typeof o.accessToken),new Ra(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return En(null===e||"string"==typeof e),new zr(e)}}class Xo{constructor(e,t,o,d){this.h=e,this.l=t,this.m=o,this.g=d,this.type="FirstParty",this.user=zr.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(En(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class zl{constructor(e,t,o,d){this.h=e,this.l=t,this.m=o,this.g=d}getToken(){return Promise.resolve(new Xo(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(zr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Jo{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Oa{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const o=m=>{null!=m.error&&rn("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${m.error.message}`);const I=m.token!==this.A;return this.A=m.token,rn("FirebaseAppCheckTokenProvider",`Received ${I?"new":"existing"} token.`),I?t(m.token):Promise.resolve()};this.o=m=>{e.enqueueRetryable(()=>o(m))};const d=m=>{rn("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=m,this.appCheck.addTokenListener(this.o)};this.T.onInit(m=>d(m)),setTimeout(()=>{if(!this.appCheck){const m=this.T.getImmediate({optional:!0});m?d(m):rn("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(En("string"==typeof t.token),this.A=t.token,new Jo(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Cl(i){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let o=0;o<i;o++)t[o]=Math.floor(256*Math.random());return t}class da{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let o="";for(;o.length<20;){const d=Cl(40);for(let m=0;m<d.length;++m)o.length<20&&d[m]<t&&(o+=e.charAt(d[m]%e.length))}return o}}function ur(i,e){return i<e?-1:i>e?1:0}function Ia(i,e,t){return i.length===e.length&&i.every((o,d)=>t(o,e[d]))}function ll(i){return i+"\0"}class Mi{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Qt(Pt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Qt(Pt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Qt(Pt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Qt(Pt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Mi.fromMillis(Date.now())}static fromDate(e){return Mi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*t));return new Mi(t,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ur(this.nanoseconds,e.nanoseconds):ur(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class er{constructor(e){this.timestamp=e}static fromTimestamp(e){return new er(e)}static min(){return new er(new Mi(0,0))}static max(){return new er(new Mi(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ea{constructor(e,t,o){void 0===t?t=0:t>e.length&&wn(),void 0===o?o=e.length-t:o>e.length-t&&wn(),this.segments=e,this.offset=t,this.len=o}get length(){return this.len}isEqual(e){return 0===ea.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ea?e.forEach(o=>{t.push(o)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,o=this.limit();t<o;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const o=Math.min(e.length,t.length);for(let d=0;d<o;d++){const m=e.get(d),I=t.get(d);if(m<I)return-1;if(m>I)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Qr extends ea{construct(e,t,o){return new Qr(e,t,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const o of e){if(o.indexOf("//")>=0)throw new Qt(Pt.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);t.push(...o.split("/").filter(d=>d.length>0))}return new Qr(t)}static emptyPath(){return new Qr([])}}const go=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _i extends ea{construct(e,t,o){return new _i(e,t,o)}static isValidIdentifier(e){return go.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_i.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new _i(["__name__"])}static fromServerFormat(e){const t=[];let o="",d=0;const m=()=>{if(0===o.length)throw new Qt(Pt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(o),o=""};let I=!1;for(;d<e.length;){const R=e[d];if("\\"===R){if(d+1===e.length)throw new Qt(Pt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const z=e[d+1];if("\\"!==z&&"."!==z&&"`"!==z)throw new Qt(Pt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=z,d+=2}else"`"===R?(I=!I,d++):"."!==R||I?(o+=R,d++):(m(),d++)}if(m(),I)throw new Qt(Pt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _i(t)}static emptyPath(){return new _i([])}}class dn{constructor(e){this.path=e}static fromPath(e){return new dn(Qr.fromString(e))}static fromName(e){return new dn(Qr.fromString(e).popFirst(5))}static empty(){return new dn(Qr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Qr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Qr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new dn(new Qr(e.slice()))}}class wa{constructor(e,t,o,d){this.indexId=e,this.collectionGroup=t,this.fields=o,this.indexState=d}}function ta(i){return i.fields.find(e=>2===e.kind)}function di(i){return i.fields.filter(e=>2!==e.kind)}wa.UNKNOWN_ID=-1;class So{constructor(e,t){this.fieldPath=e,this.kind=t}}class Na{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Na(0,To.min())}}function fu(i,e){const t=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,d=er.fromTimestamp(1e9===o?new Mi(t+1,0):new Mi(t,o));return new To(d,dn.empty(),e)}function Yl(i){return new To(i.readTime,i.key,-1)}class To{constructor(e,t,o){this.readTime=e,this.documentKey=t,this.largestBatchId=o}static min(){return new To(er.min(),dn.empty(),-1)}static max(){return new To(er.max(),dn.empty(),-1)}}function pu(i,e){let t=i.readTime.compareTo(e.readTime);return 0!==t?t:(t=dn.comparator(i.documentKey,e.documentKey),0!==t?t:ur(i.largestBatchId,e.largestBatchId))}const ql="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class gu{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ao(i){return Kl.apply(this,arguments)}function Kl(){return Kl=(0,me.Z)(function*(i){if(i.code!==Pt.FAILED_PRECONDITION||i.message!==ql)throw i;rn("LocalStore","Unexpectedly lost primary lease")}),Kl.apply(this,arguments)}class Rt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&wn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Rt((o,d)=>{this.nextCallback=m=>{this.wrapSuccess(e,m).next(o,d)},this.catchCallback=m=>{this.wrapFailure(t,m).next(o,d)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Rt?t:Rt.resolve(t)}catch(t){return Rt.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Rt.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Rt.reject(t)}static resolve(e){return new Rt((t,o)=>{t(e)})}static reject(e){return new Rt((t,o)=>{o(e)})}static waitFor(e){return new Rt((t,o)=>{let d=0,m=0,I=!1;e.forEach(R=>{++d,R.next(()=>{++m,I&&m===d&&t()},z=>o(z))}),I=!0,m===d&&t()})}static or(e){let t=Rt.resolve(!1);for(const o of e)t=t.next(d=>d?Rt.resolve(d):o());return t}static forEach(e,t){const o=[];return e.forEach((d,m)=>{o.push(t.call(this,d,m))}),this.waitFor(o)}static mapArray(e,t){return new Rt((o,d)=>{const m=e.length,I=new Array(m);let R=0;for(let z=0;z<m;z++){const X=z;t(e[X]).next(ge=>{I[X]=ge,++R,R===m&&o(I)},ge=>d(ge))}})}static doWhile(e,t){return new Rt((o,d)=>{const m=()=>{!0===e()?t().next(()=>{m()},d):o()};m()})}}class Ds{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new Ni,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new Ca(e,t.error)):this.P.resolve()},this.transaction.onerror=o=>{const d=Pa(o.target.error);this.P.reject(new Ca(e,d))}}static open(e,t,o,d){try{return new Ds(t,e.transaction(d,o))}catch(m){throw new Ca(t,m)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(rn("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new yo(t)}}class so{constructor(e,t,o){this.name=e,this.version=t,this.S=o,12.2===so.D((0,Be.z$)())&&vi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return rn("SimpleDb","Removing database:",e),xs(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,Be.hl)())return!1;if(so.N())return!0;const e=(0,Be.z$)(),t=so.D(e),o=0<t&&t<10,d=so.k(e),m=0<d&&d<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||m)}static N(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static k(e){const t=e.match(/Android ([\d.]+)/i),o=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(o)}F(e){var t=this;return(0,me.Z)(function*(){return t.db||(rn("SimpleDb","Opening database:",t.name),t.db=yield new Promise((o,d)=>{const m=indexedDB.open(t.name,t.version);m.onsuccess=I=>{o(I.target.result)},m.onblocked=()=>{d(new Ca(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},m.onerror=I=>{const R=I.target.error;d("VersionError"===R.name?new Qt(Pt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===R.name?new Qt(Pt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+R):new Ca(e,R))},m.onupgradeneeded=I=>{rn("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',I.oldVersion),t.S.$(I.target.result,m.transaction,I.oldVersion,t.version).next(()=>{rn("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=o=>t.B(o)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,o,d){var m=this;return(0,me.Z)(function*(){const I="readonly"===t;let R=0;for(;;){++R;try{m.db=yield m.F(e);const z=Ds.open(m.db,e,I?"readonly":"readwrite",o),X=d(z).next(ge=>(z.V(),ge)).catch(ge=>(z.abort(ge),Rt.reject(ge))).toPromise();return X.catch(()=>{}),yield z.v,X}catch(z){const X=z,ge="FirebaseError"!==X.name&&R<3;if(rn("SimpleDb","Transaction failed with error:",X.message,"Retrying:",ge),m.close(),!ge)return Promise.reject(X)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class mo{constructor(e){this.U=e,this.q=!1,this.K=null}get isDone(){return this.q}get G(){return this.K}set cursor(e){this.U=e}done(){this.q=!0}j(e){this.K=e}delete(){return xs(this.U.delete())}}class Ca extends Qt{constructor(e,t){super(Pt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function na(i){return"IndexedDbTransactionError"===i.name}class yo{constructor(e){this.store=e}put(e,t){let o;return void 0!==t?(rn("SimpleDb","PUT",this.store.name,e,t),o=this.store.put(t,e)):(rn("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),xs(o)}add(e){return rn("SimpleDb","ADD",this.store.name,e,e),xs(this.store.add(e))}get(e){return xs(this.store.get(e)).next(t=>(void 0===t&&(t=null),rn("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return rn("SimpleDb","DELETE",this.store.name,e),xs(this.store.delete(e))}count(){return rn("SimpleDb","COUNT",this.store.name),xs(this.store.count())}W(e,t){const o=this.options(e,t);if(o.index||"function"!=typeof this.store.getAll){const d=this.cursor(o),m=[];return this.H(d,(I,R)=>{m.push(R)}).next(()=>m)}{const d=this.store.getAll(o.range);return new Rt((m,I)=>{d.onerror=R=>{I(R.target.error)},d.onsuccess=R=>{m(R.target.result)}})}}J(e,t){const o=this.store.getAll(e,null===t?void 0:t);return new Rt((d,m)=>{o.onerror=I=>{m(I.target.error)},o.onsuccess=I=>{d(I.target.result)}})}Y(e,t){rn("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,t);o.X=!1;const d=this.cursor(o);return this.H(d,(m,I,R)=>R.delete())}Z(e,t){let o;t?o=e:(o={},t=e);const d=this.cursor(o);return this.H(d,t)}tt(e){const t=this.cursor({});return new Rt((o,d)=>{t.onerror=m=>{const I=Pa(m.target.error);d(I)},t.onsuccess=m=>{const I=m.target.result;I?e(I.primaryKey,I.value).next(R=>{R?I.continue():o()}):o()}})}H(e,t){const o=[];return new Rt((d,m)=>{e.onerror=I=>{m(I.target.error)},e.onsuccess=I=>{const R=I.target.result;if(!R)return void d();const z=new mo(R),X=t(R.primaryKey,R.value,z);if(X instanceof Rt){const ge=X.catch(ze=>(z.done(),Rt.reject(ze)));o.push(ge)}z.isDone?d():null===z.G?R.continue():R.continue(z.G)}}).next(()=>Rt.waitFor(o))}options(e,t){let o;return void 0!==e&&("string"==typeof e?o=e:t=e),{index:o,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const o=this.store.index(e.index);return e.X?o.openKeyCursor(e.range,t):o.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function xs(i){return new Rt((e,t)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const d=Pa(o.target.error);t(d)}})}let Ga=!1;function Pa(i){const e=so.D((0,Be.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(t)>=0){const o=new Qt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Ga||(Ga=!0,setTimeout(()=>{throw o},0)),o}}return i}class ka{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;rn("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,me.Z)(function*(){t.task=null;try{rn("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(o){na(o)?rn("IndexBackiller","Ignoring IndexedDB error during index backfill: ",o):yield Ao(o)}yield t.nt(6e4)}))}}class Dl{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,me.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",o=>t.it(o,e))})()}it(e,t){const o=new Set;let d=t,m=!0;return Rt.doWhile(()=>!0===m&&d>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(I=>{if(null!==I&&!o.has(I))return rn("IndexBackiller",`Processing collection: ${I}`),this.rt(e,I,d).next(R=>{d-=R,o.add(I)});m=!1})).next(()=>t-d)}rt(e,t,o){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(d=>this.localStore.localDocuments.getNextDocuments(e,t,d,o).next(m=>{const I=m.changes;return this.localStore.indexManager.updateIndexEntries(e,I).next(()=>this.ot(d,m)).next(R=>(rn("IndexBackiller",`Updating offset: ${R}`),this.localStore.indexManager.updateCollectionGroup(e,t,R))).next(()=>I.size)}))}ot(e,t){let o=e;return t.changes.forEach((d,m)=>{const I=Yl(m);pu(I,o)>0&&(o=I)}),new To(o.readTime,o.documentKey,Math.max(t.batchId,e.largestBatchId))}}class oo{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=o=>this.ut(o),this.ct=o=>t.writeSequenceNumber(o))}ut(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ct&&this.ct(e),e}}function Ja(i){let e=0;for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e++;return e}function ra(i,e){for(const t in i)Object.prototype.hasOwnProperty.call(i,t)&&e(t,i[t])}function Lo(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}oo.at=-1;class Pi{constructor(e,t){this.comparator=e,this.root=t||ds.EMPTY}insert(e,t){return new Pi(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ds.BLACK,null,null))}remove(e){return new Pi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ds.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const o=this.comparator(e,t.key);if(0===o)return t.value;o<0?t=t.left:o>0&&(t=t.right)}return null}indexOf(e){let t=0,o=this.root;for(;!o.isEmpty();){const d=this.comparator(e,o.key);if(0===d)return t+o.left.size;d<0?o=o.left:(t+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,o)=>(e(t,o),!1))}toString(){const e=[];return this.inorderTraversal((t,o)=>(e.push(`${t}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ms(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ms(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ms(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ms(this.root,e,this.comparator,!0)}}class Ms{constructor(e,t,o,d){this.isReverse=d,this.nodeStack=[];let m=1;for(;!e.isEmpty();)if(m=t?o(e.key,t):1,t&&d&&(m*=-1),m<0)e=this.isReverse?e.left:e.right;else{if(0===m){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ds{constructor(e,t,o,d,m){this.key=e,this.value=t,this.color=null!=o?o:ds.RED,this.left=null!=d?d:ds.EMPTY,this.right=null!=m?m:ds.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,o,d,m){return new ds(null!=e?e:this.key,null!=t?t:this.value,null!=o?o:this.color,null!=d?d:this.left,null!=m?m:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,o){let d=this;const m=o(e,d.key);return d=m<0?d.copy(null,null,null,d.left.insert(e,t,o),null):0===m?d.copy(null,t,null,null,null):d.copy(null,null,null,null,d.right.insert(e,t,o)),d.fixUp()}removeMin(){if(this.left.isEmpty())return ds.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let o,d=this;if(t(e,d.key)<0)d.left.isEmpty()||d.left.isRed()||d.left.left.isRed()||(d=d.moveRedLeft()),d=d.copy(null,null,null,d.left.remove(e,t),null);else{if(d.left.isRed()&&(d=d.rotateRight()),d.right.isEmpty()||d.right.isRed()||d.right.left.isRed()||(d=d.moveRedRight()),0===t(e,d.key)){if(d.right.isEmpty())return ds.EMPTY;o=d.right.min(),d=d.copy(o.key,o.value,null,null,d.right.removeMin())}d=d.copy(null,null,null,null,d.right.remove(e,t))}return d.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ds.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ds.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw wn();const e=this.left.check();if(e!==this.right.check())throw wn();return e+(this.isRed()?0:1)}}ds.EMPTY=null,ds.RED=!0,ds.BLACK=!1,ds.EMPTY=new class{constructor(){this.size=0}get key(){throw wn()}get value(){throw wn()}get color(){throw wn()}get left(){throw wn()}get right(){throw wn()}copy(i,e,t,o,d){return this}insert(i,e,t){return new ds(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Xr{constructor(e){this.comparator=e,this.data=new Pi(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,o)=>(e(t),!1))}forEachInRange(e,t){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const d=o.getNext();if(this.comparator(d.key,e[1])>=0)return;t(d.key)}}forEachWhile(e,t){let o;for(o=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new mu(this.data.getIterator())}getIteratorFrom(e){return new mu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(o=>{t=t.add(o)}),t}isEqual(e){if(!(e instanceof Xr)||this.size!==e.size)return!1;const t=this.data.getIterator(),o=e.data.getIterator();for(;t.hasNext();){const d=t.getNext().key,m=o.getNext().key;if(0!==this.comparator(d,m))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Xr(this.comparator);return t.data=e,t}}class mu{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Fa(i){return i.hasNext()?i.getNext():void 0}class ao{constructor(e){this.fields=e,e.sort(_i.comparator)}static empty(){return new ao([])}unionWith(e){let t=new Xr(_i.comparator);for(const o of this.fields)t=t.add(o);for(const o of e)t=t.add(o);return new ao(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ia(this.fields,e.fields,(t,o)=>t.isEqual(o))}}class _s{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new _s(t)}static fromUint8Array(e){const t=function(o){let d="";for(let m=0;m<o.length;++m)d+=String.fromCharCode(o[m]);return d}(e);return new _s(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let o=0;o<e.length;o++)t[o]=e.charCodeAt(o);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ur(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}_s.EMPTY_BYTE_STRING=new _s("");const el=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Vo(i){if(En(!!i),"string"==typeof i){let e=0;const t=el.exec(i);if(En(!!t),t[1]){let d=t[1];d=(d+"000000000").substr(0,9),e=Number(d)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:Yi(i.seconds),nanos:Yi(i.nanos)}}function Yi(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function ia(i){return"string"==typeof i?_s.fromBase64String(i):_s.fromUint8Array(i)}function S(i){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==i?void 0:i.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function T(i){const e=i.mapValue.fields.__previous_value__;return S(e)?T(e):e}function w(i){const e=Vo(i.mapValue.fields.__local_write_time__.timestampValue);return new Mi(e.seconds,e.nanos)}class N{constructor(e,t,o,d,m,I,R,z){this.databaseId=e,this.appId=t,this.persistenceKey=o,this.host=d,this.ssl=m,this.forceLongPolling=I,this.autoDetectLongPolling=R,this.useFetchStreams=z}}class j{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new j("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof j&&e.projectId===this.projectId&&e.database===this.database}}function te(i){return null==i}function Ae(i){return 0===i&&1/i==-1/0}function Fe(i){return"number"==typeof i&&Number.isInteger(i)&&!Ae(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}const It={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},O={nullValue:"NULL_VALUE"};function U(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?S(i)?4:Da(i)?9007199254740991:10:wn()}function Q(i,e){if(i===e)return!0;const t=U(i);if(t!==U(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return w(i).isEqual(w(e));case 3:return function(o,d){if("string"==typeof o.timestampValue&&"string"==typeof d.timestampValue&&o.timestampValue.length===d.timestampValue.length)return o.timestampValue===d.timestampValue;const m=Vo(o.timestampValue),I=Vo(d.timestampValue);return m.seconds===I.seconds&&m.nanos===I.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return d=e,ia(i.bytesValue).isEqual(ia(d.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,d){return Yi(o.geoPointValue.latitude)===Yi(d.geoPointValue.latitude)&&Yi(o.geoPointValue.longitude)===Yi(d.geoPointValue.longitude)}(i,e);case 2:return function(o,d){if("integerValue"in o&&"integerValue"in d)return Yi(o.integerValue)===Yi(d.integerValue);if("doubleValue"in o&&"doubleValue"in d){const m=Yi(o.doubleValue),I=Yi(d.doubleValue);return m===I?Ae(m)===Ae(I):isNaN(m)&&isNaN(I)}return!1}(i,e);case 9:return Ia(i.arrayValue.values||[],e.arrayValue.values||[],Q);case 10:return function(o,d){const m=o.mapValue.fields||{},I=d.mapValue.fields||{};if(Ja(m)!==Ja(I))return!1;for(const R in m)if(m.hasOwnProperty(R)&&(void 0===I[R]||!Q(m[R],I[R])))return!1;return!0}(i,e);default:return wn()}var d}function fe(i,e){return void 0!==(i.values||[]).find(t=>Q(t,e))}function Ye(i,e){if(i===e)return 0;const t=U(i),o=U(e);if(t!==o)return ur(t,o);switch(t){case 0:case 9007199254740991:return 0;case 1:return ur(i.booleanValue,e.booleanValue);case 2:return function(d,m){const I=Yi(d.integerValue||d.doubleValue),R=Yi(m.integerValue||m.doubleValue);return I<R?-1:I>R?1:I===R?0:isNaN(I)?isNaN(R)?0:-1:1}(i,e);case 3:return wt(i.timestampValue,e.timestampValue);case 4:return wt(w(i),w(e));case 5:return ur(i.stringValue,e.stringValue);case 6:return function(d,m){const I=ia(d),R=ia(m);return I.compareTo(R)}(i.bytesValue,e.bytesValue);case 7:return function(d,m){const I=d.split("/"),R=m.split("/");for(let z=0;z<I.length&&z<R.length;z++){const X=ur(I[z],R[z]);if(0!==X)return X}return ur(I.length,R.length)}(i.referenceValue,e.referenceValue);case 8:return function(d,m){const I=ur(Yi(d.latitude),Yi(m.latitude));return 0!==I?I:ur(Yi(d.longitude),Yi(m.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(d,m){const I=d.values||[],R=m.values||[];for(let z=0;z<I.length&&z<R.length;++z){const X=Ye(I[z],R[z]);if(X)return X}return ur(I.length,R.length)}(i.arrayValue,e.arrayValue);case 10:return function(d,m){if(d===It.mapValue&&m===It.mapValue)return 0;if(d===It.mapValue)return 1;if(m===It.mapValue)return-1;const I=d.fields||{},R=Object.keys(I),z=m.fields||{},X=Object.keys(z);R.sort(),X.sort();for(let ge=0;ge<R.length&&ge<X.length;++ge){const ze=ur(R[ge],X[ge]);if(0!==ze)return ze;const Dt=Ye(I[R[ge]],z[X[ge]]);if(0!==Dt)return Dt}return ur(R.length,X.length)}(i.mapValue,e.mapValue);default:throw wn()}}function wt(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return ur(i,e);const t=Vo(i),o=Vo(e),d=ur(t.seconds,o.seconds);return 0!==d?d:ur(t.nanos,o.nanos)}function Ht(i){return sn(i)}function sn(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(o){const d=Vo(o);return`time(${d.seconds},${d.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?ia(i.bytesValue).toBase64():"referenceValue"in i?dn.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(o){let d="[",m=!0;for(const I of o.values||[])m?m=!1:d+=",",d+=sn(I);return d+"]"}(i.arrayValue):"mapValue"in i?function(o){const d=Object.keys(o.fields||{}).sort();let m="{",I=!0;for(const R of d)I?I=!1:m+=",",m+=`${R}:${sn(o.fields[R])}`;return m+"}"}(i.mapValue):wn();var e}function Vn(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function pr(i){return!!i&&"integerValue"in i}function Ar(i){return!!i&&"arrayValue"in i}function Fn(i){return!!i&&"nullValue"in i}function hs(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function Gs(i){return!!i&&"mapValue"in i}function lo(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return ra(i.mapValue.fields,(t,o)=>e.mapValue.fields[t]=lo(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(i.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=lo(i.arrayValue.values[t]);return e}return Object.assign({},i)}function Da(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function tl(i){return"nullValue"in i?O:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?Vn(j.empty(),dn.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?{mapValue:{}}:wn()}function ha(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?Vn(j.empty(),dn.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?{mapValue:{}}:"mapValue"in i?It:wn()}function nl(i,e){const t=Ye(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?-1:!i.inclusive&&e.inclusive?1:0}function Wa(i,e){const t=Ye(i.value,e.value);return 0!==t?t:i.inclusive&&!e.inclusive?1:!i.inclusive&&e.inclusive?-1:0}class is{constructor(e){this.value=e}static empty(){return new is({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let o=0;o<e.length-1;++o)if(t=(t.mapValue.fields||{})[e.get(o)],!Gs(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=lo(t)}setAll(e){let t=_i.emptyPath(),o={},d=[];e.forEach((I,R)=>{if(!t.isImmediateParentOf(R)){const z=this.getFieldsMap(t);this.applyChanges(z,o,d),o={},d=[],t=R.popLast()}I?o[R.lastSegment()]=lo(I):d.push(R.lastSegment())});const m=this.getFieldsMap(t);this.applyChanges(m,o,d)}delete(e){const t=this.field(e.popLast());Gs(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Q(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let o=0;o<e.length;++o){let d=t.mapValue.fields[e.get(o)];Gs(d)&&d.mapValue.fields||(d={mapValue:{fields:{}}},t.mapValue.fields[e.get(o)]=d),t=d}return t.mapValue.fields}applyChanges(e,t,o){ra(t,(d,m)=>e[d]=m);for(const d of o)delete e[d]}clone(){return new is(lo(this.value))}}function fa(i){const e=[];return ra(i.fields,(t,o)=>{const d=new _i([t]);if(Gs(o)){const m=fa(o.mapValue).fields;if(0===m.length)e.push(d);else for(const I of m)e.push(d.child(I))}else e.push(d)}),new ao(e)}class li{constructor(e,t,o,d,m,I){this.key=e,this.documentType=t,this.version=o,this.readTime=d,this.data=m,this.documentState=I}static newInvalidDocument(e){return new li(e,0,er.min(),er.min(),is.empty(),0)}static newFoundDocument(e,t,o){return new li(e,1,t,er.min(),o,0)}static newNoDocument(e,t){return new li(e,2,t,er.min(),is.empty(),0)}static newUnknownDocument(e,t){return new li(e,3,t,er.min(),is.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=is.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=is.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=er.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof li&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new li(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Sl{constructor(e,t=null,o=[],d=[],m=null,I=null,R=null){this.path=e,this.collectionGroup=t,this.orderBy=o,this.filters=d,this.limit=m,this.startAt=I,this.endAt=R,this.ht=null}}function vu(i,e=null,t=[],o=[],d=null,m=null,I=null){return new Sl(i,e,t,o,d,m,I)}function Tl(i){const e=cn(i);if(null===e.ht){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(o=>{return(d=o).field.canonicalString()+d.op.toString()+Ht(d.value);var d}).join(","),t+="|ob:",t+=e.orderBy.map(o=>{return(d=o).field.canonicalString()+d.dir;var d}).join(","),te(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(o=>Ht(o)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(o=>Ht(o)).join(",")),e.ht=t}return e.ht}function ul(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let d=0;d<i.orderBy.length;d++)if(!ju(i.orderBy[d],e.orderBy[d]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let d=0;d<i.filters.length;d++)if((t=i.filters[d]).op!==(o=e.filters[d]).op||!t.field.isEqual(o.field)||!Q(t.value,o.value))return!1;var t,o;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Ud(i.startAt,e.startAt)&&Ud(i.endAt,e.endAt)}function Vu(i){return dn.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function yc(i,e){return i.filters.filter(t=>t instanceof Fs&&t.field.isEqual(e))}function Ld(i,e,t){let o=O,d=!0;for(const m of yc(i,e)){let I=O,R=!0;switch(m.op){case"<":case"<=":I=tl(m.value);break;case"==":case"in":case">=":I=m.value;break;case">":I=m.value,R=!1;break;case"!=":case"not-in":I=O}nl({value:o,inclusive:d},{value:I,inclusive:R})<0&&(o=I,d=R)}if(null!==t)for(let m=0;m<i.orderBy.length;++m)if(i.orderBy[m].field.isEqual(e)){const I=t.position[m];nl({value:o,inclusive:d},{value:I,inclusive:t.inclusive})<0&&(o=I,d=t.inclusive);break}return{value:o,inclusive:d}}function Bu(i,e,t){let o=It,d=!0;for(const m of yc(i,e)){let I=It,R=!0;switch(m.op){case">=":case">":I=ha(m.value),R=!1;break;case"==":case"in":case"<=":I=m.value;break;case"<":I=m.value,R=!1;break;case"!=":case"not-in":I=It}Wa({value:o,inclusive:d},{value:I,inclusive:R})>0&&(o=I,d=R)}if(null!==t)for(let m=0;m<i.orderBy.length;++m)if(i.orderBy[m].field.isEqual(e)){const I=t.position[m];Wa({value:o,inclusive:d},{value:I,inclusive:t.inclusive})>0&&(o=I,d=t.inclusive);break}return{value:o,inclusive:d}}class Fs extends class{}{constructor(e,t,o){super(),this.field=e,this.op=t,this.value=o}static create(e,t,o){return e.isKeyField()?"in"===t||"not-in"===t?this.lt(e,t,o):new $u(e,t,o):"array-contains"===t?new Qc(e,o):"in"===t?new $d(e,o):"not-in"===t?new Uu(e,o):"array-contains-any"===t?new Xc(e,o):new Fs(e,t,o)}static lt(e,t,o){return"in"===t?new Vd(e,o):new Bd(e,o)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.ft(Ye(t,this.value)):null!==t&&U(this.value)===U(t)&&this.ft(Ye(t,this.value))}ft(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return wn()}}dt(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class $u extends Fs{constructor(e,t,o){super(e,t,o),this.key=dn.fromName(o.referenceValue)}matches(e){const t=dn.comparator(e.key,this.key);return this.ft(t)}}class Vd extends Fs{constructor(e,t){super(e,"in",t),this.keys=Oh(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Bd extends Fs{constructor(e,t){super(e,"not-in",t),this.keys=Oh(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Oh(i,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(o=>dn.fromName(o.referenceValue))}class Qc extends Fs{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ar(t)&&fe(t.arrayValue,this.value)}}class $d extends Fs{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&fe(this.value.arrayValue,t)}}class Uu extends Fs{constructor(e,t){super(e,"not-in",t)}matches(e){if(fe(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!fe(this.value.arrayValue,t)}}class Xc extends Fs{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ar(t)||!t.arrayValue.values)&&t.arrayValue.values.some(o=>fe(this.value.arrayValue,o))}}class La{constructor(e,t){this.position=e,this.inclusive=t}}class xo{constructor(e,t="asc"){this.field=e,this.dir=t}}function ju(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}function Al(i,e,t){let o=0;for(let d=0;d<i.position.length;d++){const m=e[d],I=i.position[d];if(o=m.field.isKeyField()?dn.comparator(dn.fromName(I.referenceValue),t.key):Ye(I,t.data.field(m.field)),"desc"===m.dir&&(o*=-1),0!==o)break}return o}function Ud(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let t=0;t<i.position.length;t++)if(!Q(i.position[t],e.position[t]))return!1;return!0}class Va{constructor(e,t=null,o=[],d=[],m=null,I="F",R=null,z=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=o,this.filters=d,this.limit=m,this.limitType=I,this.startAt=R,this.endAt=z,this._t=null,this.wt=null}}function jd(i,e,t,o,d,m,I,R){return new Va(i,e,t,o,d,m,I,R)}function rl(i){return new Va(i)}function xl(i){return 0===i.filters.length&&null===i.limit&&null==i.startAt&&null==i.endAt&&(0===i.explicitOrderBy.length||1===i.explicitOrderBy.length&&i.explicitOrderBy[0].field.isKeyField())}function _u(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function vc(i){for(const e of i.filters)if(e.dt())return e.field;return null}function _c(i){return null!==i.collectionGroup}function cl(i){const e=cn(i);if(null===e._t){e._t=[];const t=vc(e),o=_u(e);if(null!==t&&null===o)t.isKeyField()||e._t.push(new xo(t)),e._t.push(new xo(_i.keyField(),"asc"));else{let d=!1;for(const m of e.explicitOrderBy)e._t.push(m),m.field.isKeyField()&&(d=!0);if(!d){const m=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e._t.push(new xo(_i.keyField(),m))}}}return e._t}function Mo(i){const e=cn(i);if(!e.wt)if("F"===e.limitType)e.wt=vu(e.path,e.collectionGroup,cl(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const m of cl(e))t.push(new xo(m.field,"desc"===m.dir?"asc":"desc"));const o=e.endAt?new La(e.endAt.position,e.endAt.inclusive):null,d=e.startAt?new La(e.startAt.position,e.startAt.inclusive):null;e.wt=vu(e.path,e.collectionGroup,t,e.filters,e.limit,o,d)}return e.wt}function dl(i,e,t){return new Va(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,t,i.startAt,i.endAt)}function Eu(i,e){return ul(Mo(i),Mo(e))&&i.limitType===e.limitType}function Jc(i){return`${Tl(Mo(i))}|lt:${i.limitType}`}function Zl(i){return`Query(target=${function Fd(i){let e=i.path.canonicalString();return null!==i.collectionGroup&&(e+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(e+=`, filters: [${i.filters.map(t=>{return`${(o=t).field.canonicalString()} ${o.op} ${Ht(o.value)}`;var o}).join(", ")}]`),te(i.limit)||(e+=", limit: "+i.limit),i.orderBy.length>0&&(e+=`, orderBy: [${i.orderBy.map(t=>{return`${(o=t).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),i.startAt&&(e+=", startAt: ",e+=i.startAt.inclusive?"b:":"a:",e+=i.startAt.position.map(t=>Ht(t)).join(",")),i.endAt&&(e+=", endAt: ",e+=i.endAt.inclusive?"a:":"b:",e+=i.endAt.position.map(t=>Ht(t)).join(",")),`Target(${e})`}(Mo(i))}; limitType=${i.limitType})`}function Ws(i,e){return e.isFoundDocument()&&function(t,o){const d=o.key.path;return null!==t.collectionGroup?o.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(d):dn.isDocumentKey(t.path)?t.path.isEqual(d):t.path.isImmediateParentOf(d)}(i,e)&&function(t,o){for(const d of t.explicitOrderBy)if(!d.field.isKeyField()&&null===o.data.field(d.field))return!1;return!0}(i,e)&&function(t,o){for(const d of t.filters)if(!d.matches(o))return!1;return!0}(i,e)&&(o=e,!((t=i).startAt&&!function(d,m,I){const R=Al(d,m,I);return d.inclusive?R<=0:R<0}(t.startAt,cl(t),o)||t.endAt&&!function(d,m,I){const R=Al(d,m,I);return d.inclusive?R>=0:R>0}(t.endAt,cl(t),o)));var t,o}function il(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function ed(i){return(e,t)=>{let o=!1;for(const d of cl(i)){const m=Hd(d,e,t);if(0!==m)return m;o=o||d.field.isKeyField()}return 0}}function Hd(i,e,t){const o=i.field.isKeyField()?dn.comparator(e.key,t.key):function(d,m,I){const R=m.data.field(d),z=I.data.field(d);return null!==R&&null!==z?Ye(R,z):wn()}(i.field,e,t);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return wn()}}function td(i,e){if(i.gt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ae(e)?"-0":e}}function Hu(i){return{integerValue:""+i}}function Gu(i,e){return Fe(e)?Hu(e):td(i,e)}class nd{constructor(){this._=void 0}}function Sa(i,e,t){return i instanceof Ml?function(o,d){const m={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return d&&(m.fields.__previous_value__=d),{mapValue:m}}(t,e):i instanceof pa?Bo(i,e):i instanceof $o?Rl(i,e):function(o,d){const m=Gd(o,d),I=Wu(m)+Wu(o.yt);return pr(m)&&pr(o.yt)?Hu(I):td(o.It,I)}(i,e)}function rd(i,e,t){return i instanceof pa?Bo(i,e):i instanceof $o?Rl(i,e):t}function Gd(i,e){return i instanceof Ol?pr(t=e)||(o=t)&&"doubleValue"in o?e:{integerValue:0}:null;var o,t}class Ml extends nd{}class pa extends nd{constructor(e){super(),this.elements=e}}function Bo(i,e){const t=id(e);for(const o of i.elements)t.some(d=>Q(d,o))||t.push(o);return{arrayValue:{values:t}}}class $o extends nd{constructor(e){super(),this.elements=e}}function Rl(i,e){let t=id(e);for(const o of i.elements)t=t.filter(d=>!Q(d,o));return{arrayValue:{values:t}}}class Ol extends nd{constructor(e,t){super(),this.It=e,this.yt=t}}function Wu(i){return Yi(i.integerValue||i.doubleValue)}function id(i){return Ar(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class Ec{constructor(e,t){this.field=e,this.transform=t}}class Ic{constructor(e,t){this.version=e,this.transformResults=t}}class ss{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ss}static exists(e){return new ss(void 0,e)}static updateTime(e){return new ss(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function hl(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class od{}function ad(i,e){if(!i.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return i.isNoDocument()?new bu(i.key,ss.none()):new Nl(i.key,i.data,ss.none());{const t=i.data,o=is.empty();let d=new Xr(_i.comparator);for(let m of e.fields)if(!d.has(m)){let I=t.field(m);null===I&&m.length>1&&(m=m.popLast(),I=t.field(m)),null===I?o.delete(m):o.set(m,I),d=d.add(m)}return new sl(i.key,o,new ao(d.toArray()),ss.none())}}function zu(i,e,t){i instanceof Nl?function(o,d,m){const I=o.value.clone(),R=wc(o.fieldTransforms,d,m.transformResults);I.setAll(R),d.convertToFoundDocument(m.version,I).setHasCommittedMutations()}(i,e,t):i instanceof sl?function(o,d,m){if(!hl(o.precondition,d))return void d.convertToUnknownDocument(m.version);const I=wc(o.fieldTransforms,d,m.transformResults),R=d.data;R.setAll(Iu(o)),R.setAll(I),d.convertToFoundDocument(m.version,R).setHasCommittedMutations()}(i,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Yu(i,e,t,o){return i instanceof Nl?function(d,m,I,R){if(!hl(d.precondition,m))return I;const z=d.value.clone(),X=wu(d.fieldTransforms,R,m);return z.setAll(X),m.convertToFoundDocument(m.version,z).setHasLocalMutations(),null}(i,e,t,o):i instanceof sl?function(d,m,I,R){if(!hl(d.precondition,m))return I;const z=wu(d.fieldTransforms,R,m),X=m.data;return X.setAll(Iu(d)),X.setAll(z),m.convertToFoundDocument(m.version,X).setHasLocalMutations(),null===I?null:I.unionWith(d.fieldMask.fields).unionWith(d.fieldTransforms.map(ge=>ge.field))}(i,e,t,o):(I=t,hl(i.precondition,m=e)?(m.convertToNoDocument(m.version).setHasLocalMutations(),null):I);var m,I}function ld(i,e){let t=null;for(const o of i.fieldTransforms){const d=e.data.field(o.field),m=Gd(o.transform,d||null);null!=m&&(null===t&&(t=is.empty()),t.set(o.field,m))}return t||null}function ud(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(o=e.fieldTransforms,!!(void 0===(t=i.fieldTransforms)&&void 0===o||t&&o&&Ia(t,o,(d,m)=>function sd(i,e){return i.field.isEqual(e.field)&&(o=e.transform,(t=i.transform)instanceof pa&&o instanceof pa||t instanceof $o&&o instanceof $o?Ia(t.elements,o.elements,Q):t instanceof Ol&&o instanceof Ol?Q(t.yt,o.yt):t instanceof Ml&&o instanceof Ml);var t,o}(d,m))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var t,o}class Nl extends od{constructor(e,t,o,d=[]){super(),this.key=e,this.value=t,this.precondition=o,this.fieldTransforms=d,this.type=0}getFieldMask(){return null}}class sl extends od{constructor(e,t,o,d,m=[]){super(),this.key=e,this.data=t,this.fieldMask=o,this.precondition=d,this.fieldTransforms=m,this.type=1}getFieldMask(){return this.fieldMask}}function Iu(i){const e=new Map;return i.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const o=i.data.field(t);e.set(t,o)}}),e}function wc(i,e,t){const o=new Map;En(i.length===t.length);for(let d=0;d<t.length;d++){const m=i[d],I=m.transform,R=e.data.field(m.field);o.set(m.field,rd(I,R,t[d]))}return o}function wu(i,e,t){const o=new Map;for(const d of i){const m=d.transform,I=t.data.field(d.field);o.set(d.field,Sa(m,I,e))}return o}class bu extends od{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Ss extends od{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class qu{constructor(e){this.count=e}}var Xs,Kr;function ol(i){switch(i){default:return wn();case Pt.CANCELLED:case Pt.UNKNOWN:case Pt.DEADLINE_EXCEEDED:case Pt.RESOURCE_EXHAUSTED:case Pt.INTERNAL:case Pt.UNAVAILABLE:case Pt.UNAUTHENTICATED:return!1;case Pt.INVALID_ARGUMENT:case Pt.NOT_FOUND:case Pt.ALREADY_EXISTS:case Pt.PERMISSION_DENIED:case Pt.FAILED_PRECONDITION:case Pt.ABORTED:case Pt.OUT_OF_RANGE:case Pt.UNIMPLEMENTED:case Pt.DATA_LOSS:return!0}}function cd(i){if(void 0===i)return vi("GRPC error has no .code"),Pt.UNKNOWN;switch(i){case Xs.OK:return Pt.OK;case Xs.CANCELLED:return Pt.CANCELLED;case Xs.UNKNOWN:return Pt.UNKNOWN;case Xs.DEADLINE_EXCEEDED:return Pt.DEADLINE_EXCEEDED;case Xs.RESOURCE_EXHAUSTED:return Pt.RESOURCE_EXHAUSTED;case Xs.INTERNAL:return Pt.INTERNAL;case Xs.UNAVAILABLE:return Pt.UNAVAILABLE;case Xs.UNAUTHENTICATED:return Pt.UNAUTHENTICATED;case Xs.INVALID_ARGUMENT:return Pt.INVALID_ARGUMENT;case Xs.NOT_FOUND:return Pt.NOT_FOUND;case Xs.ALREADY_EXISTS:return Pt.ALREADY_EXISTS;case Xs.PERMISSION_DENIED:return Pt.PERMISSION_DENIED;case Xs.FAILED_PRECONDITION:return Pt.FAILED_PRECONDITION;case Xs.ABORTED:return Pt.ABORTED;case Xs.OUT_OF_RANGE:return Pt.OUT_OF_RANGE;case Xs.UNIMPLEMENTED:return Pt.UNIMPLEMENTED;case Xs.DATA_LOSS:return Pt.DATA_LOSS;default:return wn()}}(Kr=Xs||(Xs={}))[Kr.OK=0]="OK",Kr[Kr.CANCELLED=1]="CANCELLED",Kr[Kr.UNKNOWN=2]="UNKNOWN",Kr[Kr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Kr[Kr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Kr[Kr.NOT_FOUND=5]="NOT_FOUND",Kr[Kr.ALREADY_EXISTS=6]="ALREADY_EXISTS",Kr[Kr.PERMISSION_DENIED=7]="PERMISSION_DENIED",Kr[Kr.UNAUTHENTICATED=16]="UNAUTHENTICATED",Kr[Kr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Kr[Kr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Kr[Kr.ABORTED=10]="ABORTED",Kr[Kr.OUT_OF_RANGE=11]="OUT_OF_RANGE",Kr[Kr.UNIMPLEMENTED=12]="UNIMPLEMENTED",Kr[Kr.INTERNAL=13]="INTERNAL",Kr[Kr.UNAVAILABLE=14]="UNAVAILABLE",Kr[Kr.DATA_LOSS=15]="DATA_LOSS";class al{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0!==o)for(const[d,m]of o)if(this.equalsFn(d,e))return m}has(e){return void 0!==this.get(e)}set(e,t){const o=this.mapKeyFn(e),d=this.inner[o];if(void 0===d)return this.inner[o]=[[e,t]],void this.innerSize++;for(let m=0;m<d.length;m++)if(this.equalsFn(d[m][0],e))return void(d[m]=[e,t]);d.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),o=this.inner[t];if(void 0===o)return!1;for(let d=0;d<o.length;d++)if(this.equalsFn(o[d][0],e))return 1===o.length?delete this.inner[t]:o.splice(d,1),this.innerSize--,!0;return!1}forEach(e){ra(this.inner,(t,o)=>{for(const[d,m]of o)e(d,m)})}isEmpty(){return Lo(this.inner)}size(){return this.innerSize}}const bc=new Pi(dn.comparator);function ga(){return bc}const Ql=new Pi(dn.comparator);function Pl(...i){let e=Ql;for(const t of i)e=e.insert(t.key,t);return e}function Wd(i){let e=Ql;return i.forEach((t,o)=>e=e.insert(t,o.overlayedDocument)),e}function Uo(){return fl()}function Ku(){return fl()}function fl(){return new al(i=>i.toString(),(i,e)=>i.isEqual(e))}const Cc=new Pi(dn.comparator),Dc=new Xr(dn.comparator);function jr(...i){let e=Dc;for(const t of i)e=e.add(t);return e}const Sc=new Xr(ur);function pl(){return Sc}class kl{constructor(e,t,o,d,m){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=o,this.documentUpdates=d,this.resolvedLimboDocuments=m}static createSynthesizedRemoteEventForCurrentChange(e,t,o){const d=new Map;return d.set(e,Zu.createSynthesizedTargetChangeForCurrentChange(e,t,o)),new kl(er.min(),d,pl(),ga(),jr())}}class Zu{constructor(e,t,o,d,m){this.resumeToken=e,this.current=t,this.addedDocuments=o,this.modifiedDocuments=d,this.removedDocuments=m}static createSynthesizedTargetChangeForCurrentChange(e,t,o){return new Zu(o,t,jr(),jr(),jr())}}class Xl{constructor(e,t,o,d){this.Tt=e,this.removedTargetIds=t,this.key=o,this.Et=d}}class Cu{constructor(e,t){this.targetId=e,this.At=t}}class jo{constructor(e,t,o=_s.EMPTY_BYTE_STRING,d=null){this.state=e,this.targetIds=t,this.resumeToken=o,this.cause=d}}class Js{constructor(){this.Rt=0,this.bt=ml(),this.Pt=_s.EMPTY_BYTE_STRING,this.vt=!1,this.Vt=!0}get current(){return this.vt}get resumeToken(){return this.Pt}get St(){return 0!==this.Rt}get Dt(){return this.Vt}Ct(e){e.approximateByteSize()>0&&(this.Vt=!0,this.Pt=e)}xt(){let e=jr(),t=jr(),o=jr();return this.bt.forEach((d,m)=>{switch(m){case 0:e=e.add(d);break;case 2:t=t.add(d);break;case 1:o=o.add(d);break;default:wn()}}),new Zu(this.Pt,this.vt,e,t,o)}Nt(){this.Vt=!1,this.bt=ml()}kt(e,t){this.Vt=!0,this.bt=this.bt.insert(e,t)}Ot(e){this.Vt=!0,this.bt=this.bt.remove(e)}Mt(){this.Rt+=1}Ft(){this.Rt-=1}$t(){this.Vt=!0,this.vt=!0}}class za{constructor(e){this.Bt=e,this.Lt=new Map,this.Ut=ga(),this.qt=gl(),this.Kt=new Xr(ur)}Gt(e){for(const t of e.Tt)e.Et&&e.Et.isFoundDocument()?this.Qt(t,e.Et):this.jt(t,e.key,e.Et);for(const t of e.removedTargetIds)this.jt(t,e.key,e.Et)}Wt(e){this.forEachTarget(e,t=>{const o=this.zt(t);switch(e.state){case 0:this.Ht(t)&&o.Ct(e.resumeToken);break;case 1:o.Ft(),o.St||o.Nt(),o.Ct(e.resumeToken);break;case 2:o.Ft(),o.St||this.removeTarget(t);break;case 3:this.Ht(t)&&(o.$t(),o.Ct(e.resumeToken));break;case 4:this.Ht(t)&&(this.Jt(t),o.Ct(e.resumeToken));break;default:wn()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Lt.forEach((o,d)=>{this.Ht(d)&&t(d)})}Yt(e){const t=e.targetId,o=e.At.count,d=this.Xt(t);if(d){const m=d.target;if(Vu(m))if(0===o){const I=new dn(m.path);this.jt(t,I,li.newNoDocument(I,er.min()))}else En(1===o);else this.Zt(t)!==o&&(this.Jt(t),this.Kt=this.Kt.add(t))}}te(e){const t=new Map;this.Lt.forEach((m,I)=>{const R=this.Xt(I);if(R){if(m.current&&Vu(R.target)){const z=new dn(R.target.path);null!==this.Ut.get(z)||this.ee(I,z)||this.jt(I,z,li.newNoDocument(z,e))}m.Dt&&(t.set(I,m.xt()),m.Nt())}});let o=jr();this.qt.forEach((m,I)=>{let R=!0;I.forEachWhile(z=>{const X=this.Xt(z);return!X||2===X.purpose||(R=!1,!1)}),R&&(o=o.add(m))}),this.Ut.forEach((m,I)=>I.setReadTime(e));const d=new kl(e,t,this.Kt,this.Ut,o);return this.Ut=ga(),this.qt=gl(),this.Kt=new Xr(ur),d}Qt(e,t){if(!this.Ht(e))return;const o=this.ee(e,t.key)?2:0;this.zt(e).kt(t.key,o),this.Ut=this.Ut.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ne(t.key).add(e))}jt(e,t,o){if(!this.Ht(e))return;const d=this.zt(e);this.ee(e,t)?d.kt(t,1):d.Ot(t),this.qt=this.qt.insert(t,this.ne(t).delete(e)),o&&(this.Ut=this.Ut.insert(t,o))}removeTarget(e){this.Lt.delete(e)}Zt(e){const t=this.zt(e).xt();return this.Bt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Mt(e){this.zt(e).Mt()}zt(e){let t=this.Lt.get(e);return t||(t=new Js,this.Lt.set(e,t)),t}ne(e){let t=this.qt.get(e);return t||(t=new Xr(ur),this.qt=this.qt.insert(e,t)),t}Ht(e){const t=null!==this.Xt(e);return t||rn("WatchChangeAggregator","Detected inactive target",e),t}Xt(e){const t=this.Lt.get(e);return t&&t.St?null:this.Bt.se(e)}Jt(e){this.Lt.set(e,new Js),this.Bt.getRemoteKeysForTarget(e).forEach(t=>{this.jt(e,t,null)})}ee(e,t){return this.Bt.getRemoteKeysForTarget(e).has(t)}}function gl(){return new Pi(dn.comparator)}function ml(){return new Pi(dn.comparator)}const Ro={asc:"ASCENDING",desc:"DESCENDING"},Jl={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Qu{constructor(e,t){this.databaseId=e,this.gt=t}}function yl(i,e){return i.gt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function zs(i,e){return i.gt?e.toBase64():e.toUint8Array()}function zd(i,e){return yl(i,e.toTimestamp())}function eo(i){return En(!!i),er.fromTimestamp(function(e){const t=Vo(e);return new Mi(t.seconds,t.nanos)}(i))}function dd(i,e){return(t=i,new Qr(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function Tc(i){const e=Qr.fromString(i);return En(gr(e)),e}function eu(i,e){return dd(i.databaseId,e.path)}function qi(i,e){const t=Tc(e);if(t.get(1)!==i.databaseId.projectId)throw new Qt(Pt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+i.databaseId.projectId);if(t.get(3)!==i.databaseId.database)throw new Qt(Pt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+i.databaseId.database);return new dn(Ta(t))}function Xu(i,e){return dd(i.databaseId,e)}function Ac(i){const e=Tc(i);return 4===e.length?Qr.emptyPath():Ta(e)}function vl(i){return new Qr(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Ta(i){return En(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function Ba(i,e,t){return{name:eu(i,e),fields:t.value.mapValue.fields}}function Ju(i,e,t){const o=qi(i,e.name),d=eo(e.updateTime),m=new is({mapValue:{fields:e.fields}}),I=li.newFoundDocument(o,d,m);return t&&I.setHasCommittedMutations(),t?I.setHasCommittedMutations():I}function _l(i,e){let t;if(e instanceof Nl)t={update:Ba(i,e.key,e.value)};else if(e instanceof bu)t={delete:eu(i,e.key)};else if(e instanceof sl)t={update:Ba(i,e.key,e.data),updateMask:Un(e.fieldMask)};else{if(!(e instanceof Ss))return wn();t={verify:eu(i,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(o=>function(d,m){const I=m.transform;if(I instanceof Ml)return{fieldPath:m.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(I instanceof pa)return{fieldPath:m.field.canonicalString(),appendMissingElements:{values:I.elements}};if(I instanceof $o)return{fieldPath:m.field.canonicalString(),removeAllFromArray:{values:I.elements}};if(I instanceof Ol)return{fieldPath:m.field.canonicalString(),increment:I.yt};throw wn()}(0,o))),e.precondition.isNone||(t.currentDocument=void 0!==(d=e.precondition).updateTime?{updateTime:zd(i,d.updateTime)}:void 0!==d.exists?{exists:d.exists}:wn()),t;var d}function hd(i,e){const t=e.currentDocument?void 0!==(d=e.currentDocument).updateTime?ss.updateTime(eo(d.updateTime)):void 0!==d.exists?ss.exists(d.exists):ss.none():ss.none(),o=e.updateTransforms?e.updateTransforms.map(d=>function(m,I){let R=null;"setToServerValue"in I?(En("REQUEST_TIME"===I.setToServerValue),R=new Ml):"appendMissingElements"in I?R=new pa(I.appendMissingElements.values||[]):"removeAllFromArray"in I?R=new $o(I.removeAllFromArray.values||[]):"increment"in I?R=new Ol(m,I.increment):wn();const z=_i.fromServerFormat(I.fieldPath);return new Ec(z,R)}(i,d)):[];var d;if(e.update){const d=qi(i,e.update.name),m=new is({mapValue:{fields:e.update.fields}});if(e.updateMask){const I=new ao((e.updateMask.fieldPaths||[]).map(X=>_i.fromServerFormat(X)));return new sl(d,m,I,t,o)}return new Nl(d,m,t,o)}if(e.delete){const d=qi(i,e.delete);return new bu(d,t)}if(e.verify){const d=qi(i,e.verify);return new Ss(d,t)}return wn()}function Ho(i,e){return{documents:[Xu(i,e.path)]}}function Mc(i,e){const t={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(t.parent=Xu(i,o),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=Xu(i,o.popLast()),t.structuredQuery.from=[{collectionId:o.lastSegment()}]);const d=function(z){if(0===z.length)return;const X=z.map(ge=>function(ze){if("=="===ze.op){if(hs(ze.value))return{unaryFilter:{field:ue(ze.field),op:"IS_NAN"}};if(Fn(ze.value))return{unaryFilter:{field:ue(ze.field),op:"IS_NULL"}}}else if("!="===ze.op){if(hs(ze.value))return{unaryFilter:{field:ue(ze.field),op:"IS_NOT_NAN"}};if(Fn(ze.value))return{unaryFilter:{field:ue(ze.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ue(ze.field),op:K(ze.op),value:ze.value}}}(ge));return 1===X.length?X[0]:{compositeFilter:{op:"AND",filters:X}}}(e.filters);d&&(t.structuredQuery.where=d);const m=function(z){if(0!==z.length)return z.map(X=>{return{field:ue((ge=X).field),direction:A(ge.dir)};var ge})}(e.orderBy);m&&(t.structuredQuery.orderBy=m);const I=(X=e.limit,i.gt||te(X)?X:{value:X});var X,R,z;return null!==I&&(t.structuredQuery.limit=I),e.startAt&&(t.structuredQuery.startAt={before:(R=e.startAt).inclusive,values:R.position}),e.endAt&&(t.structuredQuery.endAt={before:!(z=e.endAt).inclusive,values:z.position}),t}function b(i){let e=Ac(i.parent);const t=i.structuredQuery,o=t.from?t.from.length:0;let d=null;if(o>0){En(1===o);const ge=t.from[0];ge.allDescendants?d=ge.collectionId:e=e.child(ge.collectionId)}let m=[];t.where&&(m=_(t.where));let I=[];t.orderBy&&(I=t.orderBy.map(ge=>{return new xo(rt((ze=ge).field),function(Dt){switch(Dt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(ze.direction));var ze}));let R=null;t.limit&&(R=function(ge){let ze;return ze="object"==typeof ge?ge.value:ge,te(ze)?null:ze}(t.limit));let z=null;var ge;t.startAt&&(z=new La((ge=t.startAt).values||[],!!ge.before));let X=null;return t.endAt&&(X=function(ge){return new La(ge.values||[],!ge.before)}(t.endAt)),jd(e,d,I,m,R,"F",z,X)}function _(i){return i?void 0!==i.unaryFilter?[hn(i)]:void 0!==i.fieldFilter?[Bt(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(e=>_(e)).reduce((e,t)=>e.concat(t)):wn():[]}function A(i){return Ro[i]}function K(i){return Jl[i]}function ue(i){return{fieldPath:i.canonicalString()}}function rt(i){return _i.fromServerFormat(i.fieldPath)}function Bt(i){return Fs.create(rt(i.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return wn()}}(i.fieldFilter.op),i.fieldFilter.value)}function hn(i){switch(i.unaryFilter.op){case"IS_NAN":const e=rt(i.unaryFilter.field);return Fs.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=rt(i.unaryFilter.field);return Fs.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=rt(i.unaryFilter.field);return Fs.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const d=rt(i.unaryFilter.field);return Fs.create(d,"!=",{nullValue:"NULL_VALUE"});default:return wn()}}function Un(i){const e=[];return i.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function gr(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function jn(i){let e="";for(let t=0;t<i.length;t++)e.length>0&&(e=ma(e)),e=uo(i.get(t),e);return ma(e)}function uo(i,e){let t=e;const o=i.length;for(let d=0;d<o;d++){const m=i.charAt(d);switch(m){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=m}}return t}function ma(i){return i+"\x01\x01"}function $a(i){const e=i.length;if(En(e>=2),2===e)return En("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),Qr.emptyPath();const t=e-2,o=[];let d="";for(let m=0;m<e;){const I=i.indexOf("\x01",m);switch((I<0||I>t)&&wn(),i.charAt(I+1)){case"\x01":const R=i.substring(m,I);let z;0===d.length?z=R:(d+=R,z=d,d=""),o.push(z);break;case"\x10":d+=i.substring(m,I),d+="\0";break;case"\x11":d+=i.substring(m,I+1);break;default:wn()}m=I+2}return new Qr(o)}const Kd=["userId","batchId"];function Fl(i,e){return[i,jn(e)]}function Zd(i,e,t){return[i,jn(e),t]}const Nh={},Qd=["prefixPath","collectionGroup","readTime","documentId"],Ph=["prefixPath","collectionGroup","documentId"],Ya=["collectionGroup","readTime","prefixPath","documentId"],fd=["canonicalId","targetId"],ec=["targetId","path"],Rc=["path","targetId"],Oc=["collectionId","parent"],pd=["indexId","uid"],Tf=["uid","sequenceNumber"],kh=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Vp=["indexId","uid","orderedDocumentKey"],Fh=["userId","collectionPath","documentId"],Nc=["userId","collectionPath","largestBatchId"],Bp=["userId","collectionGroup","largestBatchId"],Af=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],vm=[...Af,"documentOverlays"],Xd=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],xf=Xd,$p=[...xf,"indexConfiguration","indexState","indexEntries"];class Lh extends gu{constructor(e,t){super(),this.ie=e,this.currentSequenceNumber=t}}function Go(i,e){const t=cn(i);return so.M(t.ie,e)}class gd{constructor(e,t,o,d){this.batchId=e,this.localWriteTime=t,this.baseMutations=o,this.mutations=d}applyToRemoteDocument(e,t){const o=t.mutationResults;for(let d=0;d<this.mutations.length;d++){const m=this.mutations[d];m.key.isEqual(e.key)&&zu(m,e,o[d])}}applyToLocalView(e,t){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(t=Yu(o,e,t,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(t=Yu(o,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const o=Ku();return this.mutations.forEach(d=>{const m=e.get(d.key),I=m.overlayedDocument;let R=this.applyToLocalView(I,m.mutatedFields);R=t.has(d.key)?null:R;const z=ad(I,R);null!==z&&o.set(d.key,z),I.isValidDocument()||I.convertToNoDocument(er.min())}),o}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),jr())}isEqual(e){return this.batchId===e.batchId&&Ia(this.mutations,e.mutations,(t,o)=>ud(t,o))&&Ia(this.baseMutations,e.baseMutations,(t,o)=>ud(t,o))}}class Vh{constructor(e,t,o,d){this.batch=e,this.commitVersion=t,this.mutationResults=o,this.docVersions=d}static from(e,t,o){En(e.mutations.length===o.length);let d=Cc;const m=e.mutations;for(let I=0;I<m.length;I++)d=d.insert(m[I].key,o[I].version);return new Vh(e,t,o,d)}}class Bh{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Du{constructor(e,t,o,d,m=er.min(),I=er.min(),R=_s.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=o,this.sequenceNumber=d,this.snapshotVersion=m,this.lastLimboFreeSnapshotVersion=I,this.resumeToken=R}withSequenceNumber(e){return new Du(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Du(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Du(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class $h{constructor(e){this.re=e}}function Up(i,e){const t=e.key,o={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Wo(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:eu(d=i.re,(m=e).key),fields:m.data.value.mapValue.fields,updateTime:yl(d,m.version.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:t.path.toArray(),readTime:tu(e.version)};else{if(!e.isUnknownDocument())return wn();o.unknownDocument={path:t.path.toArray(),version:tu(e.version)}}var d,m;return o}function Wo(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function tu(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Su(i){const e=new Mi(i.seconds,i.nanoseconds);return er.fromTimestamp(e)}function Ll(i,e){const t=(e.baseMutations||[]).map(m=>hd(i.re,m));for(let m=0;m<e.mutations.length-1;++m){const I=e.mutations[m];m+1<e.mutations.length&&void 0!==e.mutations[m+1].transform&&(I.updateTransforms=e.mutations[m+1].transform.fieldTransforms,e.mutations.splice(m+1,1),++m)}const o=e.mutations.map(m=>hd(i.re,m)),d=Mi.fromMillis(e.localWriteTimeMs);return new gd(e.batchId,d,t,o)}function vo(i){const e=Su(i.readTime),t=void 0!==i.lastLimboFreeSnapshotVersion?Su(i.lastLimboFreeSnapshotVersion):er.min();let o;var d;return void 0!==i.query.documents?(En(1===(d=i.query).documents.length),o=Mo(rl(Ac(d.documents[0])))):o=Mo(b(i.query)),new Du(o,i.targetId,0,i.lastListenSequenceNumber,e,t,_s.fromBase64String(i.resumeToken))}function Pc(i,e){const t=tu(e.snapshotVersion),o=tu(e.lastLimboFreeSnapshotVersion);let d;d=Vu(e.target)?Ho(i.re,e.target):Mc(i.re,e.target);const m=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Tl(e.target),readTime:t,resumeToken:m,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:d}}function Jd(i){const e=b({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?dl(e,e.limit,"L"):e}function Uh(i,e){return new Bh(e.largestBatchId,hd(i.re,e.overlayMutation))}function nu(i,e){const t=e.path.lastSegment();return[i,jn(e.path.popLast()),t]}function Oo(i,e,t,o){return{indexId:i,uid:e.uid||"",sequenceNumber:t,readTime:tu(o.readTime),documentKey:jn(o.documentKey.path),largestBatchId:o.largestBatchId}}class qa{getBundleMetadata(e,t){return tc(e).get(t).next(o=>{if(o)return{id:(d=o).bundleId,createTime:Su(d.createTime),version:d.version};var d})}saveBundleMetadata(e,t){return tc(e).put({bundleId:(o=t).id,createTime:tu(eo(o.createTime)),version:o.version});var o}getNamedQuery(e,t){return Mf(e).get(t).next(o=>{if(o)return{name:(d=o).name,query:Jd(d.bundledQuery),readTime:Su(d.readTime)};var d})}saveNamedQuery(e,t){return Mf(e).put({name:(o=t).name,readTime:tu(eo(o.readTime)),bundledQuery:o.bundledQuery});var o}}function tc(i){return Go(i,"bundles")}function Mf(i){return Go(i,"namedQueries")}class md{constructor(e,t){this.It=e,this.userId=t}static oe(e,t){return new md(e,t.uid||"")}getOverlay(e,t){return yd(e).get(nu(this.userId,t)).next(o=>o?Uh(this.It,o):null)}getOverlays(e,t){const o=Uo();return Rt.forEach(t,d=>this.getOverlay(e,d).next(m=>{null!==m&&o.set(d,m)})).next(()=>o)}saveOverlays(e,t,o){const d=[];return o.forEach((m,I)=>{const R=new Bh(t,I);d.push(this.ue(e,R))}),Rt.waitFor(d)}removeOverlaysForBatchId(e,t,o){const d=new Set;t.forEach(I=>d.add(jn(I.getCollectionPath())));const m=[];return d.forEach(I=>{const R=IDBKeyRange.bound([this.userId,I,o],[this.userId,I,o+1],!1,!0);m.push(yd(e).Y("collectionPathOverlayIndex",R))}),Rt.waitFor(m)}getOverlaysForCollection(e,t,o){const d=Uo(),m=jn(t),I=IDBKeyRange.bound([this.userId,m,o],[this.userId,m,Number.POSITIVE_INFINITY],!0);return yd(e).W("collectionPathOverlayIndex",I).next(R=>{for(const z of R){const X=Uh(this.It,z);d.set(X.getKey(),X)}return d})}getOverlaysForCollectionGroup(e,t,o,d){const m=Uo();let I;const R=IDBKeyRange.bound([this.userId,t,o],[this.userId,t,Number.POSITIVE_INFINITY],!0);return yd(e).Z({index:"collectionGroupOverlayIndex",range:R},(z,X,ge)=>{const ze=Uh(this.It,X);m.size()<d||ze.largestBatchId===I?(m.set(ze.getKey(),ze),I=ze.largestBatchId):ge.done()}).next(()=>m)}ue(e,t){return yd(e).put(function(o,d,m){const[I,R,z]=nu(d,m.mutation.key);return{userId:d,collectionPath:R,documentId:z,collectionGroup:m.mutation.key.getCollectionGroup(),largestBatchId:m.largestBatchId,overlayMutation:_l(o.re,m.mutation)}}(this.It,this.userId,t))}}function yd(i){return Go(i,"documentOverlays")}class nc{constructor(){}ce(e,t){this.ae(e,t),t.he()}ae(e,t){if("nullValue"in e)this.le(t,5);else if("booleanValue"in e)this.le(t,10),t.fe(e.booleanValue?1:0);else if("integerValue"in e)this.le(t,15),t.fe(Yi(e.integerValue));else if("doubleValue"in e){const o=Yi(e.doubleValue);isNaN(o)?this.le(t,13):(this.le(t,15),Ae(o)?t.fe(0):t.fe(o))}else if("timestampValue"in e){const o=e.timestampValue;this.le(t,20),"string"==typeof o?t.de(o):(t.de(`${o.seconds||""}`),t.fe(o.nanos||0))}else if("stringValue"in e)this._e(e.stringValue,t),this.we(t);else if("bytesValue"in e)this.le(t,30),t.me(ia(e.bytesValue)),this.we(t);else if("referenceValue"in e)this.ge(e.referenceValue,t);else if("geoPointValue"in e){const o=e.geoPointValue;this.le(t,45),t.fe(o.latitude||0),t.fe(o.longitude||0)}else"mapValue"in e?Da(e)?this.le(t,Number.MAX_SAFE_INTEGER):(this.ye(e.mapValue,t),this.we(t)):"arrayValue"in e?(this.pe(e.arrayValue,t),this.we(t)):wn()}_e(e,t){this.le(t,25),this.Ie(e,t)}Ie(e,t){t.de(e)}ye(e,t){const o=e.fields||{};this.le(t,55);for(const d of Object.keys(o))this._e(d,t),this.ae(o[d],t)}pe(e,t){const o=e.values||[];this.le(t,50);for(const d of o)this.ae(d,t)}ge(e,t){this.le(t,37),dn.fromName(e).path.forEach(o=>{this.le(t,60),this.Ie(o,t)})}le(e,t){e.fe(t)}we(e){e.fe(2)}}function Tu(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function Rf(i){const e=64-function(t){let o=0;for(let d=0;d<8;++d){const m=Tu(255&t[d]);if(o+=m,8!==m)break}return o}(i);return Math.ceil(e/8)}nc.Te=new nc;class jp{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Ee(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.Ae(o.value),o=t.next();this.Re()}be(e){const t=e[Symbol.iterator]();let o=t.next();for(;!o.done;)this.Pe(o.value),o=t.next();this.ve()}Ve(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.Ae(o);else if(o<2048)this.Ae(960|o>>>6),this.Ae(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.Ae(480|o>>>12),this.Ae(128|63&o>>>6),this.Ae(128|63&o);else{const d=t.codePointAt(0);this.Ae(240|d>>>18),this.Ae(128|63&d>>>12),this.Ae(128|63&d>>>6),this.Ae(128|63&d)}}this.Re()}Se(e){for(const t of e){const o=t.charCodeAt(0);if(o<128)this.Pe(o);else if(o<2048)this.Pe(960|o>>>6),this.Pe(128|63&o);else if(t<"\ud800"||"\udbff"<t)this.Pe(480|o>>>12),this.Pe(128|63&o>>>6),this.Pe(128|63&o);else{const d=t.codePointAt(0);this.Pe(240|d>>>18),this.Pe(128|63&d>>>12),this.Pe(128|63&d>>>6),this.Pe(128|63&d)}}this.ve()}De(e){const t=this.Ce(e),o=Rf(t);this.xe(1+o),this.buffer[this.position++]=255&o;for(let d=t.length-o;d<t.length;++d)this.buffer[this.position++]=255&t[d]}Ne(e){const t=this.Ce(e),o=Rf(t);this.xe(1+o),this.buffer[this.position++]=~(255&o);for(let d=t.length-o;d<t.length;++d)this.buffer[this.position++]=~(255&t[d])}ke(){this.Oe(255),this.Oe(255)}Me(){this.Fe(255),this.Fe(255)}reset(){this.position=0}seed(e){this.xe(e.length),this.buffer.set(e,this.position),this.position+=e.length}$e(){return this.buffer.slice(0,this.position)}Ce(e){const t=function(d){const m=new DataView(new ArrayBuffer(8));return m.setFloat64(0,d,!1),new Uint8Array(m.buffer)}(e),o=0!=(128&t[0]);t[0]^=o?255:128;for(let d=1;d<t.length;++d)t[d]^=o?255:0;return t}Ae(e){const t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(t)}Pe(e){const t=255&e;0===t?(this.Fe(0),this.Fe(255)):255===t?(this.Fe(255),this.Fe(0)):this.Fe(e)}Re(){this.Oe(0),this.Oe(1)}ve(){this.Fe(0),this.Fe(1)}Oe(e){this.xe(1),this.buffer[this.position++]=e}Fe(e){this.xe(1),this.buffer[this.position++]=~e}xe(e){const t=e+this.position;if(t<=this.buffer.length)return;let o=2*this.buffer.length;o<t&&(o=t);const d=new Uint8Array(o);d.set(this.buffer),this.buffer=d}}class kc{constructor(e){this.Be=e}me(e){this.Be.Ee(e)}de(e){this.Be.Ve(e)}fe(e){this.Be.De(e)}he(){this.Be.ke()}}class ru{constructor(e){this.Be=e}me(e){this.Be.be(e)}de(e){this.Be.Se(e)}fe(e){this.Be.Ne(e)}he(){this.Be.Me()}}class Fc{constructor(){this.Be=new jp,this.Le=new kc(this.Be),this.Ue=new ru(this.Be)}seed(e){this.Be.seed(e)}qe(e){return 0===e?this.Le:this.Ue}$e(){return this.Be.$e()}reset(){this.Be.reset()}}class Au{constructor(e,t,o,d){this.indexId=e,this.documentKey=t,this.arrayValue=o,this.directionalValue=d}Ke(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(t);return o.set(this.directionalValue,0),t!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new Au(this.indexId,this.documentKey,this.arrayValue,o)}}function rc(i,e){let t=i.indexId-e.indexId;return 0!==t?t:(t=Of(i.arrayValue,e.arrayValue),0!==t?t:(t=Of(i.directionalValue,e.directionalValue),0!==t?t:dn.comparator(i.documentKey,e.documentKey)))}function Of(i,e){for(let t=0;t<i.length&&t<e.length;++t){const o=i[t]-e[t];if(0!==o)return o}return i.length-e.length}class Lc{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ge=e.orderBy,this.Qe=[];for(const t of e.filters){const o=t;o.dt()?this.je=o:this.Qe.push(o)}}We(e){const t=ta(e);if(void 0!==t&&!this.ze(t))return!1;const o=di(e);let d=0,m=0;for(;d<o.length&&this.ze(o[d]);++d);if(d===o.length)return!0;if(void 0!==this.je){const I=o[d];if(!this.He(this.je,I)||!this.Je(this.Ge[m++],I))return!1;++d}for(;d<o.length;++d){const I=o[d];if(m>=this.Ge.length||!this.Je(this.Ge[m++],I))return!1}return!0}ze(e){for(const t of this.Qe)if(this.He(t,e))return!0;return!1}He(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Je(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}class Em{constructor(){this.Ye=new Ka}addToCollectionParentIndex(e,t){return this.Ye.add(t),Rt.resolve()}getCollectionParents(e,t){return Rt.resolve(this.Ye.getEntries(t))}addFieldIndex(e,t){return Rt.resolve()}deleteFieldIndex(e,t){return Rt.resolve()}getDocumentsMatchingTarget(e,t){return Rt.resolve(null)}getIndexType(e,t){return Rt.resolve(0)}getFieldIndexes(e,t){return Rt.resolve([])}getNextCollectionGroupToUpdate(e){return Rt.resolve(null)}getMinOffset(e,t){return Rt.resolve(To.min())}getMinOffsetFromCollectionGroup(e,t){return Rt.resolve(To.min())}updateCollectionGroup(e,t,o){return Rt.resolve()}updateIndexEntries(e,t){return Rt.resolve()}}class Ka{constructor(){this.index={}}add(e){const t=e.lastSegment(),o=e.popLast(),d=this.index[t]||new Xr(Qr.comparator),m=!d.has(o);return this.index[t]=d.add(o),m}has(e){const t=e.lastSegment(),o=e.popLast(),d=this.index[t];return d&&d.has(o)}getEntries(e){return(this.index[e]||new Xr(Qr.comparator)).toArray()}}const Vc=new Uint8Array(0);class jh{constructor(e,t){this.user=e,this.databaseId=t,this.Xe=new Ka,this.Ze=new al(o=>Tl(o),(o,d)=>ul(o,d)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Xe.has(t)){const o=t.lastSegment(),d=t.popLast();e.addOnCommittedListener(()=>{this.Xe.add(t)});const m={collectionId:o,parent:jn(d)};return Hh(e).put(m)}return Rt.resolve()}getCollectionParents(e,t){const o=[],d=IDBKeyRange.bound([t,""],[ll(t),""],!1,!0);return Hh(e).W(d).next(m=>{for(const I of m){if(I.collectionId!==t)break;o.push($a(I.parent))}return o})}addFieldIndex(e,t){const o=vd(e),d={indexId:(I=t).indexId,collectionGroup:I.collectionGroup,fields:I.fields.map(R=>[R.fieldPath.canonicalString(),R.kind])};var I;delete d.indexId;const m=o.add(d);if(t.indexState){const I=iu(e);return m.next(R=>{I.put(Oo(R,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return m.next()}deleteFieldIndex(e,t){const o=vd(e),d=iu(e),m=ic(e);return o.delete(t.indexId).next(()=>d.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>m.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const o=ic(e);let d=!0;const m=new Map;return Rt.forEach(this.tn(t),I=>this.en(e,I).next(R=>{d&&(d=!!R),m.set(I,R)})).next(()=>{if(d){let I=jr();const R=[];return Rt.forEach(m,(z,X)=>{var ge;rn("IndexedDbIndexManager",`Using index ${ge=z,`id=${ge.indexId}|cg=${ge.collectionGroup}|f=${ge.fields.map(Vi=>`${Vi.fieldPath}:${Vi.kind}`).join(",")}`} to execute ${Tl(t)}`);const ze=function(Vi,Eo){const $i=ta(Eo);if(void 0===$i)return null;for(const Ui of yc(Vi,$i.fieldPath))switch(Ui.op){case"array-contains-any":return Ui.value.arrayValue.values||[];case"array-contains":return[Ui.value]}return null}(X,z),Dt=function(Vi,Eo){const $i=new Map;for(const Ui of di(Eo))for(const Yo of yc(Vi,Ui.fieldPath))switch(Yo.op){case"==":case"in":$i.set(Ui.fieldPath.canonicalString(),Yo.value);break;case"not-in":case"!=":return $i.set(Ui.fieldPath.canonicalString(),Yo.value),Array.from($i.values())}return null}(X,z),zt=function(Vi,Eo){const $i=[];let Ui=!0;for(const Yo of di(Eo)){const Rh=0===Yo.kind?Ld(Vi,Yo.fieldPath,Vi.startAt):Bu(Vi,Yo.fieldPath,Vi.startAt);$i.push(Rh.value),Ui&&(Ui=Rh.inclusive)}return new La($i,Ui)}(X,z),Jt=function(Vi,Eo){const $i=[];let Ui=!0;for(const Yo of di(Eo)){const Rh=0===Yo.kind?Bu(Vi,Yo.fieldPath,Vi.endAt):Ld(Vi,Yo.fieldPath,Vi.endAt);$i.push(Rh.value),Ui&&(Ui=Rh.inclusive)}return new La($i,Ui)}(X,z),Nn=this.nn(z,X,zt),Gn=this.nn(z,X,Jt),Si=this.sn(z,X,Dt),os=this.rn(z.indexId,ze,Nn,zt.inclusive,Gn,Jt.inclusive,Si);return Rt.forEach(os,Vi=>o.J(Vi,t.limit).next(Eo=>{Eo.forEach($i=>{const Ui=dn.fromSegments($i.documentKey);I.has(Ui)||(I=I.add(Ui),R.push(Ui))})}))}).next(()=>R)}return Rt.resolve(null)})}tn(e){let t=this.Ze.get(e);return t||(t=[e],this.Ze.set(e,t),t)}rn(e,t,o,d,m,I,R){const z=(null!=t?t.length:1)*Math.max(o.length,m.length),X=z/(null!=t?t.length:1),ge=[];for(let ze=0;ze<z;++ze){const Dt=t?this.on(t[ze/X]):Vc,zt=this.un(e,Dt,o[ze%X],d),Jt=this.cn(e,Dt,m[ze%X],I),Nn=R.map(Gn=>this.un(e,Dt,Gn,!0));ge.push(...this.createRange(zt,Jt,Nn))}return ge}un(e,t,o,d){const m=new Au(e,dn.empty(),t,o);return d?m:m.Ke()}cn(e,t,o,d){const m=new Au(e,dn.empty(),t,o);return d?m.Ke():m}en(e,t){const o=new Lc(t),d=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,d).next(m=>{let I=null;for(const R of m)o.We(R)&&(!I||R.fields.length>I.fields.length)&&(I=R);return I})}getIndexType(e,t){let o=2;return Rt.forEach(this.tn(t),d=>this.en(e,d).next(m=>{m?0!==o&&m.fields.length<function(I){let R=new Xr(_i.comparator),z=!1;for(const X of I.filters){const ge=X;ge.field.isKeyField()||("array-contains"===ge.op||"array-contains-any"===ge.op?z=!0:R=R.add(ge.field))}for(const X of I.orderBy)X.field.isKeyField()||(R=R.add(X.field));return R.size+(z?1:0)}(d)&&(o=1):o=0})).next(()=>o)}an(e,t){const o=new Fc;for(const d of di(e)){const m=t.data.field(d.fieldPath);if(null==m)return null;const I=o.qe(d.kind);nc.Te.ce(m,I)}return o.$e()}on(e){const t=new Fc;return nc.Te.ce(e,t.qe(0)),t.$e()}hn(e,t){const o=new Fc;return nc.Te.ce(Vn(this.databaseId,t),o.qe(function(d){const m=di(d);return 0===m.length?0:m[m.length-1].kind}(e))),o.$e()}sn(e,t,o){if(null===o)return[];let d=[];d.push(new Fc);let m=0;for(const I of di(e)){const R=o[m++];for(const z of d)if(this.ln(t,I.fieldPath)&&Ar(R))d=this.fn(d,I,R);else{const X=z.qe(I.kind);nc.Te.ce(R,X)}}return this.dn(d)}nn(e,t,o){return this.sn(e,t,o.position)}dn(e){const t=[];for(let o=0;o<e.length;++o)t[o]=e[o].$e();return t}fn(e,t,o){const d=[...e],m=[];for(const I of o.arrayValue.values||[])for(const R of d){const z=new Fc;z.seed(R.$e()),nc.Te.ce(I,z.qe(t.kind)),m.push(z)}return m}ln(e,t){return!!e.filters.find(o=>o instanceof Fs&&o.field.isEqual(t)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,t){const o=vd(e),d=iu(e);return(t?o.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):o.W()).next(m=>{const I=[];return Rt.forEach(m,R=>d.get([R.indexId,this.uid]).next(z=>{I.push(function(X,ge){const ze=ge?new Na(ge.sequenceNumber,new To(Su(ge.readTime),new dn($a(ge.documentKey)),ge.largestBatchId)):Na.empty(),Dt=X.fields.map(([zt,Jt])=>new So(_i.fromServerFormat(zt),Jt));return new wa(X.indexId,X.collectionGroup,Dt,ze)}(R,z))})).next(()=>I)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((o,d)=>{const m=o.indexState.sequenceNumber-d.indexState.sequenceNumber;return 0!==m?m:ur(o.collectionGroup,d.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,o){const d=vd(e),m=iu(e);return this._n(e).next(I=>d.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(R=>Rt.forEach(R,z=>m.put(Oo(z.indexId,this.user,I,o)))))}updateIndexEntries(e,t){const o=new Map;return Rt.forEach(t,(d,m)=>{const I=o.get(d.collectionGroup);return(I?Rt.resolve(I):this.getFieldIndexes(e,d.collectionGroup)).next(R=>(o.set(d.collectionGroup,R),Rt.forEach(R,z=>this.wn(e,d,z).next(X=>{const ge=this.mn(m,z);return X.isEqual(ge)?Rt.resolve():this.gn(e,m,z,X,ge)}))))})}yn(e,t,o,d){return ic(e).put({indexId:d.indexId,uid:this.uid,arrayValue:d.arrayValue,directionalValue:d.directionalValue,orderedDocumentKey:this.hn(o,t.key),documentKey:t.key.path.toArray()})}pn(e,t,o,d){return ic(e).delete([d.indexId,this.uid,d.arrayValue,d.directionalValue,this.hn(o,t.key),t.key.path.toArray()])}wn(e,t,o){const d=ic(e);let m=new Xr(rc);return d.Z({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,this.hn(o,t)])},(I,R)=>{m=m.add(new Au(o.indexId,t,R.arrayValue,R.directionalValue))}).next(()=>m)}mn(e,t){let o=new Xr(rc);const d=this.an(t,e);if(null==d)return o;const m=ta(t);if(null!=m){const I=e.data.field(m.fieldPath);if(Ar(I))for(const R of I.arrayValue.values||[])o=o.add(new Au(t.indexId,e.key,this.on(R),d))}else o=o.add(new Au(t.indexId,e.key,Vc,d));return o}gn(e,t,o,d,m){rn("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const I=[];return function(R,z,X,ge,ze){const Dt=R.getIterator(),zt=z.getIterator();let Jt=Fa(Dt),Nn=Fa(zt);for(;Jt||Nn;){let Gn=!1,Si=!1;if(Jt&&Nn){const os=X(Jt,Nn);os<0?Si=!0:os>0&&(Gn=!0)}else null!=Jt?Si=!0:Gn=!0;Gn?(ge(Nn),Nn=Fa(zt)):Si?(ze(Jt),Jt=Fa(Dt)):(Jt=Fa(Dt),Nn=Fa(zt))}}(d,m,rc,R=>{I.push(this.yn(e,t,o,R))},R=>{I.push(this.pn(e,t,o,R))}),Rt.waitFor(I)}_n(e){let t=1;return iu(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,d,m)=>{m.done(),t=d.sequenceNumber+1}).next(()=>t)}createRange(e,t,o){o=o.sort((I,R)=>rc(I,R)).filter((I,R,z)=>!R||0!==rc(I,z[R-1]));const d=[];d.push(e);for(const I of o){const R=rc(I,e),z=rc(I,t);if(0===R)d[0]=e.Ke();else if(R>0&&z<0)d.push(I),d.push(I.Ke());else if(z>0)break}d.push(t);const m=[];for(let I=0;I<d.length;I+=2)m.push(IDBKeyRange.bound([d[I].indexId,this.uid,d[I].arrayValue,d[I].directionalValue,Vc,[]],[d[I+1].indexId,this.uid,d[I+1].arrayValue,d[I+1].directionalValue,Vc,[]]));return m}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Nf)}getMinOffset(e,t){return Rt.mapArray(this.tn(t),o=>this.en(e,o).next(d=>d||wn())).next(Nf)}}function Hh(i){return Go(i,"collectionParents")}function ic(i){return Go(i,"indexEntries")}function vd(i){return Go(i,"indexConfiguration")}function iu(i){return Go(i,"indexState")}function Nf(i){En(0!==i.length);let e=i[0].indexState.offset,t=e.largestBatchId;for(let o=1;o<i.length;o++){const d=i[o].indexState.offset;pu(d,e)<0&&(e=d),t<d.largestBatchId&&(t=d.largestBatchId)}return new To(e.readTime,e.documentKey,t)}const Pf={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class sa{constructor(e,t,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new sa(e,sa.DEFAULT_COLLECTION_PERCENTILE,sa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function eh(i,e,t){const o=i.store("mutations"),d=i.store("documentMutations"),m=[],I=IDBKeyRange.only(t.batchId);let R=0;const z=o.Z({range:I},(ge,ze,Dt)=>(R++,Dt.delete()));m.push(z.next(()=>{En(1===R)}));const X=[];for(const ge of t.mutations){const ze=Zd(e,ge.key.path,t.batchId);m.push(d.delete(ze)),X.push(ge.key)}return Rt.waitFor(m).next(()=>X)}function _d(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw wn();e=i.noDocument}return JSON.stringify(e).length}sa.DEFAULT_COLLECTION_PERCENTILE=10,sa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,sa.DEFAULT=new sa(41943040,sa.DEFAULT_COLLECTION_PERCENTILE,sa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),sa.DISABLED=new sa(-1,0,0);class th{constructor(e,t,o,d){this.userId=e,this.It=t,this.indexManager=o,this.referenceDelegate=d,this.In={}}static oe(e,t,o,d){En(""!==e.uid);const m=e.isAuthenticated()?e.uid:"";return new th(m,t,o,d)}checkEmpty(e){let t=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Vl(e).Z({index:"userMutationsIndex",range:o},(d,m,I)=>{t=!1,I.done()}).next(()=>t)}addMutationBatch(e,t,o,d){const m=oc(e),I=Vl(e);return I.add({}).next(R=>{En("number"==typeof R);const z=new gd(R,t,o,d),X=function(Dt,zt,Jt){const Nn=Jt.baseMutations.map(Si=>_l(Dt.re,Si)),Gn=Jt.mutations.map(Si=>_l(Dt.re,Si));return{userId:zt,batchId:Jt.batchId,localWriteTimeMs:Jt.localWriteTime.toMillis(),baseMutations:Nn,mutations:Gn}}(this.It,this.userId,z),ge=[];let ze=new Xr((Dt,zt)=>ur(Dt.canonicalString(),zt.canonicalString()));for(const Dt of d){const zt=Zd(this.userId,Dt.key.path,R);ze=ze.add(Dt.key.path.popLast()),ge.push(I.put(X)),ge.push(m.put(zt,Nh))}return ze.forEach(Dt=>{ge.push(this.indexManager.addToCollectionParentIndex(e,Dt))}),e.addOnCommittedListener(()=>{this.In[R]=z.keys()}),Rt.waitFor(ge).next(()=>z)})}lookupMutationBatch(e,t){return Vl(e).get(t).next(o=>o?(En(o.userId===this.userId),Ll(this.It,o)):null)}Tn(e,t){return this.In[t]?Rt.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(o=>{if(o){const d=o.keys();return this.In[t]=d,d}return null})}getNextMutationBatchAfterBatchId(e,t){const o=t+1,d=IDBKeyRange.lowerBound([this.userId,o]);let m=null;return Vl(e).Z({index:"userMutationsIndex",range:d},(I,R,z)=>{R.userId===this.userId&&(En(R.batchId>=o),m=Ll(this.It,R)),z.done()}).next(()=>m)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return Vl(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(d,m,I)=>{o=m.batchId,I.done()}).next(()=>o)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Vl(e).W("userMutationsIndex",t).next(o=>o.map(d=>Ll(this.It,d)))}getAllMutationBatchesAffectingDocumentKey(e,t){const o=Fl(this.userId,t.path),d=IDBKeyRange.lowerBound(o),m=[];return oc(e).Z({range:d},(I,R,z)=>{const[X,ge,ze]=I,Dt=$a(ge);if(X===this.userId&&t.path.isEqual(Dt))return Vl(e).get(ze).next(zt=>{if(!zt)throw wn();En(zt.userId===this.userId),m.push(Ll(this.It,zt))});z.done()}).next(()=>m)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new Xr(ur);const d=[];return t.forEach(m=>{const I=Fl(this.userId,m.path),R=IDBKeyRange.lowerBound(I),z=oc(e).Z({range:R},(X,ge,ze)=>{const[Dt,zt,Jt]=X,Nn=$a(zt);Dt===this.userId&&m.path.isEqual(Nn)?o=o.add(Jt):ze.done()});d.push(z)}),Rt.waitFor(d).next(()=>this.En(e,o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,d=o.length+1,m=Fl(this.userId,o),I=IDBKeyRange.lowerBound(m);let R=new Xr(ur);return oc(e).Z({range:I},(z,X,ge)=>{const[ze,Dt,zt]=z,Jt=$a(Dt);ze===this.userId&&o.isPrefixOf(Jt)?Jt.length===d&&(R=R.add(zt)):ge.done()}).next(()=>this.En(e,R))}En(e,t){const o=[],d=[];return t.forEach(m=>{d.push(Vl(e).get(m).next(I=>{if(null===I)throw wn();En(I.userId===this.userId),o.push(Ll(this.It,I))}))}),Rt.waitFor(d).next(()=>o)}removeMutationBatch(e,t){return eh(e.ie,this.userId,t).next(o=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),Rt.forEach(o,d=>this.referenceDelegate.markPotentiallyOrphaned(e,d))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Rt.resolve();const o=IDBKeyRange.lowerBound([this.userId]),d=[];return oc(e).Z({range:o},(m,I,R)=>{if(m[0]===this.userId){const z=$a(m[1]);d.push(z)}else R.done()}).next(()=>{En(0===d.length)})})}containsKey(e,t){return sc(e,this.userId,t)}Rn(e){return kf(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function sc(i,e,t){const o=Fl(e,t.path),d=o[1],m=IDBKeyRange.lowerBound(o);let I=!1;return oc(i).Z({range:m,X:!0},(R,z,X)=>{const[ge,ze,Dt]=R;ge===e&&ze===d&&(I=!0),X.done()}).next(()=>I)}function Vl(i){return Go(i,"mutations")}function oc(i){return Go(i,"documentMutations")}function kf(i){return Go(i,"mutationQueues")}class su{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new su(0)}static vn(){return new su(-1)}}class Ff{constructor(e,t){this.referenceDelegate=e,this.It=t}allocateTargetId(e){return this.Vn(e).next(t=>{const o=new su(t.highestTargetId);return t.highestTargetId=o.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>er.fromTimestamp(new Mi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,o){return this.Vn(e).next(d=>(d.highestListenSequenceNumber=t,o&&(d.lastRemoteSnapshotVersion=o.toTimestamp()),t>d.highestListenSequenceNumber&&(d.highestListenSequenceNumber=t),this.Sn(e,d)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(o=>(o.targetCount+=1,this.Cn(t,o),this.Sn(e,o))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Bc(e).delete(t.targetId)).next(()=>this.Vn(e)).next(o=>(En(o.targetCount>0),o.targetCount-=1,this.Sn(e,o)))}removeTargets(e,t,o){let d=0;const m=[];return Bc(e).Z((I,R)=>{const z=vo(R);z.sequenceNumber<=t&&null===o.get(z.targetId)&&(d++,m.push(this.removeTargetData(e,z)))}).next(()=>Rt.waitFor(m)).next(()=>d)}forEachTarget(e,t){return Bc(e).Z((o,d)=>{const m=vo(d);t(m)})}Vn(e){return Lf(e).get("targetGlobalKey").next(t=>(En(null!==t),t))}Sn(e,t){return Lf(e).put("targetGlobalKey",t)}Dn(e,t){return Bc(e).put(Pc(this.It,t))}Cn(e,t){let o=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,o=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const o=Tl(t),d=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let m=null;return Bc(e).Z({range:d,index:"queryTargetsIndex"},(I,R,z)=>{const X=vo(R);ul(t,X.target)&&(m=X,z.done())}).next(()=>m)}addMatchingKeys(e,t,o){const d=[],m=h(e);return t.forEach(I=>{const R=jn(I.path);d.push(m.put({targetId:o,path:R})),d.push(this.referenceDelegate.addReference(e,o,I))}),Rt.waitFor(d)}removeMatchingKeys(e,t,o){const d=h(e);return Rt.forEach(t,m=>{const I=jn(m.path);return Rt.waitFor([d.delete([o,I]),this.referenceDelegate.removeReference(e,o,m)])})}removeMatchingKeysForTargetId(e,t){const o=h(e),d=IDBKeyRange.bound([t],[t+1],!1,!0);return o.delete(d)}getMatchingKeysForTargetId(e,t){const o=IDBKeyRange.bound([t],[t+1],!1,!0),d=h(e);let m=jr();return d.Z({range:o,X:!0},(I,R,z)=>{const X=$a(I[1]),ge=new dn(X);m=m.add(ge)}).next(()=>m)}containsKey(e,t){const o=jn(t.path),d=IDBKeyRange.bound([o],[ll(o)],!1,!0);let m=0;return h(e).Z({index:"documentTargetsIndex",X:!0,range:d},([I,R],z,X)=>{0!==I&&(m++,X.done())}).next(()=>m>0)}se(e,t){return Bc(e).get(t).next(o=>o?vo(o):null)}}function Bc(i){return Go(i,"targets")}function Lf(i){return Go(i,"targetGlobal")}function h(i){return Go(i,"targetDocuments")}function u([i,e],[t,o]){const d=ur(i,t);return 0===d?ur(e,o):d}class c{constructor(e){this.xn=e,this.buffer=new Xr(u),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const o=this.buffer.last();u(t,o)<0&&(this.buffer=this.buffer.delete(o).add(t))}}get maxValue(){return this.buffer.last()[0]}}class y{constructor(e,t,o){this.garbageCollector=e,this.asyncQueue=t,this.localStore=o,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;rn("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,me.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(o){na(o)?rn("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",o):yield Ao(o)}yield t.Fn(3e5)}))}}class D{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(o=>Math.floor(t/100*o))}nthSequenceNumber(e,t){if(0===t)return Rt.resolve(oo.at);const o=new c(t);return this.$n.forEachTarget(e,d=>o.On(d.sequenceNumber)).next(()=>this.$n.Ln(e,d=>o.On(d))).next(()=>o.maxValue)}removeTargets(e,t,o){return this.$n.removeTargets(e,t,o)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(rn("LruGarbageCollector","Garbage collection skipped; disabled"),Rt.resolve(Pf)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(rn("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Pf):this.Un(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}Un(e,t){let o,d,m,I,R,z,X;const ge=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(ze=>(ze>this.params.maximumSequenceNumbersToCollect?(rn("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${ze}`),d=this.params.maximumSequenceNumbersToCollect):d=ze,I=Date.now(),this.nthSequenceNumber(e,d))).next(ze=>(o=ze,R=Date.now(),this.removeTargets(e,o,t))).next(ze=>(m=ze,z=Date.now(),this.removeOrphanedDocuments(e,o))).next(ze=>(X=Date.now(),io()<=xt.in.DEBUG&&rn("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${I-ge}ms\n\tDetermined least recently used ${d} in `+(R-I)+`ms\n\tRemoved ${m} targets in `+(z-R)+`ms\n\tRemoved ${ze} documents in `+(X-z)+`ms\nTotal Duration: ${X-ge}ms`),Rt.resolve({didRun:!0,sequenceNumbersCollected:d,targetsRemoved:m,documentsRemoved:ze})))}}class k{constructor(e,t){this.db=e,this.garbageCollector=new D(this,t)}Bn(e){const t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>t.next(d=>o+d))}qn(e){let t=0;return this.Ln(e,o=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(o,d)=>t(d))}addReference(e,t,o){return W(e,o)}removeReference(e,t,o){return W(e,o)}removeTargets(e,t,o){return this.db.getTargetCache().removeTargets(e,t,o)}markPotentiallyOrphaned(e,t){return W(e,t)}Gn(e,t){return function(o,d){let m=!1;return kf(o).tt(I=>sc(o,I,d).next(R=>(R&&(m=!0),Rt.resolve(!R)))).next(()=>m)}(e,t)}removeOrphanedDocuments(e,t){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),d=[];let m=0;return this.Kn(e,(I,R)=>{if(R<=t){const z=this.Gn(e,I).next(X=>{if(!X)return m++,o.getEntry(e,I).next(()=>(o.removeEntry(I,er.min()),h(e).delete([0,jn(I.path)])))});d.push(z)}}).next(()=>Rt.waitFor(d)).next(()=>o.apply(e)).next(()=>m)}removeTarget(e,t){const o=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,t){return W(e,t)}Kn(e,t){const o=h(e);let d,m=oo.at;return o.Z({index:"documentTargetsIndex"},([I,R],{path:z,sequenceNumber:X})=>{0===I?(m!==oo.at&&t(new dn($a(d)),m),m=X,d=z):m=oo.at}).next(()=>{m!==oo.at&&t(new dn($a(d)),m)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function W(i,e){return h(i).put((o=i.currentSequenceNumber,{targetId:0,path:jn(e.path),sequenceNumber:o}));var o}class ae{constructor(){this.changes=new al(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,li.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const o=this.changes.get(t);return void 0!==o?Rt.resolve(o):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Me{constructor(e){this.It=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,o){return Yt(e).put(o)}removeEntry(e,t,o){return Yt(e).delete(function(d,m){const I=d.path.toArray();return[I.slice(0,I.length-2),I[I.length-2],Wo(m),I[I.length-1]]}(t,o))}updateMetadata(e,t){return this.getMetadata(e).next(o=>(o.byteSize+=t,this.Qn(e,o)))}getEntry(e,t){let o=li.newInvalidDocument(t);return Yt(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Mn(t))},(d,m)=>{o=this.jn(t,m)}).next(()=>o)}Wn(e,t){let o={size:0,document:li.newInvalidDocument(t)};return Yt(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Mn(t))},(d,m)=>{o={document:this.jn(t,m),size:_d(m)}}).next(()=>o)}getEntries(e,t){let o=ga();return this.zn(e,t,(d,m)=>{const I=this.jn(d,m);o=o.insert(d,I)}).next(()=>o)}Hn(e,t){let o=ga(),d=new Pi(dn.comparator);return this.zn(e,t,(m,I)=>{const R=this.jn(m,I);o=o.insert(m,R),d=d.insert(m,_d(I))}).next(()=>({documents:o,Jn:d}))}zn(e,t,o){if(t.isEmpty())return Rt.resolve();let d=new Xr(ki);t.forEach(z=>d=d.add(z));const m=IDBKeyRange.bound(Mn(d.first()),Mn(d.last())),I=d.getIterator();let R=I.getNext();return Yt(e).Z({index:"documentKeyIndex",range:m},(z,X,ge)=>{const ze=dn.fromSegments([...X.prefixPath,X.collectionGroup,X.documentId]);for(;R&&ki(R,ze)<0;)o(R,null),R=I.getNext();R&&R.isEqual(ze)&&(o(R,X),R=I.hasNext()?I.getNext():null),R?ge.j(Mn(R)):ge.done()}).next(()=>{for(;R;)o(R,null),R=I.hasNext()?I.getNext():null})}getAllFromCollection(e,t,o){const d=[t.popLast().toArray(),t.lastSegment(),Wo(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],m=[t.popLast().toArray(),t.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Yt(e).W(IDBKeyRange.bound(d,m,!0)).next(I=>{let R=ga();for(const z of I){const X=this.jn(dn.fromSegments(z.prefixPath.concat(z.collectionGroup,z.documentId)),z);R=R.insert(X.key,X)}return R})}getAllFromCollectionGroup(e,t,o,d){let m=ga();const I=hr(t,o),R=hr(t,To.max());return Yt(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(I,R,!0)},(z,X,ge)=>{const ze=this.jn(dn.fromSegments(X.prefixPath.concat(X.collectionGroup,X.documentId)),X);m=m.insert(ze.key,ze),m.size===d&&ge.done()}).next(()=>m)}newChangeBuffer(e){return new Lt(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Ft(e).get("remoteDocumentGlobalKey").next(t=>(En(!!t),t))}Qn(e,t){return Ft(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const o=function _m(i,e){let t;if(e.document)t=Ju(i.re,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=dn.fromSegments(e.noDocument.path),d=Su(e.noDocument.readTime);t=li.newNoDocument(o,d),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return wn();{const o=dn.fromSegments(e.unknownDocument.path),d=Su(e.unknownDocument.version);t=li.newUnknownDocument(o,d)}}return e.readTime&&t.setReadTime(function(o){const d=new Mi(o[0],o[1]);return er.fromTimestamp(d)}(e.readTime)),t}(this.It,t);if(!o.isNoDocument()||!o.version.isEqual(er.min()))return o}return li.newInvalidDocument(e)}}function We(i){return new Me(i)}class Lt extends ae{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new al(o=>o.toString(),(o,d)=>o.isEqual(d))}applyChanges(e){const t=[];let o=0,d=new Xr((m,I)=>ur(m.canonicalString(),I.canonicalString()));return this.changes.forEach((m,I)=>{const R=this.Xn.get(m);if(t.push(this.Yn.removeEntry(e,m,R.readTime)),I.isValidDocument()){const z=Up(this.Yn.It,I);d=d.add(m.path.popLast()),o+=_d(z)-R.size,t.push(this.Yn.addEntry(e,m,z))}else if(o-=R.size,this.trackRemovals){const z=Up(this.Yn.It,I.convertToNoDocument(er.min()));t.push(this.Yn.addEntry(e,m,z))}}),d.forEach(m=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,m))}),t.push(this.Yn.updateMetadata(e,o)),Rt.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(o=>(this.Xn.set(t,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:o,Jn:d})=>(d.forEach((m,I)=>{this.Xn.set(m,{size:I,readTime:o.get(m).readTime})}),o))}}function Ft(i){return Go(i,"remoteDocumentGlobal")}function Yt(i){return Go(i,"remoteDocumentsV14")}function Mn(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function hr(i,e){const t=e.documentKey.path.toArray();return[i,Wo(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function ki(i,e){const t=i.path.toArray(),o=e.path.toArray();let d=0;for(let m=0;m<t.length-2&&m<o.length-2;++m)if(d=ur(t[m],o[m]),d)return d;return d=ur(t.length,o.length),d||(d=ur(t[t.length-2],o[o.length-2]),d||ur(t[t.length-1],o[o.length-1]))}class co{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class El{constructor(e,t,o,d){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=o,this.indexManager=d}getDocument(e,t){let o=null;return this.documentOverlayCache.getOverlay(e,t).next(d=>(o=d,this.getBaseDocument(e,t,o))).next(d=>(null!==o&&Yu(o.mutation,d,ao.empty(),Mi.now()),d))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(o=>this.getLocalViewOfDocuments(e,o,jr()).next(()=>o))}getLocalViewOfDocuments(e,t,o=jr()){const d=Uo();return this.populateOverlays(e,d,t).next(()=>this.computeViews(e,t,d,o).next(m=>{let I=Pl();return m.forEach((R,z)=>{I=I.insert(R,z.overlayedDocument)}),I}))}getOverlayedDocuments(e,t){const o=Uo();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,jr()))}populateOverlays(e,t,o){const d=[];return o.forEach(m=>{t.has(m)||d.push(m)}),this.documentOverlayCache.getOverlays(e,d).next(m=>{m.forEach((I,R)=>{t.set(I,R)})})}computeViews(e,t,o,d){let m=ga();const I=fl(),R=fl();return t.forEach((z,X)=>{const ge=o.get(X.key);d.has(X.key)&&(void 0===ge||ge.mutation instanceof sl)?m=m.insert(X.key,X):void 0!==ge&&(I.set(X.key,ge.mutation.getFieldMask()),Yu(ge.mutation,X,ge.mutation.getFieldMask(),Mi.now()))}),this.recalculateAndSaveOverlays(e,m).next(z=>(z.forEach((X,ge)=>I.set(X,ge)),t.forEach((X,ge)=>{var ze;return R.set(X,new co(ge,null!==(ze=I.get(X))&&void 0!==ze?ze:null))}),R))}recalculateAndSaveOverlays(e,t){const o=fl();let d=new Pi((I,R)=>I-R),m=jr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(I=>{for(const R of I)R.keys().forEach(z=>{const X=t.get(z);if(null===X)return;let ge=o.get(z)||ao.empty();ge=R.applyToLocalView(X,ge),o.set(z,ge);const ze=(d.get(R.batchId)||jr()).add(z);d=d.insert(R.batchId,ze)})}).next(()=>{const I=[],R=d.getReverseIterator();for(;R.hasNext();){const z=R.getNext(),X=z.key,ge=z.value,ze=Ku();ge.forEach(Dt=>{if(!m.has(Dt)){const zt=ad(t.get(Dt),o.get(Dt));null!==zt&&ze.set(Dt,zt),m=m.add(Dt)}}),I.push(this.documentOverlayCache.saveOverlays(e,X,ze))}return Rt.waitFor(I)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(o=>this.recalculateAndSaveOverlays(e,o))}getDocumentsMatchingQuery(e,t,o){return dn.isDocumentKey((d=t).path)&&null===d.collectionGroup&&0===d.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):_c(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,o):this.getDocumentsMatchingCollectionQuery(e,t,o);var d}getNextDocuments(e,t,o,d){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,o,d).next(m=>{const I=d-m.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,o.largestBatchId,d-m.size):Rt.resolve(Uo());let R=-1,z=m;return I.next(X=>Rt.forEach(X,(ge,ze)=>(R<ze.largestBatchId&&(R=ze.largestBatchId),m.get(ge)?Rt.resolve():this.getBaseDocument(e,ge,ze).next(Dt=>{z=z.insert(ge,Dt)}))).next(()=>this.populateOverlays(e,X,m)).next(()=>this.computeViews(e,z,X,jr())).next(ge=>({batchId:R,changes:Wd(ge)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new dn(t)).next(o=>{let d=Pl();return o.isFoundDocument()&&(d=d.insert(o.key,o)),d})}getDocumentsMatchingCollectionGroupQuery(e,t,o){const d=t.collectionGroup;let m=Pl();return this.indexManager.getCollectionParents(e,d).next(I=>Rt.forEach(I,R=>{const z=(X=t,ge=R.child(d),new Va(ge,null,X.explicitOrderBy.slice(),X.filters.slice(),X.limit,X.limitType,X.startAt,X.endAt));var X,ge;return this.getDocumentsMatchingCollectionQuery(e,z,o).next(X=>{X.forEach((ge,ze)=>{m=m.insert(ge,ze)})})}).next(()=>m))}getDocumentsMatchingCollectionQuery(e,t,o){let d;return this.remoteDocumentCache.getAllFromCollection(e,t.path,o).next(m=>(d=m,this.documentOverlayCache.getOverlaysForCollection(e,t.path,o.largestBatchId))).next(m=>{m.forEach((R,z)=>{const X=z.getKey();null===d.get(X)&&(d=d.insert(X,li.newInvalidDocument(X)))});let I=Pl();return d.forEach((R,z)=>{const X=m.get(R);void 0!==X&&Yu(X.mutation,z,ao.empty(),Mi.now()),Ws(t,z)&&(I=I.insert(R,z))}),I})}getBaseDocument(e,t,o){return null===o||1===o.mutation.type?this.remoteDocumentCache.getEntry(e,t):Rt.resolve(li.newInvalidDocument(t))}}class Bl{constructor(e){this.It=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return Rt.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var o;return this.Zn.set(t.id,{id:(o=t).id,version:o.version,createTime:eo(o.createTime)}),Rt.resolve()}getNamedQuery(e,t){return Rt.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(o=t).name,query:Jd(o.bundledQuery),readTime:eo(o.readTime)}),Rt.resolve();var o}}class ac{constructor(){this.overlays=new Pi(dn.comparator),this.es=new Map}getOverlay(e,t){return Rt.resolve(this.overlays.get(t))}getOverlays(e,t){const o=Uo();return Rt.forEach(t,d=>this.getOverlay(e,d).next(m=>{null!==m&&o.set(d,m)})).next(()=>o)}saveOverlays(e,t,o){return o.forEach((d,m)=>{this.ue(e,t,m)}),Rt.resolve()}removeOverlaysForBatchId(e,t,o){const d=this.es.get(o);return void 0!==d&&(d.forEach(m=>this.overlays=this.overlays.remove(m)),this.es.delete(o)),Rt.resolve()}getOverlaysForCollection(e,t,o){const d=Uo(),m=t.length+1,I=new dn(t.child("")),R=this.overlays.getIteratorFrom(I);for(;R.hasNext();){const z=R.getNext().value,X=z.getKey();if(!t.isPrefixOf(X.path))break;X.path.length===m&&z.largestBatchId>o&&d.set(z.getKey(),z)}return Rt.resolve(d)}getOverlaysForCollectionGroup(e,t,o,d){let m=new Pi((X,ge)=>X-ge);const I=this.overlays.getIterator();for(;I.hasNext();){const X=I.getNext().value;if(X.getKey().getCollectionGroup()===t&&X.largestBatchId>o){let ge=m.get(X.largestBatchId);null===ge&&(ge=Uo(),m=m.insert(X.largestBatchId,ge)),ge.set(X.getKey(),X)}}const R=Uo(),z=m.getIterator();for(;z.hasNext()&&(z.getNext().value.forEach((X,ge)=>R.set(X,ge)),!(R.size()>=d)););return Rt.resolve(R)}ue(e,t,o){const d=this.overlays.get(o.key);if(null!==d){const I=this.es.get(d.largestBatchId).delete(o.key);this.es.set(d.largestBatchId,I)}this.overlays=this.overlays.insert(o.key,new Bh(t,o));let m=this.es.get(t);void 0===m&&(m=jr(),this.es.set(t,m)),this.es.set(t,m.add(o.key))}}class nh{constructor(){this.ns=new Xr(zo.ss),this.rs=new Xr(zo.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const o=new zo(e,t);this.ns=this.ns.add(o),this.rs=this.rs.add(o)}us(e,t){e.forEach(o=>this.addReference(o,t))}removeReference(e,t){this.cs(new zo(e,t))}hs(e,t){e.forEach(o=>this.removeReference(o,t))}ls(e){const t=new dn(new Qr([])),o=new zo(t,e),d=new zo(t,e+1),m=[];return this.rs.forEachInRange([o,d],I=>{this.cs(I),m.push(I.key)}),m}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new dn(new Qr([])),o=new zo(t,e),d=new zo(t,e+1);let m=jr();return this.rs.forEachInRange([o,d],I=>{m=m.add(I.key)}),m}containsKey(e){const t=new zo(e,0),o=this.ns.firstAfterOrEqual(t);return null!==o&&e.isEqual(o.key)}}class zo{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return dn.comparator(e.key,t.key)||ur(e._s,t._s)}static os(e,t){return ur(e._s,t._s)||dn.comparator(e.key,t.key)}}class Im{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new Xr(zo.ss)}checkEmpty(e){return Rt.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,o,d){const m=this.ws;this.ws++;const I=new gd(m,t,o,d);this.mutationQueue.push(I);for(const R of d)this.gs=this.gs.add(new zo(R.key,m)),this.indexManager.addToCollectionParentIndex(e,R.key.path.popLast());return Rt.resolve(I)}lookupMutationBatch(e,t){return Rt.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const d=this.ps(t+1),m=d<0?0:d;return Rt.resolve(this.mutationQueue.length>m?this.mutationQueue[m]:null)}getHighestUnacknowledgedBatchId(){return Rt.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return Rt.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const o=new zo(t,0),d=new zo(t,Number.POSITIVE_INFINITY),m=[];return this.gs.forEachInRange([o,d],I=>{const R=this.ys(I._s);m.push(R)}),Rt.resolve(m)}getAllMutationBatchesAffectingDocumentKeys(e,t){let o=new Xr(ur);return t.forEach(d=>{const m=new zo(d,0),I=new zo(d,Number.POSITIVE_INFINITY);this.gs.forEachInRange([m,I],R=>{o=o.add(R._s)})}),Rt.resolve(this.Is(o))}getAllMutationBatchesAffectingQuery(e,t){const o=t.path,d=o.length+1;let m=o;dn.isDocumentKey(m)||(m=m.child(""));const I=new zo(new dn(m),0);let R=new Xr(ur);return this.gs.forEachWhile(z=>{const X=z.key.path;return!!o.isPrefixOf(X)&&(X.length===d&&(R=R.add(z._s)),!0)},I),Rt.resolve(this.Is(R))}Is(e){const t=[];return e.forEach(o=>{const d=this.ys(o);null!==d&&t.push(d)}),t}removeMutationBatch(e,t){En(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let o=this.gs;return Rt.forEach(t.mutations,d=>{const m=new zo(d.key,t.batchId);return o=o.delete(m),this.referenceDelegate.markPotentiallyOrphaned(e,d.key)}).next(()=>{this.gs=o})}An(e){}containsKey(e,t){const o=new zo(t,0),d=this.gs.firstAfterOrEqual(o);return Rt.resolve(t.isEqual(d&&d.key))}performConsistencyCheck(e){return Rt.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Vf{constructor(e){this.Es=e,this.docs=new Pi(dn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const o=t.key,d=this.docs.get(o),m=d?d.size:0,I=this.Es(t);return this.docs=this.docs.insert(o,{document:t.mutableCopy(),size:I}),this.size+=I-m,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const o=this.docs.get(t);return Rt.resolve(o?o.document.mutableCopy():li.newInvalidDocument(t))}getEntries(e,t){let o=ga();return t.forEach(d=>{const m=this.docs.get(d);o=o.insert(d,m?m.document.mutableCopy():li.newInvalidDocument(d))}),Rt.resolve(o)}getAllFromCollection(e,t,o){let d=ga();const m=new dn(t.child("")),I=this.docs.getIteratorFrom(m);for(;I.hasNext();){const{key:R,value:{document:z}}=I.getNext();if(!t.isPrefixOf(R.path))break;R.path.length>t.length+1||pu(Yl(z),o)<=0||(d=d.insert(z.key,z.mutableCopy()))}return Rt.resolve(d)}getAllFromCollectionGroup(e,t,o,d){wn()}As(e,t){return Rt.forEach(this.docs,o=>t(o))}newChangeBuffer(e){return new Bf(this)}getSize(e){return Rt.resolve(this.size)}}class Bf extends ae{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((o,d)=>{d.isValidDocument()?t.push(this.Yn.addEntry(e,d)):this.Yn.removeEntry(o)}),Rt.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class wm{constructor(e){this.persistence=e,this.Rs=new al(t=>Tl(t),ul),this.lastRemoteSnapshotVersion=er.min(),this.highestTargetId=0,this.bs=0,this.Ps=new nh,this.targetCount=0,this.vs=su.Pn()}forEachTarget(e,t){return this.Rs.forEach((o,d)=>t(d)),Rt.resolve()}getLastRemoteSnapshotVersion(e){return Rt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Rt.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),Rt.resolve(this.highestTargetId)}setTargetsMetadata(e,t,o){return o&&(this.lastRemoteSnapshotVersion=o),t>this.bs&&(this.bs=t),Rt.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new su(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,Rt.resolve()}updateTargetData(e,t){return this.Dn(t),Rt.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,Rt.resolve()}removeTargets(e,t,o){let d=0;const m=[];return this.Rs.forEach((I,R)=>{R.sequenceNumber<=t&&null===o.get(R.targetId)&&(this.Rs.delete(I),m.push(this.removeMatchingKeysForTargetId(e,R.targetId)),d++)}),Rt.waitFor(m).next(()=>d)}getTargetCount(e){return Rt.resolve(this.targetCount)}getTargetData(e,t){const o=this.Rs.get(t)||null;return Rt.resolve(o)}addMatchingKeys(e,t,o){return this.Ps.us(t,o),Rt.resolve()}removeMatchingKeys(e,t,o){this.Ps.hs(t,o);const d=this.persistence.referenceDelegate,m=[];return d&&t.forEach(I=>{m.push(d.markPotentiallyOrphaned(e,I))}),Rt.waitFor(m)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),Rt.resolve()}getMatchingKeysForTargetId(e,t){const o=this.Ps.ds(t);return Rt.resolve(o)}containsKey(e,t){return Rt.resolve(this.Ps.containsKey(t))}}class $f{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new oo(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new wm(this),this.indexManager=new Em,this.remoteDocumentCache=new Vf(o=>this.referenceDelegate.xs(o)),this.It=new $h(t),this.Ns=new Bl(this.It)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ac,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let o=this.Vs[e.toKey()];return o||(o=new Im(t,this.referenceDelegate),this.Vs[e.toKey()]=o),o}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,o){rn("MemoryPersistence","Starting transaction:",e);const d=new bm(this.Ss.next());return this.referenceDelegate.ks(),o(d).next(m=>this.referenceDelegate.Os(d).next(()=>m)).toPromise().then(m=>(d.raiseOnCommittedEvent(),m))}Ms(e,t){return Rt.or(Object.values(this.Vs).map(o=>()=>o.containsKey(e,t)))}}class bm extends gu{constructor(e){super(),this.currentSequenceNumber=e}}class rh{constructor(e){this.persistence=e,this.Fs=new nh,this.$s=null}static Bs(e){return new rh(e)}get Ls(){if(this.$s)return this.$s;throw wn()}addReference(e,t,o){return this.Fs.addReference(o,t),this.Ls.delete(o.toString()),Rt.resolve()}removeReference(e,t,o){return this.Fs.removeReference(o,t),this.Ls.add(o.toString()),Rt.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),Rt.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(d=>this.Ls.add(d.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,t.targetId).next(d=>{d.forEach(m=>this.Ls.add(m.toString()))}).next(()=>o.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Rt.forEach(this.Ls,o=>{const d=dn.fromPath(o);return this.Us(e,d).next(m=>{m||t.removeEntry(d,er.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.Us(e,t).next(o=>{o?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}Us(e,t){return Rt.or([()=>Rt.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class Gh{constructor(e){this.It=e}$(e,t,o,d){const m=new Ds("createOrUpgrade",t);var R;o<1&&d>=1&&(e.createObjectStore("owner"),(R=e).createObjectStore("mutationQueues",{keyPath:"userId"}),R.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Kd,{unique:!0}),R.createObjectStore("documentMutations"),Cm(e),function(R){R.createObjectStore("remoteDocuments")}(e));let I=Rt.resolve();return o<3&&d>=3&&(0!==o&&(function(R){R.deleteObjectStore("targetDocuments"),R.deleteObjectStore("targets"),R.deleteObjectStore("targetGlobal")}(e),Cm(e)),I=I.next(()=>function(R){const z=R.store("targetGlobal"),X={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:er.min().toTimestamp(),targetCount:0};return z.put("targetGlobalKey",X)}(m))),o<4&&d>=4&&(0!==o&&(I=I.next(()=>function(R,z){return z.store("mutations").W().next(X=>{R.deleteObjectStore("mutations"),R.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Kd,{unique:!0});const ge=z.store("mutations"),ze=X.map(Dt=>ge.put(Dt));return Rt.waitFor(ze)})}(e,m))),I=I.next(()=>{!function(R){R.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&d>=5&&(I=I.next(()=>this.qs(m))),o<6&&d>=6&&(I=I.next(()=>(function(R){R.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(m)))),o<7&&d>=7&&(I=I.next(()=>this.Gs(m))),o<8&&d>=8&&(I=I.next(()=>this.Qs(e,m))),o<9&&d>=9&&(I=I.next(()=>{!function(R){R.objectStoreNames.contains("remoteDocumentChanges")&&R.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&d>=10&&(I=I.next(()=>this.js(m))),o<11&&d>=11&&(I=I.next(()=>{(function(R){R.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(R){R.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&d>=12&&(I=I.next(()=>{!function(R){const z=R.createObjectStore("documentOverlays",{keyPath:Fh});z.createIndex("collectionPathOverlayIndex",Nc,{unique:!1}),z.createIndex("collectionGroupOverlayIndex",Bp,{unique:!1})}(e)})),o<13&&d>=13&&(I=I.next(()=>function(R){const z=R.createObjectStore("remoteDocumentsV14",{keyPath:Qd});z.createIndex("documentKeyIndex",Ph),z.createIndex("collectionGroupIndex",Ya)}(e)).next(()=>this.Ws(e,m)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&d>=14&&(I=I.next(()=>this.zs(e,m))),o<15&&d>=15&&(I=I.next(()=>function(R){R.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),R.createObjectStore("indexState",{keyPath:pd}).createIndex("sequenceNumberIndex",Tf,{unique:!1}),R.createObjectStore("indexEntries",{keyPath:kh}).createIndex("documentKeyIndex",Vp,{unique:!1})}(e))),I}Ks(e){let t=0;return e.store("remoteDocuments").Z((o,d)=>{t+=_d(d)}).next(()=>{const o={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}qs(e){const t=e.store("mutationQueues"),o=e.store("mutations");return t.W().next(d=>Rt.forEach(d,m=>{const I=IDBKeyRange.bound([m.userId,-1],[m.userId,m.lastAcknowledgedBatchId]);return o.W("userMutationsIndex",I).next(R=>Rt.forEach(R,z=>{En(z.userId===m.userId);const X=Ll(this.It,z);return eh(e,m.userId,X).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(d=>{const m=[];return o.Z((I,R)=>{const z=new Qr(I),X=[0,jn(z)];m.push(t.get(X).next(ge=>ge?Rt.resolve():t.put({targetId:0,path:jn(z),sequenceNumber:d.highestListenSequenceNumber})))}).next(()=>Rt.waitFor(m))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:Oc});const o=t.store("collectionParents"),d=new Ka,m=I=>{if(d.add(I)){const R=I.lastSegment(),z=I.popLast();return o.put({collectionId:R,parent:jn(z)})}};return t.store("remoteDocuments").Z({X:!0},(I,R)=>{const z=new Qr(I);return m(z.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([I,R,z],X)=>{const ge=$a(R);return m(ge.popLast())}))}js(e){const t=e.store("targets");return t.Z((o,d)=>{const m=vo(d),I=Pc(this.It,m);return t.put(I)})}Ws(e,t){const o=t.store("remoteDocuments"),d=[];return o.Z((m,I)=>{const R=t.store("remoteDocumentsV14"),z=(X=I,X.document?new dn(Qr.fromString(X.document.name).popFirst(5)):X.noDocument?dn.fromSegments(X.noDocument.path):X.unknownDocument?dn.fromSegments(X.unknownDocument.path):wn()).path.toArray();var X;const ge={prefixPath:z.slice(0,z.length-2),collectionGroup:z[z.length-2],documentId:z[z.length-1],readTime:I.readTime||[0,0],unknownDocument:I.unknownDocument,noDocument:I.noDocument,document:I.document,hasCommittedMutations:!!I.hasCommittedMutations};d.push(R.put(ge))}).next(()=>Rt.waitFor(d))}zs(e,t){const o=t.store("mutations"),d=We(this.It),m=new $f(rh.Bs,this.It.re);return o.W().next(I=>{const R=new Map;return I.forEach(z=>{var X;let ge=null!==(X=R.get(z.userId))&&void 0!==X?X:jr();Ll(this.It,z).keys().forEach(ze=>ge=ge.add(ze)),R.set(z.userId,ge)}),Rt.forEach(R,(z,X)=>{const ge=new zr(X),ze=md.oe(this.It,ge),Dt=m.getIndexManager(ge),zt=th.oe(ge,this.It,Dt,m.referenceDelegate);return new El(d,zt,ze,Dt).recalculateAndSaveOverlaysForDocumentKeys(new Lh(t,oo.at),z).next()})})}}function Cm(i){i.createObjectStore("targetDocuments",{keyPath:ec}).createIndex("documentTargetsIndex",Rc,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",fd,{unique:!0}),i.createObjectStore("targetGlobal")}const Uf="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Hp{constructor(e,t,o,d,m,I,R,z,X,ge,ze=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=o,this.Hs=m,this.window=I,this.document=R,this.Js=X,this.Ys=ge,this.Xs=ze,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=Dt=>Promise.resolve(),!Hp.C())throw new Qt(Pt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new k(this,d),this.ii=t+"main",this.It=new $h(z),this.ri=new so(this.ii,this.Xs,new Gh(this.It)),this.Cs=new Ff(this.referenceDelegate,this.It),this.remoteDocumentCache=We(this.It),this.Ns=new qa,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===ge&&vi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Qt(Pt.FAILED_PRECONDITION,Uf);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new oo(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var o=(0,me.Z)(function*(d){if(t.started)return e(d)});return function(d){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,me.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,me.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>zh(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(na(e))return rn("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return rn("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Wh(e).get("owner").next(t=>Rt.resolve(this.mi(t)))}gi(e){return zh(e).delete(this.clientId)}yi(){var e=this;return(0,me.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const d=Go(o,"clientMetadata");return d.W().next(m=>{const I=e.Ii(m,18e5),R=m.filter(z=>-1===I.indexOf(z));return Rt.forEach(R,z=>d.delete(z.clientId)).next(()=>R)})}).catch(()=>[]);if(e.oi)for(const o of t)e.oi.removeItem(e.Ti(o.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?Rt.resolve(!0):Wh(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Qt(Pt.FAILED_PRECONDITION,Uf);return!1}}return!(!this.networkEnabled||!this.inForeground)||zh(e).W().next(o=>void 0===this.Ii(o,5e3).find(d=>{if(this.clientId!==d.clientId){const I=!this.inForeground&&d.inForeground,R=this.networkEnabled===d.networkEnabled;if(!this.networkEnabled&&d.networkEnabled||I&&R)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&rn("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,me.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const o=new Lh(t,oo.at);return e._i(o).next(()=>e.gi(o))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(o=>this.pi(o.updateTimeMs,t)&&!this.Ei(o.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>zh(e).W().next(t=>this.Ii(t,18e5).map(o=>o.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return th.oe(e,this.It,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new jh(e,this.It.re.databaseId)}getDocumentOverlayCache(e){return md.oe(this.It,e)}getBundleCache(){return this.Ns}runTransaction(e,t,o){rn("IndexedDbPersistence","Starting transaction:",e);const d="readonly"===t?"readonly":"readwrite",m=15===(I=this.Xs)?$p:14===I?xf:13===I?Xd:12===I?vm:11===I?Af:void wn();var I;let R;return this.ri.runTransaction(e,d,m,z=>(R=new Lh(z,this.Ss?this.Ss.next():oo.at),"readwrite-primary"===t?this.fi(R).next(X=>!!X||this.di(R)).next(X=>{if(!X)throw vi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Qt(Pt.FAILED_PRECONDITION,ql);return o(R)}).next(X=>this.wi(R).next(()=>X)):this.Vi(R).next(()=>o(R)))).then(z=>(R.raiseOnCommittedEvent(),z))}Vi(e){return Wh(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Qt(Pt.FAILED_PRECONDITION,Uf)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Wh(e).put("owner",t)}static C(){return so.C()}_i(e){const t=Wh(e);return t.get("owner").next(o=>this.mi(o)?(rn("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):Rt.resolve())}pi(e,t){const o=Date.now();return!(e<o-t||e>o&&(vi(`Detected an update time that is in the future: ${e} > ${o}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,Be.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const o=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return rn("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return vi("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){vi("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch(e){}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Wh(i){return Go(i,"owner")}function zh(i){return Go(i,"clientMetadata")}function Yh(i,e){let t=i.projectId;return i.isDefaultDatabase||(t+="."+i.database),"firestore/"+e+"/"+t+"/"}class jf{constructor(e,t,o,d){this.targetId=e,this.fromCache=t,this.Si=o,this.Di=d}static Ci(e,t){let o=jr(),d=jr();for(const m of t.docChanges)switch(m.type){case 0:o=o.add(m.doc.key);break;case 1:d=d.add(m.doc.key)}return new jf(e,t.fromCache,o,d)}}class cv{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,o,d){return this.ki(e,t).next(m=>m||this.Oi(e,t,d,o)).next(m=>m||this.Mi(e,t))}ki(e,t){if(xl(t))return Rt.resolve(null);let o=Mo(t);return this.indexManager.getIndexType(e,o).next(d=>0===d?null:(null!==t.limit&&1===d&&(t=dl(t,null,"F"),o=Mo(t)),this.indexManager.getDocumentsMatchingTarget(e,o).next(m=>{const I=jr(...m);return this.Ni.getDocuments(e,I).next(R=>this.indexManager.getMinOffset(e,o).next(z=>{const X=this.Fi(t,R);return this.$i(t,X,I,z.readTime)?this.ki(e,dl(t,null,"F")):this.Bi(e,X,t,z)}))})))}Oi(e,t,o,d){return xl(t)||d.isEqual(er.min())?this.Mi(e,t):this.Ni.getDocuments(e,o).next(m=>{const I=this.Fi(t,m);return this.$i(t,I,o,d)?this.Mi(e,t):(io()<=xt.in.DEBUG&&rn("QueryEngine","Re-using previous result from %s to execute query: %s",d.toString(),Zl(t)),this.Bi(e,I,t,fu(d,-1)))})}Fi(e,t){let o=new Xr(ed(e));return t.forEach((d,m)=>{Ws(e,m)&&(o=o.add(m))}),o}$i(e,t,o,d){if(null===e.limit)return!1;if(o.size!==t.size)return!0;const m="F"===e.limitType?t.last():t.first();return!!m&&(m.hasPendingWrites||m.version.compareTo(d)>0)}Mi(e,t){return io()<=xt.in.DEBUG&&rn("QueryEngine","Using full collection scan to execute query:",Zl(t)),this.Ni.getDocumentsMatchingQuery(e,t,To.min())}Bi(e,t,o,d){return this.Ni.getDocumentsMatchingQuery(e,o,d).next(m=>(t.forEach(I=>{m=m.insert(I.key,I)}),m))}}class Dm{constructor(e,t,o,d){this.persistence=e,this.Li=t,this.It=d,this.Ui=new Pi(ur),this.qi=new al(m=>Tl(m),ul),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(o)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new El(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ui))}}function Sm(i,e,t,o){return new Dm(i,e,t,o)}function Gp(i,e){return Wp.apply(this,arguments)}function Wp(){return Wp=(0,me.Z)(function*(i,e){const t=cn(i);return yield t.persistence.runTransaction("Handle user change","readonly",o=>{let d;return t.mutationQueue.getAllMutationBatches(o).next(m=>(d=m,t.Qi(e),t.mutationQueue.getAllMutationBatches(o))).next(m=>{const I=[],R=[];let z=jr();for(const X of d){I.push(X.batchId);for(const ge of X.mutations)z=z.add(ge.key)}for(const X of m){R.push(X.batchId);for(const ge of X.mutations)z=z.add(ge.key)}return t.localDocuments.getDocuments(o,z).next(X=>({ji:X,removedBatchIds:I,addedBatchIds:R}))})})}),Wp.apply(this,arguments)}function dv(i,e){const t=cn(i);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const d=e.batch.keys(),m=t.Gi.newChangeBuffer({trackRemovals:!0});return function(I,R,z,X){const ge=z.batch,ze=ge.keys();let Dt=Rt.resolve();return ze.forEach(zt=>{Dt=Dt.next(()=>X.getEntry(R,zt)).next(Jt=>{const Nn=z.docVersions.get(zt);En(null!==Nn),Jt.version.compareTo(Nn)<0&&(ge.applyToRemoteDocument(Jt,z),Jt.isValidDocument()&&(Jt.setReadTime(z.commitVersion),X.addEntry(Jt)))})}),Dt.next(()=>I.mutationQueue.removeMutationBatch(R,ge))}(t,o,e,m).next(()=>m.apply(o)).next(()=>t.mutationQueue.performConsistencyCheck(o)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(o,d,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(I){let R=jr();for(let z=0;z<I.mutationResults.length;++z)I.mutationResults[z].transformResults.length>0&&(R=R.add(I.batch.mutations[z].key));return R}(e))).next(()=>t.localDocuments.getDocuments(o,d))})}function $l(i){const e=cn(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function hv(i,e){const t=cn(i),o=e.snapshotVersion;let d=t.Ui;return t.persistence.runTransaction("Apply remote event","readwrite-primary",m=>{const I=t.Gi.newChangeBuffer({trackRemovals:!0});d=t.Ui;const R=[];e.targetChanges.forEach((ge,ze)=>{const Dt=d.get(ze);if(!Dt)return;R.push(t.Cs.removeMatchingKeys(m,ge.removedDocuments,ze).next(()=>t.Cs.addMatchingKeys(m,ge.addedDocuments,ze)));let zt=Dt.withSequenceNumber(m.currentSequenceNumber);var Jt,Nn,Gn;e.targetMismatches.has(ze)?zt=zt.withResumeToken(_s.EMPTY_BYTE_STRING,er.min()).withLastLimboFreeSnapshotVersion(er.min()):ge.resumeToken.approximateByteSize()>0&&(zt=zt.withResumeToken(ge.resumeToken,o)),d=d.insert(ze,zt),Nn=zt,Gn=ge,(0===(Jt=Dt).resumeToken.approximateByteSize()||Nn.snapshotVersion.toMicroseconds()-Jt.snapshotVersion.toMicroseconds()>=3e8||Gn.addedDocuments.size+Gn.modifiedDocuments.size+Gn.removedDocuments.size>0)&&R.push(t.Cs.updateTargetData(m,zt))});let z=ga(),X=jr();if(e.documentUpdates.forEach(ge=>{e.resolvedLimboDocuments.has(ge)&&R.push(t.persistence.referenceDelegate.updateLimboDocument(m,ge))}),R.push(zp(m,I,e.documentUpdates).next(ge=>{z=ge.Wi,X=ge.zi})),!o.isEqual(er.min())){const ge=t.Cs.getLastRemoteSnapshotVersion(m).next(ze=>t.Cs.setTargetsMetadata(m,m.currentSequenceNumber,o));R.push(ge)}return Rt.waitFor(R).next(()=>I.apply(m)).next(()=>t.localDocuments.getLocalViewOfDocuments(m,z,X)).next(()=>z)}).then(m=>(t.Ui=d,m))}function zp(i,e,t){let o=jr(),d=jr();return t.forEach(m=>o=o.add(m)),e.getEntries(i,o).next(m=>{let I=ga();return t.forEach((R,z)=>{const X=m.get(R);z.isFoundDocument()!==X.isFoundDocument()&&(d=d.add(R)),z.isNoDocument()&&z.version.isEqual(er.min())?(e.removeEntry(R,z.readTime),I=I.insert(R,z)):!X.isValidDocument()||z.version.compareTo(X.version)>0||0===z.version.compareTo(X.version)&&X.hasPendingWrites?(e.addEntry(z),I=I.insert(R,z)):rn("LocalStore","Ignoring outdated watch update for ",R,". Current version:",X.version," Watch version:",z.version)}),{Wi:I,zi:d}})}function fv(i,e){const t=cn(i);return t.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(o,e)))}function ih(i,e){const t=cn(i);return t.persistence.runTransaction("Allocate target","readwrite",o=>{let d;return t.Cs.getTargetData(o,e).next(m=>m?(d=m,Rt.resolve(d)):t.Cs.allocateTargetId(o).next(I=>(d=new Du(e,I,0,o.currentSequenceNumber),t.Cs.addTargetData(o,d).next(()=>d))))}).then(o=>{const d=t.Ui.get(o.targetId);return(null===d||o.snapshotVersion.compareTo(d.snapshotVersion)>0)&&(t.Ui=t.Ui.insert(o.targetId,o),t.qi.set(e,o.targetId)),o})}function sh(i,e,t){return Yp.apply(this,arguments)}function Yp(){return Yp=(0,me.Z)(function*(i,e,t){const o=cn(i),d=o.Ui.get(e),m=t?"readwrite":"readwrite-primary";try{t||(yield o.persistence.runTransaction("Release target",m,I=>o.persistence.referenceDelegate.removeTarget(I,d)))}catch(I){if(!na(I))throw I;rn("LocalStore",`Failed to update sequence numbers for target ${e}: ${I}`)}o.Ui=o.Ui.remove(e),o.qi.delete(d.target)}),Yp.apply(this,arguments)}function qh(i,e,t){const o=cn(i);let d=er.min(),m=jr();return o.persistence.runTransaction("Execute query","readonly",I=>function(R,z,X){const ge=cn(R),ze=ge.qi.get(X);return void 0!==ze?Rt.resolve(ge.Ui.get(ze)):ge.Cs.getTargetData(z,X)}(o,I,Mo(e)).next(R=>{if(R)return d=R.lastLimboFreeSnapshotVersion,o.Cs.getMatchingKeysForTargetId(I,R.targetId).next(z=>{m=z})}).next(()=>o.Li.getDocumentsMatchingQuery(I,e,t?d:er.min(),t?m:jr())).next(R=>(xm(o,il(e),R),{documents:R,Hi:m})))}function Tm(i,e){const t=cn(i),o=cn(t.Cs),d=t.Ui.get(e);return d?Promise.resolve(d.target):t.persistence.runTransaction("Get target data","readonly",m=>o.se(m,e).next(I=>I?I.target:null))}function Am(i,e){const t=cn(i),o=t.Ki.get(e)||er.min();return t.persistence.runTransaction("Get new document changes","readonly",d=>t.Gi.getAllFromCollectionGroup(d,e,fu(o,-1),Number.MAX_SAFE_INTEGER)).then(d=>(xm(t,e,d),d))}function xm(i,e,t){let o=i.Ki.get(e)||er.min();t.forEach((d,m)=>{m.readTime.compareTo(o)>0&&(o=m.readTime)}),i.Ki.set(e,o)}function Hf(){return Hf=(0,me.Z)(function*(i,e,t,o){const d=cn(i);let m=jr(),I=ga();for(const X of t){const ge=e.Ji(X.metadata.name);X.document&&(m=m.add(ge));const ze=e.Yi(X);ze.setReadTime(e.Xi(X.metadata.readTime)),I=I.insert(ge,ze)}const R=d.Gi.newChangeBuffer({trackRemovals:!0}),z=yield ih(d,(X=o,Mo(rl(Qr.fromString(`__bundle__/docs/${X}`)))));var X;return d.persistence.runTransaction("Apply bundle documents","readwrite",X=>zp(X,R,I).next(ge=>(R.apply(X),ge)).next(ge=>d.Cs.removeMatchingKeysForTargetId(X,z.targetId).next(()=>d.Cs.addMatchingKeys(X,m,z.targetId)).next(()=>d.localDocuments.getLocalViewOfDocuments(X,ge.Wi,ge.zi)).next(()=>ge.Wi)))}),Hf.apply(this,arguments)}function Mm(i,e){return Gf.apply(this,arguments)}function Gf(){return Gf=(0,me.Z)(function*(i,e,t=jr()){const o=yield ih(i,Mo(Jd(e.bundledQuery))),d=cn(i);return d.persistence.runTransaction("Save named query","readwrite",m=>{const I=eo(e.readTime);if(o.snapshotVersion.compareTo(I)>=0)return d.Ns.saveNamedQuery(m,e);const R=o.withResumeToken(_s.EMPTY_BYTE_STRING,I);return d.Ui=d.Ui.insert(R.targetId,R),d.Cs.updateTargetData(m,R).next(()=>d.Cs.removeMatchingKeysForTargetId(m,o.targetId)).next(()=>d.Cs.addMatchingKeys(m,t,o.targetId)).next(()=>d.Ns.saveNamedQuery(m,e))})}),Gf.apply(this,arguments)}function Rm(i,e){return`firestore_clients_${i}_${e}`}function Om(i,e,t){let o=`firestore_mutations_${i}_${t}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function Wf(i,e){return`firestore_targets_${i}_${e}`}class zf{constructor(e,t,o,d){this.user=e,this.batchId=t,this.state=o,this.error=d}static Zi(e,t,o){const d=JSON.parse(o);let m,I="object"==typeof d&&-1!==["pending","acknowledged","rejected"].indexOf(d.state)&&(void 0===d.error||"object"==typeof d.error);return I&&d.error&&(I="string"==typeof d.error.message&&"string"==typeof d.error.code,I&&(m=new Qt(d.error.code,d.error.message))),I?new zf(e,t,d.state,m):(vi("SharedClientState",`Failed to parse mutation state for ID '${t}': ${o}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class oh{constructor(e,t,o){this.targetId=e,this.state=t,this.error=o}static Zi(e,t){const o=JSON.parse(t);let d,m="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return m&&o.error&&(m="string"==typeof o.error.message&&"string"==typeof o.error.code,m&&(d=new Qt(o.error.code,o.error.message))),m?new oh(e,o.state,d):(vi("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Yf{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const o=JSON.parse(t);let d="object"==typeof o&&o.activeTargetIds instanceof Array,m=pl();for(let I=0;d&&I<o.activeTargetIds.length;++I)d=Fe(o.activeTargetIds[I]),m=m.add(o.activeTargetIds[I]);return d?new Yf(e,m):(vi("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class qp{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new qp(t.clientId,t.onlineState):(vi("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Nm{constructor(){this.activeTargetIds=pl()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class qf{constructor(e,t,o,d,m){this.window=e,this.Hs=t,this.persistenceKey=o,this.sr=d,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new Pi(ur),this.started=!1,this.cr=[];const I=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=m,this.ar=Rm(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new Nm),this.lr=new RegExp(`^firestore_clients_${I}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${I}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${I}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(R){return`firestore_bundle_loaded_v2_${R}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,me.Z)(function*(){const t=yield e.syncEngine.vi();for(const d of t){if(d===e.sr)continue;const m=e.getItem(Rm(e.persistenceKey,d));if(m){const I=Yf.Zi(d,m);I&&(e.ur=e.ur.insert(I.clientId,I))}}e.gr();const o=e.storage.getItem(e.wr);if(o){const d=e.yr(o);d&&e.pr(d)}for(const d of e.cr)e.rr(d);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((o,d)=>{d.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,o){this.Tr(e,t,o),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(Wf(this.persistenceKey,e));if(o){const d=oh.Zi(e,o);d&&(t=d.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Wf(this.persistenceKey,e))}updateQueryState(e,t,o){this.Rr(e,t,o)}handleUserChange(e,t,o){t.forEach(d=>{this.Er(d)}),this.currentUser=e,o.forEach(d=>{this.addPendingMutation(d)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return rn("SharedClientState","READ",e,t),t}setItem(e,t){rn("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){rn("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const o=e;if(o.storageArea===this.storage){if(rn("SharedClientState","EVENT",o.key,o.newValue),o.key===this.ar)return void vi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,me.Z)(function*(){if(t.started){if(null!==o.key)if(t.lr.test(o.key)){if(null==o.newValue){const d=t.vr(o.key);return t.Vr(d,null)}{const d=t.Sr(o.key,o.newValue);if(d)return t.Vr(d.clientId,d)}}else if(t.dr.test(o.key)){if(null!==o.newValue){const d=t.Dr(o.key,o.newValue);if(d)return t.Cr(d)}}else if(t._r.test(o.key)){if(null!==o.newValue){const d=t.Nr(o.key,o.newValue);if(d)return t.kr(d)}}else if(o.key===t.wr){if(null!==o.newValue){const d=t.yr(o.newValue);if(d)return t.pr(d)}}else if(o.key===t.hr){const d=function(m){let I=oo.at;if(null!=m)try{const R=JSON.parse(m);En("number"==typeof R),I=R}catch(R){vi("SharedClientState","Failed to read sequence number from WebStorage",R)}return I}(o.newValue);d!==oo.at&&t.sequenceNumberHandler(d)}else if(o.key===t.mr){const d=t.Or(o.newValue);yield Promise.all(d.map(m=>t.syncEngine.Mr(m)))}}else t.cr.push(o)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,o){const d=new zf(this.currentUser,e,t,o),m=Om(this.persistenceKey,this.currentUser,e);this.setItem(m,d.tr())}Er(e){const t=Om(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,o){const d=Wf(this.persistenceKey,e),m=new oh(e,t,o);this.setItem(d,m.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const o=this.vr(e);return Yf.Zi(o,t)}Dr(e,t){const o=this.dr.exec(e),d=Number(o[1]);return zf.Zi(new zr(void 0!==o[2]?o[2]:null),d,t)}Nr(e,t){const o=this._r.exec(e),d=Number(o[1]);return oh.Zi(d,t)}yr(e){return qp.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,me.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);rn("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const o=t?this.ur.insert(e,t):this.ur.remove(e),d=this.Ir(this.ur),m=this.Ir(o),I=[],R=[];return m.forEach(z=>{d.has(z)||I.push(z)}),d.forEach(z=>{m.has(z)||R.push(z)}),this.syncEngine.Br(I,R).then(()=>{this.ur=o})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=pl();return e.forEach((o,d)=>{t=t.unionWith(d.activeTargetIds)}),t}}class Kp{constructor(){this.Lr=new Nm,this.Ur={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,o){}addLocalQueryTarget(e){return this.Lr.er(e),this.Ur[e]||"not-current"}updateQueryState(e,t,o){this.Ur[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.Ur[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new Nm,Promise.resolve()}handleUserChange(e,t,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Ed{qr(e){}shutdown(){}}class Pm{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}qr(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){rn("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){rn("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const Zp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Qp{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class pv extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,o,d,m){const I=this.ho(e,t);rn("RestConnection","Sending: ",I,o);const R={};return this.lo(R,d,m),this.fo(e,I,R,o).then(z=>(rn("RestConnection","Received: ",z),z),z=>{throw js("RestConnection",`${e} failed with error: `,z,"url: ",I,"request:",o),z})}_o(e,t,o,d,m,I){return this.ao(e,t,o,d,m)}lo(e,t,o){e["X-Goog-Api-Client"]="gl-js/ fire/"+_a,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((d,m)=>e[m]=d),o&&o.headers.forEach((d,m)=>e[m]=d)}ho(e,t){return`${this.oo}/v1/${t}:${Zp[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,o,d){return new Promise((m,I)=>{const R=new du;R.setWithCredentials(!0),R.listenOnce(Ha.COMPLETE,()=>{var X;try{switch(R.getLastErrorCode()){case Xa.NO_ERROR:const ge=R.getResponseJson();rn("Connection","XHR received:",JSON.stringify(ge)),m(ge);break;case Xa.TIMEOUT:rn("Connection",'RPC "'+e+'" timed out'),I(new Qt(Pt.DEADLINE_EXCEEDED,"Request time out"));break;case Xa.HTTP_ERROR:const ze=R.getStatus();if(rn("Connection",'RPC "'+e+'" failed with status:',ze,"response text:",R.getResponseText()),ze>0){let Dt=R.getResponseJson();Array.isArray(Dt)&&(Dt=Dt[0]);const zt=null===(X=Dt)||void 0===X?void 0:X.error;if(zt&&zt.status&&zt.message){const Jt=function(Nn){const Gn=Nn.toLowerCase().replace(/_/g,"-");return Object.values(Pt).indexOf(Gn)>=0?Gn:Pt.UNKNOWN}(zt.status);I(new Qt(Jt,zt.message))}else I(new Qt(Pt.UNKNOWN,"Server responded with status "+R.getStatus()))}else I(new Qt(Pt.UNAVAILABLE,"Connection failed."));break;default:wn()}}finally{rn("Connection",'RPC "'+e+'" completed.')}});const z=JSON.stringify(d);R.send(t,"POST",z,o,15)})}wo(e,t,o){const d=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],m=bl(),I=Gl(),R={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(R.xmlHttpFactory=new Zo({})),this.lo(R.initMessageHeaders,t,o),R.encodeInitMessageHeaders=!0;const z=d.join("");rn("Connection","Creating WebChannel: "+z,R);const X=m.createWebChannel(z,R);let ge=!1,ze=!1;const Dt=new Qp({Hr:Jt=>{ze?rn("Connection","Not sending because WebChannel is closed:",Jt):(ge||(rn("Connection","Opening WebChannel transport."),X.open(),ge=!0),rn("Connection","WebChannel sending:",Jt),X.send(Jt))},Jr:()=>X.close()}),zt=(Jt,Nn,Gn)=>{Jt.listen(Nn,Si=>{try{Gn(Si)}catch(os){setTimeout(()=>{throw os},0)}})};return zt(X,po.EventType.OPEN,()=>{ze||rn("Connection","WebChannel transport opened.")}),zt(X,po.EventType.CLOSE,()=>{ze||(ze=!0,rn("Connection","WebChannel transport closed"),Dt.io())}),zt(X,po.EventType.ERROR,Jt=>{ze||(ze=!0,js("Connection","WebChannel transport errored:",Jt),Dt.io(new Qt(Pt.UNAVAILABLE,"The operation could not be completed")))}),zt(X,po.EventType.MESSAGE,Jt=>{var Nn;if(!ze){const Gn=Jt.data[0];En(!!Gn);const Si=Gn,os=Si.error||(null===(Nn=Si[0])||void 0===Nn?void 0:Nn.error);if(os){rn("Connection","WebChannel received error:",os);const Vi=os.status;let Eo=function(Ui){const Yo=Xs[Ui];if(void 0!==Yo)return cd(Yo)}(Vi),$i=os.message;void 0===Eo&&(Eo=Pt.INTERNAL,$i="Unknown error status: "+Vi+" with message "+os.message),ze=!0,Dt.io(new Qt(Eo,$i)),X.close()}else rn("Connection","WebChannel received:",Gn),Dt.ro(Gn)}}),zt(I,Ma.STAT_EVENT,Jt=>{Jt.stat===fo.PROXY?rn("Connection","Detected buffering proxy"):Jt.stat===fo.NOPROXY&&rn("Connection","Detected no buffering proxy")}),setTimeout(()=>{Dt.so()},0),Dt}}function gv(){return"undefined"!=typeof window?window:null}function Xp(){return"undefined"!=typeof document?document:null}function Kf(i){return new Qu(i,!0)}class Jp{constructor(e,t,o=1e3,d=1.5,m=6e4){this.Hs=e,this.timerId=t,this.mo=o,this.yo=d,this.po=m,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),o=Math.max(0,Date.now()-this.Eo),d=Math.max(0,t-o);d>0&&rn("ExponentialBackoff",`Backing off for ${d} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${o} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,d,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class eg{constructor(e,t,o,d,m,I,R,z){this.Hs=e,this.vo=o,this.Vo=d,this.connection=m,this.authCredentialsProvider=I,this.appCheckCredentialsProvider=R,this.listener=z,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new Jp(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,me.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,me.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}Uo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var o=this;return(0,me.Z)(function*(){o.Lo(),o.Uo(),o.xo.cancel(),o.So++,4!==e?o.xo.reset():t&&t.code===Pt.RESOURCE_EXHAUSTED?(vi(t.toString()),vi("Using maximum backoff delay to prevent overloading the backend."),o.xo.Ao()):t&&t.code===Pt.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.qo(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.Zr(t)})()}qo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,d])=>{this.So===t&&this.Go(o,d)},o=>{e(()=>{const d=new Qt(Pt.UNKNOWN,"Fetching auth token failed: "+o.message);return this.Qo(d)})})}Go(e,t){const o=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{o(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(d=>{o(()=>this.Qo(d))}),this.stream.onMessage(d=>{o(()=>this.onMessage(d))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,me.Z)(function*(){e.state=0,e.start()}))}Qo(e){return rn("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(rn("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class z_ extends eg{constructor(e,t,o,d,m,I){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,o,d,I),this.It=m}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function Yd(i,e){let t;if("targetChange"in e){const o="NO_CHANGE"===(z=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===z?1:"REMOVE"===z?2:"CURRENT"===z?3:"RESET"===z?4:wn(),d=e.targetChange.targetIds||[],m=function(z,X){return z.gt?(En(void 0===X||"string"==typeof X),_s.fromBase64String(X||"")):(En(void 0===X||X instanceof Uint8Array),_s.fromUint8Array(X||new Uint8Array))}(i,e.targetChange.resumeToken),I=e.targetChange.cause,R=I&&function(z){const X=void 0===z.code?Pt.UNKNOWN:cd(z.code);return new Qt(X,z.message||"")}(I);t=new jo(o,d,m,R||null)}else if("documentChange"in e){const o=e.documentChange,d=qi(i,o.document.name),m=eo(o.document.updateTime),I=new is({mapValue:{fields:o.document.fields}}),R=li.newFoundDocument(d,m,I);t=new Xl(o.targetIds||[],o.removedTargetIds||[],R.key,R)}else if("documentDelete"in e){const o=e.documentDelete,d=qi(i,o.document),m=o.readTime?eo(o.readTime):er.min(),I=li.newNoDocument(d,m);t=new Xl([],o.removedTargetIds||[],I.key,I)}else if("documentRemove"in e){const o=e.documentRemove,d=qi(i,o.document);t=new Xl([],o.removedTargetIds||[],d,null)}else{if(!("filter"in e))return wn();{const o=e.filter,m=new qu(o.count||0);t=new Cu(o.targetId,m)}}var z;return t}(this.It,e),o=function(d){if(!("targetChange"in d))return er.min();const m=d.targetChange;return m.targetIds&&m.targetIds.length?er.min():m.readTime?eo(m.readTime):er.min()}(e);return this.listener.Wo(t,o)}zo(e){const t={};t.database=vl(this.It),t.addTarget=function(d,m){let I;const R=m.target;return I=Vu(R)?{documents:Ho(d,R)}:{query:Mc(d,R)},I.targetId=m.targetId,m.resumeToken.approximateByteSize()>0?I.resumeToken=zs(d,m.resumeToken):m.snapshotVersion.compareTo(er.min())>0&&(I.readTime=yl(d,m.snapshotVersion.toTimestamp())),I}(this.It,e);const o=function p(i,e){const t=function(o,d){switch(d){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return wn()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);o&&(t.labels=o),this.Bo(t)}Ho(e){const t={};t.database=vl(this.It),t.removeTarget=e,this.Bo(t)}}class mv extends eg{constructor(e,t,o,d,m,I){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,o,d,I),this.It=m,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}qo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(En(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function qd(i,e){return i&&i.length>0?(En(void 0!==e),i.map(t=>function(o,d){let m=eo(o.updateTime?o.updateTime:d);return m.isEqual(er.min())&&(m=eo(d)),new Ic(m,o.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),o=eo(e.commitTime);return this.listener.Zo(o,t)}return En(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=vl(this.It),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(o=>_l(this.It,o))};this.Bo(t)}}class ah extends class{}{constructor(e,t,o,d){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=o,this.It=d,this.nu=!1}su(){if(this.nu)throw new Qt(Pt.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,o){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([d,m])=>this.connection.ao(e,t,o,d,m)).catch(d=>{throw"FirebaseError"===d.name?(d.code===Pt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),d):new Qt(Pt.UNKNOWN,d.toString())})}_o(e,t,o,d){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([m,I])=>this.connection._o(e,t,o,m,I,d)).catch(m=>{throw"FirebaseError"===m.name?(m.code===Pt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),m):new Qt(Pt.UNKNOWN,m.toString())})}terminate(){this.nu=!0}}class Qf{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(vi(t),this.ou=!1):rn("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class vv{constructor(e,t,o,d,m){var I=this;this.localStore=e,this.datastore=t,this.asyncQueue=o,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=m,this.mu.qr(R=>{o.enqueueAndForget((0,me.Z)(function*(){var z;ou(I)&&(rn("RemoteStore","Restarting streams for network reachability change."),yield(z=(0,me.Z)(function*(X){const ge=cn(X);ge._u.add(4),yield uh(ge),ge.gu.set("Unknown"),ge._u.delete(4),yield lh(ge)}),function(X){return z.apply(this,arguments)})(I))}))}),this.gu=new Qf(o,d)}}function lh(i){return tg.apply(this,arguments)}function tg(){return tg=(0,me.Z)(function*(i){if(ou(i))for(const e of i.wu)yield e(!0)}),tg.apply(this,arguments)}function uh(i){return ng.apply(this,arguments)}function ng(){return ng=(0,me.Z)(function*(i){for(const e of i.wu)yield e(!1)}),ng.apply(this,arguments)}function Xf(i,e){const t=cn(i);t.du.has(e.targetId)||(t.du.set(e.targetId,e),tp(t)?ep(t):hh(t).ko()&&Jf(t,e))}function Kh(i,e){const t=cn(i),o=hh(t);t.du.delete(e),o.ko()&&km(t,e),0===t.du.size&&(o.ko()?o.Fo():ou(t)&&t.gu.set("Unknown"))}function Jf(i,e){i.yu.Mt(e.targetId),hh(i).zo(e)}function km(i,e){i.yu.Mt(e),hh(i).Ho(e)}function ep(i){i.yu=new za({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),se:e=>i.du.get(e)||null}),hh(i).start(),i.gu.uu()}function tp(i){return ou(i)&&!hh(i).No()&&i.du.size>0}function ou(i){return 0===cn(i)._u.size}function _v(i){i.yu=void 0}function rg(i){return ig.apply(this,arguments)}function ig(){return ig=(0,me.Z)(function*(i){i.du.forEach((e,t)=>{Jf(i,e)})}),ig.apply(this,arguments)}function Y_(i,e){return $c.apply(this,arguments)}function $c(){return $c=(0,me.Z)(function*(i,e){_v(i),tp(i)?(i.gu.hu(e),ep(i)):i.gu.set("Unknown")}),$c.apply(this,arguments)}function Fm(i,e,t){return np.apply(this,arguments)}function np(){return np=(0,me.Z)(function*(i,e,t){if(i.gu.set("Online"),e instanceof jo&&2===e.state&&e.cause)try{yield(o=(0,me.Z)(function*(d,m){const I=m.cause;for(const R of m.targetIds)d.du.has(R)&&(yield d.remoteSyncer.rejectListen(R,I),d.du.delete(R),d.yu.removeTarget(R))}),function(d,m){return o.apply(this,arguments)})(i,e)}catch(o){rn("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield Id(i,o)}else if(e instanceof Xl?i.yu.Gt(e):e instanceof Cu?i.yu.Yt(e):i.yu.Wt(e),!t.isEqual(er.min()))try{const o=yield $l(i.localStore);t.compareTo(o)>=0&&(yield function(d,m){const I=d.yu.te(m);return I.targetChanges.forEach((R,z)=>{if(R.resumeToken.approximateByteSize()>0){const X=d.du.get(z);X&&d.du.set(z,X.withResumeToken(R.resumeToken,m))}}),I.targetMismatches.forEach(R=>{const z=d.du.get(R);if(!z)return;d.du.set(R,z.withResumeToken(_s.EMPTY_BYTE_STRING,z.snapshotVersion)),km(d,R);const X=new Du(z.target,R,1,z.sequenceNumber);Jf(d,X)}),d.remoteSyncer.applyRemoteEvent(I)}(i,t))}catch(o){rn("RemoteStore","Failed to raise snapshot:",o),yield Id(i,o)}var o}),np.apply(this,arguments)}function Id(i,e,t){return Il.apply(this,arguments)}function Il(){return Il=(0,me.Z)(function*(i,e,t){if(!na(e))throw e;i._u.add(1),yield uh(i),i.gu.set("Offline"),t||(t=()=>$l(i.localStore)),i.asyncQueue.enqueueRetryable((0,me.Z)(function*(){rn("RemoteStore","Retrying IndexedDB access"),yield t(),i._u.delete(1),yield lh(i)}))}),Il.apply(this,arguments)}function sg(i,e){return e().catch(t=>Id(i,t,e))}function ch(i){return Zh.apply(this,arguments)}function Zh(){return Zh=(0,me.Z)(function*(i){const e=cn(i),t=uc(e);let o=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;lc(e);)try{const d=yield fv(e.localStore,o);if(null===d){0===e.fu.length&&t.Fo();break}o=d.batchId,og(e,d)}catch(d){yield Id(e,d)}ag(e)&&rp(e)}),Zh.apply(this,arguments)}function lc(i){return ou(i)&&i.fu.length<10}function og(i,e){i.fu.push(e);const t=uc(i);t.ko()&&t.Yo&&t.Xo(e.mutations)}function ag(i){return ou(i)&&!uc(i).No()&&i.fu.length>0}function rp(i){uc(i).start()}function q_(i){return ip.apply(this,arguments)}function ip(){return ip=(0,me.Z)(function*(i){uc(i).eu()}),ip.apply(this,arguments)}function K_(i){return dh.apply(this,arguments)}function dh(){return dh=(0,me.Z)(function*(i){const e=uc(i);for(const t of i.fu)e.Xo(t.mutations)}),dh.apply(this,arguments)}function sp(i,e,t){return Qh.apply(this,arguments)}function Qh(){return Qh=(0,me.Z)(function*(i,e,t){const o=i.fu.shift(),d=Vh.from(o,e,t);yield sg(i,()=>i.remoteSyncer.applySuccessfulWrite(d)),yield ch(i)}),Qh.apply(this,arguments)}function lg(i,e){return Xh.apply(this,arguments)}function Xh(){return Xh=(0,me.Z)(function*(i,e){var t;e&&uc(i).Yo&&(yield(t=(0,me.Z)(function*(o,d){if(ol(m=d.code)&&m!==Pt.ABORTED){const I=o.fu.shift();uc(o).Mo(),yield sg(o,()=>o.remoteSyncer.rejectFailedWrite(I.batchId,d)),yield ch(o)}var m}),function(o,d){return t.apply(this,arguments)})(i,e)),ag(i)&&rp(i)}),Xh.apply(this,arguments)}function Ev(i,e){return ug.apply(this,arguments)}function ug(){return ug=(0,me.Z)(function*(i,e){const t=cn(i);t.asyncQueue.verifyOperationInProgress(),rn("RemoteStore","RemoteStore received new credentials");const o=ou(t);t._u.add(3),yield uh(t),o&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield lh(t)}),ug.apply(this,arguments)}function cg(i,e){return dg.apply(this,arguments)}function dg(){return dg=(0,me.Z)(function*(i,e){const t=cn(i);e?(t._u.delete(2),yield lh(t)):e||(t._u.add(2),yield uh(t),t.gu.set("Unknown"))}),dg.apply(this,arguments)}function hh(i){return i.pu||(i.pu=function(e,t,o){const d=cn(e);return d.su(),new z_(t,d.connection,d.authCredentials,d.appCheckCredentials,d.It,o)}(i.datastore,i.asyncQueue,{Yr:rg.bind(null,i),Zr:Y_.bind(null,i),Wo:Fm.bind(null,i)}),i.wu.push(function(){var e=(0,me.Z)(function*(t){t?(i.pu.Mo(),tp(i)?ep(i):i.gu.set("Unknown")):(yield i.pu.stop(),_v(i))});return function(t){return e.apply(this,arguments)}}())),i.pu}function uc(i){return i.Iu||(i.Iu=function(e,t,o){const d=cn(e);return d.su(),new mv(t,d.connection,d.authCredentials,d.appCheckCredentials,d.It,o)}(i.datastore,i.asyncQueue,{Yr:q_.bind(null,i),Zr:lg.bind(null,i),tu:K_.bind(null,i),Zo:sp.bind(null,i)}),i.wu.push(function(){var e=(0,me.Z)(function*(t){t?(i.Iu.Mo(),yield ch(i)):(yield i.Iu.stop(),i.fu.length>0&&(rn("RemoteStore",`Stopping write stream with ${i.fu.length} pending writes`),i.fu=[]))});return function(t){return e.apply(this,arguments)}}())),i.Iu}class Lm{constructor(e,t,o,d,m){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=o,this.op=d,this.removalCallback=m,this.deferred=new Ni,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(I=>{})}static createAndSchedule(e,t,o,d,m){const I=Date.now()+o,R=new Lm(e,t,I,d,m);return R.start(o),R}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Qt(Pt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function fh(i,e){if(vi("AsyncQueue",`${e}: ${i}`),na(i))return new Qt(Pt.UNAVAILABLE,`${e}: ${i}`);throw i}class Jh{constructor(e){this.comparator=e?(t,o)=>e(t,o)||dn.comparator(t.key,o.key):(t,o)=>dn.comparator(t.key,o.key),this.keyedMap=Pl(),this.sortedSet=new Pi(this.comparator)}static emptySet(e){return new Jh(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,o)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Jh)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;t.hasNext();){const d=t.getNext().key,m=o.getNext().key;if(!d.isEqual(m))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const o=new Jh;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=t,o}}class hg{constructor(){this.Tu=new Pi(dn.comparator)}track(e){const t=e.doc.key,o=this.Tu.get(t);o?0!==e.type&&3===o.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==o.type?this.Tu=this.Tu.insert(t,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.Tu=this.Tu.remove(t):1===e.type&&2===o.type?this.Tu=this.Tu.insert(t,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):wn():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,o)=>{e.push(o)}),e}}class wd{constructor(e,t,o,d,m,I,R,z,X){this.query=e,this.docs=t,this.oldDocs=o,this.docChanges=d,this.mutatedKeys=m,this.fromCache=I,this.syncStateChanged=R,this.excludesMetadataChanges=z,this.hasCachedResults=X}static fromInitialDocuments(e,t,o,d,m){const I=[];return t.forEach(R=>{I.push({type:0,doc:R})}),new wd(e,t,Jh.emptySet(t),I,o,d,!0,!1,m)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Eu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,o=e.docChanges;if(t.length!==o.length)return!1;for(let d=0;d<t.length;d++)if(t[d].type!==o[d].type||!t[d].doc.isEqual(o[d].doc))return!1;return!0}}class Iv{constructor(){this.Au=void 0,this.listeners=[]}}class fg{constructor(){this.queries=new al(e=>Jc(e),Eu),this.onlineState="Unknown",this.Ru=new Set}}function Vm(i,e){return Bm.apply(this,arguments)}function Bm(){return Bm=(0,me.Z)(function*(i,e){const t=cn(i),o=e.query;let d=!1,m=t.queries.get(o);if(m||(d=!0,m=new Iv),d)try{m.Au=yield t.onListen(o)}catch(I){const R=fh(I,`Initialization of query '${Zl(e.query)}' failed`);return void e.onError(R)}t.queries.set(o,m),m.listeners.push(e),e.bu(t.onlineState),m.Au&&e.Pu(m.Au)&&jm(t)}),Bm.apply(this,arguments)}function $m(i,e){return Um.apply(this,arguments)}function Um(){return Um=(0,me.Z)(function*(i,e){const t=cn(i),o=e.query;let d=!1;const m=t.queries.get(o);if(m){const I=m.listeners.indexOf(e);I>=0&&(m.listeners.splice(I,1),d=0===m.listeners.length)}if(d)return t.queries.delete(o),t.onUnlisten(o)}),Um.apply(this,arguments)}function Z_(i,e){const t=cn(i);let o=!1;for(const d of e){const I=t.queries.get(d.query);if(I){for(const R of I.listeners)R.Pu(d)&&(o=!0);I.Au=d}}o&&jm(t)}function Q_(i,e,t){const o=cn(i),d=o.queries.get(e);if(d)for(const m of d.listeners)m.onError(t);o.queries.delete(e)}function jm(i){i.Ru.forEach(e=>{e.next()})}class Hm{constructor(e,t,o){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=o||{}}Pu(e){if(!this.options.includeMetadataChanges){const o=[];for(const d of e.docChanges)3!==d.type&&o.push(d);e=new wd(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=wd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class X_{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class wv{constructor(e){this.It=e}Ji(e){return qi(this.It,e)}Yi(e){return e.metadata.exists?Ju(this.It,e.document,!1):li.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return eo(e)}}class Uc{constructor(e,t,o){this.Mu=e,this.localStore=t,this.It=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=op(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const o=Qr.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,o=new wv(this.It);for(const d of e)if(d.metadata.queries){const m=o.Ji(d.metadata.name);for(const I of d.metadata.queries){const R=(t.get(I)||jr()).add(m);t.set(I,R)}}return t}complete(){var e=this;return(0,me.Z)(function*(){const t=yield function Jr(i,e,t,o){return Hf.apply(this,arguments)}(e.localStore,new wv(e.It),e.documents,e.Mu.id),o=e.$u(e.documents);for(const d of e.queries)yield Mm(e.localStore,d,o.get(d.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function op(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class Gm{constructor(e){this.key=e}}class pg{constructor(e){this.key=e}}class ap{constructor(e,t){this.query=e,this.Uu=t,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=jr(),this.mutatedKeys=jr(),this.Gu=ed(e),this.Qu=new Jh(this.Gu)}get ju(){return this.Uu}Wu(e,t){const o=t?t.zu:new hg,d=t?t.Qu:this.Qu;let m=t?t.mutatedKeys:this.mutatedKeys,I=d,R=!1;const z="F"===this.query.limitType&&d.size===this.query.limit?d.last():null,X="L"===this.query.limitType&&d.size===this.query.limit?d.first():null;if(e.inorderTraversal((ge,ze)=>{const Dt=d.get(ge),zt=Ws(this.query,ze)?ze:null,Jt=!!Dt&&this.mutatedKeys.has(Dt.key),Nn=!!zt&&(zt.hasLocalMutations||this.mutatedKeys.has(zt.key)&&zt.hasCommittedMutations);let Gn=!1;Dt&&zt?Dt.data.isEqual(zt.data)?Jt!==Nn&&(o.track({type:3,doc:zt}),Gn=!0):this.Hu(Dt,zt)||(o.track({type:2,doc:zt}),Gn=!0,(z&&this.Gu(zt,z)>0||X&&this.Gu(zt,X)<0)&&(R=!0)):!Dt&&zt?(o.track({type:0,doc:zt}),Gn=!0):Dt&&!zt&&(o.track({type:1,doc:Dt}),Gn=!0,(z||X)&&(R=!0)),Gn&&(zt?(I=I.add(zt),m=Nn?m.add(ge):m.delete(ge)):(I=I.delete(ge),m=m.delete(ge)))}),null!==this.query.limit)for(;I.size>this.query.limit;){const ge="F"===this.query.limitType?I.last():I.first();I=I.delete(ge.key),m=m.delete(ge.key),o.track({type:1,doc:ge})}return{Qu:I,zu:o,$i:R,mutatedKeys:m}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,o){const d=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const m=e.zu.Eu();m.sort((X,ge)=>function(ze,Dt){const zt=Jt=>{switch(Jt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return wn()}};return zt(ze)-zt(Dt)}(X.type,ge.type)||this.Gu(X.doc,ge.doc)),this.Ju(o);const I=t?this.Yu():[],R=0===this.Ku.size&&this.current?1:0,z=R!==this.qu;return this.qu=R,0!==m.length||z?{snapshot:new wd(this.query,e.Qu,d,m,e.mutatedKeys,0===R,z,!1,!!o&&o.resumeToken.approximateByteSize()>0),Xu:I}:{Xu:I}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new hg,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.Uu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.Uu=this.Uu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Uu=this.Uu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=jr(),this.Qu.forEach(o=>{this.Zu(o.key)&&(this.Ku=this.Ku.add(o.key))});const t=[];return e.forEach(o=>{this.Ku.has(o)||t.push(new pg(o))}),this.Ku.forEach(o=>{e.has(o)||t.push(new Gm(o))}),t}tc(e){this.Uu=e.Hi,this.Ku=jr();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return wd.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}class Wm{constructor(e,t,o){this.query=e,this.targetId=t,this.view=o}}class gg{constructor(e){this.key=e,this.nc=!1}}class bv{constructor(e,t,o,d,m,I){this.localStore=e,this.remoteStore=t,this.eventManager=o,this.sharedClientState=d,this.currentUser=m,this.maxConcurrentLimboResolutions=I,this.sc={},this.ic=new al(R=>Jc(R),Eu),this.rc=new Map,this.oc=new Set,this.uc=new Pi(dn.comparator),this.cc=new Map,this.ac=new nh,this.hc={},this.lc=new Map,this.fc=su.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function jc(i,e){return lp.apply(this,arguments)}function lp(){return lp=(0,me.Z)(function*(i,e){const t=Rg(i);let o,d;const m=t.ic.get(e);if(m)o=m.targetId,t.sharedClientState.addLocalQueryTarget(o),d=m.view.ec();else{const I=yield ih(t.localStore,Mo(e));t.isPrimaryClient&&Xf(t.remoteStore,I);const R=t.sharedClientState.addLocalQueryTarget(I.targetId);o=I.targetId,d=yield mg(t,e,o,"current"===R,I.resumeToken)}return d}),lp.apply(this,arguments)}function mg(i,e,t,o,d){return yg.apply(this,arguments)}function yg(){return yg=(0,me.Z)(function*(i,e,t,o,d){i._c=(ze,Dt,zt)=>{return(Jt=(0,me.Z)(function*(Nn,Gn,Si,os){let Vi=Gn.view.Wu(Si);Vi.$i&&(Vi=yield qh(Nn.localStore,Gn.query,!1).then(({documents:Ui})=>Gn.view.Wu(Ui,Vi)));const Eo=os&&os.targetChanges.get(Gn.targetId),$i=Gn.view.applyChanges(Vi,Nn.isPrimaryClient,Eo);return bg(Nn,Gn.targetId,$i.Xu),$i.snapshot}),function(Nn,Gn,Si,os){return Jt.apply(this,arguments)})(i,ze,Dt,zt);var Jt};const m=yield qh(i.localStore,e,!0),I=new ap(e,m.Hi),R=I.Wu(m.documents),z=Zu.createSynthesizedTargetChangeForCurrentChange(t,o&&"Offline"!==i.onlineState,d),X=I.applyChanges(R,i.isPrimaryClient,z);bg(i,t,X.Xu);const ge=new Wm(e,t,I);return i.ic.set(e,ge),i.rc.has(t)?i.rc.get(t).push(e):i.rc.set(t,[e]),X.snapshot}),yg.apply(this,arguments)}function zm(i,e){return vg.apply(this,arguments)}function vg(){return vg=(0,me.Z)(function*(i,e){const t=cn(i),o=t.ic.get(e),d=t.rc.get(o.targetId);if(d.length>1)return t.rc.set(o.targetId,d.filter(m=>!Eu(m,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(o.targetId),t.sharedClientState.isActiveQueryTarget(o.targetId)||(yield sh(t.localStore,o.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(o.targetId),Kh(t.remoteStore,o.targetId),mh(t,o.targetId)}).catch(Ao))):(mh(t,o.targetId),yield sh(t.localStore,o.targetId,!0))}),vg.apply(this,arguments)}function ph(){return ph=(0,me.Z)(function*(i,e,t){const o=Og(i);try{const d=yield function(m,I){const R=cn(m),z=Mi.now(),X=I.reduce((Dt,zt)=>Dt.add(zt.key),jr());let ge,ze;return R.persistence.runTransaction("Locally write mutations","readwrite",Dt=>{let zt=ga(),Jt=jr();return R.Gi.getEntries(Dt,X).next(Nn=>{zt=Nn,zt.forEach((Gn,Si)=>{Si.isValidDocument()||(Jt=Jt.add(Gn))})}).next(()=>R.localDocuments.getOverlayedDocuments(Dt,zt)).next(Nn=>{ge=Nn;const Gn=[];for(const Si of I){const os=ld(Si,ge.get(Si.key).overlayedDocument);null!=os&&Gn.push(new sl(Si.key,os,fa(os.value.mapValue),ss.exists(!0)))}return R.mutationQueue.addMutationBatch(Dt,z,Gn,I)}).next(Nn=>{ze=Nn;const Gn=Nn.applyToLocalDocumentSet(ge,Jt);return R.documentOverlayCache.saveOverlays(Dt,Nn.batchId,Gn)})}).then(()=>({batchId:ze.batchId,changes:Wd(ge)}))}(o.localStore,e);o.sharedClientState.addPendingMutation(d.batchId),function(m,I,R){let z=m.hc[m.currentUser.toKey()];z||(z=new Pi(ur)),z=z.insert(I,R),m.hc[m.currentUser.toKey()]=z}(o,d.batchId,t),yield cc(o,d.changes),yield ch(o.remoteStore)}catch(d){const m=fh(d,"Failed to persist write");t.reject(m)}}),ph.apply(this,arguments)}function bd(i,e){return ef.apply(this,arguments)}function ef(){return ef=(0,me.Z)(function*(i,e){const t=cn(i);try{const o=yield hv(t.localStore,e);e.targetChanges.forEach((d,m)=>{const I=t.cc.get(m);I&&(En(d.addedDocuments.size+d.modifiedDocuments.size+d.removedDocuments.size<=1),d.addedDocuments.size>0?I.nc=!0:d.modifiedDocuments.size>0?En(I.nc):d.removedDocuments.size>0&&(En(I.nc),I.nc=!1))}),yield cc(t,o,e)}catch(o){yield Ao(o)}}),ef.apply(this,arguments)}function Cd(i,e,t){const o=cn(i);if(o.isPrimaryClient&&0===t||!o.isPrimaryClient&&1===t){const d=[];o.ic.forEach((m,I)=>{const R=I.view.bu(e);R.snapshot&&d.push(R.snapshot)}),function(m,I){const R=cn(m);R.onlineState=I;let z=!1;R.queries.forEach((X,ge)=>{for(const ze of ge.listeners)ze.bu(I)&&(z=!0)}),z&&jm(R)}(o.eventManager,e),d.length&&o.sc.Wo(d),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function _g(i,e,t){return gh.apply(this,arguments)}function gh(){return gh=(0,me.Z)(function*(i,e,t){const o=cn(i);o.sharedClientState.updateQueryState(e,"rejected",t);const d=o.cc.get(e),m=d&&d.key;if(m){let I=new Pi(dn.comparator);I=I.insert(m,li.newNoDocument(m,er.min()));const R=jr().add(m),z=new kl(er.min(),new Map,new Xr(ur),I,R);yield bd(o,z),o.uc=o.uc.remove(m),o.cc.delete(e),cp(o)}else yield sh(o.localStore,e,!1).then(()=>mh(o,e,t)).catch(Ao)}),gh.apply(this,arguments)}function Ym(i,e){return up.apply(this,arguments)}function up(){return up=(0,me.Z)(function*(i,e){const t=cn(i),o=e.batch.batchId;try{const d=yield dv(t.localStore,e);Km(t,o,null),Ig(t,o),t.sharedClientState.updateMutationState(o,"acknowledged"),yield cc(t,d)}catch(d){yield Ao(d)}}),up.apply(this,arguments)}function Eg(i,e,t){return tf.apply(this,arguments)}function tf(){return tf=(0,me.Z)(function*(i,e,t){const o=cn(i);try{const d=yield function(m,I){const R=cn(m);return R.persistence.runTransaction("Reject batch","readwrite-primary",z=>{let X;return R.mutationQueue.lookupMutationBatch(z,I).next(ge=>(En(null!==ge),X=ge.keys(),R.mutationQueue.removeMutationBatch(z,ge))).next(()=>R.mutationQueue.performConsistencyCheck(z)).next(()=>R.documentOverlayCache.removeOverlaysForBatchId(z,X,I)).next(()=>R.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(z,X)).next(()=>R.localDocuments.getDocuments(z,X))})}(o.localStore,e);Km(o,e,t),Ig(o,e),o.sharedClientState.updateMutationState(e,"rejected",t),yield cc(o,d)}catch(d){yield Ao(d)}}),tf.apply(this,arguments)}function nf(){return nf=(0,me.Z)(function*(i,e){const t=cn(i);ou(t.remoteStore)||rn("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(m){const I=cn(m);return I.persistence.runTransaction("Get highest unacknowledged batch id","readonly",R=>I.mutationQueue.getHighestUnacknowledgedBatchId(R))}(t.localStore);if(-1===o)return void e.resolve();const d=t.lc.get(o)||[];d.push(e),t.lc.set(o,d)}catch(o){const d=fh(o,"Initialization of waitForPendingWrites() operation failed");e.reject(d)}}),nf.apply(this,arguments)}function Ig(i,e){(i.lc.get(e)||[]).forEach(t=>{t.resolve()}),i.lc.delete(e)}function Km(i,e,t){const o=cn(i);let d=o.hc[o.currentUser.toKey()];if(d){const m=d.get(e);m&&(t?m.reject(t):m.resolve(),d=d.remove(e)),o.hc[o.currentUser.toKey()]=d}}function mh(i,e,t=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.rc.get(e))i.ic.delete(o),t&&i.sc.wc(o,t);i.rc.delete(e),i.isPrimaryClient&&i.ac.ls(e).forEach(o=>{i.ac.containsKey(o)||wg(i,o)})}function wg(i,e){i.oc.delete(e.path.canonicalString());const t=i.uc.get(e);null!==t&&(Kh(i.remoteStore,t),i.uc=i.uc.remove(e),i.cc.delete(t),cp(i))}function bg(i,e,t){for(const o of t)o instanceof Gm?(i.ac.addReference(o.key,e),Zm(i,o)):o instanceof pg?(rn("SyncEngine","Document no longer in limbo: "+o.key),i.ac.removeReference(o.key,e),i.ac.containsKey(o.key)||wg(i,o.key)):wn()}function Zm(i,e){const t=e.key,o=t.path.canonicalString();i.uc.get(t)||i.oc.has(o)||(rn("SyncEngine","New document in limbo: "+t),i.oc.add(o),cp(i))}function cp(i){for(;i.oc.size>0&&i.uc.size<i.maxConcurrentLimboResolutions;){const e=i.oc.values().next().value;i.oc.delete(e);const t=new dn(Qr.fromString(e)),o=i.fc.next();i.cc.set(o,new gg(t)),i.uc=i.uc.insert(t,o),Xf(i.remoteStore,new Du(Mo(rl(t.path)),o,2,oo.at))}}function cc(i,e,t){return Za.apply(this,arguments)}function Za(){return Za=(0,me.Z)(function*(i,e,t){const o=cn(i),d=[],m=[],I=[];var R;o.ic.isEmpty()||(o.ic.forEach((R,z)=>{I.push(o._c(z,e,t).then(X=>{if((X||t)&&o.isPrimaryClient&&o.sharedClientState.updateQueryState(z.targetId,null!=X&&X.fromCache?"not-current":"current"),X){d.push(X);const ge=jf.Ci(z.targetId,X);m.push(ge)}}))}),yield Promise.all(I),o.sc.Wo(d),yield(R=(0,me.Z)(function*(z,X){const ge=cn(z);try{yield ge.persistence.runTransaction("notifyLocalViewChanges","readwrite",ze=>Rt.forEach(X,Dt=>Rt.forEach(Dt.Si,zt=>ge.persistence.referenceDelegate.addReference(ze,Dt.targetId,zt)).next(()=>Rt.forEach(Dt.Di,zt=>ge.persistence.referenceDelegate.removeReference(ze,Dt.targetId,zt)))))}catch(ze){if(!na(ze))throw ze;rn("LocalStore","Failed to update sequence numbers: "+ze)}for(const ze of X){const Dt=ze.targetId;if(!ze.fromCache){const zt=ge.Ui.get(Dt),Nn=zt.withLastLimboFreeSnapshotVersion(zt.snapshotVersion);ge.Ui=ge.Ui.insert(Dt,Nn)}}}),function(z,X){return R.apply(this,arguments)})(o.localStore,m))}),Za.apply(this,arguments)}function Qm(i,e){return Cg.apply(this,arguments)}function Cg(){return Cg=(0,me.Z)(function*(i,e){const t=cn(i);if(!t.currentUser.isEqual(e)){rn("SyncEngine","User change. New user:",e.toKey());const o=yield Gp(t.localStore,e);t.currentUser=e,(d=t).lc.forEach(I=>{I.forEach(R=>{R.reject(new Qt(Pt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),d.lc.clear(),t.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield cc(t,o.ji)}var d}),Cg.apply(this,arguments)}function J_(i,e){const t=cn(i),o=t.cc.get(e);if(o&&o.nc)return jr().add(o.key);{let d=jr();const m=t.rc.get(e);if(!m)return d;for(const I of m){const R=t.ic.get(I);d=d.unionWith(R.view.ju)}return d}}function Dv(i,e){return rf.apply(this,arguments)}function rf(){return rf=(0,me.Z)(function*(i,e){const t=cn(i),o=yield qh(t.localStore,e.query,!0),d=e.view.tc(o);return t.isPrimaryClient&&bg(t,e.targetId,d.Xu),d}),rf.apply(this,arguments)}function Xm(i,e){return Dg.apply(this,arguments)}function Dg(){return Dg=(0,me.Z)(function*(i,e){const t=cn(i);return Am(t.localStore,e).then(o=>cc(t,o))}),Dg.apply(this,arguments)}function Sv(i,e,t,o){return Sg.apply(this,arguments)}function Sg(){return Sg=(0,me.Z)(function*(i,e,t,o){const d=cn(i),m=yield function(I,R){const z=cn(I),X=cn(z.mutationQueue);return z.persistence.runTransaction("Lookup mutation documents","readonly",ge=>X.Tn(ge,R).next(ze=>ze?z.localDocuments.getDocuments(ge,ze):Rt.resolve(null)))}(d.localStore,e);var R;null!==m?("pending"===t?yield ch(d.remoteStore):"acknowledged"===t||"rejected"===t?(Km(d,e,o||null),Ig(d,e),R=e,cn(cn(d.localStore).mutationQueue).An(R)):wn(),yield cc(d,m)):rn("SyncEngine","Cannot apply mutation batch with id: "+e)}),Sg.apply(this,arguments)}function Tg(){return Tg=(0,me.Z)(function*(i,e){const t=cn(i);if(Rg(t),Og(t),!0===e&&!0!==t.dc){const o=t.sharedClientState.getAllActiveQueryTargets(),d=yield Ag(t,o.toArray());t.dc=!0,yield cg(t.remoteStore,!0);for(const m of d)Xf(t.remoteStore,m)}else if(!1===e&&!1!==t.dc){const o=[];let d=Promise.resolve();t.rc.forEach((m,I)=>{t.sharedClientState.isLocalQueryTarget(I)?o.push(I):d=d.then(()=>(mh(t,I),sh(t.localStore,I,!0))),Kh(t.remoteStore,I)}),yield d,yield Ag(t,o),function(m){const I=cn(m);I.cc.forEach((R,z)=>{Kh(I.remoteStore,z)}),I.ac.fs(),I.cc=new Map,I.uc=new Pi(dn.comparator)}(t),t.dc=!1,yield cg(t.remoteStore,!1)}}),Tg.apply(this,arguments)}function Ag(i,e,t){return xg.apply(this,arguments)}function xg(){return xg=(0,me.Z)(function*(i,e,t){const o=cn(i),d=[],m=[];for(const I of e){let R;const z=o.rc.get(I);if(z&&0!==z.length){R=yield ih(o.localStore,Mo(z[0]));for(const X of z){const ge=o.ic.get(X),ze=yield Dv(o,ge);ze.snapshot&&m.push(ze.snapshot)}}else{const X=yield Tm(o.localStore,I);R=yield ih(o.localStore,X),yield mg(o,ey(X),I,!1,R.resumeToken)}d.push(R)}return o.sc.Wo(m),d}),xg.apply(this,arguments)}function ey(i){return jd(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function ty(i){const e=cn(i);return cn(cn(e.localStore).persistence).vi()}function ny(i,e,t,o){return Mg.apply(this,arguments)}function Mg(){return Mg=(0,me.Z)(function*(i,e,t,o){const d=cn(i);if(d.dc)return void rn("SyncEngine","Ignoring unexpected query state notification.");const m=d.rc.get(e);if(m&&m.length>0)switch(t){case"current":case"not-current":{const I=yield Am(d.localStore,il(m[0])),R=kl.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,_s.EMPTY_BYTE_STRING);yield cc(d,I,R);break}case"rejected":yield sh(d.localStore,e,!0),mh(d,e,o);break;default:wn()}}),Mg.apply(this,arguments)}function xu(i,e,t){return sf.apply(this,arguments)}function sf(){return sf=(0,me.Z)(function*(i,e,t){const o=Rg(i);if(o.dc){for(const d of e){if(o.rc.has(d)){rn("SyncEngine","Adding an already active target "+d);continue}const m=yield Tm(o.localStore,d),I=yield ih(o.localStore,m);yield mg(o,ey(m),I.targetId,!1,I.resumeToken),Xf(o.remoteStore,I)}for(const d of t)o.rc.has(d)&&(yield sh(o.localStore,d,!1).then(()=>{Kh(o.remoteStore,d),mh(o,d)}).catch(Ao))}}),sf.apply(this,arguments)}function Rg(i){const e=cn(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=bd.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=J_.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=_g.bind(null,e),e.sc.Wo=Z_.bind(null,e.eventManager),e.sc.wc=Q_.bind(null,e.eventManager),e}function Og(i){const e=cn(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Ym.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Eg.bind(null,e),e}class Ng{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,me.Z)(function*(){t.It=Kf(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return Sm(this.persistence,new cv,e.initialUser,this.It)}yc(e){return new $f(rh.Bs,this.It)}gc(e){return new Kp}terminate(){var e=this;return(0,me.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class ry extends Ng{constructor(e,t,o){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,o=this;return(0,me.Z)(function*(){yield t().call(o,e),yield o.Ac.initialize(o,e),yield Og(o.Ac.syncEngine),yield ch(o.Ac.remoteStore),yield o.persistence.li(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(),o.indexBackfillerScheduler&&!o.indexBackfillerScheduler.started&&o.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return Sm(this.persistence,new cv,e.initialUser,this.It)}Tc(e,t){return new y(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const o=new Dl(t,this.persistence);return new ka(e.asyncQueue,o)}yc(e){const t=Yh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?sa.withCacheSize(this.cacheSizeBytes):sa.DEFAULT;return new Hp(this.synchronizeTabs,t,e.clientId,o,e.asyncQueue,gv(),Xp(),this.It,this.sharedClientState,!!this.forceOwnership)}gc(e){return new Kp}}class Tv extends ry{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,o=this;return(0,me.Z)(function*(){yield t().call(o,e);const d=o.Ac.syncEngine;o.sharedClientState instanceof qf&&(o.sharedClientState.syncEngine={Fr:Sv.bind(null,d),$r:ny.bind(null,d),Br:xu.bind(null,d),vi:ty.bind(null,d),Mr:Xm.bind(null,d)},yield o.sharedClientState.start()),yield o.persistence.li(function(){var m=(0,me.Z)(function*(I){yield function Jm(i,e){return Tg.apply(this,arguments)}(o.Ac.syncEngine,I),o.gcScheduler&&(I&&!o.gcScheduler.started?o.gcScheduler.start():I||o.gcScheduler.stop()),o.indexBackfillerScheduler&&(I&&!o.indexBackfillerScheduler.started?o.indexBackfillerScheduler.start():I||o.indexBackfillerScheduler.stop())});return function(I){return m.apply(this,arguments)}}())})()}gc(e){const t=gv();if(!qf.C(t))throw new Qt(Pt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=Yh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new qf(t,e.asyncQueue,o,e.clientId,e.initialUser)}}class Pg{initialize(e,t){var o=this;return(0,me.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(t),o.remoteStore=o.createRemoteStore(t),o.eventManager=o.createEventManager(t),o.syncEngine=o.createSyncEngine(t,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=d=>Cd(o.syncEngine,d,1),o.remoteStore.remoteSyncer.handleCredentialChange=Qm.bind(null,o.syncEngine),yield cg(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new fg}createDatastore(e){const t=Kf(e.databaseInfo.databaseId),o=new pv(e.databaseInfo);return new ah(e.authCredentials,e.appCheckCredentials,o,t)}createRemoteStore(e){return t=this.localStore,o=this.datastore,d=e.asyncQueue,m=R=>Cd(this.syncEngine,R,0),I=Pm.C()?new Pm:new Ed,new vv(t,o,d,m,I);var t,o,d,m,I}createSyncEngine(e,t){return function(o,d,m,I,R,z,X){const ge=new bv(o,d,m,I,R,z);return X&&(ge.dc=!0),ge}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,me.Z)(function*(t){const o=cn(t);rn("RemoteStore","RemoteStore shutting down."),o._u.add(5),yield uh(o),o.mu.shutdown(),o.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function af(i,e,t){if(!t)throw new Qt(Pt.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function iy(i,e,t,o){if(!0===e&&!0===o)throw new Qt(Pt.INVALID_ARGUMENT,`${i} and ${t} cannot be used together.`)}function sy(i){if(!dn.isDocumentKey(i))throw new Qt(Pt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function lf(i){if(dn.isDocumentKey(i))throw new Qt(Pt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function yh(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(t=i).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof i?"a function":wn()}function gi(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Qt(Pt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=yh(i);throw new Qt(Pt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return i}function Av(i,e){if(e<=0)throw new Qt(Pt.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}const dp=new Map;class xv{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Qt(Pt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Qt(Pt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,iy("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class vh{constructor(e,t,o,d){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=o,this._app=d,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xv({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Qt(Pt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Qt(Pt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xv(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new Ea;switch(t.type){case"gapi":return new zl(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Qt(Pt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=dp.get(e);t&&(rn("ComponentProvider","Removing Datastore"),dp.delete(e),t.terminate())}(this),Promise.resolve()}}class Ls{constructor(e,t,o){this.converter=t,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ul(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ls(this.firestore,e,this._key)}}class Aa{constructor(e,t,o){this.converter=t,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new Aa(this.firestore,e,this._query)}}class Ul extends Aa{constructor(e,t,o){super(e,t,rl(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ls(this.firestore,null,new dn(e))}withConverter(e){return new Ul(this.firestore,e,this._path)}}function Mu(i,e,...t){if(i=(0,Be.m9)(i),af("collection","path",e),i instanceof vh){const o=Qr.fromString(e,...t);return lf(o),new Ul(i,null,o)}{if(!(i instanceof Ls||i instanceof Ul))throw new Qt(Pt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Qr.fromString(e,...t));return lf(o),new Ul(i.firestore,null,o)}}function Dd(i,e,...t){if(i=(0,Be.m9)(i),1===arguments.length&&(e=da.R()),af("doc","path",e),i instanceof vh){const o=Qr.fromString(e,...t);return sy(o),new Ls(i,null,new dn(o))}{if(!(i instanceof Ls||i instanceof Ul))throw new Qt(Pt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Qr.fromString(e,...t));return sy(o),new Ls(i.firestore,i instanceof Ul?i.converter:null,new dn(o))}}function _h(i,e){return i=(0,Be.m9)(i),e=(0,Be.m9)(e),(i instanceof Ls||i instanceof Ul)&&(e instanceof Ls||e instanceof Ul)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function Fg(i,e){return i=(0,Be.m9)(i),e=(0,Be.m9)(e),i instanceof Aa&&e instanceof Aa&&i.firestore===e.firestore&&Eu(i._query,e._query)&&i.converter===e.converter}function fp(i,e=10240){let t=0;return{read:()=>(0,me.Z)(function*(){if(t<i.byteLength){const o={value:i.slice(t,t+e),done:!1};return t+=e,o}return{done:!0}})(),cancel:()=>(0,me.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class uf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):vi("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class Mv{constructor(e,t){this.Pc=e,this.It=t,this.metadata=new Ni,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(o=>{o&&o.Ou()?this.metadata.resolve(o.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==o?void 0:o.ku)}`))},o=>this.metadata.reject(o))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,me.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,me.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,me.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const o=e.vc.decode(t),d=Number(o);isNaN(d)&&e.Dc(`length string (${o}) is not valid number`);const m=yield e.Cc(d);return new X_(JSON.parse(m),t.length+d)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,me.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),o})()}Cc(e){var t=this;return(0,me.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const o=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),o})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,me.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const o=new Uint8Array(e.buffer.length+t.value.length);o.set(e.buffer),o.set(t.value,e.buffer.length),e.buffer=o}return t.done})()}}class n0{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,me.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Qt(Pt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(d=(0,me.Z)(function*(m,I){const R=cn(m),z=vl(R.It)+"/documents",X={documents:I.map(zt=>eu(R.It,zt))},ge=yield R._o("BatchGetDocuments",z,X,I.length),ze=new Map;ge.forEach(zt=>{const Jt=function xc(i,e){return"found"in e?function(t,o){En(!!o.found);const d=qi(t,o.found.name),m=eo(o.found.updateTime),I=new is({mapValue:{fields:o.found.fields}});return li.newFoundDocument(d,m,I)}(i,e):"missing"in e?function(t,o){En(!!o.missing),En(!!o.readTime);const d=qi(t,o.missing),m=eo(o.readTime);return li.newNoDocument(d,m)}(i,e):wn()}(R.It,zt);ze.set(Jt.key.toString(),Jt)});const Dt=[];return I.forEach(zt=>{const Jt=ze.get(zt.toString());En(!!Jt),Dt.push(Jt)}),Dt}),function(m,I){return d.apply(this,arguments)})(t.datastore,e);var d;return o.forEach(d=>t.recordVersion(d)),o})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new bu(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,me.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var o;e.mutations.forEach(o=>{t.delete(o.key.toString())}),t.forEach((o,d)=>{const m=dn.fromPath(d);e.mutations.push(new Ss(m,e.precondition(m)))}),yield(o=(0,me.Z)(function*(d,m){const I=cn(d),R=vl(I.It)+"/documents",z={writes:m.map(X=>_l(I.It,X))};yield I.ao("Commit",R,z)}),function(d,m){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw wn();t=er.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!t.isEqual(o))throw new Qt(Pt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(er.min())?ss.exists(!1):ss.updateTime(t):ss.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(er.min()))throw new Qt(Pt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ss.updateTime(t)}return ss.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Ov{constructor(e,t,o,d,m){this.asyncQueue=e,this.datastore=t,this.options=o,this.updateFunction=d,this.deferred=m,this.kc=o.maxAttempts,this.xo=new Jp(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,me.Z)(function*(){const t=new n0(e.datastore),o=e.Mc(t);o&&o.then(d=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(d)}).catch(m=>{e.Fc(m)}))}).catch(d=>{e.Fc(d)})}))}Mc(e){try{const t=this.updateFunction(e);return!te(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!ol(t)}return!1}}class r0{constructor(e,t,o,d){var m=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=o,this.databaseInfo=d,this.user=zr.UNAUTHENTICATED,this.clientId=da.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var I=(0,me.Z)(function*(R){rn("FirestoreClient","Received user=",R.uid),yield m.authCredentialListener(R),m.user=R});return function(R){return I.apply(this,arguments)}}()),this.appCheckCredentials.start(o,I=>(rn("FirestoreClient","Received new app check token=",I),this.appCheckCredentialListener(I,this.user)))}getConfiguration(){var e=this;return(0,me.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Qt(Pt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Ni;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(o){const d=fh(o,"Failed to shutdown persistence");t.reject(d)}})),t.promise}}function oy(i,e){return Lg.apply(this,arguments)}function Lg(){return Lg=(0,me.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),rn("FirestoreClient","Initializing OfflineComponentProvider");const t=yield i.getConfiguration();yield e.initialize(t);let o=t.initialUser;i.setCredentialChangeListener(function(){var d=(0,me.Z)(function*(m){o.isEqual(m)||(yield Gp(e.localStore,m),o=m)});return function(m){return d.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),Lg.apply(this,arguments)}function ay(i,e){return pp.apply(this,arguments)}function pp(){return pp=(0,me.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const t=yield df(i);rn("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield e.initialize(t,o),i.setCredentialChangeListener(d=>Ev(e.remoteStore,d)),i.setAppCheckTokenChangeListener((d,m)=>Ev(e.remoteStore,m)),i.onlineComponents=e}),pp.apply(this,arguments)}function df(i){return Vg.apply(this,arguments)}function Vg(){return Vg=(0,me.Z)(function*(i){return i.offlineComponents||(rn("FirestoreClient","Using default OfflineComponentProvider"),yield oy(i,new Ng)),i.offlineComponents}),Vg.apply(this,arguments)}function Eh(i){return Bg.apply(this,arguments)}function Bg(){return Bg=(0,me.Z)(function*(i){return i.onlineComponents||(rn("FirestoreClient","Using default OnlineComponentProvider"),yield ay(i,new Pg)),i.onlineComponents}),Bg.apply(this,arguments)}function ly(i){return df(i).then(e=>e.persistence)}function gp(i){return df(i).then(e=>e.localStore)}function $g(i){return Eh(i).then(e=>e.remoteStore)}function Ug(i){return Eh(i).then(e=>e.syncEngine)}function dc(i){return hc.apply(this,arguments)}function hc(){return hc=(0,me.Z)(function*(i){const e=yield Eh(i),t=e.eventManager;return t.onListen=jc.bind(null,e.syncEngine),t.onUnlisten=zm.bind(null,e.syncEngine),t}),hc.apply(this,arguments)}function cy(i,e,t={}){const o=new Ni;return i.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(d,m,I,R,z){const X=new uf({next:ze=>{m.enqueueAndForget(()=>$m(d,ge));const Dt=ze.docs.has(I);!Dt&&ze.fromCache?z.reject(new Qt(Pt.UNAVAILABLE,"Failed to get document because the client is offline.")):Dt&&ze.fromCache&&R&&"server"===R.source?z.reject(new Qt(Pt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):z.resolve(ze)},error:ze=>z.reject(ze)}),ge=new Hm(rl(I.path),X,{includeMetadataChanges:!0,Nu:!0});return Vm(d,ge)}(yield dc(i),i.asyncQueue,e,t,o)})),o.promise}function dy(i,e,t={}){const o=new Ni;return i.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(d,m,I,R,z){const X=new uf({next:ze=>{m.enqueueAndForget(()=>$m(d,ge)),ze.fromCache&&"server"===R.source?z.reject(new Qt(Pt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):z.resolve(ze)},error:ze=>z.reject(ze)}),ge=new Hm(I,X,{includeMetadataChanges:!0,Nu:!0});return Vm(d,ge)}(yield dc(i),i.asyncQueue,e,t,o)})),o.promise}class Sd{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.Uc=!1,this.qc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new Jp(this,"async_queue_retry"),this.Wc=()=>{const t=Xp();t&&rn("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=Xp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.Uc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.Uc){this.Uc=!0,this.Qc=e||!1;const t=Xp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.Uc)return new Promise(()=>{});const t=new Ni;return this.Hc(()=>this.Uc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,me.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!na(t))throw t;rn("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(o=>{throw this.Kc=o,this.Gc=!1,vi("INTERNAL UNHANDLED ERROR: ",function(m){let I=m.message||"";return m.stack&&(I=m.stack.includes(m.message)?m.stack:m.message+"\n"+m.stack),I}(o)),o}).then(o=>(this.Gc=!1,o))));return this.Bc=t,t}enqueueAfterDelay(e,t,o){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const d=Lm.createAndSchedule(this,e,t,o,m=>this.Yc(m));return this.qc.push(d),d}zc(){this.Kc&&wn()}verifyOperationInProgress(){}Xc(){var e=this;return(0,me.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.qc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.qc.sort((t,o)=>t.targetTimeMs-o.targetTimeMs);for(const t of this.qc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.qc.indexOf(e);this.qc.splice(t,1)}}function Ih(i){return function(e,t){if("object"!=typeof e||null===e)return!1;const o=e;for(const d of["next","error","complete"])if(d in o&&"function"==typeof o[d])return!0;return!1}(i)}class jl{constructor(){this._progressObserver={},this._taskCompletionResolver=new Ni,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,o){this._progressObserver={next:e,error:t,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class fs extends vh{constructor(e,t,o,d){super(e,t,o,d),this.type="firestore",this._queue=new Sd,this._persistenceKey=(null==d?void 0:d.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Td(this),this._firestoreClient.terminate()}}function Vs(i){return i._firestoreClient||Td(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function Td(i){var e;const t=i._freezeSettings(),o=(m=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new N(i._databaseId,m,i._persistenceKey,(R=t).host,R.ssl,R.experimentalForceLongPolling,R.experimentalAutoDetectLongPolling,R.useFetchStreams));var m,R;i._firestoreClient=new r0(i._authCredentials,i._appCheckCredentials,i._queue,o)}function Ad(i,e,t){const o=new Ni;return i.asyncQueue.enqueue((0,me.Z)(function*(){try{yield oy(i,t),yield ay(i,e),o.resolve()}catch(d){const m=d;if(!("FirebaseError"===(I=m).name?I.code===Pt.FAILED_PRECONDITION||I.code===Pt.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&I instanceof DOMException)||22===I.code||20===I.code||11===I.code))throw m;js("Error enabling offline persistence. Falling back to persistence disabled: "+m),o.reject(m)}var I})).then(()=>o.promise)}function Gg(i){if(i._initialized||i._terminated)throw new Qt(Pt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class au{constructor(e){this._byteString=e}static fromBase64String(e){try{return new au(_s.fromBase64String(e))}catch(t){throw new Qt(Pt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new au(_s.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ou{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Qt(Pt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _i(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class xd{constructor(e){this._methodName=e}}class mf{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Qt(Pt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Qt(Pt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ur(this._lat,e._lat)||ur(this._long,e._long)}}const kv=/^__.*__$/;class Fv{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return null!==this.fieldMask?new sl(e,this.data,this.fieldMask,t,this.fieldTransforms):new Nl(e,this.data,t,this.fieldTransforms)}}class mp{constructor(e,t,o){this.data=e,this.fieldMask=t,this.fieldTransforms=o}toMutation(e,t){return new sl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function yp(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw wn()}}class vp{constructor(e,t,o,d,m,I){this.settings=e,this.databaseId=t,this.It=o,this.ignoreUndefinedProperties=d,void 0===m&&this.na(),this.fieldTransforms=m||[],this.fieldMask=I||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new vp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.It,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),d=this.ia({path:o,oa:!1});return d.ua(e),d}ca(e){var t;const o=null===(t=this.path)||void 0===t?void 0:t.child(e),d=this.ia({path:o,oa:!1});return d.na(),d}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return _f(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(yp(this.sa)&&kv.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class _p{constructor(e,t,o){this.databaseId=e,this.ignoreUndefinedProperties=t,this.It=o||Kf(e)}da(e,t,o,d=!1){return new vp({sa:e,methodName:t,fa:o,path:_i.emptyPath(),oa:!1,la:d},this.databaseId,this.It,this.ignoreUndefinedProperties)}}function Nu(i){const e=i._freezeSettings(),t=Kf(i._databaseId);return new _p(i._databaseId,!!e.ignoreUndefinedProperties,t)}function Dh(i,e,t,o,d,m={}){const I=i.da(m.merge||m.mergeFields?2:0,e,t,d);bp("Data must be an object, but it was:",I,o);const R=vy(o,I);let z,X;if(m.merge)z=new ao(I.fieldMask),X=I.fieldTransforms;else if(m.mergeFields){const ge=[];for(const ze of m.mergeFields){const Dt=Cp(e,ze,t);if(!I.contains(Dt))throw new Qt(Pt.INVALID_ARGUMENT,`Field '${Dt}' is specified in your field mask but missing from your input data.`);qg(ge,Dt)||ge.push(Dt)}z=new ao(ge),X=I.fieldTransforms.filter(ze=>z.covers(ze.field))}else z=null,X=I.fieldTransforms;return new Fv(new is(R),z,X)}class yf extends xd{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof yf}}function vf(i,e,t){return new vp({sa:3,fa:e.settings.fa,methodName:i._methodName,oa:t},e.databaseId,e.It,e.ignoreUndefinedProperties)}class Sh extends xd{_toFieldTransform(e){return new Ec(e.path,new Ml)}isEqual(e){return e instanceof Sh}}class Wg extends xd{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=vf(this,e,!0),o=this._a.map(m=>Hc(m,t)),d=new pa(o);return new Ec(e.path,d)}isEqual(e){return this===e}}class yy extends xd{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=vf(this,e,!0),o=this._a.map(m=>Hc(m,t)),d=new $o(o);return new Ec(e.path,d)}isEqual(e){return this===e}}class zg extends xd{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new Ol(e.It,Gu(e.It,this.wa));return new Ec(e.path,t)}isEqual(e){return this===e}}function Ep(i,e,t,o){const d=i.da(1,e,t);bp("Data must be an object, but it was:",d,o);const m=[],I=is.empty();ra(o,(z,X)=>{const ge=Dp(e,z,t);X=(0,Be.m9)(X);const ze=d.ca(ge);if(X instanceof yf)m.push(ge);else{const Dt=Hc(X,ze);null!=Dt&&(m.push(ge),I.set(ge,Dt))}});const R=new ao(m);return new mp(I,R,d.fieldTransforms)}function Ip(i,e,t,o,d,m){const I=i.da(1,e,t),R=[Cp(e,o,t)],z=[d];if(m.length%2!=0)throw new Qt(Pt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Dt=0;Dt<m.length;Dt+=2)R.push(Cp(e,m[Dt])),z.push(m[Dt+1]);const X=[],ge=is.empty();for(let Dt=R.length-1;Dt>=0;--Dt)if(!qg(X,R[Dt])){const zt=R[Dt];let Jt=z[Dt];Jt=(0,Be.m9)(Jt);const Nn=I.ca(zt);if(Jt instanceof yf)X.push(zt);else{const Gn=Hc(Jt,Nn);null!=Gn&&(X.push(zt),ge.set(zt,Gn))}}const ze=new ao(X);return new mp(ge,ze,I.fieldTransforms)}function wp(i,e,t,o=!1){return Hc(t,i.da(o?4:3,e))}function Hc(i,e){if(Yg(i=(0,Be.m9)(i)))return bp("Unsupported field value:",e,i),vy(i,e);if(i instanceof xd)return function(t,o){if(!yp(o.sa))throw o.ha(`${t._methodName}() can only be used with update() and set()`);if(!o.path)throw o.ha(`${t._methodName}() is not currently supported inside arrays`);const d=t._toFieldTransform(o);d&&o.fieldTransforms.push(d)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,o){const d=[];let m=0;for(const I of t){let R=Hc(I,o.aa(m));null==R&&(R={nullValue:"NULL_VALUE"}),d.push(R),m++}return{arrayValue:{values:d}}}(i,e)}return function(t,o){if(null===(t=(0,Be.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Gu(o.It,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const d=Mi.fromDate(t);return{timestampValue:yl(o.It,d)}}if(t instanceof Mi){const d=new Mi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:yl(o.It,d)}}if(t instanceof mf)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof au)return{bytesValue:zs(o.It,t._byteString)};if(t instanceof Ls){const d=o.databaseId,m=t.firestore._databaseId;if(!m.isEqual(d))throw o.ha(`Document reference is for database ${m.projectId}/${m.database} but should be for database ${d.projectId}/${d.database}`);return{referenceValue:dd(t.firestore._databaseId||o.databaseId,t._key.path)}}throw o.ha(`Unsupported field value: ${yh(t)}`)}(i,e)}function vy(i,e){const t={};return Lo(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ra(i,(o,d)=>{const m=Hc(d,e.ra(o));null!=m&&(t[o]=m)}),{mapValue:{fields:t}}}function Yg(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof Mi||i instanceof mf||i instanceof au||i instanceof Ls||i instanceof xd)}function bp(i,e,t){if(!Yg(t)||"object"!=typeof(o=t)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){const o=yh(t);throw e.ha("an object"===o?i+" a custom object":i+" "+o)}var o}function Cp(i,e,t){if((e=(0,Be.m9)(e))instanceof Ou)return e._internalPath;if("string"==typeof e)return Dp(i,e);throw _f("Field path arguments must be of type string or ",i,!1,void 0,t)}const _y=new RegExp("[~\\*/\\[\\]]");function Dp(i,e,t){if(e.search(_y)>=0)throw _f(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,t);try{return new Ou(...e.split("."))._internalPath}catch(o){throw _f(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,t)}}function _f(i,e,t,o,d){const m=o&&!o.isEmpty(),I=void 0!==d;let R=`Function ${e}() called with invalid data`;t&&(R+=" (via `toFirestore()`)"),R+=". ";let z="";return(m||I)&&(z+=" (found",m&&(z+=` in field ${o}`),I&&(z+=` in document ${d}`),z+=")"),new Qt(Pt.INVALID_ARGUMENT,R+i+z)}function qg(i,e){return i.some(t=>t.isEqual(e))}class Th{constructor(e,t,o,d,m){this._firestore=e,this._userDataWriter=t,this._key=o,this._document=d,this._converter=m}get id(){return this._key.path.lastSegment()}get ref(){return new Ls(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Kg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Ef("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Kg extends Th{data(){return super.data()}}function Ef(i,e){return"string"==typeof e?Dp(i,e):e instanceof Ou?e._internalPath:e._delegate._internalPath}function Zg(i){if("L"===i.limitType&&0===i.explicitOrderBy.length)throw new Qt(Pt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Ah{}function fc(i,...e){for(const t of e)i=t._apply(i);return i}class Ey extends Ah{constructor(e,t,o){super(),this.ma=e,this.ga=t,this.ya=o,this.type="where"}_apply(e){const t=Nu(e.firestore),o=function(d,m,I,R,z,X,ge){let ze;if(z.isKeyField()){if("array-contains"===X||"array-contains-any"===X)throw new Qt(Pt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${X}' queries on documentId().`);if("in"===X||"not-in"===X){em(ge,X);const zt=[];for(const Jt of ge)zt.push(Cy(R,d,Jt));ze={arrayValue:{values:zt}}}else ze=Cy(R,d,ge)}else"in"!==X&&"not-in"!==X&&"array-contains-any"!==X||em(ge,X),ze=wp(I,"where",ge,"in"===X||"not-in"===X);const Dt=Fs.create(z,X,ze);return function(zt,Jt){if(Jt.dt()){const Gn=vc(zt);if(null!==Gn&&!Gn.isEqual(Jt.field))throw new Qt(Pt.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Gn.toString()}' and '${Jt.field.toString()}'`);const Si=_u(zt);null!==Si&&tm(0,Jt.field,Si)}const Nn=function(Gn,Si){for(const os of Gn.filters)if(Si.indexOf(os.op)>=0)return os.op;return null}(zt,function(Gn){switch(Gn){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(Jt.op));if(null!==Nn)throw new Qt(Pt.INVALID_ARGUMENT,Nn===Jt.op?`Invalid query. You cannot use more than one '${Jt.op.toString()}' filter.`:`Invalid query. You cannot use '${Jt.op.toString()}' filters with '${Nn.toString()}' filters.`)}(d,Dt),Dt}(e._query,0,t,e.firestore._databaseId,this.ma,this.ga,this.ya);return new Aa(e.firestore,e.converter,function(d,m){const I=d.filters.concat([m]);return new Va(d.path,d.collectionGroup,d.explicitOrderBy.slice(),I,d.limit,d.limitType,d.startAt,d.endAt)}(e._query,o))}}class wy extends Ah{constructor(e,t){super(),this.ma=e,this.pa=t,this.type="orderBy"}_apply(e){const t=function(o,d,m){if(null!==o.startAt)throw new Qt(Pt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==o.endAt)throw new Qt(Pt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const I=new xo(d,m);return function(R,z){if(null===_u(R)){const X=vc(R);null!==X&&tm(0,X,z.field)}}(o,I),I}(e._query,this.ma,this.pa);return new Aa(e.firestore,e.converter,function(o,d){const m=o.explicitOrderBy.concat([d]);return new Va(o.path,o.collectionGroup,m,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,t))}}class Lv extends Ah{constructor(e,t,o){super(),this.type=e,this.Ia=t,this.Ta=o}_apply(e){return new Aa(e.firestore,e.converter,dl(e._query,this.Ia,this.Ta))}}class Qg extends Ah{constructor(e,t,o){super(),this.type=e,this.Ea=t,this.Aa=o}_apply(e){const t=Jg(e,this.type,this.Ea,this.Aa);return new Aa(e.firestore,e.converter,(d=t,new Va((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,d,o.endAt)));var o,d}}class Xg extends Ah{constructor(e,t,o){super(),this.type=e,this.Ea=t,this.Aa=o}_apply(e){const t=Jg(e,this.type,this.Ea,this.Aa);return new Aa(e.firestore,e.converter,(d=t,new Va((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,d)));var o,d}}function Jg(i,e,t,o){if(t[0]=(0,Be.m9)(t[0]),t[0]instanceof Th)return function(d,m,I,R,z){if(!R)throw new Qt(Pt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${I}().`);const X=[];for(const ge of cl(d))if(ge.field.isKeyField())X.push(Vn(m,R.key));else{const ze=R.data.field(ge.field);if(S(ze))throw new Qt(Pt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ge.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===ze){const Dt=ge.field.canonicalString();throw new Qt(Pt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Dt}' (used as the orderBy) does not exist.`)}X.push(ze)}return new La(X,z)}(i._query,i.firestore._databaseId,e,t[0]._document,o);{const d=Nu(i.firestore);return function(m,I,R,z,X,ge){const ze=m.explicitOrderBy;if(X.length>ze.length)throw new Qt(Pt.INVALID_ARGUMENT,`Too many arguments provided to ${z}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Dt=[];for(let zt=0;zt<X.length;zt++){const Jt=X[zt];if(ze[zt].field.isKeyField()){if("string"!=typeof Jt)throw new Qt(Pt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${z}(), but got a ${typeof Jt}`);if(!_c(m)&&-1!==Jt.indexOf("/"))throw new Qt(Pt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${z}() must be a plain document ID, but '${Jt}' contains a slash.`);const Nn=m.path.child(Qr.fromString(Jt));if(!dn.isDocumentKey(Nn))throw new Qt(Pt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${z}() must result in a valid document path, but '${Nn}' is not because it contains an odd number of segments.`);const Gn=new dn(Nn);Dt.push(Vn(I,Gn))}else{const Nn=wp(R,z,Jt);Dt.push(Nn)}}return new La(Dt,ge)}(i._query,i.firestore._databaseId,d,e,t,o)}}function Cy(i,e,t){if("string"==typeof(t=(0,Be.m9)(t))){if(""===t)throw new Qt(Pt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_c(e)&&-1!==t.indexOf("/"))throw new Qt(Pt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const o=e.path.child(Qr.fromString(t));if(!dn.isDocumentKey(o))throw new Qt(Pt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return Vn(i,new dn(o))}if(t instanceof Ls)return Vn(i,t._key);throw new Qt(Pt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${yh(t)}.`)}function em(i,e){if(!Array.isArray(i)||0===i.length)throw new Qt(Pt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new Qt(Pt.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function tm(i,e,t){if(!t.isEqual(e))throw new Qt(Pt.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Gc{convertValue(e,t="none"){switch(U(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Yi(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ia(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw wn()}}convertObject(e,t){const o={};return ra(e.fields,(d,m)=>{o[d]=this.convertValue(m,t)}),o}convertGeoPoint(e){return new mf(Yi(e.latitude),Yi(e.longitude))}convertArray(e,t){return(e.values||[]).map(o=>this.convertValue(o,t))}convertServerTimestamp(e,t){switch(t){case"previous":const o=T(e);return null==o?null:this.convertValue(o,t);case"estimate":return this.convertTimestamp(w(e));default:return null}}convertTimestamp(e){const t=Vo(e);return new Mi(t.seconds,t.nanos)}convertDocumentKey(e,t){const o=Qr.fromString(e);En(gr(o));const d=new j(o.get(1),o.get(3)),m=new dn(o.popFirst(5));return d.isEqual(t)||vi(`Document ${m} contains a document reference within a different database (${d.projectId}/${d.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),m}}function Sp(i,e,t){let o;return o=i?t&&(t.merge||t.mergeFields)?i.toFirestore(e,t):i.toFirestore(e):e,o}class Hv extends Gc{constructor(e){super(),this.firestore=e}convertBytes(e){return new au(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ls(this.firestore,null,t)}}class Wc{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class pc extends Th{constructor(e,t,o,d,m,I){super(e,t,o,d,I),this._firestore=e,this._firestoreImpl=e,this.metadata=m}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new xh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const o=this._document.data.field(Ef("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,t.serverTimestamps)}}}class xh extends pc{data(e={}){return super.data(e)}}class Md{constructor(e,t,o,d){this._firestore=e,this._userDataWriter=t,this._snapshot=d,this.metadata=new Wc(d.hasPendingWrites,d.fromCache),this.query=o}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(o=>{e.call(t,new xh(this._firestore,this._userDataWriter,o.key,o,new Wc(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Qt(Pt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(o,d){if(o._snapshot.oldDocs.isEmpty()){let m=0;return o._snapshot.docChanges.map(I=>({type:"added",doc:new xh(o._firestore,o._userDataWriter,I.doc.key,I.doc,new Wc(o._snapshot.mutatedKeys.has(I.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:m++}))}{let m=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(I=>d||3!==I.type).map(I=>{const R=new xh(o._firestore,o._userDataWriter,I.doc.key,I.doc,new Wc(o._snapshot.mutatedKeys.has(I.doc.key),o._snapshot.fromCache),o.query.converter);let z=-1,X=-1;return 0!==I.type&&(z=m.indexOf(I.doc.key),m=m.delete(I.doc.key)),1!==I.type&&(m=m.add(I.doc),X=m.indexOf(I.doc.key)),{type:Dy(I.type),doc:R,oldIndex:z,newIndex:X}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Dy(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return wn()}}function Tp(i,e){return i instanceof pc&&e instanceof pc?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof Md&&e instanceof Md&&i._firestore===e._firestore&&Fg(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}class zc extends Gc{constructor(e){super(),this.firestore=e}convertBytes(e){return new au(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ls(this.firestore,null,t)}}function nm(i,e,t){i=gi(i,Ls);const o=gi(i.firestore,fs),d=Sp(i.converter,e,t);return Fu(o,[Dh(Nu(o),"setDoc",i._key,d,null!==i.converter,t).toMutation(i._key,ss.none())])}function Ty(i,e,t,...o){i=gi(i,Ls);const d=gi(i.firestore,fs),m=Nu(d);let I;return I="string"==typeof(e=(0,Be.m9)(e))||e instanceof Ou?Ip(m,"updateDoc",i._key,e,t,o):Ep(m,"updateDoc",i._key,e),Fu(d,[I.toMutation(i._key,ss.exists(!0))])}function Ay(i,...e){var t,o,d;i=(0,Be.m9)(i);let m={includeMetadataChanges:!1},I=0;"object"!=typeof e[I]||Ih(e[I])||(m=e[I],I++);const R={includeMetadataChanges:m.includeMetadataChanges};if(Ih(e[I])){const ze=e[I];e[I]=null===(t=ze.next)||void 0===t?void 0:t.bind(ze),e[I+1]=null===(o=ze.error)||void 0===o?void 0:o.bind(ze),e[I+2]=null===(d=ze.complete)||void 0===d?void 0:d.bind(ze)}let z,X,ge;if(i instanceof Ls)X=gi(i.firestore,fs),ge=rl(i._key.path),z={next:ze=>{e[I]&&e[I](im(X,i,ze))},error:e[I+1],complete:e[I+2]};else{const ze=gi(i,Aa);X=gi(ze.firestore,fs),ge=ze._query;const Dt=new zc(X);z={next:zt=>{e[I]&&e[I](new Md(X,Dt,ze,zt))},error:e[I+1],complete:e[I+2]},Zg(i._query)}return function(ze,Dt,zt,Jt){const Nn=new uf(Jt),Gn=new Hm(Dt,Nn,zt);return ze.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return Vm(yield dc(ze),Gn)})),()=>{Nn.bc(),ze.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return $m(yield dc(ze),Gn)}))}}(Vs(X),ge,R,z)}function Fu(i,e){return function(t,o){const d=new Ni;return t.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function Cv(i,e,t){return ph.apply(this,arguments)}(yield Ug(t),o,d)})),d.promise}(Vs(i),e)}function im(i,e,t){const o=t.docs.get(e._key),d=new zc(i);return new pc(i,d,e._key,o,new Wc(t.hasPendingWrites,t.fromCache),e.converter)}const xy={maxAttempts:5};class sm{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Nu(e)}set(e,t,o){this._verifyNotCommitted();const d=cu(e,this._firestore),m=Sp(d.converter,t,o),I=Dh(this._dataReader,"WriteBatch.set",d._key,m,null!==d.converter,o);return this._mutations.push(I.toMutation(d._key,ss.none())),this}update(e,t,o,...d){this._verifyNotCommitted();const m=cu(e,this._firestore);let I;return I="string"==typeof(t=(0,Be.m9)(t))||t instanceof Ou?Ip(this._dataReader,"WriteBatch.update",m._key,t,o,d):Ep(this._dataReader,"WriteBatch.update",m._key,t),this._mutations.push(I.toMutation(m._key,ss.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=cu(e,this._firestore);return this._mutations=this._mutations.concat(new bu(t._key,ss.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Qt(Pt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function cu(i,e){if((i=(0,Be.m9)(i)).firestore!==e)throw new Qt(Pt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}class qv extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Nu(e)}get(e){const t=cu(e,this._firestore),o=new Hv(this._firestore);return this._transaction.lookup([t._key]).then(d=>{if(!d||1!==d.length)return wn();const m=d[0];if(m.isFoundDocument())return new Th(this._firestore,o,m.key,m,t.converter);if(m.isNoDocument())return new Th(this._firestore,o,t._key,null,t.converter);throw wn()})}set(e,t,o){const d=cu(e,this._firestore),m=Sp(d.converter,t,o),I=Dh(this._dataReader,"Transaction.set",d._key,m,null!==d.converter,o);return this._transaction.set(d._key,I),this}update(e,t,o,...d){const m=cu(e,this._firestore);let I;return I="string"==typeof(t=(0,Be.m9)(t))||t instanceof Ou?Ip(this._dataReader,"Transaction.update",m._key,t,o,d):Ep(this._dataReader,"Transaction.update",m._key,t),this._transaction.update(m._key,I),this}delete(e){const t=cu(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=cu(e,this._firestore),o=new zc(this._firestore);return super.get(e).then(d=>new pc(this._firestore,o,t._key,d._document,new Wc(!1,!1),t.converter))}}function xp(i,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Qt("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return e}function Fy(){if("undefined"==typeof Uint8Array)throw new Qt("unimplemented","Uint8Arrays are not available in this environment.")}function Ly(){if(!function yu(){return"undefined"!=typeof atob}())throw new Qt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(i,e=!0){_a=vt.SDK_VERSION,(0,vt._registerComponent)(new mt.wA("firestore",(t,{instanceIdentifier:o,options:d})=>{const m=t.getProvider("app").getImmediate(),I=new fs(new Qo(t.getProvider("auth-internal")),new Oa(t.getProvider("app-check-internal")),function(R,z){if(!Object.prototype.hasOwnProperty.apply(R.options,["projectId"]))throw new Qt(Pt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new j(R.options.projectId,z)}(m,o),m);return d=Object.assign({useFetchStreams:e},d),I._setSettings(d),I},"PUBLIC").setMultipleInstances(!0)),(0,vt.registerVersion)(Wl,"3.7.3",i),(0,vt.registerVersion)(Wl,"3.7.3","esm2017")}();class If{constructor(e){this._delegate=e}static fromBase64String(e){return Ly(),new If(au.fromBase64String(e))}static fromUint8Array(e){return Fy(),new If(au.fromUint8Array(e))}toBase64(){return Ly(),this._delegate.toBase64()}toUint8Array(){return Fy(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function lm(i){return function Qv(i,e){if("object"!=typeof i||null===i)return!1;const t=i;for(const o of e)if(o in t&&"function"==typeof t[o])return!0;return!1}(i,["next","error","complete"])}class Xv{enableIndexedDbPersistence(e,t){return function wh(i,e){Gg(i=gi(i,fs));const t=Vs(i),o=i._freezeSettings(),d=new Pg;return Ad(t,d,new ry(d,o.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function bh(i){Gg(i=gi(i,fs));const e=Vs(i),t=i._freezeSettings(),o=new Pg;return Ad(e,o,new Tv(o,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function Ch(i){if(i._initialized&&!i._terminated)throw new Qt(Pt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Ni;return i._queue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{yield(t=(0,me.Z)(function*(o){if(!so.C())return Promise.resolve();const d=o+"main";yield so.delete(d)}),function(o){return t.apply(this,arguments)})(Yh(i._databaseId,i._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Vy{constructor(e,t,o){this._delegate=t,this._persistenceProvider=o,this.INTERNAL={delete:()=>this.terminate()},e instanceof j||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&js("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,o={}){!function kg(i,e,t,o={}){var d;const m=(i=gi(i,vh))._getSettings();if("firestore.googleapis.com"!==m.host&&m.host!==e&&js("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},m),{host:`${e}:${t}`,ssl:!1})),o.mockUserToken){let I,R;if("string"==typeof o.mockUserToken)I=o.mockUserToken,R=zr.MOCK_USER;else{I=(0,Be.Sg)(o.mockUserToken,null===(d=i._app)||void 0===d?void 0:d.options.projectId);const z=o.mockUserToken.sub||o.mockUserToken.user_id;if(!z)throw new Qt(Pt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");R=new zr(z)}i._authCredentials=new Fo(new Ra(I,R))}}(this._delegate,e,t,o)}enableNetwork(){return function fy(i){return function s0(i){return i.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield ly(i),t=yield $g(i);return e.setNetworkEnabled(!0),function(o){const d=cn(o);return d._u.delete(0),lh(d)}(t)}))}(Vs(i=gi(i,fs)))}(this._delegate)}disableNetwork(){return function py(i){return function hf(i){return i.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield ly(i),t=yield $g(i);return e.setNetworkEnabled(!1),(o=(0,me.Z)(function*(d){const m=cn(d);m._u.add(0),yield uh(m),m.gu.set("Offline")}),function(d){return o.apply(this,arguments)})(t);var o}))}(Vs(i=gi(i,fs)))}(this._delegate)}enablePersistence(e){let t=!1,o=!1;return e&&(t=!!e.synchronizeTabs,o=!!e.experimentalForceOwningTab,iy("synchronizeTabs",t,"experimentalForceOwningTab",o)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,o)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function hy(i){return function(e){const t=new Ni;return e.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function qm(i,e){return nf.apply(this,arguments)}(yield Ug(e),t)})),t.promise}(Vs(i=gi(i,fs)))}(this._delegate)}onSnapshotsInSync(e){return function rm(i,e){return function Ru(i,e){const t=new uf(e);return i.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return o=yield dc(i),d=t,cn(o).Ru.add(d),void d.next();var o,d})),()=>{t.bc(),i.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return o=yield dc(i),d=t,void cn(o).Ru.delete(d);var o,d}))}}(Vs(i=gi(i,fs)),Ih(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Qt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Od(this,Mu(this._delegate,e))}catch(t){throw Qa(t,"collection()","Firestore.collection()")}}doc(e){try{return new Hl(this,Dd(this._delegate,e))}catch(t){throw Qa(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new ja(this,function hp(i,e){if(i=gi(i,vh),af("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Qt(Pt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Aa(i,null,(t=e,new Va(Qr.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Qa(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function My(i,e,t){i=gi(i,fs);const o=Object.assign(Object.assign({},xy),t);return function(d){if(d.maxAttempts<1)throw new Qt(Pt.INVALID_ARGUMENT,"Max attempts must be at least 1")}(o),function(d,m,I){const R=new Ni;return d.asyncQueue.enqueueAndForget((0,me.Z)(function*(){const z=yield function uy(i){return Eh(i).then(e=>e.datastore)}(d);new Ov(d.asyncQueue,z,I,m,R).run()})),R.promise}(Vs(i),d=>e(new qv(i,d)),o)}(this._delegate,t=>e(new By(this,t)))}batch(){return Vs(this._delegate),new $y(new sm(this._delegate,e=>Fu(this._delegate,e)))}loadBundle(e){return function gy(i,e){const t=Vs(i=gi(i,fs)),o=new jl;return function ff(i,e,t,o){const d=function(m,I){let R;return R="string"==typeof m?(new TextEncoder).encode(m):m,z=function(z,X){if(z instanceof Uint8Array)return fp(z,X);if(z instanceof ArrayBuffer)return fp(new Uint8Array(z),X);if(z instanceof ReadableStream)return z.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(R),new Mv(z,I);var z}(t,Kf(e));i.asyncQueue.enqueueAndForget((0,me.Z)(function*(){!function e0(i,e,t){const o=cn(i);var d;(d=(0,me.Z)(function*(m,I,R){try{const z=yield I.getMetadata();if(yield function(Dt,zt){const Jt=cn(Dt),Nn=eo(zt.createTime);return Jt.persistence.runTransaction("hasNewerBundle","readonly",Gn=>Jt.Ns.getBundleMetadata(Gn,zt.id)).then(Gn=>!!Gn&&Gn.createTime.compareTo(Nn)>=0)}(m.localStore,z))return yield I.close(),R._completeWith({taskState:"Success",documentsLoaded:(Dt=z).totalDocuments,bytesLoaded:Dt.totalBytes,totalDocuments:Dt.totalDocuments,totalBytes:Dt.totalBytes}),Promise.resolve(new Set);R._updateProgress(op(z));const X=new Uc(z,m.localStore,I.It);let ge=yield I.mc();for(;ge;){const Dt=yield X.Fu(ge);Dt&&R._updateProgress(Dt),ge=yield I.mc()}const ze=yield X.complete();return yield cc(m,ze.Lu,void 0),yield function(Dt,zt){const Jt=cn(Dt);return Jt.persistence.runTransaction("Save bundle","readwrite",Nn=>Jt.Ns.saveBundleMetadata(Nn,zt))}(m.localStore,z),R._completeWith(ze.progress),Promise.resolve(ze.Bu)}catch(z){return js("SyncEngine",`Loading bundle failed with ${z}`),R._failWith(z),Promise.resolve(new Set)}var Dt}),function(m,I,R){return d.apply(this,arguments)})(o,e,t).then(d=>{o.sharedClientState.notifyBundleLoaded(d)})}(yield Ug(i),d,o)}))}(t,i._databaseId,e,o),o}(this._delegate,e)}namedQuery(e){return function my(i,e){return function Ua(i,e){return i.asyncQueue.enqueue((0,me.Z)(function*(){return function(t,o){const d=cn(t);return d.persistence.runTransaction("Get named query","readonly",m=>d.Ns.getNamedQuery(m,o))}(yield gp(i),e)}))}(Vs(i=gi(i,fs)),e).then(t=>t?new Aa(i,null,t.query):null)}(this._delegate,e).then(t=>t?new ja(this,t):null)}}class Mp extends Gc{constructor(e){super(),this.firestore=e}convertBytes(e){return new If(new au(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Hl.forKey(t,this.firestore,null)}}class By{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Mp(e)}get(e){const t=Yc(e);return this._delegate.get(t).then(o=>new wf(this._firestore,new pc(this._firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,t.converter)))}set(e,t,o){const d=Yc(e);return o?(xp("Transaction.set",o),this._delegate.set(d,t,o)):this._delegate.set(d,t),this}update(e,t,o,...d){const m=Yc(e);return 2===arguments.length?this._delegate.update(m,t):this._delegate.update(m,t,o,...d),this}delete(e){const t=Yc(e);return this._delegate.delete(t),this}}class $y{constructor(e){this._delegate=e}set(e,t,o){const d=Yc(e);return o?(xp("WriteBatch.set",o),this._delegate.set(d,t,o)):this._delegate.set(d,t),this}update(e,t,o,...d){const m=Yc(e);return 2===arguments.length?this._delegate.update(m,t):this._delegate.update(m,t,o,...d),this}delete(e){const t=Yc(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Rd{constructor(e,t,o){this._firestore=e,this._userDataWriter=t,this._delegate=o}fromFirestore(e,t){const o=new xh(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new bf(this._firestore,o),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const o=Rd.INSTANCES;let d=o.get(e);d||(d=new WeakMap,o.set(e,d));let m=d.get(t);return m||(m=new Rd(e,new Mp(e),t),d.set(t,m)),m}}Rd.INSTANCES=new WeakMap;class Hl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Mp(e)}static forPath(e,t,o){if(e.length%2!=0)throw new Qt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Hl(t,new Ls(t._delegate,o,new dn(e)))}static forKey(e,t,o){return new Hl(t,new Ls(t._delegate,o,e))}get id(){return this._delegate.id}get parent(){return new Od(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Od(this.firestore,Mu(this._delegate,e))}catch(t){throw Qa(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Be.m9)(e))instanceof Ls&&_h(this._delegate,e)}set(e,t){t=xp("DocumentReference.set",t);try{return t?nm(this._delegate,e,t):nm(this._delegate,e)}catch(o){throw Qa(o,"setDoc()","DocumentReference.set()")}}update(e,t,...o){try{return 1===arguments.length?Ty(this._delegate,e):Ty(this._delegate,e,t,...o)}catch(d){throw Qa(d,"updateDoc()","DocumentReference.update()")}}delete(){return function Wv(i){return Fu(gi(i.firestore,fs),[new bu(i._key,ss.none())])}(this._delegate)}onSnapshot(...e){const t=Uy(e),o=jy(e,d=>new wf(this.firestore,new pc(this.firestore._delegate,this._userDataWriter,d._key,d._document,d.metadata,this._delegate.converter)));return Ay(this._delegate,t,o)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function Gv(i){i=gi(i,Ls);const e=gi(i.firestore,fs),t=Vs(e),o=new zc(e);return function Nv(i,e){const t=new Ni;return i.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(o=(0,me.Z)(function*(d,m,I){try{const R=yield function(z,X){const ge=cn(z);return ge.persistence.runTransaction("read document","readonly",ze=>ge.localDocuments.getDocument(ze,X))}(d,m);R.isFoundDocument()?I.resolve(R):R.isNoDocument()?I.resolve(null):I.reject(new Qt(Pt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(R){const z=fh(R,`Failed to get document '${m} from cache`);I.reject(z)}}),function(d,m,I){return o.apply(this,arguments)})(yield gp(i),e,t);var o})),t.promise}(t,i._key).then(d=>new pc(e,o,i._key,d,new Wc(null!==d&&d.hasLocalMutations,!0),i.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function ku(i){i=gi(i,Ls);const e=gi(i.firestore,fs);return cy(Vs(e),i._key,{source:"server"}).then(t=>im(e,i,t))}(this._delegate):function Pu(i){i=gi(i,Ls);const e=gi(i.firestore,fs);return cy(Vs(e),i._key).then(t=>im(e,i,t))}(this._delegate),t.then(o=>new wf(this.firestore,new pc(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)))}withConverter(e){return new Hl(this.firestore,this._delegate.withConverter(e?Rd.getInstance(this.firestore,e):null))}}function Qa(i,e,t){return i.message=i.message.replace(e,t),i}function Uy(i){for(const e of i)if("object"==typeof e&&!lm(e))return e;return{}}function jy(i,e){var t,o;let d;return d=lm(i[0])?i[0]:lm(i[1])?i[1]:"function"==typeof i[0]?{next:i[0],error:i[1],complete:i[2]}:{next:i[1],error:i[2],complete:i[3]},{next:m=>{d.next&&d.next(e(m))},error:null===(t=d.error)||void 0===t?void 0:t.bind(d),complete:null===(o=d.complete)||void 0===o?void 0:o.bind(d)}}class wf{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Hl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Tp(this._delegate,e._delegate)}}class bf extends wf{data(e){const t=this._delegate.data(e);return function Hs(i,e){i||wn()}(void 0!==t),t}}class ja{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Mp(e)}where(e,t,o){try{return new ja(this.firestore,fc(this._delegate,function Iy(i,e,t){const o=e,d=Ef("where",i);return new Ey(d,o,t)}(e,t,o)))}catch(d){throw Qa(d,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new ja(this.firestore,fc(this._delegate,function by(i,e="asc"){const t=e,o=Ef("orderBy",i);return new wy(o,t)}(e,t)))}catch(o){throw Qa(o,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new ja(this.firestore,fc(this._delegate,function Vv(i){return Av("limit",i),new Lv("limit",i,"F")}(e)))}catch(t){throw Qa(t,"limit()","Query.limit()")}}limitToLast(e){try{return new ja(this.firestore,fc(this._delegate,function Bv(i){return Av("limitToLast",i),new Lv("limitToLast",i,"L")}(e)))}catch(t){throw Qa(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new ja(this.firestore,fc(this._delegate,function $v(...i){return new Qg("startAt",i,!0)}(...e)))}catch(t){throw Qa(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new ja(this.firestore,fc(this._delegate,function oa(...i){return new Qg("startAfter",i,!1)}(...e)))}catch(t){throw Qa(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new ja(this.firestore,fc(this._delegate,function Uv(...i){return new Xg("endBefore",i,!1)}(...e)))}catch(t){throw Qa(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new ja(this.firestore,fc(this._delegate,function jv(...i){return new Xg("endAt",i,!0)}(...e)))}catch(t){throw Qa(t,"endAt()","Query.endAt()")}}isEqual(e){return Fg(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function uu(i){i=gi(i,Aa);const e=gi(i.firestore,fs),t=Vs(e),o=new zc(e);return function jg(i,e){const t=new Ni;return i.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(o=(0,me.Z)(function*(d,m,I){try{const R=yield qh(d,m,!0),z=new ap(m,R.Hi),X=z.Wu(R.documents),ge=z.applyChanges(X,!1);I.resolve(ge.snapshot)}catch(R){const z=fh(R,`Failed to execute query '${m} against cache`);I.reject(z)}}),function(d,m,I){return o.apply(this,arguments)})(yield gp(i),e,t);var o})),t.promise}(t,i._query).then(d=>new Md(e,o,i,d))}(this._delegate):"server"===(null==e?void 0:e.source)?function Sy(i){i=gi(i,Aa);const e=gi(i.firestore,fs),t=Vs(e),o=new zc(e);return dy(t,i._query,{source:"server"}).then(d=>new Md(e,o,i,d))}(this._delegate):function lu(i){i=gi(i,Aa);const e=gi(i.firestore,fs),t=Vs(e),o=new zc(e);return Zg(i._query),dy(t,i._query).then(d=>new Md(e,o,i,d))}(this._delegate),t.then(o=>new Rp(this.firestore,new Md(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)))}onSnapshot(...e){const t=Uy(e),o=jy(e,d=>new Rp(this.firestore,new Md(this.firestore._delegate,this._userDataWriter,this._delegate,d._snapshot)));return Ay(this._delegate,t,o)}withConverter(e){return new ja(this.firestore,this._delegate.withConverter(e?Rd.getInstance(this.firestore,e):null))}}class Hy{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new bf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Rp{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new ja(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new bf(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new Hy(this._firestore,t))}forEach(e,t){this._delegate.forEach(o=>{e.call(t,new bf(this._firestore,o))})}isEqual(e){return Tp(this._delegate,e._delegate)}}class Od extends ja{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Hl(this.firestore,e):null}doc(e){try{return new Hl(this.firestore,void 0===e?Dd(this._delegate):Dd(this._delegate,e))}catch(t){throw Qa(t,"doc()","CollectionReference.doc()")}}add(e){return function zv(i,e){const t=gi(i.firestore,fs),o=Dd(i),d=Sp(i.converter,e);return Fu(t,[Dh(Nu(i.firestore),"addDoc",o._key,d,null!==i.converter,{}).toMutation(o._key,ss.exists(!1))]).then(()=>o)}(this._delegate,e).then(t=>new Hl(this.firestore,t))}isEqual(e){return _h(this._delegate,e._delegate)}withConverter(e){return new Od(this.firestore,this._delegate.withConverter(e?Rd.getInstance(this.firestore,e):null))}}function Yc(i){return gi(i,Ls)}class Op{constructor(...e){this._delegate=new Ou(...e)}static documentId(){return new Op(_i.keyField().canonicalString())}isEqual(e){return(e=(0,Be.m9)(e))instanceof Ou&&this._delegate._internalPath.isEqual(e._internalPath)}}class qc{constructor(e){this._delegate=e}static serverTimestamp(){const e=function om(){return new Sh("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new qc(e)}static delete(){const e=function Ry(){return new yf("deleteField")}();return e._methodName="FieldValue.delete",new qc(e)}static arrayUnion(...e){const t=function Ap(...i){return new Wg("arrayUnion",i)}(...e);return t._methodName="FieldValue.arrayUnion",new qc(t)}static arrayRemove(...e){const t=function Oy(...i){return new yy("arrayRemove",i)}(...e);return t._methodName="FieldValue.arrayRemove",new qc(t)}static increment(e){const t=function Ny(i){return new zg("increment",i)}(e);return t._methodName="FieldValue.increment",new qc(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Gy={Firestore:Vy,GeoPoint:mf,Timestamp:Mi,Blob:If,Transaction:By,WriteBatch:$y,DocumentReference:Hl,DocumentSnapshot:wf,Query:ja,QueryDocumentSnapshot:bf,QuerySnapshot:Rp,CollectionReference:Od,FieldPath:Op,FieldValue:qc,setLogLevel:function Jv(i){!function ca(i){ko.setLogLevel(i)}(i)},CACHE_SIZE_UNLIMITED:-1};!function zy(i){(function Wy(i,e){i.INTERNAL.registerComponent(new mt.wA("firestore-compat",t=>{const o=t.getProvider("app-compat").getImmediate(),d=t.getProvider("firestore").getImmediate();return e(o,d)},"PUBLIC").setServiceProps(Object.assign({},Gy)))})(i,(e,t)=>new Vy(e,t,new Xv)),i.registerVersion("@firebase/firestore-compat","0.2.3")}(ct.Z);var gc=H(4941),Nd=H(440);function Pd(i,e){return function e_(i,e=ne.z){return new Y.y(t=>{let o;return null!=e?e.schedule(()=>{o=i.onSnapshot({includeMetadataChanges:!0},t)}):o=i.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=o&&o()}})}(i,e)}function Cf(i,e){return Pd(i,e).pipe((0,ie.U)(t=>({payload:t,type:"query"})))}function um(i,e){return Cf(i,e).pipe((0,Ee.O)(void 0),be(),(0,ie.U)(([t,o])=>{const d=o.payload.docChanges(),m=d.map(I=>({type:I.type,payload:I}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(o.payload.metadata)&&o.payload.docs.forEach((I,R)=>{const z=d.find(ge=>ge.doc.ref.isEqual(I.ref)),X=null==t?void 0:t.payload.docs.find(ge=>ge.ref.isEqual(I.ref));z&&JSON.stringify(z.doc.metadata)===JSON.stringify(I.metadata)||!z&&X&&JSON.stringify(X.metadata)===JSON.stringify(I.metadata)||m.push({type:"modified",payload:{oldIndex:R,newIndex:R,type:"modified",doc:I}})}),m}))}function cm(i,e,t){return um(i,t).pipe((0,Ie.R)((o,d)=>function Yy(i,e,t){return e.forEach(o=>{t.indexOf(o.type)>-1&&(i=function xr(i,e){switch(e.type){case"added":if(!i[e.newIndex]||!i[e.newIndex].doc.ref.isEqual(e.doc.ref))return qy(i,e.newIndex,0,e);break;case"modified":if(null==i[e.oldIndex]||i[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=i.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return qy(i,e.newIndex,1,e)}break;case"removed":if(i[e.oldIndex]&&i[e.oldIndex].doc.ref.isEqual(e.doc.ref))return qy(i,e.oldIndex,1)}return i}(i,o))}),i}(o,d.map(m=>m.payload),e),[]),(0,Ge.x)(),(0,ie.U)(o=>o.map(d=>({type:d.type,payload:d}))))}function qy(i,e,t,...o){const d=i.slice();return d.splice(e,t,...o),d}function Ky(i){return(!i||0===i.length)&&(i=["added","removed","modified"]),i}H(127);class Zy{constructor(e,t,o){this.ref=e,this.query=t,this.afs=o}stateChanges(e){let t=um(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ie.U)(o=>o.filter(d=>e.indexOf(d.type)>-1)))),t.pipe((0,Ee.O)(void 0),be(),(0,st.h)(([o,d])=>d.length>0||!o),(0,ie.U)(([o,d])=>d),he.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Ie.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=Ky(e);return cm(this.query,t,this.afs.schedulers.outsideAngular).pipe(he.iC)}valueChanges(e={}){return Cf(this.query,this.afs.schedulers.outsideAngular).pipe((0,ie.U)(t=>t.payload.docs.map(o=>e.idField?Object.assign(Object.assign({},o.data()),{[e.idField]:o.id}):o.data())),he.iC)}get(e){return(0,Pe.D)(this.query.get(e)).pipe(he.iC)}add(e){return this.ref.add(e)}doc(e){return new Qy(this.ref.doc(e),this.afs)}}class Qy{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const o=this.ref.collection(e),{ref:d,query:m}=n_(o,t);return new Zy(d,m,this.afs)}snapshotChanges(){return function u0(i,e){return Pd(i,e).pipe((0,Ee.O)(void 0),be(),(0,ie.U)(([t,o])=>o.exists?null!=t&&t.exists?{payload:o,type:"modified"}:{payload:o,type:"added"}:{payload:o,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(he.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ie.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Pe.D)(this.ref.get(e)).pipe(he.iC)}}class Mh{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?um(this.query,this.afs.schedulers.outsideAngular).pipe((0,ie.U)(t=>t.filter(o=>e.indexOf(o.type)>-1)),(0,st.h)(t=>t.length>0),he.iC):um(this.query,this.afs.schedulers.outsideAngular).pipe(he.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Ie.R)((t,o)=>[...t,...o],[]))}snapshotChanges(e){const t=Ky(e);return cm(this.query,t,this.afs.schedulers.outsideAngular).pipe(he.iC)}valueChanges(e={}){return Cf(this.query,this.afs.schedulers.outsideAngular).pipe((0,ie.U)(o=>o.payload.docs.map(d=>e.idField?Object.assign({[e.idField]:d.id},d.data()):d.data())),he.iC)}get(e){return(0,Pe.D)(this.query.get(e)).pipe(he.iC)}}const t_=new a.OlP("angularfire2.enableFirestorePersistence"),Np=new a.OlP("angularfire2.firestore.persistenceSettings"),Pp=new a.OlP("angularfire2.firestore.settings"),_o=new a.OlP("angularfire2.firestore.use-emulator");function n_(i,e=(t=>t)){return{query:e(i),ref:i}}let Xy=(()=>{class i{constructor(t,o,d,m,I,R,z,X,ge,ze,Dt,zt,Jt,Nn,Gn,Si,os){this.schedulers=z;const Vi=(0,et.on)(t,R,o),Eo=ge;ze&&(0,gc.nw)(Vi,R,Dt,Jt,Nn,Gn,zt,Si),[this.firestore,this.persistenceEnabled$]=(0,et.cc)(`${Vi.name}.firestore`,"AngularFirestore",Vi.name,()=>{const $i=R.runOutsideAngular(()=>Vi.firestore());if(m&&$i.settings(m),Eo&&$i.useEmulator(...Eo),d&&!(0,Re.PM)(I)){const Ui=()=>{try{return(0,Pe.D)($i.enablePersistence(X||void 0).then(()=>!0,()=>!1))}catch(Yo){return"undefined"!=typeof console&&console.warn(Yo),(0,Le.of)(!1)}};return[$i,R.runOutsideAngular(Ui)]}return[$i,(0,Le.of)(!1)]},[m,Eo,d])}collection(t,o){let d;d="string"==typeof t?this.firestore.collection(t):t;const{ref:m,query:I}=n_(d,o),R=this.schedulers.ngZone.run(()=>m);return new Zy(R,I,this)}collectionGroup(t,o){const d=o||(I=>I),m=this.firestore.collectionGroup(t);return new Mh(d(m),this)}doc(t){let o;o="string"==typeof t?this.firestore.doc(t):t;const d=this.schedulers.ngZone.run(()=>o);return new Qy(d,this)}createId(){return this.firestore.collection("_").doc().id}}return i.\u0275fac=function(t){return new(t||i)(a.LFG(et.Dh),a.LFG(et.xv,8),a.LFG(t_,8),a.LFG(Pp,8),a.LFG(a.Lbi),a.LFG(a.R0b),a.LFG(he.HU),a.LFG(Np,8),a.LFG(_o,8),a.LFG(gc.zQ,8),a.LFG(gc.Qv,8),a.LFG(gc.L6,8),a.LFG(gc._Q,8),a.LFG(gc.rT,8),a.LFG(gc.lh,8),a.LFG(gc.f7,8),a.LFG(Nd.nm,8))},i.\u0275prov=a.Yz7({token:i,factory:i.\u0275fac,providedIn:"any"}),i})()},2011:(tn,ot,H)=>{"use strict";H.d(ot,{Dh:()=>pe,GT:()=>he,cc:()=>Ge,hO:()=>Ie,on:()=>ce,pX:()=>Le,xv:()=>be});var a=H(5e3),ne=H(127),Y=H(6351);tn=H.hmd(tn);const Pe=["ngOnDestroy"],Le=(De,ct,me,vt={})=>new Proxy(De,{get:(mt,xt)=>me.runOutsideAngular(()=>{var Be;if(De[xt])return!(null===(Be=null==vt?void 0:vt.spy)||void 0===Be)&&Be.get&&vt.spy.get(xt,De[xt]),De[xt];if(Pe.indexOf(xt)>-1)return()=>{};const ht=ct.toPromise().then(ye=>{const Oe=ye&&ye[xt];return"function"==typeof Oe?Oe.bind(ye):Oe&&Oe.then?Oe.then(ve=>me.run(()=>ve)):me.run(()=>Oe)});return new Proxy(()=>{},{get:(ye,Oe)=>ht[Oe],apply:(ye,Oe,ve)=>ht.then(oe=>{var Ce;const Te=oe&&oe(...ve);return!(null===(Ce=null==vt?void 0:vt.spy)||void 0===Ce)&&Ce.apply&&vt.spy.apply(xt,ve,Te),Te})})})}),he=(De,ct)=>{ct.forEach(me=>{Object.getOwnPropertyNames(me.prototype||me).forEach(vt=>{Object.defineProperty(De.prototype,vt,Object.getOwnPropertyDescriptor(me.prototype||me,vt))})})};class Ee{constructor(ct){return ct}}const pe=new a.OlP("angularfire2.app.options"),be=new a.OlP("angularfire2.app.name");function ce(De,ct,me){const mt="object"==typeof me&&me||{};mt.name=mt.name||"string"==typeof me&&me||"[DEFAULT]";const Be=ne.Z.apps.filter(ht=>ht&&ht.name===mt.name)[0]||ct.runOutsideAngular(()=>ne.Z.initializeApp(De,mt));try{JSON.stringify(De)!==JSON.stringify(Be.options)&&de("error",`${Be.name} Firebase App already initialized with different options${tn.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(ht){}return new Ee(Be)}const de=(De,...ct)=>{(0,a.X6Q)()&&"undefined"!=typeof console&&console[De](...ct)},ie={provide:Ee,useFactory:ce,deps:[pe,a.R0b,[new a.FiY,be]]};let Ie=(()=>{class De{constructor(me){ne.Z.registerVersion("angularfire",Y.q4.full,"core"),ne.Z.registerVersion("angularfire",Y.q4.full,"app-compat"),ne.Z.registerVersion("angular",a.q4F.full,me.toString())}static initializeApp(me,vt){return{ngModule:De,providers:[{provide:pe,useValue:me},{provide:be,useValue:vt}]}}}return De.\u0275fac=function(me){return new(me||De)(a.LFG(a.Lbi))},De.\u0275mod=a.oAB({type:De}),De.\u0275inj=a.cJS({providers:[ie]}),De})();function Ge(De,ct,me,vt,mt){const[,xt,Be]=globalThis.\u0275AngularfireInstanceCache.find(ht=>ht[0]===De)||[];if(xt)return function st(De,ct){try{return De.toString()===ct.toString()}catch(me){return De===ct}}(mt,Be)||(Re("error",`${ct} was already initialized on the ${me} Firebase App with different settings.${et?" You may need to reload as Firebase is not HMR aware.":""}`),Re("warn",{is:mt,was:Be})),xt;{const ht=vt();return globalThis.\u0275AngularfireInstanceCache.push([De,ht,mt]),ht}}const et=!!tn.hot,Re=(De,...ct)=>{(0,a.X6Q)()&&"undefined"!=typeof console&&console[De](...ct)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},6351:(tn,ot,H)=>{"use strict";H.d(ot,{q4:()=>oo,iC:()=>te,HU:()=>ia,vb:()=>_s,JM:()=>yu});var a=H(5e3),ne=H(5867),Y=H(5861),Pe=H(9681),Le=H(2090),he=H(4859),Ee=H(1877),pe=H(8766);const be="@firebase/installations",ce="0.5.16",ie=`w:${ce}`,Ie="FIS_v2",ct=new Le.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function me(O){return O instanceof Le.ZR&&O.code.includes("request-failed")}function vt({projectId:O}){return`https://firebaseinstallations.googleapis.com/v1/projects/${O}/installations`}function mt(O){return{token:O.token,requestStatus:2,expiresIn:oe(O.expiresIn),creationTime:Date.now()}}function xt(O,U){return Be.apply(this,arguments)}function Be(){return(Be=(0,Y.Z)(function*(O,U){const fe=(yield U.json()).error;return ct.create("request-failed",{requestName:O,serverCode:fe.code,serverMessage:fe.message,serverStatus:fe.status})})).apply(this,arguments)}function ht({apiKey:O}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":O})}function ye(O,{refreshToken:U}){const Q=ht(O);return Q.append("Authorization",function Ce(O){return`${Ie} ${O}`}(U)),Q}function Oe(O){return ve.apply(this,arguments)}function ve(){return(ve=(0,Y.Z)(function*(O){const U=yield O();return U.status>=500&&U.status<600?O():U})).apply(this,arguments)}function oe(O){return Number(O.replace("s","000"))}function Te(O,U){return lt.apply(this,arguments)}function lt(){return(lt=(0,Y.Z)(function*({appConfig:O,heartbeatServiceProvider:U},{fid:Q}){const fe=vt(O),Ye=ht(O),wt=U.getImmediate({optional:!0});if(wt){const pr=yield wt.getHeartbeatsHeader();pr&&Ye.append("x-firebase-client",pr)}const sn={method:"POST",headers:Ye,body:JSON.stringify({fid:Q,authVersion:Ie,appId:O.appId,sdkVersion:ie})},Vn=yield Oe(()=>fetch(fe,sn));if(Vn.ok){const pr=yield Vn.json();return{fid:pr.fid||Q,registrationStatus:2,refreshToken:pr.refreshToken,authToken:mt(pr.authToken)}}throw yield xt("Create Installation",Vn)})).apply(this,arguments)}function J(O){return new Promise(U=>{setTimeout(U,O)})}const bt=/^[cdef][\w-]{21}$/;function $e(){try{const O=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(O),O[0]=112+O[0]%16;const Q=function Ue(O){return function Gt(O){return btoa(String.fromCharCode(...O)).replace(/\+/g,"-").replace(/\//g,"_")}(O).substr(0,22)}(O);return bt.test(Q)?Q:""}catch(O){return""}}function Je(O){return`${O.appName}!${O.appId}`}const Qe=new Map;function ft(O,U){const Q=Je(O);Nt(Q,U),function bn(O,U){const Q=function Qn(){return!In&&"BroadcastChannel"in self&&(In=new BroadcastChannel("[Firebase] FID Change"),In.onmessage=O=>{Nt(O.data.key,O.data.fid)}),In}();Q&&Q.postMessage({key:O,fid:U}),function Rn(){0===Qe.size&&In&&(In.close(),In=null)}()}(Q,U)}function Nt(O,U){const Q=Qe.get(O);if(Q)for(const fe of Q)fe(U)}let In=null;const Hn="firebase-installations-store";let or=null;function mr(){return or||(or=(0,pe.X3)("firebase-installations-database",1,{upgrade:(O,U)=>{0===U&&O.createObjectStore(Hn)}})),or}function Wt(O,U){return rr.apply(this,arguments)}function rr(){return(rr=(0,Y.Z)(function*(O,U){const Q=Je(O),Ye=(yield mr()).transaction(Hn,"readwrite"),wt=Ye.objectStore(Hn),Ht=yield wt.get(Q);return yield wt.put(U,Q),yield Ye.done,(!Ht||Ht.fid!==U.fid)&&ft(O,U.fid),U})).apply(this,arguments)}function Nr(O){return tr.apply(this,arguments)}function tr(){return(tr=(0,Y.Z)(function*(O){const U=Je(O),fe=(yield mr()).transaction(Hn,"readwrite");yield fe.objectStore(Hn).delete(U),yield fe.done})).apply(this,arguments)}function Jn(O,U){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,Y.Z)(function*(O,U){const Q=Je(O),Ye=(yield mr()).transaction(Hn,"readwrite"),wt=Ye.objectStore(Hn),Ht=yield wt.get(Q),sn=U(Ht);return void 0===sn?yield wt.delete(Q):yield wt.put(sn,Q),yield Ye.done,sn&&(!Ht||Ht.fid!==sn.fid)&&ft(O,sn.fid),sn})).apply(this,arguments)}function an(O){return fr.apply(this,arguments)}function fr(){return(fr=(0,Y.Z)(function*(O){let U;const Q=yield Jn(O.appConfig,fe=>{const Ye=Tn(fe),wt=gn(O,Ye);return U=wt.registrationPromise,wt.installationEntry});return""===Q.fid?{installationEntry:yield U}:{installationEntry:Q,registrationPromise:U}})).apply(this,arguments)}function Tn(O){return $n(O||{fid:$e(),registrationStatus:0})}function gn(O,U){if(0===U.registrationStatus){if(!navigator.onLine)return{installationEntry:U,registrationPromise:Promise.reject(ct.create("app-offline"))};const Q={fid:U.fid,registrationStatus:1,registrationTime:Date.now()},fe=function Tt(O,U){return yr.apply(this,arguments)}(O,Q);return{installationEntry:Q,registrationPromise:fe}}return 1===U.registrationStatus?{installationEntry:U,registrationPromise:Bn(O)}:{installationEntry:U}}function yr(){return(yr=(0,Y.Z)(function*(O,U){try{const Q=yield Te(O,U);return Wt(O.appConfig,Q)}catch(Q){throw me(Q)&&409===Q.customData.serverCode?yield Nr(O.appConfig):yield Wt(O.appConfig,{fid:U.fid,registrationStatus:0}),Q}})).apply(this,arguments)}function Bn(O){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,Y.Z)(function*(O){let U=yield Pr(O.appConfig);for(;1===U.registrationStatus;)yield J(100),U=yield Pr(O.appConfig);if(0===U.registrationStatus){const{installationEntry:Q,registrationPromise:fe}=yield an(O);return fe||Q}return U})).apply(this,arguments)}function Pr(O){return Jn(O,U=>{if(!U)throw ct.create("installation-not-found");return $n(U)})}function $n(O){return function ji(O){return 1===O.registrationStatus&&O.registrationTime+1e4<Date.now()}(O)?{fid:O.fid,registrationStatus:0}:O}function Ln(O,U){return si.apply(this,arguments)}function si(){return(si=(0,Y.Z)(function*({appConfig:O,heartbeatServiceProvider:U},Q){const fe=ir(O,Q),Ye=ye(O,Q),wt=U.getImmediate({optional:!0});if(wt){const pr=yield wt.getHeartbeatsHeader();pr&&Ye.append("x-firebase-client",pr)}const sn={method:"POST",headers:Ye,body:JSON.stringify({installation:{sdkVersion:ie,appId:O.appId}})},Vn=yield Oe(()=>fetch(fe,sn));if(Vn.ok)return mt(yield Vn.json());throw yield xt("Generate Auth Token",Vn)})).apply(this,arguments)}function ir(O,{fid:U}){return`${vt(O)}/${U}/authTokens:generate`}function Yr(O){return ei.apply(this,arguments)}function ei(){return(ei=(0,Y.Z)(function*(O,U=!1){let Q;const fe=yield Jn(O.appConfig,wt=>{if(!On(wt))throw ct.create("not-registered");const Ht=wt.authToken;if(!U&&je(Ht))return wt;if(1===Ht.requestStatus)return Q=mn(O,U),wt;{if(!navigator.onLine)throw ct.create("app-offline");const sn=He(wt);return Q=kn(O,sn),sn}});return Q?yield Q:fe.authToken})).apply(this,arguments)}function mn(O,U){return $t.apply(this,arguments)}function $t(){return($t=(0,Y.Z)(function*(O,U){let Q=yield ln(O.appConfig);for(;1===Q.authToken.requestStatus;)yield J(100),Q=yield ln(O.appConfig);const fe=Q.authToken;return 0===fe.requestStatus?Yr(O,U):fe})).apply(this,arguments)}function ln(O){return Jn(O,U=>{if(!On(U))throw ct.create("not-registered");return function dt(O){return 1===O.requestStatus&&O.requestTime+1e4<Date.now()}(U.authToken)?Object.assign(Object.assign({},U),{authToken:{requestStatus:0}}):U})}function kn(O,U){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,Y.Z)(function*(O,U){try{const Q=yield Ln(O,U),fe=Object.assign(Object.assign({},U),{authToken:Q});return yield Wt(O.appConfig,fe),Q}catch(Q){if(!me(Q)||401!==Q.customData.serverCode&&404!==Q.customData.serverCode){const fe=Object.assign(Object.assign({},U),{authToken:{requestStatus:0}});yield Wt(O.appConfig,fe)}else yield Nr(O.appConfig);throw Q}})).apply(this,arguments)}function On(O){return void 0!==O&&2===O.registrationStatus}function je(O){return 2===O.requestStatus&&!function Ne(O){const U=Date.now();return U<O.creationTime||O.creationTime+O.expiresIn<U+36e5}(O)}function He(O){const U={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},O),{authToken:U})}function on(){return(on=(0,Y.Z)(function*(O){const U=O,{installationEntry:Q,registrationPromise:fe}=yield an(U);return fe?fe.catch(console.error):Yr(U).catch(console.error),Q.fid})).apply(this,arguments)}function ar(){return(ar=(0,Y.Z)(function*(O,U=!1){const Q=O;return yield _r(Q),(yield Yr(Q,U)).token})).apply(this,arguments)}function _r(O){return Rr.apply(this,arguments)}function Rr(){return(Rr=(0,Y.Z)(function*(O){const{registrationPromise:U}=yield an(O);U&&(yield U)})).apply(this,arguments)}function Dn(O){return ct.create("missing-app-config-values",{valueName:O})}const lr="installations",kr=O=>{const U=O.getProvider("app").getImmediate(),Q=function Zt(O){if(!O||!O.options)throw Dn("App Configuration");if(!O.name)throw Dn("App Name");const U=["projectId","apiKey","appId"];for(const Q of U)if(!O.options[Q])throw Dn(Q);return{appName:O.name,projectId:O.options.projectId,apiKey:O.options.apiKey,appId:O.options.appId}}(U);return{app:U,appConfig:Q,heartbeatServiceProvider:(0,Pe._getProvider)(U,"heartbeat"),_delete:()=>Promise.resolve()}},ti=O=>{const U=O.getProvider("app").getImmediate(),Q=(0,Pe._getProvider)(U,lr).getImmediate();return{getId:()=>function tt(O){return on.apply(this,arguments)}(Q),getToken:Ye=>function _n(O){return ar.apply(this,arguments)}(Q,Ye)}};(function hi(){(0,Pe._registerComponent)(new he.wA(lr,kr,"PUBLIC")),(0,Pe._registerComponent)(new he.wA("installations-internal",ti,"PRIVATE"))})(),(0,Pe.registerVersion)(be,ce),(0,Pe.registerVersion)(be,ce,"esm2017");const Er="@firebase/remote-config",oi=new Le.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class An{constructor(U,Q,fe,Ye){this.client=U,this.storage=Q,this.storageCache=fe,this.logger=Ye}isCachedDataFresh(U,Q){if(!Q)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const fe=Date.now()-Q,Ye=fe<=U;return this.logger.debug(`Config fetch cache check. Cache age millis: ${fe}. Cache max age millis (minimumFetchIntervalMillis setting): ${U}. Is cache hit: ${Ye}.`),Ye}fetch(U){var Q=this;return(0,Y.Z)(function*(){const[fe,Ye]=yield Promise.all([Q.storage.getLastSuccessfulFetchTimestampMillis(),Q.storage.getLastSuccessfulFetchResponse()]);if(Ye&&Q.isCachedDataFresh(U.cacheMaxAgeMillis,fe))return Ye;U.eTag=Ye&&Ye.eTag;const wt=yield Q.client.fetch(U),Ht=[Q.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===wt.status&&Ht.push(Q.storage.setLastSuccessfulFetchResponse(wt)),yield Promise.all(Ht),wt})()}}function Yn(O=navigator){return O.languages&&O.languages[0]||O.language}class vr{constructor(U,Q,fe,Ye,wt,Ht){this.firebaseInstallations=U,this.sdkVersion=Q,this.namespace=fe,this.projectId=Ye,this.apiKey=wt,this.appId=Ht}fetch(U){var Q=this;return(0,Y.Z)(function*(){var fe,Ye,wt;const[Ht,sn]=yield Promise.all([Q.firebaseInstallations.getId(),Q.firebaseInstallations.getToken()]),pr=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${Q.projectId}/namespaces/${Q.namespace}:fetch?key=${Q.apiKey}`,Ar={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":U.eTag||"*"},Fn={sdk_version:Q.sdkVersion,app_instance_id:Ht,app_instance_id_token:sn,app_id:Q.appId,language_code:Yn()},hs={method:"POST",headers:Ar,body:JSON.stringify(Fn)},Gs=fetch(pr,hs),lo=new Promise((is,fa)=>{U.signal.addEventListener(()=>{const li=new Error("The operation was aborted.");li.name="AbortError",fa(li)})});let Da;try{yield Promise.race([Gs,lo]),Da=yield Gs}catch(is){let fa="fetch-client-network";throw"AbortError"===(null===(fe=is)||void 0===fe?void 0:fe.name)&&(fa="fetch-timeout"),oi.create(fa,{originalErrorMessage:null===(Ye=is)||void 0===Ye?void 0:Ye.message})}let tl=Da.status;const ha=Da.headers.get("ETag")||void 0;let nl,Wa;if(200===Da.status){let is;try{is=yield Da.json()}catch(fa){throw oi.create("fetch-client-parse",{originalErrorMessage:null===(wt=fa)||void 0===wt?void 0:wt.message})}nl=is.entries,Wa=is.state}if("INSTANCE_STATE_UNSPECIFIED"===Wa?tl=500:"NO_CHANGE"===Wa?tl=304:("NO_TEMPLATE"===Wa||"EMPTY_CONFIG"===Wa)&&(nl={}),304!==tl&&200!==tl)throw oi.create("fetch-status",{httpStatus:tl});return{status:tl,eTag:ha,config:nl}})()}}class Ke{constructor(U,Q){this.client=U,this.storage=Q}fetch(U){var Q=this;return(0,Y.Z)(function*(){const fe=(yield Q.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return Q.attemptFetch(U,fe)})()}attemptFetch(U,{throttleEndTimeMillis:Q,backoffCount:fe}){var Ye=this;return(0,Y.Z)(function*(){yield function Lr(O,U){return new Promise((Q,fe)=>{const Ye=Math.max(U-Date.now(),0),wt=setTimeout(Q,Ye);O.addEventListener(()=>{clearTimeout(wt),fe(oi.create("fetch-throttle",{throttleEndTimeMillis:U}))})})}(U.signal,Q);try{const wt=yield Ye.client.fetch(U);return yield Ye.storage.deleteThrottleMetadata(),wt}catch(wt){if(!function nt(O){if(!(O instanceof Le.ZR&&O.customData))return!1;const U=Number(O.customData.httpStatus);return 429===U||500===U||503===U||504===U}(wt))throw wt;const Ht={throttleEndTimeMillis:Date.now()+(0,Le.$s)(fe),backoffCount:fe+1};return yield Ye.storage.setThrottleMetadata(Ht),Ye.attemptFetch(U,Ht)}})()}}class en{constructor(U,Q,fe,Ye,wt){this.app=U,this._client=Q,this._storageCache=fe,this._storage=Ye,this._logger=wt,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Sn(O,U){var Q;const fe=O.target.error||void 0;return oi.create(U,{originalErrorMessage:fe&&(null===(Q=fe)||void 0===Q?void 0:Q.message)})}const qn="app_namespace_store";class Sr{constructor(U,Q,fe,Ye=function Rs(){return new Promise((O,U)=>{var Q;try{const fe=indexedDB.open("firebase_remote_config",1);fe.onerror=Ye=>{U(Sn(Ye,"storage-open"))},fe.onsuccess=Ye=>{O(Ye.target.result)},fe.onupgradeneeded=Ye=>{0===Ye.oldVersion&&Ye.target.result.createObjectStore(qn,{keyPath:"compositeKey"})}}catch(fe){U(oi.create("storage-open",{originalErrorMessage:null===(Q=fe)||void 0===Q?void 0:Q.message}))}})}()){this.appId=U,this.appName=Q,this.namespace=fe,this.openDbPromise=Ye}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(U){return this.set("last_fetch_status",U)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(U){return this.set("last_successful_fetch_timestamp_millis",U)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(U){return this.set("last_successful_fetch_response",U)}getActiveConfig(){return this.get("active_config")}setActiveConfig(U){return this.set("active_config",U)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(U){return this.set("active_config_etag",U)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(U){return this.set("throttle_metadata",U)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(U){var Q=this;return(0,Y.Z)(function*(){const fe=yield Q.openDbPromise;return new Promise((Ye,wt)=>{var Ht;const Vn=fe.transaction([qn],"readonly").objectStore(qn),pr=Q.createCompositeKey(U);try{const Ar=Vn.get(pr);Ar.onerror=Fn=>{wt(Sn(Fn,"storage-get"))},Ar.onsuccess=Fn=>{const hs=Fn.target.result;Ye(hs?hs.value:void 0)}}catch(Ar){wt(oi.create("storage-get",{originalErrorMessage:null===(Ht=Ar)||void 0===Ht?void 0:Ht.message}))}})})()}set(U,Q){var fe=this;return(0,Y.Z)(function*(){const Ye=yield fe.openDbPromise;return new Promise((wt,Ht)=>{var sn;const pr=Ye.transaction([qn],"readwrite").objectStore(qn),Ar=fe.createCompositeKey(U);try{const Fn=pr.put({compositeKey:Ar,value:Q});Fn.onerror=hs=>{Ht(Sn(hs,"storage-set"))},Fn.onsuccess=()=>{wt()}}catch(Fn){Ht(oi.create("storage-set",{originalErrorMessage:null===(sn=Fn)||void 0===sn?void 0:sn.message}))}})})()}delete(U){var Q=this;return(0,Y.Z)(function*(){const fe=yield Q.openDbPromise;return new Promise((Ye,wt)=>{var Ht;const Vn=fe.transaction([qn],"readwrite").objectStore(qn),pr=Q.createCompositeKey(U);try{const Ar=Vn.delete(pr);Ar.onerror=Fn=>{wt(Sn(Fn,"storage-delete"))},Ar.onsuccess=()=>{Ye()}}catch(Ar){wt(oi.create("storage-delete",{originalErrorMessage:null===(Ht=Ar)||void 0===Ht?void 0:Ht.message}))}})})()}createCompositeKey(U){return[this.appId,this.appName,this.namespace,U].join()}}class Ir{constructor(U){this.storage=U}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var U=this;return(0,Y.Z)(function*(){const Q=U.storage.getLastFetchStatus(),fe=U.storage.getLastSuccessfulFetchTimestampMillis(),Ye=U.storage.getActiveConfig(),wt=yield Q;wt&&(U.lastFetchStatus=wt);const Ht=yield fe;Ht&&(U.lastSuccessfulFetchTimestampMillis=Ht);const sn=yield Ye;sn&&(U.activeConfig=sn)})()}setLastFetchStatus(U){return this.lastFetchStatus=U,this.storage.setLastFetchStatus(U)}setLastSuccessfulFetchTimestampMillis(U){return this.lastSuccessfulFetchTimestampMillis=U,this.storage.setLastSuccessfulFetchTimestampMillis(U)}setActiveConfig(U){return this.activeConfig=U,this.storage.setActiveConfig(U)}}function Os(){return aa.apply(this,arguments)}function aa(){return(aa=(0,Y.Z)(function*(){if(!(0,Le.hl)())return!1;try{return yield(0,Le.eu)()}catch(O){return!1}})).apply(this,arguments)}!function Xn(){(0,Pe._registerComponent)(new he.wA("remote-config",function O(U,{instanceIdentifier:Q}){const fe=U.getProvider("app").getImmediate(),Ye=U.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw oi.create("registration-window");if(!(0,Le.hl)())throw oi.create("indexed-db-unavailable");const{projectId:wt,apiKey:Ht,appId:sn}=fe.options;if(!wt)throw oi.create("registration-project-id");if(!Ht)throw oi.create("registration-api-key");if(!sn)throw oi.create("registration-app-id");const Vn=new Sr(sn,fe.name,Q=Q||"firebase"),pr=new Ir(Vn),Ar=new Ee.Yd(Er);Ar.logLevel=Ee.in.ERROR;const Fn=new vr(Ye,Pe.SDK_VERSION,Q,wt,Ht,sn),hs=new Ke(Fn,Vn),Gs=new An(hs,Vn,pr,Ar),lo=new en(fe,Gs,pr,Vn,Ar);return function we(O){const U=(0,Le.m9)(O);U._initializePromise||(U._initializePromise=U._storageCache.loadFromStorage().then(()=>{U._isInitializationComplete=!0}))}(lo),lo},"PUBLIC").setMultipleInstances(!0)),(0,Pe.registerVersion)(Er,"0.3.15"),(0,Pe.registerVersion)(Er,"0.3.15","esm2017")}();const es="/firebase-messaging-sw.js",Bs="/firebase-cloud-messaging-push-scope",Tr="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",mi="google.c.a.c_id",Ys="google.c.a.c_l",$s="google.c.a.ts",pi="google.c.a.e";var ps=(()=>{return(O=ps||(ps={})).PUSH_RECEIVED="push-received",O.NOTIFICATION_CLICKED="notification-clicked",ps;var O})();function Es(O){const U=new Uint8Array(O);return btoa(String.fromCharCode(...U)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function gs(O){const Q=(O+"=".repeat((4-O.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),fe=atob(Q),Ye=new Uint8Array(fe.length);for(let wt=0;wt<fe.length;++wt)Ye[wt]=fe.charCodeAt(wt);return Ye}const Ci="fcm_token_details_db",Hi="fcm_token_object_Store";function ts(O){return ms.apply(this,arguments)}function ms(){return ms=(0,Y.Z)(function*(O){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(wt=>wt.name).includes(Ci))return null;let U=null;return(yield(0,pe.X3)(Ci,5,{upgrade:(fe=(0,Y.Z)(function*(Ye,wt,Ht,sn){var Vn;if(wt<2||!Ye.objectStoreNames.contains(Hi))return;const pr=sn.objectStore(Hi),Ar=yield pr.index("fcmSenderId").get(O);if(yield pr.clear(),Ar)if(2===wt){const Fn=Ar;if(!Fn.auth||!Fn.p256dh||!Fn.endpoint)return;U={token:Fn.fcmToken,createTime:null!==(Vn=Fn.createTime)&&void 0!==Vn?Vn:Date.now(),subscriptionOptions:{auth:Fn.auth,p256dh:Fn.p256dh,endpoint:Fn.endpoint,swScope:Fn.swScope,vapidKey:"string"==typeof Fn.vapidKey?Fn.vapidKey:Es(Fn.vapidKey)}}}else if(3===wt){const Fn=Ar;U={token:Fn.fcmToken,createTime:Fn.createTime,subscriptionOptions:{auth:Es(Fn.auth),p256dh:Es(Fn.p256dh),endpoint:Fn.endpoint,swScope:Fn.swScope,vapidKey:Es(Fn.vapidKey)}}}else if(4===wt){const Fn=Ar;U={token:Fn.fcmToken,createTime:Fn.createTime,subscriptionOptions:{auth:Es(Fn.auth),p256dh:Es(Fn.p256dh),endpoint:Fn.endpoint,swScope:Fn.swScope,vapidKey:Es(Fn.vapidKey)}}}}),function(wt,Ht,sn,Vn){return fe.apply(this,arguments)})})).close(),yield(0,pe.Lj)(Ci),yield(0,pe.Lj)("fcm_vapid_details_db"),yield(0,pe.Lj)("undefined"),ai(U)?U:null;var fe}),ms.apply(this,arguments)}function ai(O){if(!O||!O.subscriptionOptions)return!1;const{subscriptionOptions:U}=O;return"number"==typeof O.createTime&&O.createTime>0&&"string"==typeof O.token&&O.token.length>0&&"string"==typeof U.auth&&U.auth.length>0&&"string"==typeof U.p256dh&&U.p256dh.length>0&&"string"==typeof U.endpoint&&U.endpoint.length>0&&"string"==typeof U.swScope&&U.swScope.length>0&&"string"==typeof U.vapidKey&&U.vapidKey.length>0}const wr="firebase-messaging-store";let yi=null;function nr(){return yi||(yi=(0,pe.X3)("firebase-messaging-database",1,{upgrade:(O,U)=>{0===U&&O.createObjectStore(wr)}})),yi}function ys(O){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,Y.Z)(function*(O){const U=Is(O),fe=yield(yield nr()).transaction(wr).objectStore(wr).get(U);if(fe)return fe;{const Ye=yield ts(O.appConfig.senderId);if(Ye)return yield Or(O,Ye),Ye}})).apply(this,arguments)}function Or(O,U){return ls.apply(this,arguments)}function ls(){return(ls=(0,Y.Z)(function*(O,U){const Q=Is(O),Ye=(yield nr()).transaction(wr,"readwrite");return yield Ye.objectStore(wr).put(U,Q),yield Ye.done,U})).apply(this,arguments)}function Ts(O){return us.apply(this,arguments)}function us(){return(us=(0,Y.Z)(function*(O){const U=Is(O),fe=(yield nr()).transaction(wr,"readwrite");yield fe.objectStore(wr).delete(U),yield fe.done})).apply(this,arguments)}function Is({appConfig:O}){return O.appId}const Vr=new Le.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Kn(O,U){return to.apply(this,arguments)}function to(){return(to=(0,Y.Z)(function*(O,U){var Q;const fe=yield va(O),Ye=qt(U),wt={method:"POST",headers:fe,body:JSON.stringify(Ye)};let Ht;try{Ht=yield(yield fetch(Ps(O.appConfig),wt)).json()}catch(sn){throw Vr.create("token-subscribe-failed",{errorInfo:null===(Q=sn)||void 0===Q?void 0:Q.toString()})}if(Ht.error)throw Vr.create("token-subscribe-failed",{errorInfo:Ht.error.message});if(!Ht.token)throw Vr.create("token-subscribe-no-token");return Ht.token})).apply(this,arguments)}function qo(O,U){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,Y.Z)(function*(O,U){var Q;const fe=yield va(O),Ye=qt(U.subscriptionOptions),wt={method:"PATCH",headers:fe,body:JSON.stringify(Ye)};let Ht;try{Ht=yield(yield fetch(`${Ps(O.appConfig)}/${U.token}`,wt)).json()}catch(sn){throw Vr.create("token-update-failed",{errorInfo:null===(Q=sn)||void 0===Q?void 0:Q.toString()})}if(Ht.error)throw Vr.create("token-update-failed",{errorInfo:Ht.error.message});if(!Ht.token)throw Vr.create("token-update-no-token");return Ht.token})).apply(this,arguments)}function Po(O,U){return ya.apply(this,arguments)}function ya(){return(ya=(0,Y.Z)(function*(O,U){var Q;const Ye={method:"DELETE",headers:yield va(O)};try{const Ht=yield(yield fetch(`${Ps(O.appConfig)}/${U}`,Ye)).json();if(Ht.error)throw Vr.create("token-unsubscribe-failed",{errorInfo:Ht.error.message})}catch(wt){throw Vr.create("token-unsubscribe-failed",{errorInfo:null===(Q=wt)||void 0===Q?void 0:Q.toString()})}})).apply(this,arguments)}function Ps({projectId:O}){return`https://fcmregistrations.googleapis.com/v1/projects/${O}/registrations`}function va(O){return wo.apply(this,arguments)}function wo(){return(wo=(0,Y.Z)(function*({appConfig:O,installations:U}){const Q=yield U.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":O.apiKey,"x-goog-firebase-installations-auth":`FIS ${Q}`})})).apply(this,arguments)}function qt({p256dh:O,auth:U,endpoint:Q,vapidKey:fe}){const Ye={web:{endpoint:Q,auth:U,p256dh:O}};return fe!==Tr&&(Ye.web.applicationPubKey=fe),Ye}const br=6048e5;function Ko(O){return ri.apply(this,arguments)}function ri(){return(ri=(0,Y.Z)(function*(O){const U=yield B(O.swRegistration,O.vapidKey),Q={vapidKey:O.vapidKey,swScope:O.swRegistration.scope,endpoint:U.endpoint,auth:Es(U.getKey("auth")),p256dh:Es(U.getKey("p256dh"))},fe=yield ys(O.firebaseDependencies);if(fe){if(g(fe.subscriptionOptions,Q))return Date.now()>=fe.createTime+br?Gi(O,{token:fe.token,createTime:Date.now(),subscriptionOptions:Q}):fe.token;try{yield Po(O.firebaseDependencies,fe.token)}catch(Ye){console.warn(Ye)}return As(O.firebaseDependencies,Q)}return As(O.firebaseDependencies,Q)})).apply(this,arguments)}function Ti(O){return bo.apply(this,arguments)}function bo(){return(bo=(0,Y.Z)(function*(O){const U=yield ys(O.firebaseDependencies);U&&(yield Po(O.firebaseDependencies,U.token),yield Ts(O.firebaseDependencies));const Q=yield O.swRegistration.pushManager.getSubscription();return!Q||Q.unsubscribe()})).apply(this,arguments)}function Gi(O,U){return ws.apply(this,arguments)}function ws(){return(ws=(0,Y.Z)(function*(O,U){try{const Q=yield qo(O.firebaseDependencies,U),fe=Object.assign(Object.assign({},U),{token:Q,createTime:Date.now()});return yield Or(O.firebaseDependencies,fe),Q}catch(Q){throw yield Ti(O),Q}})).apply(this,arguments)}function As(O,U){return G.apply(this,arguments)}function G(){return(G=(0,Y.Z)(function*(O,U){const fe={token:yield Kn(O,U),createTime:Date.now(),subscriptionOptions:U};return yield Or(O,fe),fe.token})).apply(this,arguments)}function B(O,U){return M.apply(this,arguments)}function M(){return(M=(0,Y.Z)(function*(O,U){return(yield O.pushManager.getSubscription())||O.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:gs(U)})})).apply(this,arguments)}function g(O,U){return U.vapidKey===O.vapidKey&&U.endpoint===O.endpoint&&U.auth===O.auth&&U.p256dh===O.p256dh}function P(O){const U={from:O.from,collapseKey:O.collapse_key,messageId:O.fcmMessageId};return function E(O,U){if(!U.notification)return;O.notification={};const Q=U.notification.title;Q&&(O.notification.title=Q);const fe=U.notification.body;fe&&(O.notification.body=fe);const Ye=U.notification.image;Ye&&(O.notification.image=Ye);const wt=U.notification.icon;wt&&(O.notification.icon=wt)}(U,O),function V(O,U){!U.data||(O.data=U.data)}(U,O),function se(O,U){var Q,fe,Ye,wt,Ht;if(!(U.fcmOptions||null!==(Q=U.notification)&&void 0!==Q&&Q.click_action))return;O.fcmOptions={};const sn=null!==(Ye=null===(fe=U.fcmOptions)||void 0===fe?void 0:fe.link)&&void 0!==Ye?Ye:null===(wt=U.notification)||void 0===wt?void 0:wt.click_action;sn&&(O.fcmOptions.link=sn);const Vn=null===(Ht=U.fcmOptions)||void 0===Ht?void 0:Ht.analytics_label;Vn&&(O.fcmOptions.analyticsLabel=Vn)}(U,O),U}function ut(O){return"object"==typeof O&&!!O&&mi in O}function Xt(O,U){const Q=[];for(let fe=0;fe<O.length;fe++)Q.push(O.charAt(fe)),fe<U.length&&Q.push(U.charAt(fe));return Q.join("")}function Zn(O){return Vr.create("missing-app-config-values",{valueName:O})}Xt("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Xt("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ni{constructor(U,Q,fe){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Ye=function yn(O){if(!O||!O.options)throw Zn("App Configuration Object");if(!O.name)throw Zn("App Name");const U=["projectId","apiKey","appId","messagingSenderId"],{options:Q}=O;for(const fe of U)if(!Q[fe])throw Zn(fe);return{appName:O.name,projectId:Q.projectId,apiKey:Q.apiKey,appId:Q.appId,senderId:Q.messagingSenderId}}(U);this.firebaseDependencies={app:U,appConfig:Ye,installations:Q,analyticsProvider:fe}}_delete(){return Promise.resolve()}}function Ai(O){return ci.apply(this,arguments)}function ci(){return(ci=(0,Y.Z)(function*(O){var U;try{O.swRegistration=yield navigator.serviceWorker.register(es,{scope:Bs}),O.swRegistration.update().catch(()=>{})}catch(Q){throw Vr.create("failed-service-worker-registration",{browserErrorMessage:null===(U=Q)||void 0===U?void 0:U.message})}})).apply(this,arguments)}function ns(O,U){return bs.apply(this,arguments)}function bs(){return(bs=(0,Y.Z)(function*(O,U){if(!U&&!O.swRegistration&&(yield Ai(O)),U||!O.swRegistration){if(!(U instanceof ServiceWorkerRegistration))throw Vr.create("invalid-sw-registration");O.swRegistration=U}})).apply(this,arguments)}function Cs(O,U){return cs.apply(this,arguments)}function cs(){return(cs=(0,Y.Z)(function*(O,U){U?O.vapidKey=U:O.vapidKey||(O.vapidKey=Tr)})).apply(this,arguments)}function Co(){return(Co=(0,Y.Z)(function*(O,U){if(!navigator)throw Vr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Vr.create("permission-blocked");return yield Cs(O,null==U?void 0:U.vapidKey),yield ns(O,null==U?void 0:U.serviceWorkerRegistration),Ko(O)})).apply(this,arguments)}function la(O,U,Q){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,Y.Z)(function*(O,U,Q){const fe=ua(U);(yield O.firebaseDependencies.analyticsProvider.get()).logEvent(fe,{message_id:Q[mi],message_name:Q[Ys],message_time:Q[$s],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ua(O){switch(O){case ps.NOTIFICATION_CLICKED:return"notification_open";case ps.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Z(){return(Z=(0,Y.Z)(function*(O,U){const Q=U.data;if(!Q.isFirebaseMessaging)return;O.onMessageHandler&&Q.messageType===ps.PUSH_RECEIVED&&("function"==typeof O.onMessageHandler?O.onMessageHandler(P(Q)):O.onMessageHandler.next(P(Q)));const fe=Q.data;ut(fe)&&"1"===fe[pi]&&(yield la(O,Q.messageType,fe))})).apply(this,arguments)}const $="@firebase/messaging",ke=O=>{const U=new ni(O.getProvider("app").getImmediate(),O.getProvider("installations-internal").getImmediate(),O.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",Q=>function F(O,U){return Z.apply(this,arguments)}(U,Q)),U},St=O=>{const U=O.getProvider("messaging").getImmediate();return{getToken:fe=>function ks(O,U){return Co.apply(this,arguments)}(U,fe)}};function xn(){return qr.apply(this,arguments)}function qr(){return(qr=(0,Y.Z)(function*(){try{yield(0,Le.eu)()}catch(O){return!1}return"undefined"!=typeof window&&(0,Le.hl)()&&(0,Le.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function kt(){(0,Pe._registerComponent)(new he.wA("messaging",ke,"PUBLIC")),(0,Pe._registerComponent)(new he.wA("messaging-internal",St,"PRIVATE")),(0,Pe.registerVersion)($,"0.11.0"),(0,Pe.registerVersion)($,"0.11.0","esm2017")}();const ro="analytics",Do="firebase_id",Bi="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",xa="https://www.googletagmanager.com/gtag/js",rs=new Ee.Yd("@firebase/analytics");function Wi(O){return Promise.all(O.map(U=>U.catch(Q=>Q)))}function bl(O,U){const Q=document.createElement("script");Q.src=`${xa}?l=${O}&id=${U}`,Q.async=!0,document.head.appendChild(Q)}function Xa(O,U,Q,fe,Ye,wt){return Ha.apply(this,arguments)}function Ha(){return(Ha=(0,Y.Z)(function*(O,U,Q,fe,Ye,wt){const Ht=fe[Ye];try{if(Ht)yield U[Ht];else{const Vn=(yield Wi(Q)).find(pr=>pr.measurementId===Ye);Vn&&(yield U[Vn.appId])}}catch(sn){rs.error(sn)}O("config",Ye,wt)})).apply(this,arguments)}function Ma(O,U,Q,fe,Ye){return fo.apply(this,arguments)}function fo(){return(fo=(0,Y.Z)(function*(O,U,Q,fe,Ye){try{let wt=[];if(Ye&&Ye.send_to){let Ht=Ye.send_to;Array.isArray(Ht)||(Ht=[Ht]);const sn=yield Wi(Q);for(const Vn of Ht){const pr=sn.find(Fn=>Fn.measurementId===Vn),Ar=pr&&U[pr.appId];if(!Ar){wt=[];break}wt.push(Ar)}}0===wt.length&&(wt=Object.values(U)),yield Promise.all(wt),O("event",fe,Ye||{})}catch(wt){rs.error(wt)}})).apply(this,arguments)}function du(O){const U=window.document.getElementsByTagName("script");for(const Q of Object.values(U))if(Q.src&&Q.src.includes(xa)&&Q.src.includes(O))return Q;return null}const zr=new Le.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),ca=new class io{constructor(U={},Q=1e3){this.throttleMetadata=U,this.intervalMillis=Q}getThrottleMetadata(U){return this.throttleMetadata[U]}setThrottleMetadata(U,Q){this.throttleMetadata[U]=Q}deleteThrottleMetadata(U){delete this.throttleMetadata[U]}};function rn(O){return new Headers({Accept:"application/json","x-goog-api-key":O})}function vi(O){return js.apply(this,arguments)}function js(){return(js=(0,Y.Z)(function*(O){var U;const{appId:Q,apiKey:fe}=O,Ye={method:"GET",headers:rn(fe)},wt=Bi.replace("{app-id}",Q),Ht=yield fetch(wt,Ye);if(200!==Ht.status&&304!==Ht.status){let sn="";try{const Vn=yield Ht.json();null!==(U=Vn.error)&&void 0!==U&&U.message&&(sn=Vn.error.message)}catch(Vn){}throw zr.create("config-fetch-failed",{httpStatus:Ht.status,responseMessage:sn})}return Ht.json()})).apply(this,arguments)}function zi(O){return wn.apply(this,arguments)}function wn(){return(wn=(0,Y.Z)(function*(O,U=ca,Q){const{appId:fe,apiKey:Ye,measurementId:wt}=O.options;if(!fe)throw zr.create("no-app-id");if(!Ye){if(wt)return{measurementId:wt,appId:fe};throw zr.create("no-api-key")}const Ht=U.getThrottleMetadata(fe)||{backoffCount:0,throttleEndTimeMillis:Date.now()},sn=new Qt;return setTimeout((0,Y.Z)(function*(){sn.abort()}),void 0!==Q?Q:6e4),En({appId:fe,apiKey:Ye,measurementId:wt},Ht,sn,U)})).apply(this,arguments)}function En(O,U,Q){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,Y.Z)(function*(O,{throttleEndTimeMillis:U,backoffCount:Q},fe,Ye=ca){var wt,Ht;const{appId:sn,measurementId:Vn}=O;try{yield cn(fe,U)}catch(pr){if(Vn)return rs.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Vn} provided in the "measurementId" field in the local Firebase config. [${null===(wt=pr)||void 0===wt?void 0:wt.message}]`),{appId:sn,measurementId:Vn};throw pr}try{const pr=yield vi(O);return Ye.deleteThrottleMetadata(sn),pr}catch(pr){const Ar=pr;if(!Pt(Ar)){if(Ye.deleteThrottleMetadata(sn),Vn)return rs.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Vn} provided in the "measurementId" field in the local Firebase config. [${null==Ar?void 0:Ar.message}]`),{appId:sn,measurementId:Vn};throw pr}const Fn=503===Number(null===(Ht=null==Ar?void 0:Ar.customData)||void 0===Ht?void 0:Ht.httpStatus)?(0,Le.$s)(Q,Ye.intervalMillis,30):(0,Le.$s)(Q,Ye.intervalMillis),hs={throttleEndTimeMillis:Date.now()+Fn,backoffCount:Q+1};return Ye.setThrottleMetadata(sn,hs),rs.debug(`Calling attemptFetch again in ${Fn} millis`),En(O,hs,fe,Ye)}})).apply(this,arguments)}function cn(O,U){return new Promise((Q,fe)=>{const Ye=Math.max(U-Date.now(),0),wt=setTimeout(Q,Ye);O.addEventListener(()=>{clearTimeout(wt),fe(zr.create("fetch-throttle",{throttleEndTimeMillis:U}))})})}function Pt(O){if(!(O instanceof Le.ZR&&O.customData))return!1;const U=Number(O.customData.httpStatus);return 429===U||500===U||503===U||504===U}class Qt{constructor(){this.listeners=[]}addEventListener(U){this.listeners.push(U)}abort(){this.listeners.forEach(U=>U())}}let Ni,da;function Ea(){return(Ea=(0,Y.Z)(function*(O,U,Q,fe,Ye){if(Ye&&Ye.global)O("event",Q,fe);else{const wt=yield U;O("event",Q,Object.assign(Object.assign({},fe),{send_to:wt}))}})).apply(this,arguments)}function ur(O){da=O}function Ia(O){Ni=O}function ll(){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,Y.Z)(function*(){var O;if(!(0,Le.hl)())return rs.warn(zr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Le.eu)()}catch(U){return rs.warn(zr.create("indexeddb-unavailable",{errorInfo:null===(O=U)||void 0===O?void 0:O.toString()}).message),!1}return!0})).apply(this,arguments)}function ea(){return(ea=(0,Y.Z)(function*(O,U,Q,fe,Ye,wt,Ht){var sn;const Vn=zi(O);Vn.then(Gs=>{Q[Gs.measurementId]=Gs.appId,O.options.measurementId&&Gs.measurementId!==O.options.measurementId&&rs.warn(`The measurement ID in the local Firebase config (${O.options.measurementId}) does not match the measurement ID fetched from the server (${Gs.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Gs=>rs.error(Gs)),U.push(Vn);const pr=ll().then(Gs=>{if(Gs)return fe.getId()}),[Ar,Fn]=yield Promise.all([Vn,pr]);du(wt)||bl(wt,Ar.measurementId),da&&(Ye("consent","default",da),ur(void 0)),Ye("js",new Date);const hs=null!==(sn=null==Ht?void 0:Ht.config)&&void 0!==sn?sn:{};return hs.origin="firebase",hs.update=!0,null!=Fn&&(hs[Do]=Fn),Ye("config",Ar.measurementId,hs),Ni&&(Ye("set",Ni),Ia(void 0)),Ar.measurementId})).apply(this,arguments)}class Qr{constructor(U){this.app=U}_delete(){return delete go[this.app.options.appId],Promise.resolve()}}let go={},_i=[];const dn={};let di,ba,wa="dataLayer",So=!1;function fu(O,U,Q){!function Na(){const O=[];if((0,Le.ru)()&&O.push("This is a browser extension environment."),(0,Le.zI)()||O.push("Cookies are not available."),O.length>0){const U=O.map((fe,Ye)=>`(${Ye+1}) ${fe}`).join(" "),Q=zr.create("invalid-analytics-context",{errorInfo:U});rs.warn(Q.message)}}();const fe=O.options.appId;if(!fe)throw zr.create("no-app-id");if(!O.options.apiKey){if(!O.options.measurementId)throw zr.create("no-api-key");rs.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${O.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=go[fe])throw zr.create("already-exists",{id:fe});if(!So){!function Gl(O){let U=[];Array.isArray(window[O])?U=window[O]:window[O]=U}(wa);const{wrappedGtag:wt,gtagCore:Ht}=function po(O,U,Q,fe,Ye){let wt=function(...Ht){window[fe].push(arguments)};return window[Ye]&&"function"==typeof window[Ye]&&(wt=window[Ye]),window[Ye]=function Zo(O,U,Q,fe){function wt(){return(wt=(0,Y.Z)(function*(Ht,sn,Vn){try{"event"===Ht?yield Ma(O,U,Q,sn,Vn):"config"===Ht?yield Xa(O,U,Q,fe,sn,Vn):"consent"===Ht?O("consent","update",Vn):O("set",sn)}catch(pr){rs.error(pr)}})).apply(this,arguments)}return function Ye(Ht,sn,Vn){return wt.apply(this,arguments)}}(wt,O,U,Q),{gtagCore:wt,wrappedGtag:window[Ye]}}(go,_i,dn,wa,"gtag");ba=wt,di=Ht,So=!0}return go[fe]=function er(O,U,Q,fe,Ye,wt,Ht){return ea.apply(this,arguments)}(O,_i,dn,U,di,wa,Q),new Qr(O)}function pu(){return ql.apply(this,arguments)}function ql(){return(ql=(0,Y.Z)(function*(){if((0,Le.ru)()||!(0,Le.zI)()||!(0,Le.hl)())return!1;try{return yield(0,Le.eu)()}catch(O){return!1}})).apply(this,arguments)}const Ca="@firebase/analytics";!function yo(){(0,Pe._registerComponent)(new he.wA(ro,(U,{options:Q})=>fu(U.getProvider("app").getImmediate(),U.getProvider("installations-internal").getImmediate(),Q),"PUBLIC")),(0,Pe._registerComponent)(new he.wA("analytics-internal",function O(U){try{const Q=U.getProvider(ro).getImmediate();return{logEvent:(fe,Ye,wt)=>function so(O,U,Q,fe){O=(0,Le.m9)(O),function Ra(O,U,Q,fe,Ye){return Ea.apply(this,arguments)}(ba,go[O.app.options.appId],U,Q,fe).catch(Ye=>rs.error(Ye))}(Q,fe,Ye,wt)}}catch(Q){throw zr.create("interop-component-reg-failed",{reason:Q})}},"PRIVATE")),(0,Pe.registerVersion)(Ca,"0.8.4"),(0,Pe.registerVersion)(Ca,"0.8.4","esm2017")}();var xs=H(341),Ga=H(353),Pa=H(2868),ka=H(8915),Dl=H(2102);const oo=new a.GfV("7.5.0"),Ja="__angularfire_symbol__analyticsIsSupportedValue",ra="__angularfire_symbol__analyticsIsSupported",Lo="__angularfire_symbol__remoteConfigIsSupportedValue",Pi="__angularfire_symbol__remoteConfigIsSupported",Ms="__angularfire_symbol__messagingIsSupportedValue",ds="__angularfire_symbol__messagingIsSupported";function yu(O,U,Q){if(U){if(1===U.length)return U[0];const wt=U.filter(Ht=>Ht.app===Q);if(1===wt.length)return wt[0]}return Q.container.getProvider(O).getImmediate({optional:!0})}globalThis[ra]||(globalThis[ra]=pu().then(O=>globalThis[Ja]=O).catch(()=>globalThis[Ja]=!1)),globalThis[ds]||(globalThis[ds]=xn().then(O=>globalThis[Ms]=O).catch(()=>globalThis[Ms]=!1)),globalThis[Pi]||(globalThis[Pi]=Os().then(O=>globalThis[Lo]=O).catch(()=>globalThis[Lo]=!1));const _s=(O,U)=>{const Q=U?[U]:(0,ne.C6)(),fe=[];return Q.forEach(Ye=>{Ye.container.getProvider(O).instances.forEach(Ht=>{fe.includes(Ht)||fe.push(Ht)})}),fe};function el(){}class Vo{constructor(U,Q=xs.N){this.zone=U,this.delegate=Q}now(){return this.delegate.now()}schedule(U,Q,fe){const Ye=this.zone;return this.delegate.schedule(function(Ht){Ye.runGuarded(()=>{U.apply(this,[Ht])})},Q,fe)}}class Yi{constructor(U){this.zone=U,this.task=null}call(U,Q){const fe=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",el,{},el,el)),Q.pipe((0,Pa.b)({next:fe,complete:fe,error:fe})).subscribe(U).add(fe)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let ia=(()=>{class O{constructor(Q){this.ngZone=Q,this.outsideAngular=Q.runOutsideAngular(()=>new Vo(Zone.current)),this.insideAngular=Q.run(()=>new Vo(Zone.current,Ga.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return O.\u0275fac=function(Q){return new(Q||O)(a.LFG(a.R0b))},O.\u0275prov=a.Yz7({token:O,factory:O.\u0275fac,providedIn:"root"}),O})();function S(){const O=globalThis.\u0275AngularFireScheduler;if(!O)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return O}function te(O){return S(),function Ae(O){return function(Q){return(Q=Q.lift(new Yi(O.ngZone))).pipe((0,ka.R)(O.outsideAngular),(0,Dl.QV)(O.insideAngular))}}(S())(O)}},2090:(tn,ot,H)=>{"use strict";H.d(ot,{$s:()=>ln,BH:()=>at,DV:()=>Hn,Dv:()=>Bn,G6:()=>xt,GJ:()=>Wn,L:()=>pe,LL:()=>Qe,Pz:()=>bt,Sg:()=>$e,UG:()=>st,UI:()=>mr,US:()=>he,Wj:()=>$n,Wl:()=>Nt,Yr:()=>mt,ZB:()=>de,ZR:()=>Je,aH:()=>Gt,b$:()=>De,cI:()=>Vt,dS:()=>Ln,eu:()=>ht,g5:()=>Y,gK:()=>Dr,gQ:()=>an,h$:()=>Ee,hl:()=>Be,hu:()=>ne,jU:()=>et,lb:()=>ji,m9:()=>On,ne:()=>fr,p$:()=>ce,pd:()=>Cr,r3:()=>cr,ru:()=>Re,tV:()=>be,uI:()=>Ge,ug:()=>si,vZ:()=>Wt,w1:()=>me,w9:()=>Rn,xO:()=>tr,xb:()=>or,z$:()=>Ie,zI:()=>ye,zd:()=>Jn});const ne=function(je,Ne){if(!je)throw Y(Ne)},Y=function(je){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+je)},Pe=function(je){const Ne=[];let He=0;for(let dt=0;dt<je.length;dt++){let tt=je.charCodeAt(dt);tt<128?Ne[He++]=tt:tt<2048?(Ne[He++]=tt>>6|192,Ne[He++]=63&tt|128):55296==(64512&tt)&&dt+1<je.length&&56320==(64512&je.charCodeAt(dt+1))?(tt=65536+((1023&tt)<<10)+(1023&je.charCodeAt(++dt)),Ne[He++]=tt>>18|240,Ne[He++]=tt>>12&63|128,Ne[He++]=tt>>6&63|128,Ne[He++]=63&tt|128):(Ne[He++]=tt>>12|224,Ne[He++]=tt>>6&63|128,Ne[He++]=63&tt|128)}return Ne},he={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(je,Ne){if(!Array.isArray(je))throw Error("encodeByteArray takes an array as a parameter");this.init_();const He=Ne?this.byteToCharMapWebSafe_:this.byteToCharMap_,dt=[];for(let tt=0;tt<je.length;tt+=3){const on=je[tt],_n=tt+1<je.length,ar=_n?je[tt+1]:0,_r=tt+2<je.length,Rr=_r?je[tt+2]:0;let xe=(15&ar)<<2|Rr>>6,Et=63&Rr;_r||(Et=64,_n||(xe=64)),dt.push(He[on>>2],He[(3&on)<<4|ar>>4],He[xe],He[Et])}return dt.join("")},encodeString(je,Ne){return this.HAS_NATIVE_SUPPORT&&!Ne?btoa(je):this.encodeByteArray(Pe(je),Ne)},decodeString(je,Ne){return this.HAS_NATIVE_SUPPORT&&!Ne?atob(je):function(je){const Ne=[];let He=0,dt=0;for(;He<je.length;){const tt=je[He++];if(tt<128)Ne[dt++]=String.fromCharCode(tt);else if(tt>191&&tt<224){const on=je[He++];Ne[dt++]=String.fromCharCode((31&tt)<<6|63&on)}else if(tt>239&&tt<365){const _r=((7&tt)<<18|(63&je[He++])<<12|(63&je[He++])<<6|63&je[He++])-65536;Ne[dt++]=String.fromCharCode(55296+(_r>>10)),Ne[dt++]=String.fromCharCode(56320+(1023&_r))}else{const on=je[He++],_n=je[He++];Ne[dt++]=String.fromCharCode((15&tt)<<12|(63&on)<<6|63&_n)}}return Ne.join("")}(this.decodeStringToByteArray(je,Ne))},decodeStringToByteArray(je,Ne){this.init_();const He=Ne?this.charToByteMapWebSafe_:this.charToByteMap_,dt=[];for(let tt=0;tt<je.length;){const on=He[je.charAt(tt++)],ar=tt<je.length?He[je.charAt(tt)]:0;++tt;const Rr=tt<je.length?He[je.charAt(tt)]:64;++tt;const Ve=tt<je.length?He[je.charAt(tt)]:64;if(++tt,null==on||null==ar||null==Rr||null==Ve)throw Error();dt.push(on<<2|ar>>4),64!==Rr&&(dt.push(ar<<4&240|Rr>>2),64!==Ve&&dt.push(Rr<<6&192|Ve))}return dt},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let je=0;je<this.ENCODED_VALS.length;je++)this.byteToCharMap_[je]=this.ENCODED_VALS.charAt(je),this.charToByteMap_[this.byteToCharMap_[je]]=je,this.byteToCharMapWebSafe_[je]=this.ENCODED_VALS_WEBSAFE.charAt(je),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[je]]=je,je>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(je)]=je,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(je)]=je)}}},Ee=function(je){const Ne=Pe(je);return he.encodeByteArray(Ne,!0)},pe=function(je){return Ee(je).replace(/\./g,"")},be=function(je){try{return he.decodeString(je,!0)}catch(Ne){console.error("base64Decode failed: ",Ne)}return null};function ce(je){return de(void 0,je)}function de(je,Ne){if(!(Ne instanceof Object))return Ne;switch(Ne.constructor){case Date:return new Date(Ne.getTime());case Object:void 0===je&&(je={});break;case Array:je=[];break;default:return Ne}for(const He in Ne)!Ne.hasOwnProperty(He)||!ie(He)||(je[He]=de(je[He],Ne[He]));return je}function ie(je){return"__proto__"!==je}function Ie(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Ge(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ie())}function st(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(je){return!1}}function et(){return"object"==typeof self&&self.self===self}function Re(){const je="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof je&&void 0!==je.id}function De(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function me(){const je=Ie();return je.indexOf("MSIE ")>=0||je.indexOf("Trident/")>=0}function mt(){return!1}function xt(){return!st()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Be(){return"object"==typeof indexedDB}function ht(){return new Promise((je,Ne)=>{try{let He=!0;const dt="validate-browser-context-for-indexeddb-analytics-module",tt=self.indexedDB.open(dt);tt.onsuccess=()=>{tt.result.close(),He||self.indexedDB.deleteDatabase(dt),je(!0)},tt.onupgradeneeded=()=>{He=!1},tt.onerror=()=>{var on;Ne((null===(on=tt.error)||void 0===on?void 0:on.message)||"")}}catch(He){Ne(He)}})}function ye(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}const Te=()=>{try{return function Oe(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if("undefined"==typeof process||void 0===process.env)return;const je=process.env.__FIREBASE_DEFAULTS__;return je?JSON.parse(je):void 0})()||(()=>{if("undefined"==typeof document)return;let je;try{je=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(He){return}const Ne=je&&be(je[1]);return Ne&&JSON.parse(Ne)})()}catch(je){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${je}`)}},Gt=()=>{var je;return null===(je=Te())||void 0===je?void 0:je.config},bt=je=>{var Ne;return null===(Ne=Te())||void 0===Ne?void 0:Ne[`_${je}`]};class at{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((Ne,He)=>{this.resolve=Ne,this.reject=He})}wrapCallback(Ne){return(He,dt)=>{He?this.reject(He):this.resolve(dt),"function"==typeof Ne&&(this.promise.catch(()=>{}),1===Ne.length?Ne(He):Ne(He,dt))}}}function $e(je,Ne){if(je.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const dt=Ne||"demo-project",tt=je.iat||0,on=je.sub||je.user_id;if(!on)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const _n=Object.assign({iss:`https://securetoken.google.com/${dt}`,aud:dt,iat:tt,exp:tt+3600,auth_time:tt,sub:on,user_id:on,firebase:{sign_in_provider:"custom",identities:{}}},je);return[pe(JSON.stringify({alg:"none",type:"JWT"})),pe(JSON.stringify(_n)),""].join(".")}class Je extends Error{constructor(Ne,He,dt){super(He),this.code=Ne,this.customData=dt,this.name="FirebaseError",Object.setPrototypeOf(this,Je.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Qe.prototype.create)}}class Qe{constructor(Ne,He,dt){this.service=Ne,this.serviceName=He,this.errors=dt}create(Ne,...He){const dt=He[0]||{},tt=`${this.service}/${Ne}`,on=this.errors[Ne],_n=on?function ft(je,Ne){return je.replace(pt,(He,dt)=>{const tt=Ne[dt];return null!=tt?String(tt):`<${dt}?>`})}(on,dt):"Error";return new Je(tt,`${this.serviceName}: ${_n} (${tt}).`,dt)}}const pt=/\{\$([^}]+)}/g;function Vt(je){return JSON.parse(je)}function Nt(je){return JSON.stringify(je)}const bn=function(je){let Ne={},He={},dt={},tt="";try{const on=je.split(".");Ne=Vt(be(on[0])||""),He=Vt(be(on[1])||""),tt=on[2],dt=He.d||{},delete He.d}catch(on){}return{header:Ne,claims:He,data:dt,signature:tt}},Rn=function(je){const He=bn(je).claims;return!!He&&"object"==typeof He&&He.hasOwnProperty("iat")},Wn=function(je){const Ne=bn(je).claims;return"object"==typeof Ne&&!0===Ne.admin};function cr(je,Ne){return Object.prototype.hasOwnProperty.call(je,Ne)}function Hn(je,Ne){if(Object.prototype.hasOwnProperty.call(je,Ne))return je[Ne]}function or(je){for(const Ne in je)if(Object.prototype.hasOwnProperty.call(je,Ne))return!1;return!0}function mr(je,Ne,He){const dt={};for(const tt in je)Object.prototype.hasOwnProperty.call(je,tt)&&(dt[tt]=Ne.call(He,je[tt],tt,je));return dt}function Wt(je,Ne){if(je===Ne)return!0;const He=Object.keys(je),dt=Object.keys(Ne);for(const tt of He){if(!dt.includes(tt))return!1;const on=je[tt],_n=Ne[tt];if(rr(on)&&rr(_n)){if(!Wt(on,_n))return!1}else if(on!==_n)return!1}for(const tt of dt)if(!He.includes(tt))return!1;return!0}function rr(je){return null!==je&&"object"==typeof je}function tr(je){const Ne=[];for(const[He,dt]of Object.entries(je))Array.isArray(dt)?dt.forEach(tt=>{Ne.push(encodeURIComponent(He)+"="+encodeURIComponent(tt))}):Ne.push(encodeURIComponent(He)+"="+encodeURIComponent(dt));return Ne.length?"&"+Ne.join("&"):""}function Jn(je){const Ne={};return je.replace(/^\?/,"").split("&").forEach(dt=>{if(dt){const[tt,on]=dt.split("=");Ne[decodeURIComponent(tt)]=decodeURIComponent(on)}}),Ne}function Cr(je){const Ne=je.indexOf("?");if(!Ne)return"";const He=je.indexOf("#",Ne);return je.substring(Ne,He>0?He:void 0)}class an{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let Ne=1;Ne<this.blockSize;++Ne)this.pad_[Ne]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(Ne,He){He||(He=0);const dt=this.W_;if("string"==typeof Ne)for(let Ve=0;Ve<16;Ve++)dt[Ve]=Ne.charCodeAt(He)<<24|Ne.charCodeAt(He+1)<<16|Ne.charCodeAt(He+2)<<8|Ne.charCodeAt(He+3),He+=4;else for(let Ve=0;Ve<16;Ve++)dt[Ve]=Ne[He]<<24|Ne[He+1]<<16|Ne[He+2]<<8|Ne[He+3],He+=4;for(let Ve=16;Ve<80;Ve++){const xe=dt[Ve-3]^dt[Ve-8]^dt[Ve-14]^dt[Ve-16];dt[Ve]=4294967295&(xe<<1|xe>>>31)}let Rr,gt,tt=this.chain_[0],on=this.chain_[1],_n=this.chain_[2],ar=this.chain_[3],_r=this.chain_[4];for(let Ve=0;Ve<80;Ve++){Ve<40?Ve<20?(Rr=ar^on&(_n^ar),gt=1518500249):(Rr=on^_n^ar,gt=1859775393):Ve<60?(Rr=on&_n|ar&(on|_n),gt=2400959708):(Rr=on^_n^ar,gt=3395469782);const xe=(tt<<5|tt>>>27)+Rr+_r+gt+dt[Ve]&4294967295;_r=ar,ar=_n,_n=4294967295&(on<<30|on>>>2),on=tt,tt=xe}this.chain_[0]=this.chain_[0]+tt&4294967295,this.chain_[1]=this.chain_[1]+on&4294967295,this.chain_[2]=this.chain_[2]+_n&4294967295,this.chain_[3]=this.chain_[3]+ar&4294967295,this.chain_[4]=this.chain_[4]+_r&4294967295}update(Ne,He){if(null==Ne)return;void 0===He&&(He=Ne.length);const dt=He-this.blockSize;let tt=0;const on=this.buf_;let _n=this.inbuf_;for(;tt<He;){if(0===_n)for(;tt<=dt;)this.compress_(Ne,tt),tt+=this.blockSize;if("string"==typeof Ne){for(;tt<He;)if(on[_n]=Ne.charCodeAt(tt),++_n,++tt,_n===this.blockSize){this.compress_(on),_n=0;break}}else for(;tt<He;)if(on[_n]=Ne[tt],++_n,++tt,_n===this.blockSize){this.compress_(on),_n=0;break}}this.inbuf_=_n,this.total_+=He}digest(){const Ne=[];let He=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let tt=this.blockSize-1;tt>=56;tt--)this.buf_[tt]=255&He,He/=256;this.compress_(this.buf_);let dt=0;for(let tt=0;tt<5;tt++)for(let on=24;on>=0;on-=8)Ne[dt]=this.chain_[tt]>>on&255,++dt;return Ne}}function fr(je,Ne){const He=new Tn(je,Ne);return He.subscribe.bind(He)}class Tn{constructor(Ne,He){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=He,this.task.then(()=>{Ne(this)}).catch(dt=>{this.error(dt)})}next(Ne){this.forEachObserver(He=>{He.next(Ne)})}error(Ne){this.forEachObserver(He=>{He.error(Ne)}),this.close(Ne)}complete(){this.forEachObserver(Ne=>{Ne.complete()}),this.close()}subscribe(Ne,He,dt){let tt;if(void 0===Ne&&void 0===He&&void 0===dt)throw new Error("Missing Observer.");tt=function Tt(je,Ne){if("object"!=typeof je||null===je)return!1;for(const He of Ne)if(He in je&&"function"==typeof je[He])return!0;return!1}(Ne,["next","error","complete"])?Ne:{next:Ne,error:He,complete:dt},void 0===tt.next&&(tt.next=yr),void 0===tt.error&&(tt.error=yr),void 0===tt.complete&&(tt.complete=yr);const on=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?tt.error(this.finalError):tt.complete()}catch(_n){}}),this.observers.push(tt),on}unsubscribeOne(Ne){void 0===this.observers||void 0===this.observers[Ne]||(delete this.observers[Ne],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(Ne){if(!this.finalized)for(let He=0;He<this.observers.length;He++)this.sendOne(He,Ne)}sendOne(Ne,He){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[Ne])try{He(this.observers[Ne])}catch(dt){"undefined"!=typeof console&&console.error&&console.error(dt)}})}close(Ne){this.finalized||(this.finalized=!0,void 0!==Ne&&(this.finalError=Ne),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yr(){}const Bn=function(je,Ne,He,dt){let tt;if(dt<Ne?tt="at least "+Ne:dt>He&&(tt=0===He?"none":"no more than "+He),tt)throw new Error(je+" failed: Was called with "+dt+(1===dt?" argument.":" arguments.")+" Expects "+tt+".")};function Dr(je,Ne){return`${je} failed: ${Ne} argument `}function $n(je,Ne,He,dt){if((!dt||He)&&"function"!=typeof He)throw new Error(Dr(je,Ne)+"must be a valid function.")}function ji(je,Ne,He,dt){if((!dt||He)&&("object"!=typeof He||null===He))throw new Error(Dr(je,Ne)+"must be a valid context object.")}const Ln=function(je){const Ne=[];let He=0;for(let dt=0;dt<je.length;dt++){let tt=je.charCodeAt(dt);if(tt>=55296&&tt<=56319){const on=tt-55296;dt++,ne(dt<je.length,"Surrogate pair missing trail surrogate."),tt=65536+(on<<10)+(je.charCodeAt(dt)-56320)}tt<128?Ne[He++]=tt:tt<2048?(Ne[He++]=tt>>6|192,Ne[He++]=63&tt|128):tt<65536?(Ne[He++]=tt>>12|224,Ne[He++]=tt>>6&63|128,Ne[He++]=63&tt|128):(Ne[He++]=tt>>18|240,Ne[He++]=tt>>12&63|128,Ne[He++]=tt>>6&63|128,Ne[He++]=63&tt|128)}return Ne},si=function(je){let Ne=0;for(let He=0;He<je.length;He++){const dt=je.charCodeAt(He);dt<128?Ne++:dt<2048?Ne+=2:dt>=55296&&dt<=56319?(Ne+=4,He++):Ne+=3}return Ne};function ln(je,Ne=1e3,He=2){const dt=Ne*Math.pow(He,je),tt=Math.round(.5*dt*(Math.random()-.5)*2);return Math.min(144e5,dt+tt)}function On(je){return je&&je._delegate?je._delegate:je}},4153:(tn,ot,H)=>{"use strict";H.d(ot,{Br:()=>Po,dr:()=>Dr,oU:()=>$n,cs:()=>ys,YG:()=>Yr,Sm:()=>ei,PM:()=>mn,FN:()=>$t,Zi:()=>ln,tO:()=>kn,Dq:()=>Cn,hM:()=>je,wI:()=>Ne,W2:()=>He,IJ:()=>on,W4:()=>_n,jY:()=>Rr,Gu:()=>gt,gu:()=>Ve,pK:()=>fn,Ie:()=>pn,u8:()=>lr,IK:()=>Hr,td:()=>kr,Q$:()=>ti,q_:()=>hi,jP:()=>wr,Nd:()=>Ze,t9:()=>qe,n0:()=>yt,wd:()=>Ut,sr:()=>Sn,Pc:()=>M,r4:()=>ws,as:()=>Nr,QI:()=>Jn,j9:()=>Cr,yF:()=>Ko});var a=H(5e3),ne=H(4182),Y=H(655),Pe=H(6498),Le=H(6688),he=H(7043),Ee=H(4850);function be(g,P,E,V){return(0,he.m)(E)&&(V=E,E=void 0),V?be(g,P,E).pipe((0,Ee.U)(se=>(0,Le.k)(se)?V(...se):V(se))):new Pe.y(se=>{ce(g,P,function ut(Xt){se.next(arguments.length>1?Array.prototype.slice.call(arguments):Xt)},se,E)})}function ce(g,P,E,V,se){let ut;if(function Ie(g){return g&&"function"==typeof g.addEventListener&&"function"==typeof g.removeEventListener}(g)){const Xt=g;g.addEventListener(P,E,se),ut=()=>Xt.removeEventListener(P,E,se)}else if(function ie(g){return g&&"function"==typeof g.on&&"function"==typeof g.off}(g)){const Xt=g;g.on(P,E),ut=()=>Xt.off(P,E)}else if(function de(g){return g&&"function"==typeof g.addListener&&"function"==typeof g.removeListener}(g)){const Xt=g;g.addListener(P,E),ut=()=>Xt.removeListener(P,E)}else{if(!g||!g.length)throw new TypeError("Invalid event target");for(let Xt=0,yn=g.length;Xt<yn;Xt++)ce(g[Xt],P,E,V,se)}V.add(ut)}var Ge=H(8929),st=H(591),et=H(4740),vt=(H(5942),H(129),H(1369),H(1911),H(9658)),mt=H(5730),xt=H(664),ht=(H(385),H(4414)),ve=(H(3457),H(4349),H(1308)),Gt=H(2198),bt=H(7545),at=H(5778),$e=H(9808);const Je=vt.i,pt=["*"],Rn=g=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(g):"function"==typeof requestAnimationFrame?requestAnimationFrame(g):setTimeout(g),Wn=g=>!!g.resolveComponentFactory;let cr=(()=>{class g{constructor(E,V){this.injector=E,this.el=V,this.onChange=()=>{},this.onTouched=()=>{}}writeValue(E){this.el.nativeElement.value=this.lastValue=null==E?"":E,Hn(this.el)}handleChangeEvent(E,V){E===this.el.nativeElement&&(V!==this.lastValue&&(this.lastValue=V,this.onChange(V)),Hn(this.el))}_handleBlurEvent(E){E===this.el.nativeElement&&(this.onTouched(),Hn(this.el))}registerOnChange(E){this.onChange=E}registerOnTouched(E){this.onTouched=E}setDisabledState(E){this.el.nativeElement.disabled=E}ngOnDestroy(){this.statusChanges&&this.statusChanges.unsubscribe()}ngAfterViewInit(){let E;try{E=this.injector.get(ne.a5)}catch(se){}if(!E)return;E.statusChanges&&(this.statusChanges=E.statusChanges.subscribe(()=>Hn(this.el)));const V=E.control;V&&["markAsTouched","markAllAsTouched","markAsUntouched","markAsDirty","markAsPristine"].forEach(ut=>{if(void 0!==V[ut]){const Xt=V[ut].bind(V);V[ut]=(...yn)=>{Xt(...yn),Hn(this.el)}}})}}return g.\u0275fac=function(E){return new(E||g)(a.Y36(a.zs3),a.Y36(a.SBq))},g.\u0275dir=a.lG2({type:g,hostBindings:function(E,V){1&E&&a.NdJ("ionBlur",function(ut){return V._handleBlurEvent(ut.target)})}}),g})();const Hn=g=>{Rn(()=>{const P=g.nativeElement,E=null!=P.value&&P.value.toString().length>0,V=or(P);mr(P,V);const se=P.closest("ion-item");se&&mr(se,E?[...V,"item-has-value"]:V)})},or=g=>{const P=g.classList,E=[];for(let V=0;V<P.length;V++){const se=P.item(V);null!==se&&Wt(se,"ng-")&&E.push(`ion-${se.substring(3)}`)}return E},mr=(g,P)=>{const E=g.classList;E.remove("ion-valid","ion-invalid","ion-touched","ion-untouched","ion-dirty","ion-pristine"),E.add(...P)},Wt=(g,P)=>g.substring(0,P.length)===P;let Nr=(()=>{class g extends cr{constructor(E,V){super(E,V)}_handleIonChange(E){this.handleChangeEvent(E,E.value)}registerOnChange(E){super.registerOnChange(V=>{E(""===V?null:parseFloat(V))})}}return g.\u0275fac=function(E){return new(E||g)(a.Y36(a.zs3),a.Y36(a.SBq))},g.\u0275dir=a.lG2({type:g,selectors:[["ion-input","type","number"]],hostBindings:function(E,V){1&E&&a.NdJ("ionChange",function(ut){return V._handleIonChange(ut.target)})},features:[a._Bn([{provide:ne.JU,useExisting:g,multi:!0}]),a.qOj]}),g})(),Jn=(()=>{class g extends cr{constructor(E,V){super(E,V)}_handleChangeEvent(E){this.handleChangeEvent(E,E.value)}}return g.\u0275fac=function(E){return new(E||g)(a.Y36(a.zs3),a.Y36(a.SBq))},g.\u0275dir=a.lG2({type:g,selectors:[["ion-range"],["ion-select"],["ion-radio-group"],["ion-segment"],["ion-datetime"]],hostBindings:function(E,V){1&E&&a.NdJ("ionChange",function(ut){return V._handleChangeEvent(ut.target)})},features:[a._Bn([{provide:ne.JU,useExisting:g,multi:!0}]),a.qOj]}),g})(),Cr=(()=>{class g extends cr{constructor(E,V){super(E,V)}_handleInputEvent(E){this.handleChangeEvent(E,E.value)}}return g.\u0275fac=function(E){return new(E||g)(a.Y36(a.zs3),a.Y36(a.SBq))},g.\u0275dir=a.lG2({type:g,selectors:[["ion-input",3,"type","number"],["ion-textarea"],["ion-searchbar"]],hostBindings:function(E,V){1&E&&a.NdJ("ionChange",function(ut){return V._handleInputEvent(ut.target)})},features:[a._Bn([{provide:ne.JU,useExisting:g,multi:!0}]),a.qOj]}),g})();const an=(g,P)=>{const E=g.prototype;P.forEach(V=>{Object.defineProperty(E,V,{get(){return this.el[V]},set(se){this.z.runOutsideAngular(()=>this.el[V]=se)}})})},fr=(g,P)=>{const E=g.prototype;P.forEach(V=>{E[V]=function(){const se=arguments;return this.z.runOutsideAngular(()=>this.el[V].apply(this.el,se))}})},Tn=(g,P,E)=>{E.forEach(V=>g[V]=be(P,V))};function Tt(g){return function(E){const{defineCustomElementFn:V,inputs:se,methods:ut}=g;return void 0!==V&&V(),se&&an(E,se),ut&&fr(E,ut),E}}let Dr=(()=>{let g=class{constructor(E,V,se){this.z=se,E.detach(),this.el=V.nativeElement}};return g.\u0275fac=function(E){return new(E||g)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},g.\u0275cmp=a.Xpm({type:g,selectors:[["ion-app"]],ngContentSelectors:pt,decls:1,vars:0,template:function(E,V){1&E&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),g=(0,Y.gn)([Tt({defineCustomElementFn:void 0})],g),g})(),$n=(()=>{let g=class{constructor(E,V,se){this.z=se,E.detach(),this.el=V.nativeElement}};return g.\u0275fac=function(E){return new(E||g)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},g.\u0275cmp=a.Xpm({type:g,selectors:[["ion-back-button"]],inputs:{color:"color",defaultHref:"defaultHref",disabled:"disabled",icon:"icon",mode:"mode",routerAnimation:"routerAnimation",text:"text",type:"type"},ngContentSelectors:pt,decls:1,vars:0,template:function(E,V){1&E&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),g=(0,Y.gn)([Tt({defineCustomElementFn:void 0,inputs:["color","defaultHref","disabled","icon","mode","routerAnimation","text","type"]})],g),g})(),Yr=(()=>{let g=class{constructor(E,V,se){this.z=se,E.detach(),this.el=V.nativeElement,Tn(this,this.el,["ionFocus","ionBlur"])}};return g.\u0275fac=function(E){return new(E||g)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},g.\u0275cmp=a.Xpm({type:g,selectors:[["ion-button"]],inputs:{buttonType:"buttonType",color:"color",disabled:"disabled",download:"download",expand:"expand",fill:"fill",form:"form",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",size:"size",strong:"strong",target:"target",type:"type"},ngContentSelectors:pt,decls:1,vars:0,template:function(E,V){1&E&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),g=(0,Y.gn)([Tt({defineCustomElementFn:void 0,inputs:["buttonType","color","disabled","download","expand","fill","form","href","mode","rel","routerAnimation","routerDirection","shape","size","strong","target","type"]})],g),g})(),ei=(()=>{let g=class{constructor(E,V,se){this.z=se,E.detach(),this.el=V.nativeElement}};return g.\u0275fac=function(E){return new(E||g)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},g.\u0275cmp=a.Xpm({type:g,selectors:[["ion-buttons"]],inputs:{collapse:"collapse"},ngContentSelectors:pt,decls:1,vars:0,template:function(E,V){1&E&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),g=(0,Y.gn)([Tt({defineCustomElementFn:void 0,inputs:["collapse"]})],g),g})(),mn=(()=>{let g=class{constructor(E,V,se){this.z=se,E.detach(),this.el=V.nativeElement}};return g.\u0275fac=function(E){return new(E||g)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},g.\u0275cmp=a.Xpm({type:g,selectors:[["ion-card"]],inputs:{button:"button",color:"color",disabled:"disabled",download:"download",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",target:"target",type:"type"},ngContentSelectors:pt,decls:1,vars:0,template:function(E,V){1&E&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),g=(0,Y.gn)([Tt({defineCustomElementFn:void 0,inputs:["button","color","disabled","download","href","mode","rel","routerAnimation","routerDirection","target","type"]})],g),g})(),$t=(()=>{let g=class{constructor(E,V,se){this.z=se,E.detach(),this.el=V.nativeElement}};return g.\u0275fac=function(E){return new(E||g)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},g.\u0275cmp=a.Xpm({type:g,selectors:[["ion-card-content"]],inputs:{mode:"mode"},ngContentSelectors:pt,decls:1,vars:0,template:function(E,V){1&E&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),g=(0,Y.gn)([Tt({defineCustomElementFn:void 0,inputs:["mode"]})],g),g})(),ln=(()=>{let g=class{constructor(E,V,se){this.z=se,E.detach(),this.el=V.nativeElement}};return g.\u0275fac=function(E){return new(E||g)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},g.\u0275cmp=a.Xpm({type:g,selectors:[["ion-card-header"]],inputs:{color:"color",mode:"mode",translucent:"translucent"},ngContentSelectors:pt,decls:1,vars:0,template:function(E,V){1&E&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),g=(0,Y.gn)([Tt({defineCustomElementFn:void 0,inputs:["color","mode","translucent"]})],g),g})(),kn=(()=>{let g=class{constructor(E,V,se){this.z=se,E.detach(),this.el=V.nativeElement}};return g.\u0275fac=function(E){return new(E||g)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},g.\u0275cmp=a.Xpm({type:g,selectors:[["ion-card-subtitle"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:pt,decls:1,vars:0,template:function(E,V){1&E&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),g=(0,Y.gn)([Tt({defineCustomElementFn:void 0,inputs:["color","mode"]})],g),g})(),Cn=(()=>{let g=class{constructor(E,V,se){this.z=se,E.detach(),this.el=V.nativeElement}};return g.\u0275fac=function(E){return new(E||g)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},g.\u0275cmp=a.Xpm({type:g,selectors:[["ion-card-title"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:pt,decls:1,vars:0,template:function(E,V){1&E&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),g=(0,Y.gn)([Tt({defineCustomElementFn:void 0,inputs:["color","mode"]})],g),g})(),je=(()=>{let g=class{constructor(E,V,se){this.z=se,E.detach(),this.el=V.nativeElement}};return g.\u0275fac=function(E){return new(E||g)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},g.\u0275cmp=a.Xpm({type:g,selectors:[["ion-chip"]],inputs:{color:"color",disabled:"disabled",mode:"mode",outline:"outline"},ngContentSelectors:pt,decls:1,vars:0,template:function(E,V){1&E&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),g=(0,Y.gn)([Tt({defineCustomElementFn:void 0,inputs:["color","disabled","mode","outline"]})],g),g})(),Ne=(()=>{let g=class{constructor(E,V,se){this.z=se,E.detach(),this.el=V.nativeElement}};return g.\u0275fac=function(E){return new(E||g)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},g.\u0275cmp=a.Xpm({type:g,selectors:[["ion-col"]],inputs:{offset:"offset",offsetLg:"offsetLg",offsetMd:"offsetMd",offsetSm:"offsetSm",offsetXl:"offsetXl",offsetXs:"offsetXs",pull:"pull",pullLg:"pullLg",pullMd:"pullMd",pullSm:"pullSm",pullXl:"pullXl",pullXs:"pullXs",push:"push",pushLg:"pushLg",pushMd:"pushMd",pushSm:"pushSm",pushXl:"pushXl",pushXs:"pushXs",size:"size",sizeLg:"sizeLg",sizeMd:"sizeMd",sizeSm:"sizeSm",sizeXl:"sizeXl",sizeXs:"sizeXs"},ngContentSelectors:pt,decls:1,vars:0,template:function(E,V){1&E&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),g=(0,Y.gn)([Tt({defineCustomElementFn:void 0,inputs:["offset","offsetLg","offsetMd","offsetSm","offsetXl","offsetXs","pull","pullLg","pullMd","pullSm","pullXl","pullXs","push","pushLg","pushMd","pushSm","pushXl","pushXs","size","sizeLg","sizeMd","sizeSm","sizeXl","sizeXs"]})],g),g})(),He=(()=>{let g=class{constructor(E,V,se){this.z=se,E.detach(),this.el=V.nativeElement,Tn(this,this.el,["ionScrollStart","ionScroll","ionScrollEnd"])}};return g.\u0275fac=function(E){return new(E||g)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},g.\u0275cmp=a.Xpm({type:g,selectors:[["ion-content"]],inputs:{color:"color",forceOverscroll:"forceOverscroll",fullscreen:"fullscreen",scrollEvents:"scrollEvents",scrollX:"scrollX",scrollY:"scrollY"},ngContentSelectors:pt,decls:1,vars:0,template:function(E,V){1&E&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),g=(0,Y.gn)([Tt({defineCustomElementFn:void 0,inputs:["color","forceOverscroll","fullscreen","scrollEvents","scrollX","scrollY"],methods:["getScrollElement","scrollToTop","scrollToBottom","scrollByPoint","scrollToPoint"]})],g),g})(),on=(()=>{let g=class{constructor(E,V,se){this.z=se,E.detach(),this.el=V.nativeElement}};return g.\u0275fac=function(E){return new(E||g)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},g.\u0275cmp=a.Xpm({type:g,selectors:[["ion-fab"]],inputs:{activated:"activated",edge:"edge",horizontal:"horizontal",vertical:"vertical"},ngContentSelectors:pt,decls:1,vars:0,template:function(E,V){1&E&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),g=(0,Y.gn)([Tt({defineCustomElementFn:void 0,inputs:["activated","edge","horizontal","vertical"],methods:["close"]})],g),g})(),_n=(()=>{let g=class{constructor(E,V,se){this.z=se,E.detach(),this.el=V.nativeElement,Tn(this,this.el,["ionFocus","ionBlur"])}};return g.\u0275fac=function(E){return new(E||g)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},g.\u0275cmp=a.Xpm({type:g,selectors:[["ion-fab-button"]],inputs:{activated:"activated",closeIcon:"closeIcon",color:"color",disabled:"disabled",download:"download",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",show:"show",size:"size",target:"target",translucent:"translucent",type:"type"},ngContentSelectors:pt,decls:1,vars:0,template:function(E,V){1&E&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),g=(0,Y.gn)([Tt({defineCustomElementFn:void 0,inputs:["activated","closeIcon","color","disabled","download","href","mode","rel","routerAnimation","routerDirection","show","size","target","translucent","type"]})],g),g})(),Rr=(()=>{let g=class{constructor(E,V,se){this.z=se,E.detach(),this.el=V.nativeElement}};return g.\u0275fac=function(E){return new(E||g)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},g.\u0275cmp=a.Xpm({type:g,selectors:[["ion-grid"]],inputs:{fixed:"fixed"},ngContentSelectors:pt,decls:1,vars:0,template:function(E,V){1&E&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),g=(0,Y.gn)([Tt({defineCustomElementFn:void 0,inputs:["fixed"]})],g),g})(),gt=(()=>{let g=class{constructor(E,V,se){this.z=se,E.detach(),this.el=V.nativeElement}};return g.\u0275fac=function(E){return new(E||g)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},g.\u0275cmp=a.Xpm({type:g,selectors:[["ion-header"]],inputs:{collapse:"collapse",mode:"mode",translucent:"translucent"},ngContentSelectors:pt,decls:1,vars:0,template:function(E,V){1&E&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),g=(0,Y.gn)([Tt({defineCustomElementFn:void 0,inputs:["collapse","mode","translucent"]})],g),g})(),Ve=(()=>{let g=class{constructor(E,V,se){this.z=se,E.detach(),this.el=V.nativeElement}};return g.\u0275fac=function(E){return new(E||g)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},g.\u0275cmp=a.Xpm({type:g,selectors:[["ion-icon"]],inputs:{color:"color",flipRtl:"flipRtl",icon:"icon",ios:"ios",lazy:"lazy",md:"md",mode:"mode",name:"name",sanitize:"sanitize",size:"size",src:"src"},ngContentSelectors:pt,decls:1,vars:0,template:function(E,V){1&E&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),g=(0,Y.gn)([Tt({defineCustomElementFn:void 0,inputs:["color","flipRtl","icon","ios","lazy","md","mode","name","sanitize","size","src"]})],g),g})(),fn=(()=>{let g=class{constructor(E,V,se){this.z=se,E.detach(),this.el=V.nativeElement,Tn(this,this.el,["ionInput","ionChange","ionBlur","ionFocus"])}};return g.\u0275fac=function(E){return new(E||g)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},g.\u0275cmp=a.Xpm({type:g,selectors:[["ion-input"]],inputs:{accept:"accept",autocapitalize:"autocapitalize",autocomplete:"autocomplete",autocorrect:"autocorrect",autofocus:"autofocus",clearInput:"clearInput",clearOnEdit:"clearOnEdit",color:"color",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",inputmode:"inputmode",max:"max",maxlength:"maxlength",min:"min",minlength:"minlength",mode:"mode",multiple:"multiple",name:"name",pattern:"pattern",placeholder:"placeholder",readonly:"readonly",required:"required",size:"size",spellcheck:"spellcheck",step:"step",type:"type",value:"value"},ngContentSelectors:pt,decls:1,vars:0,template:function(E,V){1&E&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),g=(0,Y.gn)([Tt({defineCustomElementFn:void 0,inputs:["accept","autocapitalize","autocomplete","autocorrect","autofocus","clearInput","clearOnEdit","color","debounce","disabled","enterkeyhint","inputmode","max","maxlength","min","minlength","mode","multiple","name","pattern","placeholder","readonly","required","size","spellcheck","step","type","value"],methods:["setFocus","getInputElement"]})],g),g})(),pn=(()=>{let g=class{constructor(E,V,se){this.z=se,E.detach(),this.el=V.nativeElement}};return g.\u0275fac=function(E){return new(E||g)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},g.\u0275cmp=a.Xpm({type:g,selectors:[["ion-item"]],inputs:{button:"button",color:"color",counter:"counter",counterFormatter:"counterFormatter",detail:"detail",detailIcon:"detailIcon",disabled:"disabled",download:"download",fill:"fill",href:"href",lines:"lines",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",target:"target",type:"type"},ngContentSelectors:pt,decls:1,vars:0,template:function(E,V){1&E&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),g=(0,Y.gn)([Tt({defineCustomElementFn:void 0,inputs:["button","color","counter","counterFormatter","detail","detailIcon","disabled","download","fill","href","lines","mode","rel","routerAnimation","routerDirection","shape","target","type"]})],g),g})(),lr=(()=>{let g=class{constructor(E,V,se){this.z=se,E.detach(),this.el=V.nativeElement}};return g.\u0275fac=function(E){return new(E||g)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},g.\u0275cmp=a.Xpm({type:g,selectors:[["ion-item-option"]],inputs:{color:"color",disabled:"disabled",download:"download",expandable:"expandable",href:"href",mode:"mode",rel:"rel",target:"target",type:"type"},ngContentSelectors:pt,decls:1,vars:0,template:function(E,V){1&E&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),g=(0,Y.gn)([Tt({defineCustomElementFn:void 0,inputs:["color","disabled","download","expandable","href","mode","rel","target","type"]})],g),g})(),Hr=(()=>{let g=class{constructor(E,V,se){this.z=se,E.detach(),this.el=V.nativeElement,Tn(this,this.el,["ionSwipe"])}};return g.\u0275fac=function(E){return new(E||g)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},g.\u0275cmp=a.Xpm({type:g,selectors:[["ion-item-options"]],inputs:{side:"side"},ngContentSelectors:pt,decls:1,vars:0,template:function(E,V){1&E&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),g=(0,Y.gn)([Tt({defineCustomElementFn:void 0,inputs:["side"]})],g),g})(),kr=(()=>{let g=class{constructor(E,V,se){this.z=se,E.detach(),this.el=V.nativeElement,Tn(this,this.el,["ionDrag"])}};return g.\u0275fac=function(E){return new(E||g)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},g.\u0275cmp=a.Xpm({type:g,selectors:[["ion-item-sliding"]],inputs:{disabled:"disabled"},ngContentSelectors:pt,decls:1,vars:0,template:function(E,V){1&E&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),g=(0,Y.gn)([Tt({defineCustomElementFn:void 0,inputs:["disabled"],methods:["getOpenAmount","getSlidingRatio","open","close","closeOpened"]})],g),g})(),ti=(()=>{let g=class{constructor(E,V,se){this.z=se,E.detach(),this.el=V.nativeElement}};return g.\u0275fac=function(E){return new(E||g)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},g.\u0275cmp=a.Xpm({type:g,selectors:[["ion-label"]],inputs:{color:"color",mode:"mode",position:"position"},ngContentSelectors:pt,decls:1,vars:0,template:function(E,V){1&E&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),g=(0,Y.gn)([Tt({defineCustomElementFn:void 0,inputs:["color","mode","position"]})],g),g})(),hi=(()=>{let g=class{constructor(E,V,se){this.z=se,E.detach(),this.el=V.nativeElement}};return g.\u0275fac=function(E){return new(E||g)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},g.\u0275cmp=a.Xpm({type:g,selectors:[["ion-list"]],inputs:{inset:"inset",lines:"lines",mode:"mode"},ngContentSelectors:pt,decls:1,vars:0,template:function(E,V){1&E&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),g=(0,Y.gn)([Tt({defineCustomElementFn:void 0,inputs:["inset","lines","mode"],methods:["closeSlidingItems"]})],g),g})(),Ze=(()=>{let g=class{constructor(E,V,se){this.z=se,E.detach(),this.el=V.nativeElement}};return g.\u0275fac=function(E){return new(E||g)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},g.\u0275cmp=a.Xpm({type:g,selectors:[["ion-row"]],ngContentSelectors:pt,decls:1,vars:0,template:function(E,V){1&E&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),g=(0,Y.gn)([Tt({defineCustomElementFn:void 0})],g),g})(),qe=(()=>{let g=class{constructor(E,V,se){this.z=se,E.detach(),this.el=V.nativeElement,Tn(this,this.el,["ionChange","ionCancel","ionDismiss","ionFocus","ionBlur"])}};return g.\u0275fac=function(E){return new(E||g)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},g.\u0275cmp=a.Xpm({type:g,selectors:[["ion-select"]],inputs:{cancelText:"cancelText",compareWith:"compareWith",disabled:"disabled",interface:"interface",interfaceOptions:"interfaceOptions",mode:"mode",multiple:"multiple",name:"name",okText:"okText",placeholder:"placeholder",selectedText:"selectedText",value:"value"},ngContentSelectors:pt,decls:1,vars:0,template:function(E,V){1&E&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),g=(0,Y.gn)([Tt({defineCustomElementFn:void 0,inputs:["cancelText","compareWith","disabled","interface","interfaceOptions","mode","multiple","name","okText","placeholder","selectedText","value"],methods:["open"]})],g),g})(),yt=(()=>{let g=class{constructor(E,V,se){this.z=se,E.detach(),this.el=V.nativeElement}};return g.\u0275fac=function(E){return new(E||g)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},g.\u0275cmp=a.Xpm({type:g,selectors:[["ion-select-option"]],inputs:{disabled:"disabled",value:"value"},ngContentSelectors:pt,decls:1,vars:0,template:function(E,V){1&E&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),g=(0,Y.gn)([Tt({defineCustomElementFn:void 0,inputs:["disabled","value"]})],g),g})(),Ut=(()=>{let g=class{constructor(E,V,se){this.z=se,E.detach(),this.el=V.nativeElement}};return g.\u0275fac=function(E){return new(E||g)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},g.\u0275cmp=a.Xpm({type:g,selectors:[["ion-title"]],inputs:{color:"color",size:"size"},ngContentSelectors:pt,decls:1,vars:0,template:function(E,V){1&E&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),g=(0,Y.gn)([Tt({defineCustomElementFn:void 0,inputs:["color","size"]})],g),g})(),Sn=(()=>{let g=class{constructor(E,V,se){this.z=se,E.detach(),this.el=V.nativeElement}};return g.\u0275fac=function(E){return new(E||g)(a.Y36(a.sBO),a.Y36(a.SBq),a.Y36(a.R0b))},g.\u0275cmp=a.Xpm({type:g,selectors:[["ion-toolbar"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:pt,decls:1,vars:0,template:function(E,V){1&E&&(a.F$t(),a.Hsn(0))},encapsulation:2,changeDetection:0}),g=(0,Y.gn)([Tt({defineCustomElementFn:void 0,inputs:["color","mode"]})],g),g})();class qn{constructor(P={}){this.data=P}get(P){return this.data[P]}}let ui=(()=>{class g{constructor(E,V){this.zone=E,this.appRef=V}create(E,V,se){return new Br(E,V,se,this.appRef,this.zone)}}return g.\u0275fac=function(E){return new(E||g)(a.LFG(a.R0b),a.LFG(a.z2F))},g.\u0275prov=a.Yz7({token:g,factory:g.\u0275fac}),g})();class Br{constructor(P,E,V,se,ut){this.resolverOrInjector=P,this.injector=E,this.location=V,this.appRef=se,this.zone=ut,this.elRefMap=new WeakMap,this.elEventsMap=new WeakMap}attachViewToDom(P,E,V,se){return this.zone.run(()=>new Promise(ut=>{ut(Rs(this.zone,this.resolverOrInjector,this.injector,this.location,this.appRef,this.elRefMap,this.elEventsMap,P,E,V,se))}))}removeViewFromDom(P,E){return this.zone.run(()=>new Promise(V=>{const se=this.elRefMap.get(E);if(se){se.destroy(),this.elRefMap.delete(E);const ut=this.elEventsMap.get(E);ut&&(ut(),this.elEventsMap.delete(E))}V()}))}}const Rs=(g,P,E,V,se,ut,Xt,yn,Zn,ni,Ai)=>{let ci;const ns=a.zs3.create({providers:Ji(ni),parent:E});if(P&&Wn(P)){const ks=P.resolveComponentFactory(Zn);ci=V?V.createComponent(ks,V.length,ns):ks.create(ns)}else{if(!V)return null;ci=V.createComponent(Zn,{index:V.indexOf,injector:ns,environmentInjector:P})}const bs=ci.instance,Cs=ci.location.nativeElement;if(ni&&Object.assign(bs,ni),Ai)for(const ks of Ai)Cs.classList.add(ks);const cs=Ir(g,bs,Cs);return yn.appendChild(Cs),V||se.attachView(ci.hostView),ci.changeDetectorRef.reattach(),ut.set(Cs,ci),Xt.set(Cs,cs),Cs},Sr=[xt.L,xt.a,xt.b,xt.c,xt.d],Ir=(g,P,E)=>g.run(()=>{const V=Sr.filter(se=>"function"==typeof P[se]).map(se=>{const ut=Xt=>P[se](Xt.detail);return E.addEventListener(se,ut),()=>E.removeEventListener(se,ut)});return()=>V.forEach(se=>se())}),Xn=new a.OlP("NavParamsToken"),Ji=g=>[{provide:Xn,useValue:g},{provide:qn,useFactory:Zr,deps:[Xn]}],Zr=g=>new qn(g),aa=(g,P)=>((g=g.filter(E=>E.stackId!==P.stackId)).push(P),g),Tr=(g,P)=>{const E=g.createUrlTree(["."],{relativeTo:P});return g.serializeUrl(E)},mi=(g,P)=>{if(!g)return;const E=Ys(P);for(let V=0;V<E.length;V++){if(V>=g.length)return E[V];if(E[V]!==g[V])return}},Ys=g=>g.split("/").map(P=>P.trim()).filter(P=>""!==P),$s=g=>{g&&(g.ref.destroy(),g.unlistenEvents())};class pi{constructor(P,E,V,se,ut,Xt){this.containerEl=E,this.router=V,this.navCtrl=se,this.zone=ut,this.location=Xt,this.views=[],this.skipTransition=!1,this.nextId=0,this.tabsPrefix=void 0!==P?Ys(P):void 0}createView(P,E){var V;const se=Tr(this.router,E),ut=null===(V=null==P?void 0:P.location)||void 0===V?void 0:V.nativeElement,Xt=Ir(this.zone,P.instance,ut);return{id:this.nextId++,stackId:mi(this.tabsPrefix,se),unlistenEvents:Xt,element:ut,ref:P,url:se}}getExistingView(P){const E=Tr(this.router,P),V=this.views.find(se=>se.url===E);return V&&V.ref.changeDetectorRef.reattach(),V}setActive(P){var E,V;const se=this.navCtrl.consumeTransition();let{direction:ut,animation:Xt,animationBuilder:yn}=se;const Zn=this.activeView,ni=((g,P)=>!P||g.stackId!==P.stackId)(P,Zn);ni&&(ut="back",Xt=void 0);const Ai=this.views.slice();let ci;const ns=this.router;ns.getCurrentNavigation?ci=ns.getCurrentNavigation():!(null===(E=ns.navigations)||void 0===E)&&E.value&&(ci=ns.navigations.value),null!==(V=null==ci?void 0:ci.extras)&&void 0!==V&&V.replaceUrl&&this.views.length>0&&this.views.splice(-1,1);const bs=this.views.includes(P),Cs=this.insertView(P,ut);bs||P.ref.changeDetectorRef.detectChanges();const cs=P.animationBuilder;return void 0===yn&&"back"===ut&&!ni&&void 0!==cs&&(yn=cs),Zn&&(Zn.animationBuilder=yn),this.zone.runOutsideAngular(()=>this.wait(()=>(Zn&&Zn.ref.changeDetectorRef.detach(),P.ref.changeDetectorRef.reattach(),this.transition(P,Zn,Xt,this.canGoBack(1),!1,yn).then(()=>as(P,Cs,Ai,this.location,this.zone)).then(()=>({enteringView:P,direction:ut,animation:Xt,tabSwitch:ni})))))}canGoBack(P,E=this.getActiveStackId()){return this.getStack(E).length>P}pop(P,E=this.getActiveStackId()){return this.zone.run(()=>{var V,se;const ut=this.getStack(E);if(ut.length<=P)return Promise.resolve(!1);const Xt=ut[ut.length-P-1];let yn=Xt.url;const Zn=Xt.savedData;if(Zn){const Ai=Zn.get("primary");null!==(se=null===(V=null==Ai?void 0:Ai.route)||void 0===V?void 0:V._routerState)&&void 0!==se&&se.snapshot.url&&(yn=Ai.route._routerState.snapshot.url)}const{animationBuilder:ni}=this.navCtrl.consumeTransition();return this.navCtrl.navigateBack(yn,Object.assign(Object.assign({},Xt.savedExtras),{animation:ni})).then(()=>!0)})}startBackTransition(){const P=this.activeView;if(P){const E=this.getStack(P.stackId),V=E[E.length-2],se=V.animationBuilder;return this.wait(()=>this.transition(V,P,"back",this.canGoBack(2),!0,se))}return Promise.resolve()}endBackTransition(P){P?(this.skipTransition=!0,this.pop(1)):this.activeView&&ps(this.activeView,this.views,this.views,this.location,this.zone)}getLastUrl(P){const E=this.getStack(P);return E.length>0?E[E.length-1]:void 0}getRootUrl(P){const E=this.getStack(P);return E.length>0?E[0]:void 0}getActiveStackId(){return this.activeView?this.activeView.stackId:void 0}hasRunningTask(){return void 0!==this.runningTask}destroy(){this.containerEl=void 0,this.views.forEach($s),this.activeView=void 0,this.views=[]}getStack(P){return this.views.filter(E=>E.stackId===P)}insertView(P,E){return this.activeView=P,this.views=((g,P,E)=>"root"===E?aa(g,P):"forward"===E?((g,P)=>(g.indexOf(P)>=0?g=g.filter(V=>V.stackId!==P.stackId||V.id<=P.id):g.push(P),g))(g,P):((g,P)=>g.indexOf(P)>=0?g.filter(V=>V.stackId!==P.stackId||V.id<=P.id):aa(g,P))(g,P))(this.views,P,E),this.views.slice()}transition(P,E,V,se,ut,Xt){if(this.skipTransition)return this.skipTransition=!1,Promise.resolve(!1);if(E===P)return Promise.resolve(!1);const yn=P?P.element:void 0,Zn=E?E.element:void 0,ni=this.containerEl;return yn&&yn!==Zn&&(yn.classList.add("ion-page"),yn.classList.add("ion-page-invisible"),yn.parentElement!==ni&&ni.appendChild(yn),ni.commit)?ni.commit(yn,Zn,{deepWait:!0,duration:void 0===V?0:void 0,direction:V,showGoBack:se,progressAnimation:ut,animationBuilder:Xt}):Promise.resolve(!1)}wait(P){return(0,Y.mG)(this,void 0,void 0,function*(){void 0!==this.runningTask&&(yield this.runningTask,this.runningTask=void 0);const E=this.runningTask=P();return E.finally(()=>this.runningTask=void 0),E})}}const as=(g,P,E,V,se)=>"function"==typeof requestAnimationFrame?new Promise(ut=>{requestAnimationFrame(()=>{ps(g,P,E,V,se),ut()})}):Promise.resolve(),ps=(g,P,E,V,se)=>{se.run(()=>E.filter(ut=>!P.includes(ut)).forEach($s)),P.forEach(ut=>{const yn=V.path().split("?")[0].split("#")[0];if(ut!==g&&ut.url!==yn){const Zn=ut.element;Zn.setAttribute("aria-hidden","true"),Zn.classList.add("ion-page-hidden"),ut.ref.changeDetectorRef.detach()}})};let Es=(()=>{class g{get(E,V){const se=Ci();return se?se.get(E,V):null}getBoolean(E,V){const se=Ci();return!!se&&se.getBoolean(E,V)}getNumber(E,V){const se=Ci();return se?se.getNumber(E,V):0}}return g.\u0275fac=function(E){return new(E||g)},g.\u0275prov=a.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})();const gs=new a.OlP("USERCONFIG"),Ci=()=>{if("undefined"!=typeof window){const g=window.Ionic;if(null!=g&&g.config)return g.config}return null};let No=(()=>{class g{constructor(E,V){this.doc=E,this.backButton=new Ge.xQ,this.keyboardDidShow=new Ge.xQ,this.keyboardDidHide=new Ge.xQ,this.pause=new Ge.xQ,this.resume=new Ge.xQ,this.resize=new Ge.xQ,V.run(()=>{var se;let ut;this.win=E.defaultView,this.backButton.subscribeWithPriority=function(Xt,yn){return this.subscribe(Zn=>Zn.register(Xt,ni=>V.run(()=>yn(ni))))},ts(this.pause,E,"pause"),ts(this.resume,E,"resume"),ts(this.backButton,E,"ionBackButton"),ts(this.resize,this.win,"resize"),ts(this.keyboardDidShow,this.win,"ionKeyboardDidShow"),ts(this.keyboardDidHide,this.win,"ionKeyboardDidHide"),this._readyPromise=new Promise(Xt=>{ut=Xt}),null!==(se=this.win)&&void 0!==se&&se.cordova?E.addEventListener("deviceready",()=>{ut("cordova")},{once:!0}):ut("dom")})}is(E){return(0,vt.a)(this.win,E)}platforms(){return(0,vt.g)(this.win)}ready(){return this._readyPromise}get isRTL(){return"rtl"===this.doc.dir}getQueryParam(E){return Hi(this.win.location.href,E)}isLandscape(){return!this.isPortrait()}isPortrait(){var E,V;return null===(V=(E=this.win).matchMedia)||void 0===V?void 0:V.call(E,"(orientation: portrait)").matches}testUserAgent(E){const V=this.win.navigator;return!!((null==V?void 0:V.userAgent)&&V.userAgent.indexOf(E)>=0)}url(){return this.win.location.href}width(){return this.win.innerWidth}height(){return this.win.innerHeight}}return g.\u0275fac=function(E){return new(E||g)(a.LFG($e.K0),a.LFG(a.R0b))},g.\u0275prov=a.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})();const Hi=(g,P)=>{P=P.replace(/[[\]\\]/g,"\\$&");const V=new RegExp("[\\?&]"+P+"=([^&#]*)").exec(g);return V?decodeURIComponent(V[1].replace(/\+/g," ")):null},ts=(g,P,E)=>{P&&P.addEventListener(E,V=>{g.next(null!=V?V.detail:void 0)})};let ms=(()=>{class g{constructor(E,V,se,ut){this.location=V,this.serializer=se,this.router=ut,this.direction=qs,this.animated=Us,this.guessDirection="forward",this.lastNavId=-1,ut&&ut.events.subscribe(Xt=>{if(Xt instanceof et.OD){const yn=Xt.restoredState?Xt.restoredState.navigationId:Xt.id;this.guessDirection=yn<this.lastNavId?"back":"forward",this.guessAnimation=Xt.restoredState?void 0:this.guessDirection,this.lastNavId="forward"===this.guessDirection?Xt.id:yn}}),E.backButton.subscribeWithPriority(0,Xt=>{this.pop(),Xt()})}navigateForward(E,V={}){return this.setDirection("forward",V.animated,V.animationDirection,V.animation),this.navigate(E,V)}navigateBack(E,V={}){return this.setDirection("back",V.animated,V.animationDirection,V.animation),this.navigate(E,V)}navigateRoot(E,V={}){return this.setDirection("root",V.animated,V.animationDirection,V.animation),this.navigate(E,V)}back(E={animated:!0,animationDirection:"back"}){return this.setDirection("back",E.animated,E.animationDirection,E.animation),this.location.back()}pop(){return(0,Y.mG)(this,void 0,void 0,function*(){let E=this.topOutlet;for(;E&&!(yield E.pop());)E=E.parentOutlet})}setDirection(E,V,se,ut){this.direction=E,this.animated=ai(E,V,se),this.animationBuilder=ut}setTopOutlet(E){this.topOutlet=E}consumeTransition(){let V,E="root";const se=this.animationBuilder;return"auto"===this.direction?(E=this.guessDirection,V=this.guessAnimation):(V=this.animated,E=this.direction),this.direction=qs,this.animated=Us,this.animationBuilder=void 0,{direction:E,animation:V,animationBuilder:se}}navigate(E,V){if(Array.isArray(E))return this.router.navigate(E,V);{const se=this.serializer.parse(E.toString());return void 0!==V.queryParams&&(se.queryParams=Object.assign({},V.queryParams)),void 0!==V.fragment&&(se.fragment=V.fragment),this.router.navigateByUrl(se,V)}}}return g.\u0275fac=function(E){return new(E||g)(a.LFG(No),a.LFG($e.Ye),a.LFG(et.Hx),a.LFG(et.F0,8))},g.\u0275prov=a.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})();const ai=(g,P,E)=>{if(!1!==P){if(void 0!==E)return E;if("forward"===g||"back"===g)return g;if("root"===g&&!0===P)return"forward"}},qs="auto",Us=void 0;let wr=(()=>{class g{constructor(E,V,se,ut,Xt,yn,Zn,ni,Ai,ci,ns,bs,Cs){this.parentContexts=E,this.location=V,this.config=Xt,this.navCtrl=yn,this.componentFactoryResolver=Zn,this.parentOutlet=Cs,this.activated=null,this.activatedView=null,this._activatedRoute=null,this.proxyMap=new WeakMap,this.currentActivatedRoute$=new st.X(null),this.stackEvents=new a.vpe,this.activateEvents=new a.vpe,this.deactivateEvents=new a.vpe,this.nativeEl=Ai.nativeElement,this.name=se||et.eC,this.tabsPrefix="true"===ut?Tr(ci,bs):void 0,this.stackCtrl=new pi(this.tabsPrefix,this.nativeEl,ci,yn,ns,ni),E.onChildOutletCreated(this.name,this)}set animation(E){this.nativeEl.animation=E}set animated(E){this.nativeEl.animated=E}set swipeGesture(E){this._swipeGesture=E,this.nativeEl.swipeHandler=E?{canStart:()=>this.stackCtrl.canGoBack(1)&&!this.stackCtrl.hasRunningTask(),onStart:()=>this.stackCtrl.startBackTransition(),onEnd:V=>this.stackCtrl.endBackTransition(V)}:void 0}ngOnDestroy(){this.stackCtrl.destroy()}getContext(){return this.parentContexts.getContext(this.name)}ngOnInit(){if(!this.activated){const E=this.getContext();null!=E&&E.route&&this.activateWith(E.route,E.resolver||null)}new Promise(E=>(0,mt.c)(this.nativeEl,E)).then(()=>{void 0===this._swipeGesture&&(this.swipeGesture=this.config.getBoolean("swipeBackEnabled","ios"===this.nativeEl.mode))})}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){throw new Error("incompatible reuse strategy")}attach(E,V){throw new Error("incompatible reuse strategy")}deactivate(){if(this.activated){if(this.activatedView){const V=this.getContext();this.activatedView.savedData=new Map(V.children.contexts);const se=this.activatedView.savedData.get("primary");if(se&&V.route&&(se.route=Object.assign({},V.route)),this.activatedView.savedExtras={},V.route){const ut=V.route.snapshot;this.activatedView.savedExtras.queryParams=ut.queryParams,this.activatedView.savedExtras.fragment=ut.fragment}}const E=this.component;this.activatedView=null,this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(E)}}activateWith(E,V){var se;if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=E;let ut,Xt=this.stackCtrl.getExistingView(E);if(Xt){ut=this.activated=Xt.ref;const yn=Xt.savedData;yn&&(this.getContext().children.contexts=yn),this.updateActivatedRouteProxy(ut.instance,E)}else{const yn=E._futureSnapshot;if(null==yn.routeConfig.component&&null==this.environmentInjector)return void console.warn('[Ionic Warning]: You must supply an environmentInjector to use standalone components with routing:\n\nIn your component class, add:\n\n   import { EnvironmentInjector } from \'@angular/core\';\n   constructor(public environmentInjector: EnvironmentInjector) {}\n\nIn your router outlet template, add:\n\n   <ion-router-outlet [environmentInjector]="environmentInjector"></ion-router-outlet>\n\nAlternatively, if you are routing within ion-tabs:\n\n   <ion-tabs [environmentInjector]="environmentInjector"></ion-tabs>');const Zn=this.parentContexts.getOrCreateContext(this.name).children,ni=new st.X(null),Ai=this.createActivatedRouteProxy(ni,E),ci=new yi(Ai,Zn,this.location.injector),ns=null!==(se=yn.routeConfig.component)&&void 0!==se?se:yn.component;if((V=V||this.componentFactoryResolver)&&Wn(V)){const bs=V.resolveComponentFactory(ns);ut=this.activated=this.location.createComponent(bs,this.location.length,ci)}else ut=this.activated=this.location.createComponent(ns,{index:this.location.length,injector:ci,environmentInjector:null!=V?V:this.environmentInjector});ni.next(ut.instance),Xt=this.stackCtrl.createView(this.activated,E),this.proxyMap.set(ut.instance,Ai),this.currentActivatedRoute$.next({component:ut.instance,activatedRoute:E})}this.activatedView=Xt,this.navCtrl.setTopOutlet(this),this.stackCtrl.setActive(Xt).then(yn=>{this.activateEvents.emit(ut.instance),this.stackEvents.emit(yn)})}canGoBack(E=1,V){return this.stackCtrl.canGoBack(E,V)}pop(E=1,V){return this.stackCtrl.pop(E,V)}getLastUrl(E){const V=this.stackCtrl.getLastUrl(E);return V?V.url:void 0}getLastRouteView(E){return this.stackCtrl.getLastUrl(E)}getRootView(E){return this.stackCtrl.getRootUrl(E)}getActiveStackId(){return this.stackCtrl.getActiveStackId()}createActivatedRouteProxy(E,V){const se=new et.gz;return se._futureSnapshot=V._futureSnapshot,se._routerState=V._routerState,se.snapshot=V.snapshot,se.outlet=V.outlet,se.component=V.component,se._paramMap=this.proxyObservable(E,"paramMap"),se._queryParamMap=this.proxyObservable(E,"queryParamMap"),se.url=this.proxyObservable(E,"url"),se.params=this.proxyObservable(E,"params"),se.queryParams=this.proxyObservable(E,"queryParams"),se.fragment=this.proxyObservable(E,"fragment"),se.data=this.proxyObservable(E,"data"),se}proxyObservable(E,V){return E.pipe((0,Gt.h)(se=>!!se),(0,bt.w)(se=>this.currentActivatedRoute$.pipe((0,Gt.h)(ut=>null!==ut&&ut.component===se),(0,bt.w)(ut=>ut&&ut.activatedRoute[V]),(0,at.x)())))}updateActivatedRouteProxy(E,V){const se=this.proxyMap.get(E);if(!se)throw new Error("Could not find activated route proxy for view");se._futureSnapshot=V._futureSnapshot,se._routerState=V._routerState,se.snapshot=V.snapshot,se.outlet=V.outlet,se.component=V.component,this.currentActivatedRoute$.next({component:E,activatedRoute:V})}}return g.\u0275fac=function(E){return new(E||g)(a.Y36(et.y6),a.Y36(a.s_b),a.$8M("name"),a.$8M("tabs"),a.Y36(Es),a.Y36(ms),a.Y36(a._Vd,8),a.Y36($e.Ye),a.Y36(a.SBq),a.Y36(et.F0),a.Y36(a.R0b),a.Y36(et.gz),a.Y36(g,12))},g.\u0275dir=a.lG2({type:g,selectors:[["ion-router-outlet"]],inputs:{animated:"animated",animation:"animation",mode:"mode",swipeGesture:"swipeGesture",environmentInjector:"environmentInjector"},outputs:{stackEvents:"stackEvents",activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),g})();class yi{constructor(P,E,V){this.route=P,this.childContexts=E,this.parent=V}get(P,E){return P===et.gz?this.route:P===et.y6?this.childContexts:this.parent.get(P,E)}}let ys=(()=>{class g{constructor(E,V,se){this.routerOutlet=E,this.navCtrl=V,this.config=se}onClick(E){var V;const se=this.defaultHref||this.config.get("backButtonDefaultHref");null!==(V=this.routerOutlet)&&void 0!==V&&V.canGoBack()?(this.navCtrl.setDirection("back",void 0,void 0,this.routerAnimation),this.routerOutlet.pop(),E.preventDefault()):null!=se&&(this.navCtrl.navigateBack(se,{animation:this.routerAnimation}),E.preventDefault())}}return g.\u0275fac=function(E){return new(E||g)(a.Y36(wr,8),a.Y36(ms),a.Y36(Es))},g.\u0275dir=a.lG2({type:g,selectors:[["ion-back-button"]],hostBindings:function(E,V){1&E&&a.NdJ("click",function(ut){return V.onClick(ut)})},inputs:{defaultHref:"defaultHref",routerAnimation:"routerAnimation"}}),g})();class qo{constructor(P){this.ctrl=P}create(P){return this.ctrl.create(P||{})}dismiss(P,E,V){return this.ctrl.dismiss(P,E,V)}getTop(){return this.ctrl.getTop()}}let Po=(()=>{class g extends qo{constructor(){super(ht.a)}}return g.\u0275fac=function(E){return new(E||g)},g.\u0275prov=a.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})();class wo{}let qt=(()=>{class g extends qo{constructor(E,V,se,ut){super(ht.m),this.angularDelegate=E,this.resolver=V,this.injector=se,this.environmentInjector=ut}create(E){var V;return super.create(Object.assign(Object.assign({},E),{delegate:this.angularDelegate.create(null!==(V=this.resolver)&&void 0!==V?V:this.environmentInjector,this.injector)}))}}return g.\u0275fac=function(E){return new(E||g)(a.LFG(ui),a.LFG(a._Vd),a.LFG(a.zs3),a.LFG(wo,8))},g.\u0275prov=a.Yz7({token:g,factory:g.\u0275fac}),g})(),br=(()=>{class g extends qo{constructor(E,V,se,ut){super(ht.c),this.angularDelegate=E,this.resolver=V,this.injector=se,this.environmentInjector=ut}create(E){var V;return super.create(Object.assign(Object.assign({},E),{delegate:this.angularDelegate.create(null!==(V=this.resolver)&&void 0!==V?V:this.environmentInjector,this.injector)}))}}return g.\u0275fac=function(E){return new(E||g)(a.LFG(ui),a.LFG(a._Vd),a.LFG(a.zs3),a.LFG(wo,8))},g.\u0275prov=a.Yz7({token:g,factory:g.\u0275fac}),g})(),Ko=(()=>{class g extends qo{constructor(){super(ht.t)}}return g.\u0275fac=function(E){return new(E||g)},g.\u0275prov=a.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})();class ws{shouldDetach(P){return!1}shouldAttach(P){return!1}store(P,E){}retrieve(P){return null}shouldReuseRoute(P,E){if(P.routeConfig!==E.routeConfig)return!1;const V=P.params,se=E.params,ut=Object.keys(V),Xt=Object.keys(se);if(ut.length!==Xt.length)return!1;for(const yn of ut)if(se[yn]!==V[yn])return!1;return!0}}const As=(g,P,E)=>()=>{if(P.defaultView&&"undefined"!=typeof window){(g=>{const P=window,E=P.Ionic;E&&E.config&&"Object"!==E.config.constructor.name||(P.Ionic=P.Ionic||{},P.Ionic.config=Object.assign(Object.assign({},P.Ionic.config),g))})(Object.assign(Object.assign({},g),{_zoneGate:ut=>E.run(ut)}));const se="__zone_symbol__addEventListener"in P.body?"__zone_symbol__addEventListener":"addEventListener";return function Ue(){var g=[];if("undefined"!=typeof window){var P=window;(!P.customElements||P.Element&&(!P.Element.prototype.closest||!P.Element.prototype.matches||!P.Element.prototype.remove||!P.Element.prototype.getRootNode))&&g.push(H.e(6748).then(H.t.bind(H,723,23))),("function"!=typeof Object.assign||!Object.entries||!Array.prototype.find||!Array.prototype.includes||!String.prototype.startsWith||!String.prototype.endsWith||P.NodeList&&!P.NodeList.prototype.forEach||!P.fetch||!function(){try{var V=new URL("b","http://a");return V.pathname="c%20d","http://a/c%20d"===V.href&&V.searchParams}catch(se){return!1}}()||"undefined"==typeof WeakMap)&&g.push(H.e(2214).then(H.t.bind(H,4144,23)))}return Promise.all(g)}().then(()=>((g,P)=>"undefined"==typeof window?Promise.resolve():(0,ve.p)().then(()=>(Je(),(0,ve.b)(JSON.parse('[["ion-menu_3",[[33,"ion-menu-button",{"color":[513],"disabled":[4],"menu":[1],"autoHide":[4,"auto-hide"],"type":[1],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]],[33,"ion-menu",{"contentId":[513,"content-id"],"menuId":[513,"menu-id"],"type":[1025],"disabled":[1028],"side":[513],"swipeGesture":[4,"swipe-gesture"],"maxEdgeStart":[2,"max-edge-start"],"isPaneVisible":[32],"isEndSide":[32],"isOpen":[64],"isActive":[64],"open":[64],"close":[64],"toggle":[64],"setOpen":[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"],[0,"keydown","onKeydown"]]],[1,"ion-menu-toggle",{"menu":[1],"autoHide":[4,"auto-hide"],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]]],["ion-fab_3",[[33,"ion-fab-button",{"color":[513],"activated":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1],"show":[4],"translucent":[4],"type":[1],"size":[1],"closeIcon":[1,"close-icon"]}],[1,"ion-fab",{"horizontal":[1],"vertical":[1],"edge":[4],"activated":[1028],"close":[64],"toggle":[64]}],[1,"ion-fab-list",{"activated":[4],"side":[1]}]]],["ion-refresher_2",[[0,"ion-refresher-content",{"pullingIcon":[1025,"pulling-icon"],"pullingText":[1,"pulling-text"],"refreshingSpinner":[1025,"refreshing-spinner"],"refreshingText":[1,"refreshing-text"]}],[32,"ion-refresher",{"pullMin":[2,"pull-min"],"pullMax":[2,"pull-max"],"closeDuration":[1,"close-duration"],"snapbackDuration":[1,"snapback-duration"],"pullFactor":[2,"pull-factor"],"disabled":[4],"nativeRefresher":[32],"state":[32],"complete":[64],"cancel":[64],"getProgress":[64]}]]],["ion-back-button",[[33,"ion-back-button",{"color":[513],"defaultHref":[1025,"default-href"],"disabled":[516],"icon":[1],"text":[1],"type":[1],"routerAnimation":[16]}]]],["ion-toast",[[33,"ion-toast",{"overlayIndex":[2,"overlay-index"],"color":[513],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"duration":[2],"header":[1],"message":[1],"keyboardClose":[4,"keyboard-close"],"position":[1],"buttons":[16],"translucent":[4],"animated":[4],"icon":[1],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-card_5",[[33,"ion-card",{"color":[513],"button":[4],"type":[1],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}],[32,"ion-card-content"],[33,"ion-card-header",{"color":[513],"translucent":[4]}],[33,"ion-card-subtitle",{"color":[513]}],[33,"ion-card-title",{"color":[513]}]]],["ion-item-option_3",[[33,"ion-item-option",{"color":[513],"disabled":[4],"download":[1],"expandable":[4],"href":[1],"rel":[1],"target":[1],"type":[1]}],[32,"ion-item-options",{"side":[1],"fireSwipeEvent":[64]}],[0,"ion-item-sliding",{"disabled":[4],"state":[32],"getOpenAmount":[64],"getSlidingRatio":[64],"open":[64],"close":[64],"closeOpened":[64]}]]],["ion-accordion_2",[[49,"ion-accordion",{"value":[1],"disabled":[4],"readonly":[4],"toggleIcon":[1,"toggle-icon"],"toggleIconSlot":[1,"toggle-icon-slot"],"state":[32],"isNext":[32],"isPrevious":[32]}],[33,"ion-accordion-group",{"animated":[4],"multiple":[4],"value":[1025],"disabled":[4],"readonly":[4],"expand":[1],"requestAccordionToggle":[64],"getAccordions":[64]},[[0,"keydown","onKeydown"]]]]],["ion-breadcrumb_2",[[33,"ion-breadcrumb",{"collapsed":[4],"last":[4],"showCollapsedIndicator":[4,"show-collapsed-indicator"],"color":[1],"active":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"separator":[4],"target":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}],[33,"ion-breadcrumbs",{"color":[1],"maxItems":[2,"max-items"],"itemsBeforeCollapse":[2,"items-before-collapse"],"itemsAfterCollapse":[2,"items-after-collapse"],"collapsed":[32],"activeChanged":[32]},[[0,"collapsedClick","onCollapsedClick"]]]]],["ion-infinite-scroll_2",[[32,"ion-infinite-scroll-content",{"loadingSpinner":[1025,"loading-spinner"],"loadingText":[1,"loading-text"]}],[0,"ion-infinite-scroll",{"threshold":[1],"disabled":[4],"position":[1],"isLoading":[32],"complete":[64]}]]],["ion-reorder_2",[[33,"ion-reorder",null,[[2,"click","onClick"]]],[0,"ion-reorder-group",{"disabled":[4],"state":[32],"complete":[64]}]]],["ion-segment_2",[[33,"ion-segment-button",{"disabled":[4],"layout":[1],"type":[1],"value":[1],"checked":[32]}],[33,"ion-segment",{"color":[513],"disabled":[4],"scrollable":[4],"swipeGesture":[4,"swipe-gesture"],"value":[1025],"selectOnFocus":[4,"select-on-focus"],"activated":[32]},[[0,"keydown","onKeyDown"]]]]],["ion-tab-bar_2",[[33,"ion-tab-button",{"disabled":[4],"download":[1],"href":[1],"rel":[1],"layout":[1025],"selected":[1028],"tab":[1],"target":[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]],[33,"ion-tab-bar",{"color":[513],"selectedTab":[1,"selected-tab"],"translucent":[4],"keyboardVisible":[32]}]]],["ion-chip",[[1,"ion-chip",{"color":[513],"outline":[4],"disabled":[4]}]]],["ion-datetime-button",[[33,"ion-datetime-button",{"color":[513],"disabled":[516],"datetime":[1],"datetimePresentation":[32],"dateText":[32],"timeText":[32],"datetimeActive":[32],"selectedButton":[32]}]]],["ion-searchbar",[[34,"ion-searchbar",{"color":[513],"animated":[4],"autocomplete":[1],"autocorrect":[1],"cancelButtonIcon":[1,"cancel-button-icon"],"cancelButtonText":[1,"cancel-button-text"],"clearIcon":[1,"clear-icon"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"placeholder":[1],"searchIcon":[1,"search-icon"],"showCancelButton":[1,"show-cancel-button"],"showClearButton":[1,"show-clear-button"],"spellcheck":[4],"type":[1],"value":[1025],"focused":[32],"noAnimate":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-toggle",[[33,"ion-toggle",{"color":[513],"name":[1],"checked":[1028],"disabled":[4],"value":[1],"enableOnOffLabels":[4,"enable-on-off-labels"],"activated":[32]}]]],["ion-nav_2",[[1,"ion-nav",{"delegate":[16],"swipeGesture":[1028,"swipe-gesture"],"animated":[4],"animation":[16],"rootParams":[16],"root":[1],"push":[64],"insert":[64],"insertPages":[64],"pop":[64],"popTo":[64],"popToRoot":[64],"removeIndex":[64],"setRoot":[64],"setPages":[64],"setRouteId":[64],"getRouteId":[64],"getActive":[64],"getByIndex":[64],"canGoBack":[64],"getPrevious":[64]}],[0,"ion-nav-link",{"component":[1],"componentProps":[16],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}]]],["ion-input",[[34,"ion-input",{"fireFocusEvents":[4,"fire-focus-events"],"color":[513],"accept":[1],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"autofocus":[4],"clearInput":[4,"clear-input"],"clearOnEdit":[4,"clear-on-edit"],"debounce":[2],"disabled":[4],"enterkeyhint":[1],"inputmode":[1],"max":[8],"maxlength":[2],"min":[8],"minlength":[2],"multiple":[4],"name":[1],"pattern":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"step":[1],"size":[2],"type":[1],"value":[1032],"hasFocus":[32],"setFocus":[64],"setBlur":[64],"getInputElement":[64]}]]],["ion-textarea",[[34,"ion-textarea",{"fireFocusEvents":[4,"fire-focus-events"],"color":[513],"autocapitalize":[1],"autofocus":[4],"clearOnEdit":[1028,"clear-on-edit"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"cols":[2],"rows":[2],"wrap":[1],"autoGrow":[516,"auto-grow"],"value":[1025],"hasFocus":[32],"setFocus":[64],"setBlur":[64],"getInputElement":[64]}]]],["ion-backdrop",[[33,"ion-backdrop",{"visible":[4],"tappable":[4],"stopPropagation":[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]]],["ion-loading",[[34,"ion-loading",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"message":[1],"cssClass":[1,"css-class"],"duration":[2],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"spinner":[1025],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-modal",[[33,"ion-modal",{"hasController":[4,"has-controller"],"overlayIndex":[2,"overlay-index"],"delegate":[16],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"breakpoints":[16],"initialBreakpoint":[2,"initial-breakpoint"],"backdropBreakpoint":[2,"backdrop-breakpoint"],"handle":[4],"handleBehavior":[1,"handle-behavior"],"component":[1],"componentProps":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"animated":[4],"swipeToClose":[4,"swipe-to-close"],"presentingElement":[16],"htmlAttributes":[16],"isOpen":[4,"is-open"],"trigger":[1],"keepContentsMounted":[4,"keep-contents-mounted"],"canDismiss":[4,"can-dismiss"],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"setCurrentBreakpoint":[64],"getCurrentBreakpoint":[64]}]]],["ion-route_4",[[0,"ion-route",{"url":[1],"component":[1],"componentProps":[16],"beforeLeave":[16],"beforeEnter":[16]}],[0,"ion-route-redirect",{"from":[1],"to":[1]}],[0,"ion-router",{"root":[1],"useHash":[4,"use-hash"],"canTransition":[64],"push":[64],"back":[64],"printDebug":[64],"navChanged":[64]},[[8,"popstate","onPopState"],[4,"ionBackButton","onBackButton"]]],[1,"ion-router-link",{"color":[513],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}]]],["ion-avatar_3",[[33,"ion-avatar"],[33,"ion-badge",{"color":[513]}],[1,"ion-thumbnail"]]],["ion-col_3",[[1,"ion-col",{"offset":[1],"offsetXs":[1,"offset-xs"],"offsetSm":[1,"offset-sm"],"offsetMd":[1,"offset-md"],"offsetLg":[1,"offset-lg"],"offsetXl":[1,"offset-xl"],"pull":[1],"pullXs":[1,"pull-xs"],"pullSm":[1,"pull-sm"],"pullMd":[1,"pull-md"],"pullLg":[1,"pull-lg"],"pullXl":[1,"pull-xl"],"push":[1],"pushXs":[1,"push-xs"],"pushSm":[1,"push-sm"],"pushMd":[1,"push-md"],"pushLg":[1,"push-lg"],"pushXl":[1,"push-xl"],"size":[1],"sizeXs":[1,"size-xs"],"sizeSm":[1,"size-sm"],"sizeMd":[1,"size-md"],"sizeLg":[1,"size-lg"],"sizeXl":[1,"size-xl"]},[[9,"resize","onResize"]]],[1,"ion-grid",{"fixed":[4]}],[1,"ion-row"]]],["ion-slide_2",[[0,"ion-slide"],[36,"ion-slides",{"options":[8],"pager":[4],"scrollbar":[4],"update":[64],"updateAutoHeight":[64],"slideTo":[64],"slideNext":[64],"slidePrev":[64],"getActiveIndex":[64],"getPreviousIndex":[64],"length":[64],"isEnd":[64],"isBeginning":[64],"startAutoplay":[64],"stopAutoplay":[64],"lockSwipeToNext":[64],"lockSwipeToPrev":[64],"lockSwipes":[64],"getSwiper":[64]}]]],["ion-tab_2",[[1,"ion-tab",{"active":[1028],"delegate":[16],"tab":[1],"component":[1],"setActive":[64]}],[1,"ion-tabs",{"useRouter":[1028,"use-router"],"selectedTab":[32],"select":[64],"getTab":[64],"getSelected":[64],"setRouteId":[64],"getRouteId":[64]}]]],["ion-img",[[1,"ion-img",{"alt":[1],"src":[1],"loadSrc":[32],"loadError":[32]}]]],["ion-progress-bar",[[33,"ion-progress-bar",{"type":[1],"reversed":[4],"value":[2],"buffer":[2],"color":[513]}]]],["ion-range",[[33,"ion-range",{"color":[513],"debounce":[2],"name":[1],"dualKnobs":[4,"dual-knobs"],"min":[2],"max":[2],"pin":[4],"pinFormatter":[16],"snaps":[4],"step":[2],"ticks":[4],"activeBarStart":[1026,"active-bar-start"],"disabled":[4],"value":[1026],"ratioA":[32],"ratioB":[32],"pressedKnob":[32]}]]],["ion-split-pane",[[33,"ion-split-pane",{"contentId":[513,"content-id"],"disabled":[4],"when":[8],"visible":[32]}]]],["ion-text",[[1,"ion-text",{"color":[513]}]]],["ion-virtual-scroll",[[0,"ion-virtual-scroll",{"approxItemHeight":[2,"approx-item-height"],"approxHeaderHeight":[2,"approx-header-height"],"approxFooterHeight":[2,"approx-footer-height"],"headerFn":[16],"footerFn":[16],"items":[16],"itemHeight":[16],"headerHeight":[16],"footerHeight":[16],"renderItem":[16],"renderHeader":[16],"renderFooter":[16],"nodeRender":[16],"domRender":[16],"totalHeight":[32],"positionForItem":[64],"checkRange":[64],"checkEnd":[64]},[[9,"resize","onResize"]]]]],["ion-picker-column-internal",[[33,"ion-picker-column-internal",{"items":[16],"value":[1032],"color":[513],"numericInput":[4,"numeric-input"],"isActive":[32],"scrollActiveItemIntoView":[64],"setValue":[64]}]]],["ion-picker-internal",[[33,"ion-picker-internal",null,[[1,"touchstart","preventTouchStartPropagation"]]]]],["ion-radio_2",[[33,"ion-radio",{"color":[513],"name":[1],"disabled":[4],"value":[8],"checked":[32],"buttonTabindex":[32],"setFocus":[64],"setButtonTabindex":[64]}],[0,"ion-radio-group",{"allowEmptySelection":[4,"allow-empty-selection"],"name":[1],"value":[1032]},[[4,"keydown","onKeydown"]]]]],["ion-ripple-effect",[[1,"ion-ripple-effect",{"type":[1],"addRipple":[64]}]]],["ion-button_2",[[33,"ion-button",{"color":[513],"buttonType":[1025,"button-type"],"disabled":[516],"expand":[513],"fill":[1537],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"download":[1],"href":[1],"rel":[1],"shape":[513],"size":[513],"strong":[4],"target":[1],"type":[1],"form":[1]}],[1,"ion-icon",{"mode":[1025],"color":[1],"ios":[1],"md":[1],"flipRtl":[4,"flip-rtl"],"name":[513],"src":[1],"icon":[8],"size":[1],"lazy":[4],"sanitize":[4],"svgContent":[32],"isVisible":[32],"ariaLabel":[32]}]]],["ion-datetime_3",[[33,"ion-datetime",{"color":[1],"name":[1],"disabled":[4],"readonly":[4],"isDateEnabled":[16],"min":[1025],"max":[1025],"presentation":[1],"cancelText":[1,"cancel-text"],"doneText":[1,"done-text"],"clearText":[1,"clear-text"],"yearValues":[8,"year-values"],"monthValues":[8,"month-values"],"dayValues":[8,"day-values"],"hourValues":[8,"hour-values"],"minuteValues":[8,"minute-values"],"locale":[1],"firstDayOfWeek":[2,"first-day-of-week"],"titleSelectedDatesFormatter":[16],"multiple":[4],"value":[1025],"showDefaultTitle":[4,"show-default-title"],"showDefaultButtons":[4,"show-default-buttons"],"showClearButton":[4,"show-clear-button"],"showDefaultTimeLabel":[4,"show-default-time-label"],"hourCycle":[1,"hour-cycle"],"size":[1],"preferWheel":[4,"prefer-wheel"],"showMonthAndYear":[32],"activeParts":[32],"workingParts":[32],"isPresented":[32],"isTimePopoverOpen":[32],"confirm":[64],"reset":[64],"cancel":[64]}],[34,"ion-picker",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"columns":[16],"cssClass":[1,"css-class"],"duration":[2],"showBackdrop":[4,"show-backdrop"],"backdropDismiss":[4,"backdrop-dismiss"],"animated":[4],"htmlAttributes":[16],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"getColumn":[64]}],[32,"ion-picker-column",{"col":[16]}]]],["ion-action-sheet",[[34,"ion-action-sheet",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"header":[1],"subHeader":[1,"sub-header"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-alert",[[34,"ion-alert",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"header":[1],"subHeader":[1,"sub-header"],"message":[1],"buttons":[16],"inputs":[1040],"backdropDismiss":[4,"backdrop-dismiss"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[4,"keydown","onKeydown"]]]]],["ion-popover",[[33,"ion-popover",{"hasController":[4,"has-controller"],"delegate":[16],"overlayIndex":[2,"overlay-index"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"keyboardClose":[4,"keyboard-close"],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"event":[8],"showBackdrop":[4,"show-backdrop"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"triggerAction":[1,"trigger-action"],"trigger":[1],"size":[1],"dismissOnSelect":[4,"dismiss-on-select"],"reference":[1],"side":[1],"alignment":[1025],"arrow":[4],"isOpen":[4,"is-open"],"keyboardEvents":[4,"keyboard-events"],"keepContentsMounted":[4,"keep-contents-mounted"],"presented":[32],"presentFromTrigger":[64],"present":[64],"dismiss":[64],"getParentPopover":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-checkbox",[[33,"ion-checkbox",{"color":[513],"name":[1],"checked":[1028],"indeterminate":[1028],"disabled":[4],"value":[8]}]]],["ion-select_3",[[33,"ion-select",{"disabled":[4],"cancelText":[1,"cancel-text"],"okText":[1,"ok-text"],"placeholder":[1],"name":[1],"selectedText":[1,"selected-text"],"multiple":[4],"interface":[1],"interfaceOptions":[8,"interface-options"],"compareWith":[1,"compare-with"],"value":[1032],"isExpanded":[32],"open":[64]}],[1,"ion-select-option",{"disabled":[4],"value":[8]}],[34,"ion-select-popover",{"header":[1],"subHeader":[1,"sub-header"],"message":[1],"multiple":[4],"options":[16]},[[0,"ionChange","onSelect"]]]]],["ion-app_8",[[0,"ion-app",{"setFocus":[64]}],[1,"ion-content",{"color":[513],"fullscreen":[4],"forceOverscroll":[1028,"force-overscroll"],"scrollX":[4,"scroll-x"],"scrollY":[4,"scroll-y"],"scrollEvents":[4,"scroll-events"],"getScrollElement":[64],"getBackgroundElement":[64],"scrollToTop":[64],"scrollToBottom":[64],"scrollByPoint":[64],"scrollToPoint":[64]},[[8,"appload","onAppLoad"]]],[36,"ion-footer",{"collapse":[1],"translucent":[4],"keyboardVisible":[32]}],[36,"ion-header",{"collapse":[1],"translucent":[4]}],[1,"ion-router-outlet",{"mode":[1025],"delegate":[16],"animated":[4],"animation":[16],"swipeHandler":[16],"commit":[64],"setRouteId":[64],"getRouteId":[64]}],[33,"ion-title",{"color":[513],"size":[1]}],[33,"ion-toolbar",{"color":[513]},[[0,"ionStyle","childrenStyle"]]],[34,"ion-buttons",{"collapse":[4]}]]],["ion-spinner",[[1,"ion-spinner",{"color":[513],"duration":[2],"name":[1],"paused":[4]}]]],["ion-item_8",[[33,"ion-item-divider",{"color":[513],"sticky":[4]}],[32,"ion-item-group"],[1,"ion-skeleton-text",{"animated":[4]}],[32,"ion-list",{"lines":[1],"inset":[4],"closeSlidingItems":[64]}],[33,"ion-list-header",{"color":[513],"lines":[1]}],[49,"ion-item",{"color":[513],"button":[4],"detail":[4],"detailIcon":[1,"detail-icon"],"disabled":[4],"download":[1],"fill":[1],"shape":[1],"href":[1],"rel":[1],"lines":[1],"counter":[4],"routerAnimation":[16],"routerDirection":[1,"router-direction"],"target":[1],"type":[1],"counterFormatter":[16],"multipleInputs":[32],"focusable":[32],"counterString":[32]},[[0,"ionChange","handleIonChange"],[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]]],[34,"ion-label",{"color":[513],"position":[1],"noAnimate":[32]}],[33,"ion-note",{"color":[513]}]]]]'),P))))(0,{exclude:["ion-tabs","ion-tab"],syncQueue:!0,raf:Rn,jmp:ut=>E.runOutsideAngular(ut),ael(ut,Xt,yn,Zn){ut[se](Xt,yn,Zn)},rel(ut,Xt,yn,Zn){ut.removeEventListener(Xt,yn,Zn)}}))}};let M=(()=>{class g{static forRoot(E){return{ngModule:g,providers:[{provide:gs,useValue:E},{provide:a.ip1,useFactory:As,multi:!0,deps:[gs,$e.K0,a.R0b]}]}}}return g.\u0275fac=function(E){return new(E||g)},g.\u0275mod=a.oAB({type:g}),g.\u0275inj=a.cJS({providers:[ui,qt,br],imports:[[$e.ez]]}),g})()},5942:(tn,ot,H)=>{"use strict";H.d(ot,{c:()=>et});var a=H(5730),ne=H(3457);let Y;const Le=Re=>Re.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),he=Re=>{if(void 0===Y){const ct=void 0!==Re.style.webkitAnimationName;Y=void 0===Re.style.animationName&&ct?"-webkit-":""}return Y},Ee=(Re,De,ct)=>{const me=De.startsWith("animation")?he(Re):"";Re.style.setProperty(me+De,ct)},pe=(Re,De)=>{const ct=De.startsWith("animation")?he(Re):"";Re.style.removeProperty(ct+De)},de=[],st=(Re=[],De)=>{if(void 0!==De){const ct=Array.isArray(De)?De:[De];return[...Re,...ct]}return Re},et=Re=>{let De,ct,me,vt,mt,xt,ve,at,$e,Ue,Je,Vt,Nt,Be=[],ht=[],ye=[],Oe=!1,oe={},Ce=[],Te=[],lt={},J=0,Gt=!1,bt=!1,Qe=!0,ft=!1,pt=!0,bn=!1;const In=Re,Qn=[],Rn=[],Wn=[],cr=[],Hn=[],or=[],mr=[],Wt=[],rr=[],Nr=[],tr="function"==typeof AnimationEffect||void 0!==ne.w&&"function"==typeof ne.w.AnimationEffect,Jn="function"==typeof Element&&"function"==typeof Element.prototype.animate&&tr,an=()=>Nr,yr=(_e,qe)=>((null!=qe&&qe.oneTimeCallback?Rn:Qn).push({c:_e,o:qe}),Nt),Dr=()=>{if(Jn)Nr.forEach(_e=>{_e.cancel()}),Nr.length=0;else{const _e=Wn.slice();(0,a.r)(()=>{_e.forEach(qe=>{pe(qe,"animation-name"),pe(qe,"animation-duration"),pe(qe,"animation-timing-function"),pe(qe,"animation-iteration-count"),pe(qe,"animation-delay"),pe(qe,"animation-play-state"),pe(qe,"animation-fill-mode"),pe(qe,"animation-direction")})})}},Pr=()=>{Hn.forEach(_e=>{null!=_e&&_e.parentNode&&_e.parentNode.removeChild(_e)}),Hn.length=0},On=()=>void 0!==mt?mt:ve?ve.getFill():"both",je=()=>void 0!==$e?$e:void 0!==xt?xt:ve?ve.getDirection():"normal",Ne=()=>Gt?"linear":void 0!==me?me:ve?ve.getEasing():"linear",He=()=>bt?0:void 0!==Ue?Ue:void 0!==ct?ct:ve?ve.getDuration():0,dt=()=>void 0!==vt?vt:ve?ve.getIterations():1,tt=()=>void 0!==Je?Je:void 0!==De?De:ve?ve.getDelay():0,lr=()=>{0!==J&&(J--,0===J&&((()=>{wi(),Wt.forEach(jt=>jt()),rr.forEach(jt=>jt());const _e=Qe?1:0,qe=Ce,yt=Te,Ot=lt;Wn.forEach(jt=>{const un=jt.classList;qe.forEach(An=>un.add(An)),yt.forEach(An=>un.remove(An));for(const An in Ot)Ot.hasOwnProperty(An)&&Ee(jt,An,Ot[An])}),Qn.forEach(jt=>jt.c(_e,Nt)),Rn.forEach(jt=>jt.c(_e,Nt)),Rn.length=0,pt=!0,Qe&&(ft=!0),Qe=!0})(),ve&&ve.animationFinish()))},Hr=(_e=!0)=>{Pr();const qe=(Re=>(Re.forEach(De=>{for(const ct in De)if(De.hasOwnProperty(ct)){const me=De[ct];if("easing"===ct)De["animation-timing-function"]=me,delete De[ct];else{const vt=Le(ct);vt!==ct&&(De[vt]=me,delete De[ct])}}}),Re))(Be);Wn.forEach(yt=>{if(qe.length>0){const Ot=((Re=[])=>Re.map(De=>{const ct=De.offset,me=[];for(const vt in De)De.hasOwnProperty(vt)&&"offset"!==vt&&me.push(`${vt}: ${De[vt]};`);return`${100*ct}% { ${me.join(" ")} }`}).join(" "))(qe);Vt=void 0!==Re?Re:(Re=>{let De=de.indexOf(Re);return De<0&&(De=de.push(Re)-1),`ion-animation-${De}`})(Ot);const jt=((Re,De,ct)=>{var me;const vt=(Re=>{const De=void 0!==Re.getRootNode?Re.getRootNode():Re;return De.head||De})(ct),mt=he(ct),xt=vt.querySelector("#"+Re);if(xt)return xt;const Be=(null!==(me=ct.ownerDocument)&&void 0!==me?me:document).createElement("style");return Be.id=Re,Be.textContent=`@${mt}keyframes ${Re} { ${De} } @${mt}keyframes ${Re}-alt { ${De} }`,vt.appendChild(Be),Be})(Vt,Ot,yt);Hn.push(jt),Ee(yt,"animation-duration",`${He()}ms`),Ee(yt,"animation-timing-function",Ne()),Ee(yt,"animation-delay",`${tt()}ms`),Ee(yt,"animation-fill-mode",On()),Ee(yt,"animation-direction",je());const un=dt()===1/0?"infinite":dt().toString();Ee(yt,"animation-iteration-count",un),Ee(yt,"animation-play-state","paused"),_e&&Ee(yt,"animation-name",`${jt.id}-alt`),(0,a.r)(()=>{Ee(yt,"animation-name",jt.id||null)})}})},ti=(_e=!0)=>{(()=>{or.forEach(Ot=>Ot()),mr.forEach(Ot=>Ot());const _e=ht,qe=ye,yt=oe;Wn.forEach(Ot=>{const jt=Ot.classList;_e.forEach(un=>jt.add(un)),qe.forEach(un=>jt.remove(un));for(const un in yt)yt.hasOwnProperty(un)&&Ee(Ot,un,yt[un])})})(),Be.length>0&&(Jn?(Wn.forEach(_e=>{const qe=_e.animate(Be,{id:In,delay:tt(),duration:He(),easing:Ne(),iterations:dt(),fill:On(),direction:je()});qe.pause(),Nr.push(qe)}),Nr.length>0&&(Nr[0].onfinish=()=>{lr()})):Hr(_e)),Oe=!0},hi=_e=>{if(_e=Math.min(Math.max(_e,0),.9999),Jn)Nr.forEach(qe=>{qe.currentTime=qe.effect.getComputedTiming().delay+He()*_e,qe.pause()});else{const qe=`-${He()*_e}ms`;Wn.forEach(yt=>{Be.length>0&&(Ee(yt,"animation-delay",qe),Ee(yt,"animation-play-state","paused"))})}},Er=_e=>{Nr.forEach(qe=>{qe.effect.updateTiming({delay:tt(),duration:He(),easing:Ne(),iterations:dt(),fill:On(),direction:je()})}),void 0!==_e&&hi(_e)},Fi=(_e=!0,qe)=>{(0,a.r)(()=>{Wn.forEach(yt=>{Ee(yt,"animation-name",Vt||null),Ee(yt,"animation-duration",`${He()}ms`),Ee(yt,"animation-timing-function",Ne()),Ee(yt,"animation-delay",void 0!==qe?`-${qe*He()}ms`:`${tt()}ms`),Ee(yt,"animation-fill-mode",On()||null),Ee(yt,"animation-direction",je()||null);const Ot=dt()===1/0?"infinite":dt().toString();Ee(yt,"animation-iteration-count",Ot),_e&&Ee(yt,"animation-name",`${Vt}-alt`),(0,a.r)(()=>{Ee(yt,"animation-name",Vt||null)})})})},Ei=(_e=!1,qe=!0,yt)=>(_e&&cr.forEach(Ot=>{Ot.update(_e,qe,yt)}),Jn?Er(yt):Fi(qe,yt),Nt),Ii=()=>{Oe&&(Jn?Nr.forEach(_e=>{_e.pause()}):Wn.forEach(_e=>{Ee(_e,"animation-play-state","paused")}),bn=!0)},Fr=()=>{at=void 0,lr()},wi=()=>{at&&clearTimeout(at)},ee=_e=>new Promise(qe=>{null!=_e&&_e.sync&&(bt=!0,yr(()=>bt=!1,{oneTimeCallback:!0})),Oe||ti(),ft&&(Jn?(hi(0),Er()):Fi(),ft=!1),pt&&(J=cr.length+1,pt=!1),yr(()=>qe(),{oneTimeCallback:!0}),cr.forEach(yt=>{yt.play()}),Jn?(Nr.forEach(_e=>{_e.play()}),(0===Be.length||0===Wn.length)&&lr()):(()=>{if(wi(),(0,a.r)(()=>{Wn.forEach(_e=>{Be.length>0&&Ee(_e,"animation-play-state","running")})}),0===Be.length||0===Wn.length)lr();else{const _e=tt()||0,qe=He()||0,yt=dt()||1;isFinite(yt)&&(at=setTimeout(Fr,_e+qe*yt+100)),((Re,De)=>{let ct;const me={passive:!0},mt=xt=>{Re===xt.target&&(ct&&ct(),wi(),(0,a.r)(()=>{Wn.forEach(_e=>{pe(_e,"animation-duration"),pe(_e,"animation-delay"),pe(_e,"animation-play-state")}),(0,a.r)(lr)}))};Re&&(Re.addEventListener("webkitAnimationEnd",mt,me),Re.addEventListener("animationend",mt,me),ct=()=>{Re.removeEventListener("webkitAnimationEnd",mt,me),Re.removeEventListener("animationend",mt,me)})})(Wn[0])}})(),bn=!1}),Ze=(_e,qe)=>{const yt=Be[0];return void 0===yt||void 0!==yt.offset&&0!==yt.offset?Be=[{offset:0,[_e]:qe},...Be]:yt[_e]=qe,Nt};return Nt={parentAnimation:ve,elements:Wn,childAnimations:cr,id:In,animationFinish:lr,from:Ze,to:(_e,qe)=>{const yt=Be[Be.length-1];return void 0===yt||void 0!==yt.offset&&1!==yt.offset?Be=[...Be,{offset:1,[_e]:qe}]:yt[_e]=qe,Nt},fromTo:(_e,qe,yt)=>Ze(_e,qe).to(_e,yt),parent:_e=>(ve=_e,Nt),play:ee,pause:()=>(cr.forEach(_e=>{_e.pause()}),Ii(),Nt),stop:()=>{cr.forEach(_e=>{_e.stop()}),Oe&&(Dr(),Oe=!1),Gt=!1,bt=!1,pt=!0,$e=void 0,Ue=void 0,Je=void 0,J=0,ft=!1,Qe=!0,bn=!1},destroy:_e=>(cr.forEach(qe=>{qe.destroy(_e)}),(_e=>{Dr(),_e&&Pr()})(_e),Wn.length=0,cr.length=0,Be.length=0,Qn.length=0,Rn.length=0,Oe=!1,pt=!0,Nt),keyframes:_e=>{const qe=Be!==_e;return Be=_e,qe&&(_e=>{Jn?an().forEach(qe=>{if(qe.effect.setKeyframes)qe.effect.setKeyframes(_e);else{const yt=new KeyframeEffect(qe.effect.target,_e,qe.effect.getTiming());qe.effect=yt}}):Hr()})(Be),Nt},addAnimation:_e=>{if(null!=_e)if(Array.isArray(_e))for(const qe of _e)qe.parent(Nt),cr.push(qe);else _e.parent(Nt),cr.push(_e);return Nt},addElement:_e=>{if(null!=_e)if(1===_e.nodeType)Wn.push(_e);else if(_e.length>=0)for(let qe=0;qe<_e.length;qe++)Wn.push(_e[qe]);else console.error("Invalid addElement value");return Nt},update:Ei,fill:_e=>(mt=_e,Ei(!0),Nt),direction:_e=>(xt=_e,Ei(!0),Nt),iterations:_e=>(vt=_e,Ei(!0),Nt),duration:_e=>(!Jn&&0===_e&&(_e=1),ct=_e,Ei(!0),Nt),easing:_e=>(me=_e,Ei(!0),Nt),delay:_e=>(De=_e,Ei(!0),Nt),getWebAnimations:an,getKeyframes:()=>Be,getFill:On,getDirection:je,getDelay:tt,getIterations:dt,getEasing:Ne,getDuration:He,afterAddRead:_e=>(Wt.push(_e),Nt),afterAddWrite:_e=>(rr.push(_e),Nt),afterClearStyles:(_e=[])=>{for(const qe of _e)lt[qe]="";return Nt},afterStyles:(_e={})=>(lt=_e,Nt),afterRemoveClass:_e=>(Te=st(Te,_e),Nt),afterAddClass:_e=>(Ce=st(Ce,_e),Nt),beforeAddRead:_e=>(or.push(_e),Nt),beforeAddWrite:_e=>(mr.push(_e),Nt),beforeClearStyles:(_e=[])=>{for(const qe of _e)oe[qe]="";return Nt},beforeStyles:(_e={})=>(oe=_e,Nt),beforeRemoveClass:_e=>(ye=st(ye,_e),Nt),beforeAddClass:_e=>(ht=st(ht,_e),Nt),onFinish:yr,isRunning:()=>0!==J&&!bn,progressStart:(_e=!1,qe)=>(cr.forEach(yt=>{yt.progressStart(_e,qe)}),Ii(),Gt=_e,Oe||ti(),Ei(!1,!0,qe),Nt),progressStep:_e=>(cr.forEach(qe=>{qe.progressStep(_e)}),hi(_e),Nt),progressEnd:(_e,qe,yt)=>(Gt=!1,cr.forEach(Ot=>{Ot.progressEnd(_e,qe,yt)}),void 0!==yt&&(Ue=yt),ft=!1,Qe=!0,0===_e?($e="reverse"===je()?"normal":"reverse","reverse"===$e&&(Qe=!1),Jn?(Ei(),hi(1-qe)):(Je=(1-qe)*He()*-1,Ei(!1,!1))):1===_e&&(Jn?(Ei(),hi(qe)):(Je=qe*He()*-1,Ei(!1,!1))),void 0!==_e&&(yr(()=>{Ue=void 0,$e=void 0,Je=void 0},{oneTimeCallback:!0}),ve||ee()),Nt)}}},4349:(tn,ot,H)=>{"use strict";H.d(ot,{G:()=>Le});class ne{constructor(Ee,pe,be,ce,de){this.id=pe,this.name=be,this.disableScroll=de,this.priority=1e6*ce+pe,this.ctrl=Ee}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const Ee=this.ctrl.capture(this.name,this.id,this.priority);return Ee&&this.disableScroll&&this.ctrl.disableScroll(this.id),Ee}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class Y{constructor(Ee,pe,be,ce){this.id=pe,this.disable=be,this.disableScroll=ce,this.ctrl=Ee}block(){if(this.ctrl){if(this.disable)for(const Ee of this.disable)this.ctrl.disableGesture(Ee,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const Ee of this.disable)this.ctrl.enableGesture(Ee,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const Pe="backdrop-no-scroll",Le=new class a{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(Ee){var pe;return new ne(this,this.newID(),Ee.name,null!==(pe=Ee.priority)&&void 0!==pe?pe:0,!!Ee.disableScroll)}createBlocker(Ee={}){return new Y(this,this.newID(),Ee.disable,!!Ee.disableScroll)}start(Ee,pe,be){return this.canStart(Ee)?(this.requestedStart.set(pe,be),!0):(this.requestedStart.delete(pe),!1)}capture(Ee,pe,be){if(!this.start(Ee,pe,be))return!1;const ce=this.requestedStart;let de=-1e4;if(ce.forEach(ie=>{de=Math.max(de,ie)}),de===be){this.capturedId=pe,ce.clear();const ie=new CustomEvent("ionGestureCaptured",{detail:{gestureName:Ee}});return document.dispatchEvent(ie),!0}return ce.delete(pe),!1}release(Ee){this.requestedStart.delete(Ee),this.capturedId===Ee&&(this.capturedId=void 0)}disableGesture(Ee,pe){let be=this.disabledGestures.get(Ee);void 0===be&&(be=new Set,this.disabledGestures.set(Ee,be)),be.add(pe)}enableGesture(Ee,pe){const be=this.disabledGestures.get(Ee);void 0!==be&&be.delete(pe)}disableScroll(Ee){this.disabledScroll.add(Ee),1===this.disabledScroll.size&&document.body.classList.add(Pe)}enableScroll(Ee){this.disabledScroll.delete(Ee),0===this.disabledScroll.size&&document.body.classList.remove(Pe)}canStart(Ee){return!(void 0!==this.capturedId||this.isDisabled(Ee))}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(Ee){const pe=this.disabledGestures.get(Ee);return!!(pe&&pe.size>0)}newID(){return this.gestureId++,this.gestureId}}},7593:(tn,ot,H)=>{"use strict";H.r(ot),H.d(ot,{MENU_BACK_BUTTON_PRIORITY:()=>Le,OVERLAY_BACK_BUTTON_PRIORITY:()=>Pe,blockHardwareBackButton:()=>ne,startHardwareBackButton:()=>Y});var a=H(5861);const ne=()=>{document.addEventListener("backbutton",()=>{})},Y=()=>{const he=document;let Ee=!1;he.addEventListener("backbutton",()=>{if(Ee)return;let pe=0,be=[];const ce=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(Ie,Ge){be.push({priority:Ie,handler:Ge,id:pe++})}}});he.dispatchEvent(ce);const de=function(){var Ie=(0,a.Z)(function*(Ge){try{if(null!=Ge&&Ge.handler){const st=Ge.handler(ie);null!=st&&(yield st)}}catch(st){console.error(st)}});return function(st){return Ie.apply(this,arguments)}}(),ie=()=>{if(be.length>0){let Ie={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};be.forEach(Ge=>{Ge.priority>=Ie.priority&&(Ie=Ge)}),Ee=!0,be=be.filter(Ge=>Ge.id!==Ie.id),de(Ie).then(()=>Ee=!1)}};ie()})},Pe=100,Le=99},5730:(tn,ot,H)=>{"use strict";H.d(ot,{a:()=>Ee,b:()=>pe,c:()=>Y,d:()=>Ge,e:()=>st,f:()=>Ie,g:()=>be,h:()=>vt,i:()=>he,j:()=>Pe,k:()=>ie,l:()=>et,m:()=>de,n:()=>Re,o:()=>me,p:()=>ct,q:()=>mt,r:()=>ce,s:()=>xt,t:()=>a,u:()=>De});const a=(Be,ht=0)=>new Promise(ye=>{ne(Be,ht,ye)}),ne=(Be,ht=0,ye)=>{let Oe,ve;const oe={passive:!0},Te=()=>{Oe&&Oe()},lt=J=>{(void 0===J||Be===J.target)&&(Te(),ye(J))};return Be&&(Be.addEventListener("webkitTransitionEnd",lt,oe),Be.addEventListener("transitionend",lt,oe),ve=setTimeout(lt,ht+500),Oe=()=>{ve&&(clearTimeout(ve),ve=void 0),Be.removeEventListener("webkitTransitionEnd",lt,oe),Be.removeEventListener("transitionend",lt,oe)}),Te},Y=(Be,ht)=>{Be.componentOnReady?Be.componentOnReady().then(ye=>ht(ye)):ce(()=>ht(Be))},Pe=(Be,ht=[])=>{const ye={};return ht.forEach(Oe=>{Be.hasAttribute(Oe)&&(null!==Be.getAttribute(Oe)&&(ye[Oe]=Be.getAttribute(Oe)),Be.removeAttribute(Oe))}),ye},Le=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],he=(Be,ht)=>{let ye=Le;return ht&&ht.length>0&&(ye=ye.filter(Oe=>!ht.includes(Oe))),Pe(Be,ye)},Ee=(Be,ht,ye,Oe)=>{var ve;if("undefined"!=typeof window){const oe=window,Ce=null===(ve=null==oe?void 0:oe.Ionic)||void 0===ve?void 0:ve.config;if(Ce){const Te=Ce.get("_ael");if(Te)return Te(Be,ht,ye,Oe);if(Ce._ael)return Ce._ael(Be,ht,ye,Oe)}}return Be.addEventListener(ht,ye,Oe)},pe=(Be,ht,ye,Oe)=>{var ve;if("undefined"!=typeof window){const oe=window,Ce=null===(ve=null==oe?void 0:oe.Ionic)||void 0===ve?void 0:ve.config;if(Ce){const Te=Ce.get("_rel");if(Te)return Te(Be,ht,ye,Oe);if(Ce._rel)return Ce._rel(Be,ht,ye,Oe)}}return Be.removeEventListener(ht,ye,Oe)},be=(Be,ht=Be)=>Be.shadowRoot||ht,ce=Be=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(Be):"function"==typeof requestAnimationFrame?requestAnimationFrame(Be):setTimeout(Be),de=Be=>!!Be.shadowRoot&&!!Be.attachShadow,ie=Be=>{const ht=Be.closest("ion-item");return ht?ht.querySelector("ion-label"):null},Ie=Be=>{if(Be.focus(),Be.classList.contains("ion-focusable")){const ht=Be.closest("ion-app");ht&&ht.setFocus([Be])}},Ge=(Be,ht)=>{let ye;const Oe=Be.getAttribute("aria-labelledby"),ve=Be.id;let oe=null!==Oe&&""!==Oe.trim()?Oe:ht+"-lbl",Ce=null!==Oe&&""!==Oe.trim()?document.getElementById(Oe):ie(Be);return Ce?(null===Oe&&(Ce.id=oe),ye=Ce.textContent,Ce.setAttribute("aria-hidden","true")):""!==ve.trim()&&(Ce=document.querySelector(`label[for="${ve}"]`),Ce&&(""!==Ce.id?oe=Ce.id:Ce.id=oe=`${ve}-lbl`,ye=Ce.textContent)),{label:Ce,labelId:oe,labelText:ye}},st=(Be,ht,ye,Oe,ve)=>{if(Be||de(ht)){let oe=ht.querySelector("input.aux-input");oe||(oe=ht.ownerDocument.createElement("input"),oe.type="hidden",oe.classList.add("aux-input"),ht.appendChild(oe)),oe.disabled=ve,oe.name=ye,oe.value=Oe||""}},et=(Be,ht,ye)=>Math.max(Be,Math.min(ht,ye)),Re=(Be,ht)=>{if(!Be){const ye="ASSERT: "+ht;throw console.error(ye),new Error(ye)}},De=Be=>Be.timeStamp||Date.now(),ct=Be=>{if(Be){const ht=Be.changedTouches;if(ht&&ht.length>0){const ye=ht[0];return{x:ye.clientX,y:ye.clientY}}if(void 0!==Be.pageX)return{x:Be.pageX,y:Be.pageY}}return{x:0,y:0}},me=Be=>{const ht="rtl"===document.dir;switch(Be){case"start":return ht;case"end":return!ht;default:throw new Error(`"${Be}" is not a valid value for [side]. Use "start" or "end" instead.`)}},vt=(Be,ht)=>{const ye=Be._original||Be;return{_original:Be,emit:mt(ye.emit.bind(ye),ht)}},mt=(Be,ht=0)=>{let ye;return(...Oe)=>{clearTimeout(ye),ye=setTimeout(Be,ht,...Oe)}},xt=(Be,ht)=>{if(null!=Be||(Be={}),null!=ht||(ht={}),Be===ht)return!0;const ye=Object.keys(Be);if(ye.length!==Object.keys(ht).length)return!1;for(const Oe of ye)if(!(Oe in ht)||Be[Oe]!==ht[Oe])return!1;return!0}},3457:(tn,ot,H)=>{"use strict";H.d(ot,{w:()=>a});const a="undefined"!=typeof window?window:void 0},385:(tn,ot,H)=>{"use strict";H.d(ot,{m:()=>de});var a=H(5861),ne=H(7593),Y=H(5730),Pe=H(9658),Le=H(5942);const he=ie=>(0,Le.c)().duration(ie?400:300),Ee=ie=>{let Ie,Ge;const st=ie.width+8,et=(0,Le.c)(),Re=(0,Le.c)();ie.isEndSide?(Ie=st+"px",Ge="0px"):(Ie=-st+"px",Ge="0px"),et.addElement(ie.menuInnerEl).fromTo("transform",`translateX(${Ie})`,`translateX(${Ge})`);const ct="ios"===(0,Pe.b)(ie),me=ct?.2:.25;return Re.addElement(ie.backdropEl).fromTo("opacity",.01,me),he(ct).addAnimation([et,Re])},pe=ie=>{let Ie,Ge;const st=(0,Pe.b)(ie),et=ie.width;ie.isEndSide?(Ie=-et+"px",Ge=et+"px"):(Ie=et+"px",Ge=-et+"px");const Re=(0,Le.c)().addElement(ie.menuInnerEl).fromTo("transform",`translateX(${Ge})`,"translateX(0px)"),De=(0,Le.c)().addElement(ie.contentEl).fromTo("transform","translateX(0px)",`translateX(${Ie})`),ct=(0,Le.c)().addElement(ie.backdropEl).fromTo("opacity",.01,.32);return he("ios"===st).addAnimation([Re,De,ct])},be=ie=>{const Ie=(0,Pe.b)(ie),Ge=ie.width*(ie.isEndSide?-1:1)+"px",st=(0,Le.c)().addElement(ie.contentEl).fromTo("transform","translateX(0px)",`translateX(${Ge})`);return he("ios"===Ie).addAnimation(st)},de=(()=>{const ie=new Map,Ie=[],Ge=function(){var at=(0,a.Z)(function*($e){const Ue=yield vt($e);return!!Ue&&Ue.open()});return function(Ue){return at.apply(this,arguments)}}(),st=function(){var at=(0,a.Z)(function*($e){const Ue=yield void 0!==$e?vt($e):mt();return void 0!==Ue&&Ue.close()});return function(Ue){return at.apply(this,arguments)}}(),et=function(){var at=(0,a.Z)(function*($e){const Ue=yield vt($e);return!!Ue&&Ue.toggle()});return function(Ue){return at.apply(this,arguments)}}(),Re=function(){var at=(0,a.Z)(function*($e,Ue){const Je=yield vt(Ue);return Je&&(Je.disabled=!$e),Je});return function(Ue,Je){return at.apply(this,arguments)}}(),De=function(){var at=(0,a.Z)(function*($e,Ue){const Je=yield vt(Ue);return Je&&(Je.swipeGesture=$e),Je});return function(Ue,Je){return at.apply(this,arguments)}}(),ct=function(){var at=(0,a.Z)(function*($e){if(null!=$e){const Ue=yield vt($e);return void 0!==Ue&&Ue.isOpen()}return void 0!==(yield mt())});return function(Ue){return at.apply(this,arguments)}}(),me=function(){var at=(0,a.Z)(function*($e){const Ue=yield vt($e);return!!Ue&&!Ue.disabled});return function(Ue){return at.apply(this,arguments)}}(),vt=function(){var at=(0,a.Z)(function*($e){return yield bt(),"start"===$e||"end"===$e?Gt(Qe=>Qe.side===$e&&!Qe.disabled)||Gt(Qe=>Qe.side===$e):null!=$e?Gt(Je=>Je.menuId===$e):Gt(Je=>!Je.disabled)||(Ie.length>0?Ie[0].el:void 0)});return function(Ue){return at.apply(this,arguments)}}(),mt=function(){var at=(0,a.Z)(function*(){return yield bt(),Te()});return function(){return at.apply(this,arguments)}}(),xt=function(){var at=(0,a.Z)(function*(){return yield bt(),lt()});return function(){return at.apply(this,arguments)}}(),Be=function(){var at=(0,a.Z)(function*(){return yield bt(),J()});return function(){return at.apply(this,arguments)}}(),ht=(at,$e)=>{ie.set(at,$e)},ve=at=>{const $e=at.side;Ie.filter(Ue=>Ue.side===$e&&Ue!==at).forEach(Ue=>Ue.disabled=!0)},oe=function(){var at=(0,a.Z)(function*($e,Ue,Je){if(J())return!1;if(Ue){const Qe=yield mt();Qe&&$e.el!==Qe&&(yield Qe.setOpen(!1,!1))}return $e._setOpen(Ue,Je)});return function(Ue,Je,Qe){return at.apply(this,arguments)}}(),Te=()=>Gt(at=>at._isOpen),lt=()=>Ie.map(at=>at.el),J=()=>Ie.some(at=>at.isAnimating),Gt=at=>{const $e=Ie.find(at);if(void 0!==$e)return $e.el},bt=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(at=>new Promise($e=>(0,Y.c)(at,$e))));return ht("reveal",be),ht("push",pe),ht("overlay",Ee),"undefined"!=typeof document&&document.addEventListener("ionBackButton",at=>{const $e=Te();$e&&at.detail.register(ne.MENU_BACK_BUTTON_PRIORITY,()=>$e.close())}),{registerAnimation:ht,get:vt,getMenus:xt,getOpen:mt,isEnabled:me,swipeGesture:De,isAnimating:Be,isOpen:ct,enable:Re,toggle:et,close:st,open:Ge,_getOpenSync:Te,_createAnimation:(at,$e)=>{const Ue=ie.get(at);if(!Ue)throw new Error("animation not registered");return Ue($e)},_register:at=>{Ie.indexOf(at)<0&&(at.disabled||ve(at),Ie.push(at))},_unregister:at=>{const $e=Ie.indexOf(at);$e>-1&&Ie.splice($e,1)},_setOpen:oe,_setActiveMenu:ve}})()},1308:(tn,ot,H)=>{"use strict";H.d(ot,{B:()=>Li,H:()=>Wn,a:()=>Qe,b:()=>Zt,c:()=>fi,e:()=>Yr,f:()=>bi,g:()=>ft,h:()=>Qn,i:()=>ir,j:()=>je,k:()=>Dn,p:()=>et,r:()=>kr,s:()=>Ge});var a=H(5861);let Y,Pe,Le,he=!1,Ee=!1,pe=!1,be=!1,ce=!1;const de="undefined"!=typeof window?window:{},ie=de.document||{head:{}},Ie={$flags$:0,$resourcesUrl$:"",jmp:ee=>ee(),raf:ee=>requestAnimationFrame(ee),ael:(ee,we,Ze,Xe)=>ee.addEventListener(we,Ze,Xe),rel:(ee,we,Ze,Xe)=>ee.removeEventListener(we,Ze,Xe),ce:(ee,we)=>new CustomEvent(ee,we)},Ge=ee=>{Object.assign(Ie,ee)},et=ee=>Promise.resolve(ee),Re=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch(ee){}return!1})(),De=(ee,we,Ze,Xe)=>{Ze&&Ze.map(([Ct,_e,qe])=>{const yt=me(ee,Ct),Ot=ct(we,qe),jt=vt(Ct);Ie.ael(yt,_e,Ot,jt),(we.$rmListeners$=we.$rmListeners$||[]).push(()=>Ie.rel(yt,_e,Ot,jt))})},ct=(ee,we)=>Ze=>{try{256&ee.$flags$?ee.$lazyInstance$[we](Ze):(ee.$queuedListeners$=ee.$queuedListeners$||[]).push([we,Ze])}catch(Xe){Er(Xe)}},me=(ee,we)=>4&we?ie:8&we?de:16&we?ie.body:ee,vt=ee=>0!=(2&ee),ye="s-id",Oe="sty-id",Ce="http://www.w3.org/1999/xlink",J=new WeakMap,Gt=(ee,we,Ze)=>{let Xe=zn.get(ee);Re&&Ze?(Xe=Xe||new CSSStyleSheet,"string"==typeof Xe?Xe=we:Xe.replaceSync(we)):Xe=we,zn.set(ee,Xe)},bt=(ee,we,Ze,Xe)=>{let Ct=$e(we,Ze);const _e=zn.get(Ct);if(ee=11===ee.nodeType?ee:ie,_e)if("string"==typeof _e){let yt,qe=J.get(ee=ee.head||ee);qe||J.set(ee,qe=new Set),qe.has(Ct)||(ee.host&&(yt=ee.querySelector(`[${Oe}="${Ct}"]`))?yt.innerHTML=_e:(yt=ie.createElement("style"),yt.innerHTML=_e,ee.insertBefore(yt,ee.querySelector("link"))),qe&&qe.add(Ct))}else ee.adoptedStyleSheets.includes(_e)||(ee.adoptedStyleSheets=[...ee.adoptedStyleSheets,_e]);return Ct},$e=(ee,we)=>"sc-"+(we&&32&ee.$flags$?ee.$tagName$+"-"+we:ee.$tagName$),Ue=ee=>ee.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{"),Qe=ee=>Zi.push(ee),ft=ee=>Hr(ee).$modeName$,pt={},In=ee=>"object"==(ee=typeof ee)||"function"===ee,Qn=(ee,we,...Ze)=>{let Xe=null,Ct=null,_e=null,qe=!1,yt=!1;const Ot=[],jt=An=>{for(let Yn=0;Yn<An.length;Yn++)Xe=An[Yn],Array.isArray(Xe)?jt(Xe):null!=Xe&&"boolean"!=typeof Xe&&((qe="function"!=typeof ee&&!In(Xe))&&(Xe=String(Xe)),qe&&yt?Ot[Ot.length-1].$text$+=Xe:Ot.push(qe?Rn(null,Xe):Xe),yt=qe)};if(jt(Ze),we){we.key&&(Ct=we.key),we.name&&(_e=we.name);{const An=we.className||we.class;An&&(we.class="object"!=typeof An?An:Object.keys(An).filter(Yn=>An[Yn]).join(" "))}}if("function"==typeof ee)return ee(null===we?{}:we,Ot,Hn);const un=Rn(ee,null);return un.$attrs$=we,Ot.length>0&&(un.$children$=Ot),un.$key$=Ct,un.$name$=_e,un},Rn=(ee,we)=>({$flags$:0,$tag$:ee,$text$:we,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),Wn={},Hn={forEach:(ee,we)=>ee.map(or).forEach(we),map:(ee,we)=>ee.map(or).map(we).map(mr)},or=ee=>({vattrs:ee.$attrs$,vchildren:ee.$children$,vkey:ee.$key$,vname:ee.$name$,vtag:ee.$tag$,vtext:ee.$text$}),mr=ee=>{if("function"==typeof ee.vtag){const Ze=Object.assign({},ee.vattrs);return ee.vkey&&(Ze.key=ee.vkey),ee.vname&&(Ze.name=ee.vname),Qn(ee.vtag,Ze,...ee.vchildren||[])}const we=Rn(ee.vtag,ee.vtext);return we.$attrs$=ee.vattrs,we.$children$=ee.vchildren,we.$key$=ee.vkey,we.$name$=ee.vname,we},Wt=(ee,we,Ze,Xe,Ct,_e)=>{if(Ze!==Xe){let qe=hi(ee,we),yt=we.toLowerCase();if("class"===we){const Ot=ee.classList,jt=Nr(Ze),un=Nr(Xe);Ot.remove(...jt.filter(An=>An&&!un.includes(An))),Ot.add(...un.filter(An=>An&&!jt.includes(An)))}else if("style"===we){for(const Ot in Ze)(!Xe||null==Xe[Ot])&&(Ot.includes("-")?ee.style.removeProperty(Ot):ee.style[Ot]="");for(const Ot in Xe)(!Ze||Xe[Ot]!==Ze[Ot])&&(Ot.includes("-")?ee.style.setProperty(Ot,Xe[Ot]):ee.style[Ot]=Xe[Ot])}else if("key"!==we)if("ref"===we)Xe&&Xe(ee);else if(qe||"o"!==we[0]||"n"!==we[1]){const Ot=In(Xe);if((qe||Ot&&null!==Xe)&&!Ct)try{if(ee.tagName.includes("-"))ee[we]=Xe;else{const un=null==Xe?"":Xe;"list"===we?qe=!1:(null==Ze||ee[we]!=un)&&(ee[we]=un)}}catch(un){}let jt=!1;yt!==(yt=yt.replace(/^xlink\:?/,""))&&(we=yt,jt=!0),null==Xe||!1===Xe?(!1!==Xe||""===ee.getAttribute(we))&&(jt?ee.removeAttributeNS(Ce,we):ee.removeAttribute(we)):(!qe||4&_e||Ct)&&!Ot&&(Xe=!0===Xe?"":Xe,jt?ee.setAttributeNS(Ce,we,Xe):ee.setAttribute(we,Xe))}else we="-"===we[2]?we.slice(3):hi(de,yt)?yt.slice(2):yt[2]+we.slice(3),Ze&&Ie.rel(ee,we,Ze,!1),Xe&&Ie.ael(ee,we,Xe,!1)}},rr=/\s/,Nr=ee=>ee?ee.split(rr):[],tr=(ee,we,Ze,Xe)=>{const Ct=11===we.$elm$.nodeType&&we.$elm$.host?we.$elm$.host:we.$elm$,_e=ee&&ee.$attrs$||pt,qe=we.$attrs$||pt;for(Xe in _e)Xe in qe||Wt(Ct,Xe,_e[Xe],void 0,Ze,we.$flags$);for(Xe in qe)Wt(Ct,Xe,_e[Xe],qe[Xe],Ze,we.$flags$)},Jn=(ee,we,Ze,Xe)=>{const Ct=we.$children$[Ze];let qe,yt,Ot,_e=0;if(he||(pe=!0,"slot"===Ct.$tag$&&(Y&&Xe.classList.add(Y+"-s"),Ct.$flags$|=Ct.$children$?2:1)),null!==Ct.$text$)qe=Ct.$elm$=ie.createTextNode(Ct.$text$);else if(1&Ct.$flags$)qe=Ct.$elm$=ie.createTextNode("");else{if(be||(be="svg"===Ct.$tag$),qe=Ct.$elm$=ie.createElementNS(be?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&Ct.$flags$?"slot-fb":Ct.$tag$),be&&"foreignObject"===Ct.$tag$&&(be=!1),tr(null,Ct,be),(ee=>null!=ee)(Y)&&qe["s-si"]!==Y&&qe.classList.add(qe["s-si"]=Y),Ct.$children$)for(_e=0;_e<Ct.$children$.length;++_e)yt=Jn(ee,Ct,_e,qe),yt&&qe.appendChild(yt);"svg"===Ct.$tag$?be=!1:"foreignObject"===qe.tagName&&(be=!0)}return qe["s-hn"]=Le,3&Ct.$flags$&&(qe["s-sr"]=!0,qe["s-cr"]=Pe,qe["s-sn"]=Ct.$name$||"",Ot=ee&&ee.$children$&&ee.$children$[Ze],Ot&&Ot.$tag$===Ct.$tag$&&ee.$elm$&&Cr(ee.$elm$,!1)),qe},Cr=(ee,we)=>{Ie.$flags$|=1;const Ze=ee.childNodes;for(let Xe=Ze.length-1;Xe>=0;Xe--){const Ct=Ze[Xe];Ct["s-hn"]!==Le&&Ct["s-ol"]&&(yr(Ct).insertBefore(Ct,Tt(Ct)),Ct["s-ol"].remove(),Ct["s-ol"]=void 0,pe=!0),we&&Cr(Ct,we)}Ie.$flags$&=-2},an=(ee,we,Ze,Xe,Ct,_e)=>{let yt,qe=ee["s-cr"]&&ee["s-cr"].parentNode||ee;for(qe.shadowRoot&&qe.tagName===Le&&(qe=qe.shadowRoot);Ct<=_e;++Ct)Xe[Ct]&&(yt=Jn(null,Ze,Ct,ee),yt&&(Xe[Ct].$elm$=yt,qe.insertBefore(yt,Tt(we))))},fr=(ee,we,Ze,Xe,Ct)=>{for(;we<=Ze;++we)(Xe=ee[we])&&(Ct=Xe.$elm$,Ln(Xe),Ee=!0,Ct["s-ol"]?Ct["s-ol"].remove():Cr(Ct,!0),Ct.remove())},gn=(ee,we)=>ee.$tag$===we.$tag$&&("slot"===ee.$tag$?ee.$name$===we.$name$:ee.$key$===we.$key$),Tt=ee=>ee&&ee["s-ol"]||ee,yr=ee=>(ee["s-ol"]?ee["s-ol"]:ee).parentNode,Bn=(ee,we)=>{const Ze=we.$elm$=ee.$elm$,Xe=ee.$children$,Ct=we.$children$,_e=we.$tag$,qe=we.$text$;let yt;null===qe?(be="svg"===_e||"foreignObject"!==_e&&be,"slot"===_e||tr(ee,we,be),null!==Xe&&null!==Ct?((ee,we,Ze,Xe)=>{let Lr,nt,Ct=0,_e=0,qe=0,yt=0,Ot=we.length-1,jt=we[0],un=we[Ot],An=Xe.length-1,Yn=Xe[0],vr=Xe[An];for(;Ct<=Ot&&_e<=An;)if(null==jt)jt=we[++Ct];else if(null==un)un=we[--Ot];else if(null==Yn)Yn=Xe[++_e];else if(null==vr)vr=Xe[--An];else if(gn(jt,Yn))Bn(jt,Yn),jt=we[++Ct],Yn=Xe[++_e];else if(gn(un,vr))Bn(un,vr),un=we[--Ot],vr=Xe[--An];else if(gn(jt,vr))("slot"===jt.$tag$||"slot"===vr.$tag$)&&Cr(jt.$elm$.parentNode,!1),Bn(jt,vr),ee.insertBefore(jt.$elm$,un.$elm$.nextSibling),jt=we[++Ct],vr=Xe[--An];else if(gn(un,Yn))("slot"===jt.$tag$||"slot"===vr.$tag$)&&Cr(un.$elm$.parentNode,!1),Bn(un,Yn),ee.insertBefore(un.$elm$,jt.$elm$),un=we[--Ot],Yn=Xe[++_e];else{for(qe=-1,yt=Ct;yt<=Ot;++yt)if(we[yt]&&null!==we[yt].$key$&&we[yt].$key$===Yn.$key$){qe=yt;break}qe>=0?(nt=we[qe],nt.$tag$!==Yn.$tag$?Lr=Jn(we&&we[_e],Ze,qe,ee):(Bn(nt,Yn),we[qe]=void 0,Lr=nt.$elm$),Yn=Xe[++_e]):(Lr=Jn(we&&we[_e],Ze,_e,ee),Yn=Xe[++_e]),Lr&&yr(jt.$elm$).insertBefore(Lr,Tt(jt.$elm$))}Ct>Ot?an(ee,null==Xe[An+1]?null:Xe[An+1].$elm$,Ze,Xe,_e,An):_e>An&&fr(we,Ct,Ot)})(Ze,Xe,we,Ct):null!==Ct?(null!==ee.$text$&&(Ze.textContent=""),an(Ze,null,we,Ct,0,Ct.length-1)):null!==Xe&&fr(Xe,0,Xe.length-1),be&&"svg"===_e&&(be=!1)):(yt=Ze["s-cr"])?yt.parentNode.textContent=qe:ee.$text$!==qe&&(Ze.data=qe)},Dr=ee=>{const we=ee.childNodes;let Ze,Xe,Ct,_e,qe,yt;for(Xe=0,Ct=we.length;Xe<Ct;Xe++)if(Ze=we[Xe],1===Ze.nodeType){if(Ze["s-sr"])for(qe=Ze["s-sn"],Ze.hidden=!1,_e=0;_e<Ct;_e++)if(yt=we[_e].nodeType,we[_e]["s-hn"]!==Ze["s-hn"]||""!==qe){if(1===yt&&qe===we[_e].getAttribute("slot")){Ze.hidden=!0;break}}else if(1===yt||3===yt&&""!==we[_e].textContent.trim()){Ze.hidden=!0;break}Dr(Ze)}},Pr=[],$n=ee=>{let we,Ze,Xe,Ct,_e,qe,yt=0;const Ot=ee.childNodes,jt=Ot.length;for(;yt<jt;yt++){if(we=Ot[yt],we["s-sr"]&&(Ze=we["s-cr"])&&Ze.parentNode)for(Xe=Ze.parentNode.childNodes,Ct=we["s-sn"],qe=Xe.length-1;qe>=0;qe--)Ze=Xe[qe],!Ze["s-cn"]&&!Ze["s-nr"]&&Ze["s-hn"]!==we["s-hn"]&&(ji(Ze,Ct)?(_e=Pr.find(un=>un.$nodeToRelocate$===Ze),Ee=!0,Ze["s-sn"]=Ze["s-sn"]||Ct,_e?_e.$slotRefNode$=we:Pr.push({$slotRefNode$:we,$nodeToRelocate$:Ze}),Ze["s-sr"]&&Pr.map(un=>{ji(un.$nodeToRelocate$,Ze["s-sn"])&&(_e=Pr.find(An=>An.$nodeToRelocate$===Ze),_e&&!un.$slotRefNode$&&(un.$slotRefNode$=_e.$slotRefNode$))})):Pr.some(un=>un.$nodeToRelocate$===Ze)||Pr.push({$nodeToRelocate$:Ze}));1===we.nodeType&&$n(we)}},ji=(ee,we)=>1===ee.nodeType?null===ee.getAttribute("slot")&&""===we||ee.getAttribute("slot")===we:ee["s-sn"]===we||""===we,Ln=ee=>{ee.$attrs$&&ee.$attrs$.ref&&ee.$attrs$.ref(null),ee.$children$&&ee.$children$.map(Ln)},ir=ee=>Hr(ee).$hostElement$,Yr=(ee,we,Ze)=>{const Xe=ir(ee);return{emit:Ct=>ei(Xe,we,{bubbles:!!(4&Ze),composed:!!(2&Ze),cancelable:!!(1&Ze),detail:Ct})}},ei=(ee,we,Ze)=>{const Xe=Ie.ce(we,Ze);return ee.dispatchEvent(Xe),Xe},mn=(ee,we)=>{we&&!ee.$onRenderResolve$&&we["s-p"]&&we["s-p"].push(new Promise(Ze=>ee.$onRenderResolve$=Ze))},$t=(ee,we)=>{if(ee.$flags$|=16,!(4&ee.$flags$))return mn(ee,ee.$ancestorComponent$),fi(()=>ln(ee,we));ee.$flags$|=512},ln=(ee,we)=>{const Xe=ee.$lazyInstance$;let Ct;return we&&(ee.$flags$|=256,ee.$queuedListeners$&&(ee.$queuedListeners$.map(([_e,qe])=>He(Xe,_e,qe)),ee.$queuedListeners$=null),Ct=He(Xe,"componentWillLoad")),Ct=dt(Ct,()=>He(Xe,"componentWillRender")),dt(Ct,()=>kn(ee,Xe,we))},kn=function(){var ee=(0,a.Z)(function*(we,Ze,Xe){const Ct=we.$hostElement$,qe=Ct["s-rc"];Xe&&(ee=>{const we=ee.$cmpMeta$,Ze=ee.$hostElement$,Xe=we.$flags$,_e=bt(Ze.shadowRoot?Ze.shadowRoot:Ze.getRootNode(),we,ee.$modeName$);10&Xe&&(Ze["s-sc"]=_e,Ze.classList.add(_e+"-h"),2&Xe&&Ze.classList.add(_e+"-s"))})(we);Cn(we,Ze),qe&&(qe.map(Ot=>Ot()),Ct["s-rc"]=void 0);{const Ot=Ct["s-p"],jt=()=>On(we);0===Ot.length?jt():(Promise.all(Ot).then(jt),we.$flags$|=4,Ot.length=0)}});return function(Ze,Xe,Ct){return ee.apply(this,arguments)}}(),Cn=(ee,we,Ze)=>{try{we=we.render&&we.render(),ee.$flags$&=-17,ee.$flags$|=2,((ee,we)=>{const Ze=ee.$hostElement$,Xe=ee.$cmpMeta$,Ct=ee.$vnode$||Rn(null,null),_e=(ee=>ee&&ee.$tag$===Wn)(we)?we:Qn(null,null,we);if(Le=Ze.tagName,Xe.$attrsToReflect$&&(_e.$attrs$=_e.$attrs$||{},Xe.$attrsToReflect$.map(([qe,yt])=>_e.$attrs$[yt]=Ze[qe])),_e.$tag$=null,_e.$flags$|=4,ee.$vnode$=_e,_e.$elm$=Ct.$elm$=Ze.shadowRoot||Ze,Y=Ze["s-sc"],Pe=Ze["s-cr"],he=0!=(1&Xe.$flags$),Ee=!1,Bn(Ct,_e),Ie.$flags$|=1,pe){$n(_e.$elm$);let qe,yt,Ot,jt,un,An,Yn=0;for(;Yn<Pr.length;Yn++)qe=Pr[Yn],yt=qe.$nodeToRelocate$,yt["s-ol"]||(Ot=ie.createTextNode(""),Ot["s-nr"]=yt,yt.parentNode.insertBefore(yt["s-ol"]=Ot,yt));for(Yn=0;Yn<Pr.length;Yn++)if(qe=Pr[Yn],yt=qe.$nodeToRelocate$,qe.$slotRefNode$){for(jt=qe.$slotRefNode$.parentNode,un=qe.$slotRefNode$.nextSibling,Ot=yt["s-ol"];Ot=Ot.previousSibling;)if(An=Ot["s-nr"],An&&An["s-sn"]===yt["s-sn"]&&jt===An.parentNode&&(An=An.nextSibling,!An||!An["s-nr"])){un=An;break}(!un&&jt!==yt.parentNode||yt.nextSibling!==un)&&yt!==un&&(!yt["s-hn"]&&yt["s-ol"]&&(yt["s-hn"]=yt["s-ol"].parentNode.nodeName),jt.insertBefore(yt,un))}else 1===yt.nodeType&&(yt.hidden=!0)}Ee&&Dr(_e.$elm$),Ie.$flags$&=-2,Pr.length=0})(ee,we)}catch(Xe){Er(Xe,ee.$hostElement$)}return null},On=ee=>{const Ze=ee.$hostElement$,Ct=ee.$lazyInstance$,_e=ee.$ancestorComponent$;He(Ct,"componentDidRender"),64&ee.$flags$?He(Ct,"componentDidUpdate"):(ee.$flags$|=64,tt(Ze),He(Ct,"componentDidLoad"),ee.$onReadyResolve$(Ze),_e||Ne()),ee.$onInstanceResolve$(Ze),ee.$onRenderResolve$&&(ee.$onRenderResolve$(),ee.$onRenderResolve$=void 0),512&ee.$flags$&&Xi(()=>$t(ee,!1)),ee.$flags$&=-517},je=ee=>{{const we=Hr(ee),Ze=we.$hostElement$.isConnected;return Ze&&2==(18&we.$flags$)&&$t(we,!1),Ze}},Ne=ee=>{tt(ie.documentElement),Xi(()=>ei(de,"appload",{detail:{namespace:"ionic"}}))},He=(ee,we,Ze)=>{if(ee&&ee[we])try{return ee[we](Ze)}catch(Xe){Er(Xe)}},dt=(ee,we)=>ee&&ee.then?ee.then(we):we(),tt=ee=>ee.classList.add("hydrated"),_n=(ee,we,Ze,Xe,Ct,_e,qe)=>{let yt,Ot,jt,un;if(1===_e.nodeType){for(yt=_e.getAttribute("c-id"),yt&&(Ot=yt.split("."),(Ot[0]===qe||"0"===Ot[0])&&(jt={$flags$:0,$hostId$:Ot[0],$nodeId$:Ot[1],$depth$:Ot[2],$index$:Ot[3],$tag$:_e.tagName.toLowerCase(),$elm$:_e,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},we.push(jt),_e.removeAttribute("c-id"),ee.$children$||(ee.$children$=[]),ee.$children$[jt.$index$]=jt,ee=jt,Xe&&"0"===jt.$depth$&&(Xe[jt.$index$]=jt.$elm$))),un=_e.childNodes.length-1;un>=0;un--)_n(ee,we,Ze,Xe,Ct,_e.childNodes[un],qe);if(_e.shadowRoot)for(un=_e.shadowRoot.childNodes.length-1;un>=0;un--)_n(ee,we,Ze,Xe,Ct,_e.shadowRoot.childNodes[un],qe)}else if(8===_e.nodeType)Ot=_e.nodeValue.split("."),(Ot[1]===qe||"0"===Ot[1])&&(yt=Ot[0],jt={$flags$:0,$hostId$:Ot[1],$nodeId$:Ot[2],$depth$:Ot[3],$index$:Ot[4],$elm$:_e,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===yt?(jt.$elm$=_e.nextSibling,jt.$elm$&&3===jt.$elm$.nodeType&&(jt.$text$=jt.$elm$.textContent,we.push(jt),_e.remove(),ee.$children$||(ee.$children$=[]),ee.$children$[jt.$index$]=jt,Xe&&"0"===jt.$depth$&&(Xe[jt.$index$]=jt.$elm$))):jt.$hostId$===qe&&("s"===yt?(jt.$tag$="slot",_e["s-sn"]=Ot[5]?jt.$name$=Ot[5]:"",_e["s-sr"]=!0,Xe&&(jt.$elm$=ie.createElement(jt.$tag$),jt.$name$&&jt.$elm$.setAttribute("name",jt.$name$),_e.parentNode.insertBefore(jt.$elm$,_e),_e.remove(),"0"===jt.$depth$&&(Xe[jt.$index$]=jt.$elm$)),Ze.push(jt),ee.$children$||(ee.$children$=[]),ee.$children$[jt.$index$]=jt):"r"===yt&&(Xe?_e.remove():(Ct["s-cr"]=_e,_e["s-cn"]=!0))));else if(ee&&"style"===ee.$tag$){const An=Rn(null,_e.textContent);An.$elm$=_e,An.$index$="0",ee.$children$=[An]}},ar=(ee,we)=>{if(1===ee.nodeType){let Ze=0;for(;Ze<ee.childNodes.length;Ze++)ar(ee.childNodes[Ze],we);if(ee.shadowRoot)for(Ze=0;Ze<ee.shadowRoot.childNodes.length;Ze++)ar(ee.shadowRoot.childNodes[Ze],we)}else if(8===ee.nodeType){const Ze=ee.nodeValue.split(".");"o"===Ze[0]&&(we.set(Ze[1]+"."+Ze[2],ee),ee.nodeValue="",ee["s-en"]=Ze[3])}},Ve=(ee,we,Ze)=>{if(we.$members$){ee.watchers&&(we.$watchers$=ee.watchers);const Xe=Object.entries(we.$members$),Ct=ee.prototype;if(Xe.map(([_e,[qe]])=>{31&qe||2&Ze&&32&qe?Object.defineProperty(Ct,_e,{get(){return((ee,we)=>Hr(this).$instanceValues$.get(we))(0,_e)},set(yt){((ee,we,Ze,Xe)=>{const Ct=Hr(ee),_e=Ct.$hostElement$,qe=Ct.$instanceValues$.get(we),yt=Ct.$flags$,Ot=Ct.$lazyInstance$;Ze=((ee,we)=>null==ee||In(ee)?ee:4&we?"false"!==ee&&(""===ee||!!ee):2&we?parseFloat(ee):1&we?String(ee):ee)(Ze,Xe.$members$[we][0]);const jt=Number.isNaN(qe)&&Number.isNaN(Ze);if((!(8&yt)||void 0===qe)&&Ze!==qe&&!jt&&(Ct.$instanceValues$.set(we,Ze),Ot)){if(Xe.$watchers$&&128&yt){const An=Xe.$watchers$[we];An&&An.map(Yn=>{try{Ot[Yn](Ze,qe,we)}catch(vr){Er(vr,_e)}})}2==(18&yt)&&$t(Ct,!1)}})(this,_e,yt,we)},configurable:!0,enumerable:!0}):1&Ze&&64&qe&&Object.defineProperty(Ct,_e,{value(...yt){const Ot=Hr(this);return Ot.$onInstancePromise$.then(()=>Ot.$lazyInstance$[_e](...yt))}})}),1&Ze){const _e=new Map;Ct.attributeChangedCallback=function(qe,yt,Ot){Ie.jmp(()=>{const jt=_e.get(qe);if(this.hasOwnProperty(jt))Ot=this[jt],delete this[jt];else if(Ct.hasOwnProperty(jt)&&"number"==typeof this[jt]&&this[jt]==Ot)return;this[jt]=(null!==Ot||"boolean"!=typeof this[jt])&&Ot})},ee.observedAttributes=Xe.filter(([qe,yt])=>15&yt[0]).map(([qe,yt])=>{const Ot=yt[1]||qe;return _e.set(Ot,qe),512&yt[0]&&we.$attrsToReflect$.push([qe,Ot]),Ot})}}return ee},xe=function(){var ee=(0,a.Z)(function*(we,Ze,Xe,Ct,_e){if(0==(32&Ze.$flags$)){{if(Ze.$flags$|=32,(_e=Ei(Xe)).then){const jt=()=>{};_e=yield _e,jt()}_e.isProxied||(Xe.$watchers$=_e.watchers,Ve(_e,Xe,2),_e.isProxied=!0);const Ot=()=>{};Ze.$flags$|=8;try{new _e(Ze)}catch(jt){Er(jt)}Ze.$flags$&=-9,Ze.$flags$|=128,Ot(),Et(Ze.$lazyInstance$)}if(_e.style){let Ot=_e.style;"string"!=typeof Ot&&(Ot=Ot[Ze.$modeName$=(ee=>Zi.map(we=>we(ee)).find(we=>!!we))(we)]);const jt=$e(Xe,Ze.$modeName$);if(!zn.has(jt)){const un=()=>{};Gt(jt,Ot,!!(1&Xe.$flags$)),un()}}}const qe=Ze.$ancestorComponent$,yt=()=>$t(Ze,!0);qe&&qe["s-rc"]?qe["s-rc"].push(yt):yt()});return function(Ze,Xe,Ct,_e,qe){return ee.apply(this,arguments)}}(),Et=ee=>{He(ee,"connectedCallback")},fn=ee=>{const we=ee["s-cr"]=ie.createComment("");we["s-cn"]=!0,ee.insertBefore(we,ee.firstChild)},Zt=(ee,we={})=>{const Xe=[],Ct=we.exclude||[],_e=de.customElements,qe=ie.head,yt=qe.querySelector("meta[charset]"),Ot=ie.createElement("style"),jt=[],un=ie.querySelectorAll(`[${Oe}]`);let An,Yn=!0,vr=0;for(Object.assign(Ie,we),Ie.$resourcesUrl$=new URL(we.resourcesUrl||"./",ie.baseURI).href,Ie.$flags$|=2;vr<un.length;vr++)Gt(un[vr].getAttribute(Oe),Ue(un[vr].innerHTML),!0);ee.map(Lr=>{Lr[1].map(nt=>{const Ke={$flags$:nt[0],$tagName$:nt[1],$members$:nt[2],$listeners$:nt[3]};Ke.$members$=nt[2],Ke.$listeners$=nt[3],Ke.$attrsToReflect$=[],Ke.$watchers$={};const _t=Ke.$tagName$,Ut=class extends HTMLElement{constructor(en){super(en),ti(en=this,Ke),1&Ke.$flags$&&en.attachShadow({mode:"open",delegatesFocus:!!(16&Ke.$flags$)})}connectedCallback(){An&&(clearTimeout(An),An=null),Yn?jt.push(this):Ie.jmp(()=>(ee=>{if(0==(1&Ie.$flags$)){const we=Hr(ee),Ze=we.$cmpMeta$,Xe=()=>{};if(1&we.$flags$)De(ee,we,Ze.$listeners$),Et(we.$lazyInstance$);else{let Ct;if(we.$flags$|=1,Ct=ee.getAttribute(ye),Ct){if(1&Ze.$flags$){const _e=bt(ee.shadowRoot,Ze,ee.getAttribute("s-mode"));ee.classList.remove(_e+"-h",_e+"-s")}((ee,we,Ze,Xe)=>{const _e=ee.shadowRoot,qe=[],Ot=_e?[]:null,jt=Xe.$vnode$=Rn(we,null);Ie.$orgLocNodes$||ar(ie.body,Ie.$orgLocNodes$=new Map),ee[ye]=Ze,ee.removeAttribute(ye),_n(jt,qe,[],Ot,ee,ee,Ze),qe.map(un=>{const An=un.$hostId$+"."+un.$nodeId$,Yn=Ie.$orgLocNodes$.get(An),vr=un.$elm$;Yn&&""===Yn["s-en"]&&Yn.parentNode.insertBefore(vr,Yn.nextSibling),_e||(vr["s-hn"]=we,Yn&&(vr["s-ol"]=Yn,vr["s-ol"]["s-nr"]=vr)),Ie.$orgLocNodes$.delete(An)}),_e&&Ot.map(un=>{un&&_e.appendChild(un)})})(ee,Ze.$tagName$,Ct,we)}Ct||12&Ze.$flags$&&fn(ee);{let _e=ee;for(;_e=_e.parentNode||_e.host;)if(1===_e.nodeType&&_e.hasAttribute("s-id")&&_e["s-p"]||_e["s-p"]){mn(we,we.$ancestorComponent$=_e);break}}Ze.$members$&&Object.entries(Ze.$members$).map(([_e,[qe]])=>{if(31&qe&&ee.hasOwnProperty(_e)){const yt=ee[_e];delete ee[_e],ee[_e]=yt}}),Xi(()=>xe(ee,we,Ze))}Xe()}})(this))}disconnectedCallback(){Ie.jmp(()=>(ee=>{if(0==(1&Ie.$flags$)){const we=Hr(this),Ze=we.$lazyInstance$;we.$rmListeners$&&(we.$rmListeners$.map(Xe=>Xe()),we.$rmListeners$=void 0),He(Ze,"disconnectedCallback")}})())}componentOnReady(){return Hr(this).$onReadyPromise$}};Ke.$lazyBundleId$=Lr[0],!Ct.includes(_t)&&!_e.get(_t)&&(Xe.push(_t),_e.define(_t,Ve(Ut,Ke,1)))})}),Ot.innerHTML=Xe+"{visibility:hidden}.hydrated{visibility:inherit}",Ot.setAttribute("data-styles",""),qe.insertBefore(Ot,yt?yt.nextSibling:qe.firstChild),Yn=!1,jt.length?jt.map(Lr=>Lr.connectedCallback()):Ie.jmp(()=>An=setTimeout(Ne,30))},Dn=ee=>{const we=new URL(ee,Ie.$resourcesUrl$);return we.origin!==de.location.origin?we.href:we.pathname},lr=new WeakMap,Hr=ee=>lr.get(ee),kr=(ee,we)=>lr.set(we.$lazyInstance$=ee,we),ti=(ee,we)=>{const Ze={$flags$:0,$hostElement$:ee,$cmpMeta$:we,$instanceValues$:new Map};return Ze.$onInstancePromise$=new Promise(Xe=>Ze.$onInstanceResolve$=Xe),Ze.$onReadyPromise$=new Promise(Xe=>Ze.$onReadyResolve$=Xe),ee["s-p"]=[],ee["s-rc"]=[],De(ee,Ze,we.$listeners$),lr.set(ee,Ze)},hi=(ee,we)=>we in ee,Er=(ee,we)=>(0,console.error)(ee,we),Fi=new Map,Ei=(ee,we,Ze)=>{const Xe=ee.$tagName$.replace(/-/g,"_"),Ct=ee.$lazyBundleId$,_e=Fi.get(Ct);return _e?_e[Xe]:H(863)(`./${Ct}.entry.js`).then(qe=>(Fi.set(Ct,qe),qe[Xe]),Er)},zn=new Map,Zi=[],oi=[],Ii=[],Qi=(ee,we)=>Ze=>{ee.push(Ze),ce||(ce=!0,we&&4&Ie.$flags$?Xi(wi):Ie.raf(wi))},Fr=ee=>{for(let we=0;we<ee.length;we++)try{ee[we](performance.now())}catch(Ze){Er(Ze)}ee.length=0},wi=()=>{Fr(oi),Fr(Ii),(ce=oi.length>0)&&Ie.raf(wi)},Xi=ee=>et().then(ee),bi=Qi(oi,!1),fi=Qi(Ii,!0),Li={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1}},664:(tn,ot,H)=>{"use strict";H.d(ot,{L:()=>Pe,a:()=>Le,b:()=>he,c:()=>Ee,d:()=>pe,e:()=>ht,g:()=>ve,l:()=>xt,s:()=>ye,t:()=>de});var a=H(5861),ne=H(1308),Y=H(5730);const Pe="ionViewWillEnter",Le="ionViewDidEnter",he="ionViewWillLeave",Ee="ionViewDidLeave",pe="ionViewWillUnload",de=oe=>new Promise((Ce,Te)=>{(0,ne.c)(()=>{ie(oe),Ie(oe).then(lt=>{lt.animation&&lt.animation.destroy(),Ge(oe),Ce(lt)},lt=>{Ge(oe),Te(lt)})})}),ie=oe=>{const Ce=oe.enteringEl,Te=oe.leavingEl;Oe(Ce,Te,oe.direction),oe.showGoBack?Ce.classList.add("can-go-back"):Ce.classList.remove("can-go-back"),ye(Ce,!1),Ce.style.setProperty("pointer-events","none"),Te&&(ye(Te,!1),Te.style.setProperty("pointer-events","none"))},Ie=function(){var oe=(0,a.Z)(function*(Ce){const Te=yield st(Ce);return Te&&ne.B.isBrowser?et(Te,Ce):Re(Ce)});return function(Te){return oe.apply(this,arguments)}}(),Ge=oe=>{const Ce=oe.enteringEl,Te=oe.leavingEl;Ce.classList.remove("ion-page-invisible"),Ce.style.removeProperty("pointer-events"),void 0!==Te&&(Te.classList.remove("ion-page-invisible"),Te.style.removeProperty("pointer-events"))},st=function(){var oe=(0,a.Z)(function*(Ce){return Ce.leavingEl&&Ce.animated&&0!==Ce.duration?Ce.animationBuilder?Ce.animationBuilder:"ios"===Ce.mode?(yield Promise.resolve().then(H.bind(H,129))).iosTransitionAnimation:(yield Promise.resolve().then(H.bind(H,1369))).mdTransitionAnimation:void 0});return function(Te){return oe.apply(this,arguments)}}(),et=function(){var oe=(0,a.Z)(function*(Ce,Te){yield De(Te,!0);const lt=Ce(Te.baseEl,Te);vt(Te.enteringEl,Te.leavingEl);const J=yield me(lt,Te);return Te.progressCallback&&Te.progressCallback(void 0),J&&mt(Te.enteringEl,Te.leavingEl),{hasCompleted:J,animation:lt}});return function(Te,lt){return oe.apply(this,arguments)}}(),Re=function(){var oe=(0,a.Z)(function*(Ce){const Te=Ce.enteringEl,lt=Ce.leavingEl;return yield De(Ce,!1),vt(Te,lt),mt(Te,lt),{hasCompleted:!0}});return function(Te){return oe.apply(this,arguments)}}(),De=function(){var oe=(0,a.Z)(function*(Ce,Te){const J=(void 0!==Ce.deepWait?Ce.deepWait:Te)?[ht(Ce.enteringEl),ht(Ce.leavingEl)]:[Be(Ce.enteringEl),Be(Ce.leavingEl)];yield Promise.all(J),yield ct(Ce.viewIsReady,Ce.enteringEl)});return function(Te,lt){return oe.apply(this,arguments)}}(),ct=function(){var oe=(0,a.Z)(function*(Ce,Te){Ce&&(yield Ce(Te))});return function(Te,lt){return oe.apply(this,arguments)}}(),me=(oe,Ce)=>{const Te=Ce.progressCallback,lt=new Promise(J=>{oe.onFinish(Gt=>J(1===Gt))});return Te?(oe.progressStart(!0),Te(oe)):oe.play(),lt},vt=(oe,Ce)=>{xt(Ce,he),xt(oe,Pe)},mt=(oe,Ce)=>{xt(oe,Le),xt(Ce,Ee)},xt=(oe,Ce)=>{if(oe){const Te=new CustomEvent(Ce,{bubbles:!1,cancelable:!1});oe.dispatchEvent(Te)}},Be=oe=>oe?new Promise(Ce=>(0,Y.c)(oe,Ce)):Promise.resolve(),ht=function(){var oe=(0,a.Z)(function*(Ce){const Te=Ce;if(Te){if(null!=Te.componentOnReady){if(null!=(yield Te.componentOnReady()))return}else if(null!=Te.__registerHost)return void(yield new Promise(J=>(0,Y.r)(J)));yield Promise.all(Array.from(Te.children).map(ht))}});return function(Te){return oe.apply(this,arguments)}}(),ye=(oe,Ce)=>{Ce?(oe.setAttribute("aria-hidden","true"),oe.classList.add("ion-page-hidden")):(oe.hidden=!1,oe.removeAttribute("aria-hidden"),oe.classList.remove("ion-page-hidden"))},Oe=(oe,Ce,Te)=>{void 0!==oe&&(oe.style.zIndex="back"===Te?"99":"101"),void 0!==Ce&&(Ce.style.zIndex="100")},ve=oe=>oe.classList.contains("ion-page")?oe:oe.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||oe},1911:(tn,ot,H)=>{"use strict";H.r(ot),H.d(ot,{GESTURE_CONTROLLER:()=>a.G,createGesture:()=>be});var a=H(4349);const ne=(Ie,Ge,st,et)=>{const Re=Y(Ie)?{capture:!!et.capture,passive:!!et.passive}:!!et.capture;let De,ct;return Ie.__zone_symbol__addEventListener?(De="__zone_symbol__addEventListener",ct="__zone_symbol__removeEventListener"):(De="addEventListener",ct="removeEventListener"),Ie[De](Ge,st,Re),()=>{Ie[ct](Ge,st,Re)}},Y=Ie=>{if(void 0===Pe)try{const Ge=Object.defineProperty({},"passive",{get:()=>{Pe=!0}});Ie.addEventListener("optsTest",()=>{},Ge)}catch(Ge){Pe=!1}return!!Pe};let Pe;const Ee=Ie=>Ie instanceof Document?Ie:Ie.ownerDocument,be=Ie=>{let Ge=!1,st=!1,et=!0,Re=!1;const De=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},Ie),ct=De.canStart,me=De.onWillStart,vt=De.onStart,mt=De.onEnd,xt=De.notCaptured,Be=De.onMove,ht=De.threshold,ye=De.passive,Oe=De.blurOnStart,ve={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},oe=((Ie,Ge,st)=>{const et=st*(Math.PI/180),Re="x"===Ie,De=Math.cos(et),ct=Ge*Ge;let me=0,vt=0,mt=!1,xt=0;return{start(Be,ht){me=Be,vt=ht,xt=0,mt=!0},detect(Be,ht){if(!mt)return!1;const ye=Be-me,Oe=ht-vt,ve=ye*ye+Oe*Oe;if(ve<ct)return!1;const oe=Math.sqrt(ve),Ce=(Re?ye:Oe)/oe;return xt=Ce>De?1:Ce<-De?-1:0,mt=!1,!0},isGesture:()=>0!==xt,getDirection:()=>xt}})(De.direction,De.threshold,De.maxAngle),Ce=a.G.createGesture({name:Ie.gestureName,priority:Ie.gesturePriority,disableScroll:Ie.disableScroll}),J=()=>{!Ge||(Re=!1,Be&&Be(ve))},Gt=()=>!!Ce.capture()&&(Ge=!0,et=!1,ve.startX=ve.currentX,ve.startY=ve.currentY,ve.startTime=ve.currentTime,me?me(ve).then(at):at(),!0),at=()=>{Oe&&(()=>{if("undefined"!=typeof document){const ft=document.activeElement;null!=ft&&ft.blur&&ft.blur()}})(),vt&&vt(ve),et=!0},$e=()=>{Ge=!1,st=!1,Re=!1,et=!0,Ce.release()},Ue=ft=>{const pt=Ge,Vt=et;if($e(),Vt){if(ce(ve,ft),pt)return void(mt&&mt(ve));xt&&xt(ve)}},Je=((Ie,Ge,st,et,Re)=>{let De,ct,me,vt,mt,xt,Be,ht=0;const ye=bt=>{ht=Date.now()+2e3,Ge(bt)&&(!ct&&st&&(ct=ne(Ie,"touchmove",st,Re)),me||(me=ne(bt.target,"touchend",ve,Re)),vt||(vt=ne(bt.target,"touchcancel",ve,Re)))},Oe=bt=>{ht>Date.now()||!Ge(bt)||(!xt&&st&&(xt=ne(Ee(Ie),"mousemove",st,Re)),Be||(Be=ne(Ee(Ie),"mouseup",oe,Re)))},ve=bt=>{Ce(),et&&et(bt)},oe=bt=>{Te(),et&&et(bt)},Ce=()=>{ct&&ct(),me&&me(),vt&&vt(),ct=me=vt=void 0},Te=()=>{xt&&xt(),Be&&Be(),xt=Be=void 0},lt=()=>{Ce(),Te()},J=(bt=!0)=>{bt?(De||(De=ne(Ie,"touchstart",ye,Re)),mt||(mt=ne(Ie,"mousedown",Oe,Re))):(De&&De(),mt&&mt(),De=mt=void 0,lt())};return{enable:J,stop:lt,destroy:()=>{J(!1),et=st=Ge=void 0}}})(De.el,ft=>{const pt=ie(ft);return!(st||!et||(de(ft,ve),ve.startX=ve.currentX,ve.startY=ve.currentY,ve.startTime=ve.currentTime=pt,ve.velocityX=ve.velocityY=ve.deltaX=ve.deltaY=0,ve.event=ft,ct&&!1===ct(ve))||(Ce.release(),!Ce.start()))&&(st=!0,0===ht?Gt():(oe.start(ve.startX,ve.startY),!0))},ft=>{Ge?!Re&&et&&(Re=!0,ce(ve,ft),requestAnimationFrame(J)):(ce(ve,ft),oe.detect(ve.currentX,ve.currentY)&&(!oe.isGesture()||!Gt())&&Qe())},Ue,{capture:!1,passive:ye}),Qe=()=>{$e(),Je.stop(),xt&&xt(ve)};return{enable(ft=!0){ft||(Ge&&Ue(void 0),$e()),Je.enable(ft)},destroy(){Ce.destroy(),Je.destroy()}}},ce=(Ie,Ge)=>{if(!Ge)return;const st=Ie.currentX,et=Ie.currentY,Re=Ie.currentTime;de(Ge,Ie);const De=Ie.currentX,ct=Ie.currentY,vt=(Ie.currentTime=ie(Ge))-Re;if(vt>0&&vt<100){const xt=(ct-et)/vt;Ie.velocityX=(De-st)/vt*.7+.3*Ie.velocityX,Ie.velocityY=.7*xt+.3*Ie.velocityY}Ie.deltaX=De-Ie.startX,Ie.deltaY=ct-Ie.startY,Ie.event=Ge},de=(Ie,Ge)=>{let st=0,et=0;if(Ie){const Re=Ie.changedTouches;if(Re&&Re.length>0){const De=Re[0];st=De.clientX,et=De.clientY}else void 0!==Ie.pageX&&(st=Ie.pageX,et=Ie.pageY)}Ge.currentX=st,Ge.currentY=et},ie=Ie=>Ie.timeStamp||Date.now()},9658:(tn,ot,H)=>{"use strict";H.d(ot,{a:()=>de,b:()=>J,c:()=>Y,g:()=>ce,i:()=>Gt});var a=H(1308);class ne{constructor(){this.m=new Map}reset(at){this.m=new Map(Object.entries(at))}get(at,$e){const Ue=this.m.get(at);return void 0!==Ue?Ue:$e}getBoolean(at,$e=!1){const Ue=this.m.get(at);return void 0===Ue?$e:"string"==typeof Ue?"true"===Ue:!!Ue}getNumber(at,$e){const Ue=parseFloat(this.m.get(at));return isNaN(Ue)?void 0!==$e?$e:NaN:Ue}set(at,$e){this.m.set(at,$e)}}const Y=new ne,be="ionic-persist-config",ce=bt=>ie(bt),de=(bt,at)=>("string"==typeof bt&&(at=bt,bt=void 0),ce(bt).includes(at)),ie=(bt=window)=>{if(void 0===bt)return[];bt.Ionic=bt.Ionic||{};let at=bt.Ionic.platforms;return null==at&&(at=bt.Ionic.platforms=Ie(bt),at.forEach($e=>bt.document.documentElement.classList.add(`plt-${$e}`))),at},Ie=bt=>{const at=Y.get("platform");return Object.keys(Te).filter($e=>{const Ue=null==at?void 0:at[$e];return"function"==typeof Ue?Ue(bt):Te[$e](bt)})},st=bt=>!!(oe(bt,/iPad/i)||oe(bt,/Macintosh/i)&&mt(bt)),De=bt=>oe(bt,/android|sink/i),mt=bt=>Ce(bt,"(any-pointer:coarse)"),Be=bt=>ht(bt)||ye(bt),ht=bt=>!!(bt.cordova||bt.phonegap||bt.PhoneGap),ye=bt=>{const at=bt.Capacitor;return!(null==at||!at.isNative)},oe=(bt,at)=>at.test(bt.navigator.userAgent),Ce=(bt,at)=>{var $e;return null===($e=bt.matchMedia)||void 0===$e?void 0:$e.call(bt,at).matches},Te={ipad:st,iphone:bt=>oe(bt,/iPhone/i),ios:bt=>oe(bt,/iPhone|iPod/i)||st(bt),android:De,phablet:bt=>{const at=bt.innerWidth,$e=bt.innerHeight,Ue=Math.min(at,$e),Je=Math.max(at,$e);return Ue>390&&Ue<520&&Je>620&&Je<800},tablet:bt=>{const at=bt.innerWidth,$e=bt.innerHeight,Ue=Math.min(at,$e),Je=Math.max(at,$e);return st(bt)||(bt=>De(bt)&&!oe(bt,/mobile/i))(bt)||Ue>460&&Ue<820&&Je>780&&Je<1400},cordova:ht,capacitor:ye,electron:bt=>oe(bt,/electron/i),pwa:bt=>{var at;return!(!(null===(at=bt.matchMedia)||void 0===at?void 0:at.call(bt,"(display-mode: standalone)").matches)&&!bt.navigator.standalone)},mobile:mt,mobileweb:bt=>mt(bt)&&!Be(bt),desktop:bt=>!mt(bt),hybrid:Be};let lt;const J=bt=>bt&&(0,a.g)(bt)||lt,Gt=(bt={})=>{if("undefined"==typeof window)return;const at=window.document,$e=window,Ue=$e.Ionic=$e.Ionic||{},Je={};bt._ael&&(Je.ael=bt._ael),bt._rel&&(Je.rel=bt._rel),bt._ce&&(Je.ce=bt._ce),(0,a.s)(Je);const Qe=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(bt=>{try{const at=bt.sessionStorage.getItem(be);return null!==at?JSON.parse(at):{}}catch(at){return{}}})($e)),{persistConfig:!1}),Ue.config),(bt=>{const at={};return bt.location.search.slice(1).split("&").map($e=>$e.split("=")).map(([$e,Ue])=>[decodeURIComponent($e),decodeURIComponent(Ue)]).filter(([$e])=>((bt,at)=>bt.substr(0,at.length)===at)($e,"ionic:")).map(([$e,Ue])=>[$e.slice("ionic:".length),Ue]).forEach(([$e,Ue])=>{at[$e]=Ue}),at})($e)),bt);Y.reset(Qe),Y.getBoolean("persistConfig")&&((bt,at)=>{try{bt.sessionStorage.setItem(be,JSON.stringify(at))}catch($e){return}})($e,Qe),ie($e),Ue.config=Y,Ue.mode=lt=Y.get("mode",at.documentElement.getAttribute("mode")||(de($e,"ios")?"ios":"md")),Y.set("mode",lt),at.documentElement.setAttribute("mode",lt),at.documentElement.classList.add(lt),Y.getBoolean("_testing")&&Y.set("animated",!1);const ft=Vt=>{var Nt;return null===(Nt=Vt.tagName)||void 0===Nt?void 0:Nt.startsWith("ION-")},pt=Vt=>["ios","md"].includes(Vt);(0,a.a)(Vt=>{for(;Vt;){const Nt=Vt.mode||Vt.getAttribute("mode");if(Nt){if(pt(Nt))return Nt;ft(Vt)&&console.warn('Invalid ionic mode: "'+Nt+'", expected: "ios" or "md"')}Vt=Vt.parentElement}return lt})}},129:(tn,ot,H)=>{"use strict";H.r(ot),H.d(ot,{iosTransitionAnimation:()=>Ie,shadow:()=>Ee});var a=H(5942),ne=H(664);H(3457),H(1308);const he=Ge=>document.querySelector(`${Ge}.ion-cloned-element`),Ee=Ge=>Ge.shadowRoot||Ge,pe=Ge=>{const st="ION-TABS"===Ge.tagName?Ge:Ge.querySelector("ion-tabs"),et="ion-content ion-header:not(.header-collapse-condense-inactive) ion-title.title-large";if(null!=st){const Re=st.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");return null!=Re?Re.querySelector(et):null}return Ge.querySelector(et)},be=(Ge,st)=>{const et="ION-TABS"===Ge.tagName?Ge:Ge.querySelector("ion-tabs");let Re=[];if(null!=et){const De=et.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");null!=De&&(Re=De.querySelectorAll("ion-buttons"))}else Re=Ge.querySelectorAll("ion-buttons");for(const De of Re){const ct=De.closest("ion-header"),me=ct&&!ct.classList.contains("header-collapse-condense-inactive"),vt=De.querySelector("ion-back-button"),mt=De.classList.contains("buttons-collapse"),xt="start"===De.slot||""===De.slot;if(null!==vt&&xt&&(mt&&me&&st||!mt))return vt}return null},de=(Ge,st,et,Re,De,ct)=>{const me=st?`calc(100% - ${ct.right+4}px)`:ct.left-4+"px",vt=st?"7px":"-7px",mt=st?"-4px":"4px",xt=st?"-4px":"4px",Be=st?"right":"left",ht=st?"left":"right",ve=et?[{offset:0,opacity:1,transform:`translate3d(${mt}, ${ct.top-46}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${vt}, ${De.top-40}px, 0) scale(2.1)`}]:[{offset:0,opacity:0,transform:`translate3d(${vt}, ${De.top-40}px, 0) scale(2.1)`},{offset:1,opacity:1,transform:`translate3d(${mt}, ${ct.top-46}px, 0) scale(1)`}],Te=et?[{offset:0,opacity:1,transform:`translate3d(${xt}, ${ct.top-46}px, 0) scale(1)`},{offset:.2,opacity:0,transform:`translate3d(${xt}, ${ct.top-41}px, 0) scale(0.6)`},{offset:1,opacity:0,transform:`translate3d(${xt}, ${ct.top-41}px, 0) scale(0.6)`}]:[{offset:0,opacity:0,transform:`translate3d(${xt}, ${ct.top-41}px, 0) scale(0.6)`},{offset:1,opacity:1,transform:`translate3d(${xt}, ${ct.top-46}px, 0) scale(1)`}],lt=(0,a.c)(),J=(0,a.c)(),Gt=he("ion-back-button"),bt=Ee(Gt).querySelector(".button-text"),at=Ee(Gt).querySelector("ion-icon");Gt.text=Re.text,Gt.mode=Re.mode,Gt.icon=Re.icon,Gt.color=Re.color,Gt.disabled=Re.disabled,Gt.style.setProperty("display","block"),Gt.style.setProperty("position","fixed"),J.addElement(at),lt.addElement(bt),lt.beforeStyles({"transform-origin":`${Be} center`}).beforeAddWrite(()=>{Re.style.setProperty("display","none"),Gt.style.setProperty(Be,me)}).afterAddWrite(()=>{Re.style.setProperty("display",""),Gt.style.setProperty("display","none"),Gt.style.removeProperty(Be)}).keyframes(ve),J.beforeStyles({"transform-origin":`${ht} center`}).keyframes(Te),Ge.addAnimation([lt,J])},ie=(Ge,st,et,Re,De,ct)=>{const me=st?`calc(100% - ${De.right}px)`:`${De.left}px`,vt=st?"-18px":"18px",mt=st?"right":"left",ht=et?[{offset:0,opacity:0,transform:`translate3d(${vt}, ${ct.top-4}px, 0) scale(0.49)`},{offset:.1,opacity:0},{offset:1,opacity:1,transform:`translate3d(0, ${De.top-2}px, 0) scale(1)`}]:[{offset:0,opacity:.99,transform:`translate3d(0, ${De.top-2}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${vt}, ${ct.top-4}px, 0) scale(0.5)`}],ye=he("ion-title"),Oe=(0,a.c)();ye.innerText=Re.innerText,ye.size=Re.size,ye.color=Re.color,Oe.addElement(ye),Oe.beforeStyles({"transform-origin":`${mt} center`,height:"46px",display:"",position:"relative",[mt]:me}).beforeAddWrite(()=>{Re.style.setProperty("display","none")}).afterAddWrite(()=>{Re.style.setProperty("display",""),ye.style.setProperty("display","none")}).keyframes(ht),Ge.addAnimation(Oe)},Ie=(Ge,st)=>{var et;try{const Re="cubic-bezier(0.32,0.72,0,1)",De="opacity",ct="transform",me="0%",mt="rtl"===Ge.ownerDocument.dir,xt=mt?"-99.5%":"99.5%",Be=mt?"33%":"-33%",ht=st.enteringEl,ye=st.leavingEl,Oe="back"===st.direction,ve=ht.querySelector(":scope > ion-content"),oe=ht.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),Ce=ht.querySelectorAll(":scope > ion-header > ion-toolbar"),Te=(0,a.c)(),lt=(0,a.c)();if(Te.addElement(ht).duration((null!==(et=st.duration)&&void 0!==et?et:0)||540).easing(st.easing||Re).fill("both").beforeRemoveClass("ion-page-invisible"),ye&&null!=Ge){const at=(0,a.c)();at.addElement(Ge),Te.addAnimation(at)}if(ve||0!==Ce.length||0!==oe.length?(lt.addElement(ve),lt.addElement(oe)):lt.addElement(ht.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),Te.addAnimation(lt),Oe?lt.beforeClearStyles([De]).fromTo("transform",`translateX(${Be})`,`translateX(${me})`).fromTo(De,.8,1):lt.beforeClearStyles([De]).fromTo("transform",`translateX(${xt})`,`translateX(${me})`),ve){const at=Ee(ve).querySelector(".transition-effect");if(at){const $e=at.querySelector(".transition-cover"),Ue=at.querySelector(".transition-shadow"),Je=(0,a.c)(),Qe=(0,a.c)(),ft=(0,a.c)();Je.addElement(at).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),Qe.addElement($e).beforeClearStyles([De]).fromTo(De,0,.1),ft.addElement(Ue).beforeClearStyles([De]).fromTo(De,.03,.7),Je.addAnimation([Qe,ft]),lt.addAnimation([Je])}}const J=ht.querySelector("ion-header.header-collapse-condense"),{forward:Gt,backward:bt}=((Ge,st,et,Re,De)=>{const ct=be(Re,et),me=pe(De),vt=pe(Re),mt=be(De,et),xt=null!==ct&&null!==me&&!et,Be=null!==vt&&null!==mt&&et;if(xt){const ht=me.getBoundingClientRect(),ye=ct.getBoundingClientRect();ie(Ge,st,et,me,ht,ye),de(Ge,st,et,ct,ht,ye)}else if(Be){const ht=vt.getBoundingClientRect(),ye=mt.getBoundingClientRect();ie(Ge,st,et,vt,ht,ye),de(Ge,st,et,mt,ht,ye)}return{forward:xt,backward:Be}})(Te,mt,Oe,ht,ye);if(Ce.forEach(at=>{const $e=(0,a.c)();$e.addElement(at),Te.addAnimation($e);const Ue=(0,a.c)();Ue.addElement(at.querySelector("ion-title"));const Je=(0,a.c)(),Qe=Array.from(at.querySelectorAll("ion-buttons,[menuToggle]")),ft=at.closest("ion-header"),pt=null==ft?void 0:ft.classList.contains("header-collapse-condense-inactive");let Vt;Vt=Qe.filter(Oe?Rn=>{const Wn=Rn.classList.contains("buttons-collapse");return Wn&&!pt||!Wn}:Rn=>!Rn.classList.contains("buttons-collapse")),Je.addElement(Vt);const Nt=(0,a.c)();Nt.addElement(at.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));const bn=(0,a.c)();bn.addElement(Ee(at).querySelector(".toolbar-background"));const In=(0,a.c)(),Qn=at.querySelector("ion-back-button");if(Qn&&In.addElement(Qn),$e.addAnimation([Ue,Je,Nt,bn,In]),Je.fromTo(De,.01,1),Nt.fromTo(De,.01,1),Oe)pt||Ue.fromTo("transform",`translateX(${Be})`,`translateX(${me})`).fromTo(De,.01,1),Nt.fromTo("transform",`translateX(${Be})`,`translateX(${me})`),In.fromTo(De,.01,1);else if(J||Ue.fromTo("transform",`translateX(${xt})`,`translateX(${me})`).fromTo(De,.01,1),Nt.fromTo("transform",`translateX(${xt})`,`translateX(${me})`),bn.beforeClearStyles([De,"transform"]),(null==ft?void 0:ft.translucent)?bn.fromTo("transform",mt?"translateX(-100%)":"translateX(100%)","translateX(0px)"):bn.fromTo(De,.01,"var(--opacity)"),Gt||In.fromTo(De,.01,1),Qn&&!Gt){const Wn=(0,a.c)();Wn.addElement(Ee(Qn).querySelector(".button-text")).fromTo("transform",mt?"translateX(-100px)":"translateX(100px)","translateX(0px)"),$e.addAnimation(Wn)}}),ye){const at=(0,a.c)(),$e=ye.querySelector(":scope > ion-content"),Ue=ye.querySelectorAll(":scope > ion-header > ion-toolbar"),Je=ye.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *");if($e||0!==Ue.length||0!==Je.length?(at.addElement($e),at.addElement(Je)):at.addElement(ye.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),Te.addAnimation(at),Oe){at.beforeClearStyles([De]).fromTo("transform",`translateX(${me})`,mt?"translateX(-100%)":"translateX(100%)");const Qe=(0,ne.g)(ye);Te.afterAddWrite(()=>{"normal"===Te.getDirection()&&Qe.style.setProperty("display","none")})}else at.fromTo("transform",`translateX(${me})`,`translateX(${Be})`).fromTo(De,1,.8);if($e){const Qe=Ee($e).querySelector(".transition-effect");if(Qe){const ft=Qe.querySelector(".transition-cover"),pt=Qe.querySelector(".transition-shadow"),Vt=(0,a.c)(),Nt=(0,a.c)(),bn=(0,a.c)();Vt.addElement(Qe).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),Nt.addElement(ft).beforeClearStyles([De]).fromTo(De,.1,0),bn.addElement(pt).beforeClearStyles([De]).fromTo(De,.7,.03),Vt.addAnimation([Nt,bn]),at.addAnimation([Vt])}}Ue.forEach(Qe=>{const ft=(0,a.c)();ft.addElement(Qe);const pt=(0,a.c)();pt.addElement(Qe.querySelector("ion-title"));const Vt=(0,a.c)(),Nt=Qe.querySelectorAll("ion-buttons,[menuToggle]"),bn=Qe.closest("ion-header"),In=null==bn?void 0:bn.classList.contains("header-collapse-condense-inactive"),Qn=Array.from(Nt).filter(mr=>{const Wt=mr.classList.contains("buttons-collapse");return Wt&&!In||!Wt});Vt.addElement(Qn);const Rn=(0,a.c)(),Wn=Qe.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");Wn.length>0&&Rn.addElement(Wn);const cr=(0,a.c)();cr.addElement(Ee(Qe).querySelector(".toolbar-background"));const Hn=(0,a.c)(),or=Qe.querySelector("ion-back-button");if(or&&Hn.addElement(or),ft.addAnimation([pt,Vt,Rn,Hn,cr]),Te.addAnimation(ft),Hn.fromTo(De,.99,0),Vt.fromTo(De,.99,0),Rn.fromTo(De,.99,0),Oe){if(In||pt.fromTo("transform",`translateX(${me})`,mt?"translateX(-100%)":"translateX(100%)").fromTo(De,.99,0),Rn.fromTo("transform",`translateX(${me})`,mt?"translateX(-100%)":"translateX(100%)"),cr.beforeClearStyles([De,"transform"]),(null==bn?void 0:bn.translucent)?cr.fromTo("transform","translateX(0px)",mt?"translateX(-100%)":"translateX(100%)"):cr.fromTo(De,"var(--opacity)",0),or&&!bt){const Wt=(0,a.c)();Wt.addElement(Ee(or).querySelector(".button-text")).fromTo("transform",`translateX(${me})`,`translateX(${(mt?-124:124)+"px"})`),ft.addAnimation(Wt)}}else In||pt.fromTo("transform",`translateX(${me})`,`translateX(${Be})`).fromTo(De,.99,0).afterClearStyles([ct,De]),Rn.fromTo("transform",`translateX(${me})`,`translateX(${Be})`).afterClearStyles([ct,De]),Hn.afterClearStyles([De]),pt.afterClearStyles([De]),Vt.afterClearStyles([De])})}return Te}catch(Re){throw Re}}},1369:(tn,ot,H)=>{"use strict";H.r(ot),H.d(ot,{mdTransitionAnimation:()=>Le});var a=H(5942),ne=H(664);H(3457),H(1308);const Le=(he,Ee)=>{var pe,be,ce;const Ie="back"===Ee.direction,st=Ee.leavingEl,et=(0,ne.g)(Ee.enteringEl),Re=et.querySelector("ion-toolbar"),De=(0,a.c)();if(De.addElement(et).fill("both").beforeRemoveClass("ion-page-invisible"),Ie?De.duration((null!==(pe=Ee.duration)&&void 0!==pe?pe:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)"):De.duration((null!==(be=Ee.duration)&&void 0!==be?be:0)||280).easing("cubic-bezier(0.36,0.66,0.04,1)").fromTo("transform","translateY(40px)","translateY(0px)").fromTo("opacity",.01,1),Re){const ct=(0,a.c)();ct.addElement(Re),De.addAnimation(ct)}if(st&&Ie){De.duration((null!==(ce=Ee.duration)&&void 0!==ce?ce:0)||200).easing("cubic-bezier(0.47,0,0.745,0.715)");const ct=(0,a.c)();ct.addElement((0,ne.g)(st)).onFinish(me=>{1===me&&ct.elements.length>0&&ct.elements[0].style.setProperty("display","none")}).fromTo("transform","translateY(0px)","translateY(40px)").fromTo("opacity",1,0),De.addAnimation(ct)}return De}},4414:(tn,ot,H)=>{"use strict";H.d(ot,{B:()=>$e,a:()=>pe,b:()=>be,c:()=>Ie,d:()=>Oe,e:()=>st,f:()=>oe,g:()=>lt,h:()=>he,i:()=>Gt,j:()=>De,k:()=>ht,m:()=>de,s:()=>at,t:()=>Ge});var a=H(5861),ne=H(9658),Y=H(7593),Pe=H(5730);let Le=0;const he=new WeakMap,Ee=Ue=>({create:Je=>et(Ue,Je),dismiss:(Je,Qe,ft)=>xt(document,Je,Qe,Ue,ft),getTop:()=>(0,a.Z)(function*(){return ht(document,Ue)})()}),pe=Ee("ion-alert"),be=Ee("ion-action-sheet"),de=Ee("ion-modal"),Ie=Ee("ion-popover"),Ge=Ee("ion-toast"),st=Ue=>{"undefined"!=typeof document&&mt(document);const Je=Le++;Ue.overlayIndex=Je,Ue.hasAttribute("id")||(Ue.id=`ion-overlay-${Je}`)},et=(Ue,Je)=>"undefined"!=typeof window&&void 0!==window.customElements?window.customElements.whenDefined(Ue).then(()=>{const Qe=document.createElement(Ue);return Qe.classList.add("overlay-hidden"),Object.assign(Qe,Object.assign(Object.assign({},Je),{hasController:!0})),Ce(document).appendChild(Qe),new Promise(ft=>(0,Pe.c)(Qe,ft))}):Promise.resolve(),Re='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',De=(Ue,Je)=>{let Qe=Ue.querySelector(Re);const ft=null==Qe?void 0:Qe.shadowRoot;ft&&(Qe=ft.querySelector(Re)||Qe),Qe?(0,Pe.f)(Qe):Je.focus()},me=(Ue,Je)=>{const Qe=Array.from(Ue.querySelectorAll(Re));let ft=Qe.length>0?Qe[Qe.length-1]:null;const pt=null==ft?void 0:ft.shadowRoot;pt&&(ft=pt.querySelector(Re)||ft),ft?ft.focus():Je.focus()},mt=Ue=>{0===Le&&(Le=1,Ue.addEventListener("focus",Je=>{((Ue,Je)=>{const Qe=ht(Je,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover"),ft=Ue.target;Qe&&ft&&!Qe.classList.contains("ion-disable-focus-trap")&&(Qe.shadowRoot?(()=>{if(Qe.contains(ft))Qe.lastFocus=ft;else{const Nt=Qe.lastFocus;De(Qe,Qe),Nt===Je.activeElement&&me(Qe,Qe),Qe.lastFocus=Je.activeElement}})():(()=>{if(Qe===ft)Qe.lastFocus=void 0;else{const Nt=(0,Pe.g)(Qe);if(!Nt.contains(ft))return;const bn=Nt.querySelector(".ion-overlay-wrapper");if(!bn)return;if(bn.contains(ft))Qe.lastFocus=ft;else{const In=Qe.lastFocus;De(bn,Qe),In===Je.activeElement&&me(bn,Qe),Qe.lastFocus=Je.activeElement}}})())})(Je,Ue)},!0),Ue.addEventListener("ionBackButton",Je=>{const Qe=ht(Ue);null!=Qe&&Qe.backdropDismiss&&Je.detail.register(Y.OVERLAY_BACK_BUTTON_PRIORITY,()=>Qe.dismiss(void 0,$e))}),Ue.addEventListener("keyup",Je=>{if("Escape"===Je.key){const Qe=ht(Ue);null!=Qe&&Qe.backdropDismiss&&Qe.dismiss(void 0,$e)}}))},xt=(Ue,Je,Qe,ft,pt)=>{const Vt=ht(Ue,ft,pt);return Vt?Vt.dismiss(Je,Qe):Promise.reject("overlay does not exist")},ht=(Ue,Je,Qe)=>{const ft=((Ue,Je)=>(void 0===Je&&(Je="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(Ue.querySelectorAll(Je)).filter(Qe=>Qe.overlayIndex>0)))(Ue,Je).filter(pt=>!(Ue=>Ue.classList.contains("overlay-hidden"))(pt));return void 0===Qe?ft[ft.length-1]:ft.find(pt=>pt.id===Qe)},ye=(Ue=!1)=>{const Qe=Ce(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");!Qe||(Ue?Qe.setAttribute("aria-hidden","true"):Qe.removeAttribute("aria-hidden"))},Oe=function(){var Ue=(0,a.Z)(function*(Je,Qe,ft,pt,Vt){var Nt,bn;if(Je.presented)return;ye(!0),Je.presented=!0,Je.willPresent.emit(),null===(Nt=Je.willPresentShorthand)||void 0===Nt||Nt.emit();const In=(0,ne.b)(Je),Qn=Je.enterAnimation?Je.enterAnimation:ne.c.get(Qe,"ios"===In?ft:pt);(yield Te(Je,Qn,Je.el,Vt))&&(Je.didPresent.emit(),null===(bn=Je.didPresentShorthand)||void 0===bn||bn.emit()),"ION-TOAST"!==Je.el.tagName&&ve(Je.el),Je.keyboardClose&&(null===document.activeElement||!Je.el.contains(document.activeElement))&&Je.el.focus()});return function(Qe,ft,pt,Vt,Nt){return Ue.apply(this,arguments)}}(),ve=function(){var Ue=(0,a.Z)(function*(Je){let Qe=document.activeElement;if(!Qe)return;const ft=null==Qe?void 0:Qe.shadowRoot;ft&&(Qe=ft.querySelector(Re)||Qe),yield Je.onDidDismiss(),Qe.focus()});return function(Qe){return Ue.apply(this,arguments)}}(),oe=function(){var Ue=(0,a.Z)(function*(Je,Qe,ft,pt,Vt,Nt,bn){var In,Qn;if(!Je.presented)return!1;ye(!1),Je.presented=!1;try{Je.el.style.setProperty("pointer-events","none"),Je.willDismiss.emit({data:Qe,role:ft}),null===(In=Je.willDismissShorthand)||void 0===In||In.emit({data:Qe,role:ft});const Rn=(0,ne.b)(Je),Wn=Je.leaveAnimation?Je.leaveAnimation:ne.c.get(pt,"ios"===Rn?Vt:Nt);"gesture"!==ft&&(yield Te(Je,Wn,Je.el,bn)),Je.didDismiss.emit({data:Qe,role:ft}),null===(Qn=Je.didDismissShorthand)||void 0===Qn||Qn.emit({data:Qe,role:ft}),he.delete(Je),Je.el.classList.add("overlay-hidden"),Je.el.style.removeProperty("pointer-events")}catch(Rn){console.error(Rn)}return Je.el.remove(),!0});return function(Qe,ft,pt,Vt,Nt,bn,In){return Ue.apply(this,arguments)}}(),Ce=Ue=>Ue.querySelector("ion-app")||Ue.body,Te=function(){var Ue=(0,a.Z)(function*(Je,Qe,ft,pt){ft.classList.remove("overlay-hidden");const Nt=Qe(Je.el,pt);(!Je.animated||!ne.c.getBoolean("animated",!0))&&Nt.duration(0),Je.keyboardClose&&Nt.beforeAddWrite(()=>{const In=ft.ownerDocument.activeElement;null!=In&&In.matches("input,ion-input, ion-textarea")&&In.blur()});const bn=he.get(Je)||[];return he.set(Je,[...bn,Nt]),yield Nt.play(),!0});return function(Qe,ft,pt,Vt){return Ue.apply(this,arguments)}}(),lt=(Ue,Je)=>{let Qe;const ft=new Promise(pt=>Qe=pt);return J(Ue,Je,pt=>{Qe(pt.detail)}),ft},J=(Ue,Je,Qe)=>{const ft=pt=>{(0,Pe.b)(Ue,Je,ft),Qe(pt)};(0,Pe.a)(Ue,Je,ft)},Gt=Ue=>"cancel"===Ue||Ue===$e,bt=Ue=>Ue(),at=(Ue,Je)=>{if("function"==typeof Ue)return ne.c.get("_zoneGate",bt)(()=>{try{return Ue(Je)}catch(ft){throw ft}})},$e="backdrop"},5867:(tn,ot,H)=>{"use strict";H.d(ot,{C6:()=>a.getApps,Mq:()=>a.getApp});var a=H(9681);(0,a.registerVersion)("firebase","9.14.0","app")},127:(tn,ot,H)=>{"use strict";H.d(ot,{Z:()=>a.Z});var a=H(3942);a.Z.registerVersion("firebase","9.14.0","app-compat")},1277:(tn,ot,H)=>{"use strict";H.r(ot);var a=H(5861),ne=H(3942),Y=H(2090),Pe=H(9681),Le=H(1877),he=H(655),Ee=H(4859);const st=function Ie(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},et=function Ge(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Re=new Y.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ct=new Le.Yd("@firebase/auth");function me(b,...p){ct.logLevel<=Le.in.ERROR&&ct.error(`Auth (${Pe.SDK_VERSION}): ${b}`,...p)}function vt(b,...p){throw ht(b,...p)}function mt(b,...p){return ht(b,...p)}function xt(b,p,_){const A=Object.assign(Object.assign({},et()),{[p]:_});return new Y.LL("auth","Firebase",A).create(p,{appName:b.name})}function Be(b,p,_){if(!(p instanceof _))throw _.name!==p.constructor.name&&vt(b,"argument-error"),xt(b,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ht(b,...p){if("string"!=typeof b){const _=p[0],A=[...p.slice(1)];return A[0]&&(A[0].appName=b.name),b._errorFactory.create(_,...A)}return Re.create(b,...p)}function ye(b,p,..._){if(!b)throw ht(p,..._)}function Oe(b){const p="INTERNAL ASSERTION FAILED: "+b;throw me(p),new Error(p)}function ve(b,p){b||Oe(p)}const oe=new Map;function Ce(b){ve(b instanceof Function,"Expected a class definition");let p=oe.get(b);return p?(ve(p instanceof b,"Instance stored in cache mismatched with class"),p):(p=new b,oe.set(b,p),p)}function J(){var b;return"undefined"!=typeof self&&(null===(b=self.location)||void 0===b?void 0:b.href)||""}function Gt(){return"http:"===bt()||"https:"===bt()}function bt(){var b;return"undefined"!=typeof self&&(null===(b=self.location)||void 0===b?void 0:b.protocol)||null}class Ue{constructor(p,_){this.shortDelay=p,this.longDelay=_,ve(_>p,"Short delay should be less than long delay!"),this.isMobile=(0,Y.uI)()||(0,Y.b$)()}get(){return function at(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Gt()||(0,Y.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Je(b,p){ve(b.emulator,"Emulator should always be set here");const{url:_}=b.emulator;return p?`${_}${p.startsWith("/")?p.slice(1):p}`:_}class Qe{static initialize(p,_,A){this.fetchImpl=p,_&&(this.headersImpl=_),A&&(this.responseImpl=A)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Oe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Oe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Oe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const ft={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},pt=new Ue(3e4,6e4);function Vt(b,p){return b.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:b.tenantId}):p}function Nt(b,p,_,A){return bn.apply(this,arguments)}function bn(){return(bn=(0,a.Z)(function*(b,p,_,A,K={}){return In(b,K,(0,a.Z)(function*(){let ue={},rt={};A&&("GET"===p?rt=A:ue={body:JSON.stringify(A)});const Bt=(0,Y.xO)(Object.assign({key:b.config.apiKey},rt)).slice(1),hn=yield b._getAdditionalHeaders();return hn["Content-Type"]="application/json",b.languageCode&&(hn["X-Firebase-Locale"]=b.languageCode),Qe.fetch()(cr(b,b.config.apiHost,_,Bt),Object.assign({method:p,headers:hn,referrerPolicy:"no-referrer"},ue))}))})).apply(this,arguments)}function In(b,p,_){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,a.Z)(function*(b,p,_){b._canInitEmulator=!1;const A=Object.assign(Object.assign({},ft),p);try{const K=new Hn(b),ue=yield Promise.race([_(),K.promise]);K.clearNetworkTimeout();const rt=yield ue.json();if("needConfirmation"in rt)throw or(b,"account-exists-with-different-credential",rt);if(ue.ok&&!("errorMessage"in rt))return rt;{const Bt=ue.ok?rt.errorMessage:rt.error.message,[hn,Un]=Bt.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===hn)throw or(b,"credential-already-in-use",rt);if("EMAIL_EXISTS"===hn)throw or(b,"email-already-in-use",rt);if("USER_DISABLED"===hn)throw or(b,"user-disabled",rt);const gr=A[hn]||hn.toLowerCase().replace(/[_\s]+/g,"-");if(Un)throw xt(b,gr,Un);vt(b,gr)}}catch(K){if(K instanceof Y.ZR)throw K;vt(b,"network-request-failed")}})).apply(this,arguments)}function Rn(b,p,_,A){return Wn.apply(this,arguments)}function Wn(){return(Wn=(0,a.Z)(function*(b,p,_,A,K={}){const ue=yield Nt(b,p,_,A,K);return"mfaPendingCredential"in ue&&vt(b,"multi-factor-auth-required",{_serverResponse:ue}),ue})).apply(this,arguments)}function cr(b,p,_,A){const K=`${p}${_}?${A}`;return b.config.emulator?Je(b.config,K):`${b.config.apiScheme}://${K}`}class Hn{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((_,A)=>{this.timer=setTimeout(()=>A(mt(this.auth,"network-request-failed")),pt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function or(b,p,_){const A={appName:b.name};_.email&&(A.email=_.email),_.phoneNumber&&(A.phoneNumber=_.phoneNumber);const K=mt(b,p,A);return K.customData._tokenResponse=_,K}function Wt(){return(Wt=(0,a.Z)(function*(b,p){return Nt(b,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function rr(b,p){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,a.Z)(function*(b,p){return Nt(b,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function tr(b,p){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,a.Z)(function*(b,p){return Nt(b,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function Cr(b){if(b)try{const p=new Date(Number(b));if(!isNaN(p.getTime()))return p.toUTCString()}catch(p){}}function Tn(){return(Tn=(0,a.Z)(function*(b,p=!1){const _=(0,Y.m9)(b),A=yield _.getIdToken(p),K=Tt(A);ye(K&&K.exp&&K.auth_time&&K.iat,_.auth,"internal-error");const ue="object"==typeof K.firebase?K.firebase:void 0,rt=null==ue?void 0:ue.sign_in_provider;return{claims:K,token:A,authTime:Cr(gn(K.auth_time)),issuedAtTime:Cr(gn(K.iat)),expirationTime:Cr(gn(K.exp)),signInProvider:rt||null,signInSecondFactor:(null==ue?void 0:ue.sign_in_second_factor)||null}})).apply(this,arguments)}function gn(b){return 1e3*Number(b)}function Tt(b){var p;const[_,A,K]=b.split(".");if(void 0===_||void 0===A||void 0===K)return me("JWT malformed, contained fewer than 3 sections"),null;try{const ue=(0,Y.tV)(A);return ue?JSON.parse(ue):(me("Failed to decode base64 JWT payload"),null)}catch(ue){return me("Caught error parsing JWT payload as JSON",null===(p=ue)||void 0===p?void 0:p.toString()),null}}function Bn(b,p){return Dr.apply(this,arguments)}function Dr(){return(Dr=(0,a.Z)(function*(b,p,_=!1){if(_)return p;try{return yield p}catch(A){throw A instanceof Y.ZR&&Pr(A)&&b.auth.currentUser===b&&(yield b.auth.signOut()),A}})).apply(this,arguments)}function Pr({code:b}){return"auth/user-disabled"===b||"auth/user-token-expired"===b}class $n{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var _;if(p){const A=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),A}{this.errorBackoff=3e4;const K=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,K)}}schedule(p=!1){var _=this;if(!this.isRunning)return;const A=this.getInterval(p);this.timerId=setTimeout((0,a.Z)(function*(){yield _.iteration()}),A)}iteration(){var p=this;return(0,a.Z)(function*(){var _;try{yield p.user.getIdToken(!0)}catch(A){return void("auth/network-request-failed"===(null===(_=A)||void 0===_?void 0:_.code)&&p.schedule(!0))}p.schedule()})()}}class ji{constructor(p,_){this.createdAt=p,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=Cr(this.lastLoginAt),this.creationTime=Cr(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Ln(b){return si.apply(this,arguments)}function si(){return(si=(0,a.Z)(function*(b){var p;const _=b.auth,A=yield b.getIdToken(),K=yield Bn(b,tr(_,{idToken:A}));ye(null==K?void 0:K.users.length,_,"internal-error");const ue=K.users[0];b._notifyReloadListener(ue);const rt=null!==(p=ue.providerUserInfo)&&void 0!==p&&p.length?mn(ue.providerUserInfo):[],Bt=ei(b.providerData,rt),gr=!!b.isAnonymous&&!(b.email&&ue.passwordHash||null!=Bt&&Bt.length),jn={uid:ue.localId,displayName:ue.displayName||null,photoURL:ue.photoUrl||null,email:ue.email||null,emailVerified:ue.emailVerified||!1,phoneNumber:ue.phoneNumber||null,tenantId:ue.tenantId||null,providerData:Bt,metadata:new ji(ue.createdAt,ue.lastLoginAt),isAnonymous:gr};Object.assign(b,jn)})).apply(this,arguments)}function Yr(){return(Yr=(0,a.Z)(function*(b){const p=(0,Y.m9)(b);yield Ln(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function ei(b,p){return[...b.filter(A=>!p.some(K=>K.providerId===A.providerId)),...p]}function mn(b){return b.map(p=>{var{providerId:_}=p,A=(0,he._T)(p,["providerId"]);return{providerId:_,uid:A.rawId||"",displayName:A.displayName||null,email:A.email||null,phoneNumber:A.phoneNumber||null,photoURL:A.photoUrl||null}})}function ln(){return(ln=(0,a.Z)(function*(b,p){const _=yield In(b,{},(0,a.Z)(function*(){const A=(0,Y.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:K,apiKey:ue}=b.config,rt=cr(b,K,"/v1/token",`key=${ue}`),Bt=yield b._getAdditionalHeaders();return Bt["Content-Type"]="application/x-www-form-urlencoded",Qe.fetch()(rt,{method:"POST",headers:Bt,body:A})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class kn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){ye(p.idToken,"internal-error"),ye(void 0!==p.idToken,"internal-error"),ye(void 0!==p.refreshToken,"internal-error");const _="expiresIn"in p&&void 0!==p.expiresIn?Number(p.expiresIn):function yr(b){const p=Tt(b);return ye(p,"internal-error"),ye(void 0!==p.exp,"internal-error"),ye(void 0!==p.iat,"internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,_)}getToken(p,_=!1){var A=this;return(0,a.Z)(function*(){return ye(!A.accessToken||A.refreshToken,p,"user-token-expired"),_||!A.accessToken||A.isExpired?A.refreshToken?(yield A.refresh(p,A.refreshToken),A.accessToken):null:A.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,_){var A=this;return(0,a.Z)(function*(){const{accessToken:K,refreshToken:ue,expiresIn:rt}=yield function $t(b,p){return ln.apply(this,arguments)}(p,_);A.updateTokensAndExpiration(K,ue,Number(rt))})()}updateTokensAndExpiration(p,_,A){this.refreshToken=_||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*A}static fromJSON(p,_){const{refreshToken:A,accessToken:K,expirationTime:ue}=_,rt=new kn;return A&&(ye("string"==typeof A,"internal-error",{appName:p}),rt.refreshToken=A),K&&(ye("string"==typeof K,"internal-error",{appName:p}),rt.accessToken=K),ue&&(ye("number"==typeof ue,"internal-error",{appName:p}),rt.expirationTime=ue),rt}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new kn,this.toJSON())}_performRefresh(){return Oe("not implemented")}}function Cn(b,p){ye("string"==typeof b||void 0===b,"internal-error",{appName:p})}class On{constructor(p){var{uid:_,auth:A,stsTokenManager:K}=p,ue=(0,he._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $n(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=A,this.stsTokenManager=K,this.accessToken=K.accessToken,this.displayName=ue.displayName||null,this.email=ue.email||null,this.emailVerified=ue.emailVerified||!1,this.phoneNumber=ue.phoneNumber||null,this.photoURL=ue.photoURL||null,this.isAnonymous=ue.isAnonymous||!1,this.tenantId=ue.tenantId||null,this.providerData=ue.providerData?[...ue.providerData]:[],this.metadata=new ji(ue.createdAt||void 0,ue.lastLoginAt||void 0)}getIdToken(p){var _=this;return(0,a.Z)(function*(){const A=yield Bn(_,_.stsTokenManager.getToken(_.auth,p));return ye(A,_.auth,"internal-error"),_.accessToken!==A&&(_.accessToken=A,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),A})()}getIdTokenResult(p){return function fr(b){return Tn.apply(this,arguments)}(this,p)}reload(){return function ir(b){return Yr.apply(this,arguments)}(this)}_assign(p){this!==p&&(ye(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(_=>Object.assign({},_)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new On(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){ye(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,_=!1){var A=this;return(0,a.Z)(function*(){let K=!1;p.idToken&&p.idToken!==A.stsTokenManager.accessToken&&(A.stsTokenManager.updateFromServerResponse(p),K=!0),_&&(yield Ln(A)),yield A.auth._persistUserIfCurrent(A),K&&A.auth._notifyListenersIfCurrent(A)})()}delete(){var p=this;return(0,a.Z)(function*(){const _=yield p.getIdToken();return yield Bn(p,function mr(b,p){return Wt.apply(this,arguments)}(p.auth,{idToken:_})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,_){var A,K,ue,rt,Bt,hn,Un,gr;const jn=null!==(A=_.displayName)&&void 0!==A?A:void 0,uo=null!==(K=_.email)&&void 0!==K?K:void 0,ma=null!==(ue=_.phoneNumber)&&void 0!==ue?ue:void 0,$a=null!==(rt=_.photoURL)&&void 0!==rt?rt:void 0,Kd=null!==(Bt=_.tenantId)&&void 0!==Bt?Bt:void 0,Fl=null!==(hn=_._redirectEventId)&&void 0!==hn?hn:void 0,Zd=null!==(Un=_.createdAt)&&void 0!==Un?Un:void 0,Nh=null!==(gr=_.lastLoginAt)&&void 0!==gr?gr:void 0,{uid:Qd,emailVerified:Ph,isAnonymous:Ya,providerData:fd,stsTokenManager:ec}=_;ye(Qd&&ec,p,"internal-error");const Rc=kn.fromJSON(this.name,ec);ye("string"==typeof Qd,p,"internal-error"),Cn(jn,p.name),Cn(uo,p.name),ye("boolean"==typeof Ph,p,"internal-error"),ye("boolean"==typeof Ya,p,"internal-error"),Cn(ma,p.name),Cn($a,p.name),Cn(Kd,p.name),Cn(Fl,p.name),Cn(Zd,p.name),Cn(Nh,p.name);const Oc=new On({uid:Qd,auth:p,email:uo,emailVerified:Ph,displayName:jn,isAnonymous:Ya,photoURL:$a,phoneNumber:ma,tenantId:Kd,stsTokenManager:Rc,createdAt:Zd,lastLoginAt:Nh});return fd&&Array.isArray(fd)&&(Oc.providerData=fd.map(pd=>Object.assign({},pd))),Fl&&(Oc._redirectEventId=Fl),Oc}static _fromIdTokenResponse(p,_,A=!1){return(0,a.Z)(function*(){const K=new kn;K.updateFromServerResponse(_);const ue=new On({uid:_.localId,auth:p,stsTokenManager:K,isAnonymous:A});return yield Ln(ue),ue})()}}const Ne=(()=>{class b{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,a.Z)(function*(){return!0})()}_set(_,A){var K=this;return(0,a.Z)(function*(){K.storage[_]=A})()}_get(_){var A=this;return(0,a.Z)(function*(){const K=A.storage[_];return void 0===K?null:K})()}_remove(_){var A=this;return(0,a.Z)(function*(){delete A.storage[_]})()}_addListener(_,A){}_removeListener(_,A){}}return b.type="NONE",b})();function He(b,p,_){return`firebase:${b}:${p}:${_}`}class dt{constructor(p,_,A){this.persistence=p,this.auth=_,this.userKey=A;const{config:K,name:ue}=this.auth;this.fullUserKey=He(this.userKey,K.apiKey,ue),this.fullPersistenceKey=He("persistence",K.apiKey,ue),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,a.Z)(function*(){const _=yield p.persistence._get(p.fullUserKey);return _?On._fromJSON(p.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var _=this;return(0,a.Z)(function*(){if(_.persistence===p)return;const A=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=p,A?_.setCurrentUser(A):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,_,A="authUser"){return(0,a.Z)(function*(){if(!_.length)return new dt(Ce(Ne),p,A);const K=(yield Promise.all(_.map(function(){var Un=(0,a.Z)(function*(gr){if(yield gr._isAvailable())return gr});return function(gr){return Un.apply(this,arguments)}}()))).filter(Un=>Un);let ue=K[0]||Ce(Ne);const rt=He(A,p.config.apiKey,p.name);let Bt=null;for(const Un of _)try{const gr=yield Un._get(rt);if(gr){const jn=On._fromJSON(p,gr);Un!==ue&&(Bt=jn),ue=Un;break}}catch(gr){}const hn=K.filter(Un=>Un._shouldAllowMigration);return ue._shouldAllowMigration&&hn.length?(ue=hn[0],Bt&&(yield ue._set(rt,Bt.toJSON())),yield Promise.all(_.map(function(){var Un=(0,a.Z)(function*(gr){if(gr!==ue)try{yield gr._remove(rt)}catch(jn){}});return function(gr){return Un.apply(this,arguments)}}())),new dt(ue,p,A)):new dt(ue,p,A)})()}}function tt(b){const p=b.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(_r(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(on(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(gt(p))return"Blackberry";if(Ve(p))return"Webos";if(_n(p))return"Safari";if((p.includes("chrome/")||ar(p))&&!p.includes("edge/"))return"Chrome";if(Rr(p))return"Android";{const A=b.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==A?void 0:A.length))return A[1]}return"Other"}function on(b=(0,Y.z$)()){return/firefox\//i.test(b)}function _n(b=(0,Y.z$)()){const p=b.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function ar(b=(0,Y.z$)()){return/crios\//i.test(b)}function _r(b=(0,Y.z$)()){return/iemobile/i.test(b)}function Rr(b=(0,Y.z$)()){return/android/i.test(b)}function gt(b=(0,Y.z$)()){return/blackberry/i.test(b)}function Ve(b=(0,Y.z$)()){return/webos/i.test(b)}function xe(b=(0,Y.z$)()){return/iphone|ipad|ipod/i.test(b)||/macintosh/i.test(b)&&/mobile/i.test(b)}function pn(b=(0,Y.z$)()){return xe(b)||Rr(b)||Ve(b)||gt(b)||/windows phone/i.test(b)||_r(b)}function Dn(b,p=[]){let _;switch(b){case"Browser":_=tt((0,Y.z$)());break;case"Worker":_=`${tt((0,Y.z$)())}-${b}`;break;default:_=b}const A=p.length?p.join(","):"FirebaseCore-web";return`${_}/JsCore/${Pe.SDK_VERSION}/${A}`}class lr{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,_){const A=ue=>new Promise((rt,Bt)=>{try{rt(p(ue))}catch(hn){Bt(hn)}});A.onAbort=_,this.queue.push(A);const K=this.queue.length-1;return()=>{this.queue[K]=()=>Promise.resolve()}}runMiddleware(p){var _=this;return(0,a.Z)(function*(){var A;if(_.auth.currentUser===p)return;const K=[];try{for(const ue of _.queue)yield ue(p),ue.onAbort&&K.push(ue.onAbort)}catch(ue){K.reverse();for(const rt of K)try{rt()}catch(Bt){}throw _.auth._errorFactory.create("login-blocked",{originalMessage:null===(A=ue)||void 0===A?void 0:A.message})}})()}}class Hr{constructor(p,_,A){this.app=p,this.heartbeatServiceProvider=_,this.config=A,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ti(this),this.idTokenSubscription=new ti(this),this.beforeStateQueue=new lr(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Re,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=A.sdkClientVersion}_initializeWithPersistence(p,_){var A=this;return _&&(this._popupRedirectResolver=Ce(_)),this._initializationPromise=this.queue((0,a.Z)(function*(){var K,ue;if(!A._deleted&&(A.persistenceManager=yield dt.create(A,p),!A._deleted)){if(null!==(K=A._popupRedirectResolver)&&void 0!==K&&K._shouldInitProactively)try{yield A._popupRedirectResolver._initialize(A)}catch(rt){}yield A.initializeCurrentUser(_),A.lastNotifiedUid=(null===(ue=A.currentUser)||void 0===ue?void 0:ue.uid)||null,!A._deleted&&(A._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,a.Z)(function*(){if(p._deleted)return;const _=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||_){if(p.currentUser&&_&&p.currentUser.uid===_.uid)return p._currentUser._assign(_),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(_,!0)}})()}initializeCurrentUser(p){var _=this;return(0,a.Z)(function*(){var A;const K=yield _.assertedPersistence.getCurrentUser();let ue=K,rt=!1;if(p&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const Bt=null===(A=_.redirectUser)||void 0===A?void 0:A._redirectEventId,hn=null==ue?void 0:ue._redirectEventId,Un=yield _.tryRedirectSignIn(p);(!Bt||Bt===hn)&&(null==Un?void 0:Un.user)&&(ue=Un.user,rt=!0)}if(!ue)return _.directlySetCurrentUser(null);if(!ue._redirectEventId){if(rt)try{yield _.beforeStateQueue.runMiddleware(ue)}catch(Bt){ue=K,_._popupRedirectResolver._overrideRedirectResult(_,()=>Promise.reject(Bt))}return ue?_.reloadAndSetCurrentUserOrClear(ue):_.directlySetCurrentUser(null)}return ye(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===ue._redirectEventId?_.directlySetCurrentUser(ue):_.reloadAndSetCurrentUserOrClear(ue)})()}tryRedirectSignIn(p){var _=this;return(0,a.Z)(function*(){let A=null;try{A=yield _._popupRedirectResolver._completeRedirectFn(_,p,!0)}catch(K){yield _._setRedirectUser(null)}return A})()}reloadAndSetCurrentUserOrClear(p){var _=this;return(0,a.Z)(function*(){var A;try{yield Ln(p)}catch(K){if("auth/network-request-failed"!==(null===(A=K)||void 0===A?void 0:A.code))return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function $e(){if("undefined"==typeof navigator)return null;const b=navigator;return b.languages&&b.languages[0]||b.language||null}()}_delete(){var p=this;return(0,a.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var _=this;return(0,a.Z)(function*(){const A=p?(0,Y.m9)(p):null;return A&&ye(A.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(A&&A._clone(_))})()}_updateCurrentUser(p,_=!1){var A=this;return(0,a.Z)(function*(){if(!A._deleted)return p&&ye(A.tenantId===p.tenantId,A,"tenant-id-mismatch"),_||(yield A.beforeStateQueue.runMiddleware(p)),A.queue((0,a.Z)(function*(){yield A.directlySetCurrentUser(p),A.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,a.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var _=this;return this.queue((0,a.Z)(function*(){yield _.assertedPersistence.setPersistence(Ce(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new Y.LL("auth","Firebase",p())}onAuthStateChanged(p,_,A){return this.registerStateListener(this.authStateSubscription,p,_,A)}beforeAuthStateChanged(p,_){return this.beforeStateQueue.pushCallback(p,_)}onIdTokenChanged(p,_,A){return this.registerStateListener(this.idTokenSubscription,p,_,A)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,_){var A=this;return(0,a.Z)(function*(){const K=yield A.getOrInitRedirectPersistenceManager(_);return null===p?K.removeCurrentUser():K.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var _=this;return(0,a.Z)(function*(){if(!_.redirectPersistenceManager){const A=p&&Ce(p)||_._popupRedirectResolver;ye(A,_,"argument-error"),_.redirectPersistenceManager=yield dt.create(_,[Ce(A._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(p){var _=this;return(0,a.Z)(function*(){var A,K;return _._isInitialized&&(yield _.queue((0,a.Z)(function*(){}))),(null===(A=_._currentUser)||void 0===A?void 0:A._redirectEventId)===p?_._currentUser:(null===(K=_.redirectUser)||void 0===K?void 0:K._redirectEventId)===p?_.redirectUser:null})()}_persistUserIfCurrent(p){var _=this;return(0,a.Z)(function*(){if(p===_.currentUser)return _.queue((0,a.Z)(function*(){return _.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const A=null!==(_=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==A&&(this.lastNotifiedUid=A,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,_,A,K){if(this._deleted)return()=>{};const ue="function"==typeof _?_:_.next.bind(_),rt=this._isInitialized?Promise.resolve():this._initializationPromise;return ye(rt,this,"internal-error"),rt.then(()=>ue(this.currentUser)),"function"==typeof _?p.addObserver(_,A,K):p.addObserver(_)}directlySetCurrentUser(p){var _=this;return(0,a.Z)(function*(){_.currentUser&&_.currentUser!==p&&_._currentUser._stopProactiveRefresh(),p&&_.isProactiveRefreshEnabled&&p._startProactiveRefresh(),_.currentUser=p,p?yield _.assertedPersistence.setCurrentUser(p):yield _.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return ye(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=Dn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,a.Z)(function*(){var _;const A={"X-Client-Version":p.clientVersion};p.app.options.appId&&(A["X-Firebase-gmpid"]=p.app.options.appId);const K=yield null===(_=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===_?void 0:_.getHeartbeatsHeader();return K&&(A["X-Firebase-Client"]=K),A})()}}function kr(b){return(0,Y.m9)(b)}class ti{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,Y.ne)(_=>this.observer=_)}get next(){return ye(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Er(b){const p=b.indexOf(":");return p<0?"":b.substr(0,p+1)}function Ei(b){if(!b)return null;const p=Number(b);return isNaN(p)?null:p}class Zi{constructor(p,_){this.providerId=p,this.signInMethod=_}toJSON(){return Oe("not implemented")}_getIdTokenResponse(p){return Oe("not implemented")}_linkToIdToken(p,_){return Oe("not implemented")}_getReauthenticationResolver(p){return Oe("not implemented")}}function oi(b,p){return Ii.apply(this,arguments)}function Ii(){return(Ii=(0,a.Z)(function*(b,p){return Nt(b,"POST","/v1/accounts:resetPassword",Vt(b,p))})).apply(this,arguments)}function Qi(b,p){return Fr.apply(this,arguments)}function Fr(){return(Fr=(0,a.Z)(function*(b,p){return Nt(b,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function wi(b,p){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,a.Z)(function*(b,p){return Nt(b,"POST","/v1/accounts:update",Vt(b,p))})).apply(this,arguments)}function fi(){return(fi=(0,a.Z)(function*(b,p){return Rn(b,"POST","/v1/accounts:signInWithPassword",Vt(b,p))})).apply(this,arguments)}function Li(b,p){return ee.apply(this,arguments)}function ee(){return(ee=(0,a.Z)(function*(b,p){return Nt(b,"POST","/v1/accounts:sendOobCode",Vt(b,p))})).apply(this,arguments)}function we(b,p){return Ze.apply(this,arguments)}function Ze(){return(Ze=(0,a.Z)(function*(b,p){return Li(b,p)})).apply(this,arguments)}function Xe(b,p){return Ct.apply(this,arguments)}function Ct(){return(Ct=(0,a.Z)(function*(b,p){return Li(b,p)})).apply(this,arguments)}function _e(b,p){return qe.apply(this,arguments)}function qe(){return(qe=(0,a.Z)(function*(b,p){return Li(b,p)})).apply(this,arguments)}function yt(b,p){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,a.Z)(function*(b,p){return Li(b,p)})).apply(this,arguments)}function un(){return(un=(0,a.Z)(function*(b,p){return Rn(b,"POST","/v1/accounts:signInWithEmailLink",Vt(b,p))})).apply(this,arguments)}function Yn(){return(Yn=(0,a.Z)(function*(b,p){return Rn(b,"POST","/v1/accounts:signInWithEmailLink",Vt(b,p))})).apply(this,arguments)}class vr extends Zi{constructor(p,_,A,K=null){super("password",A),this._email=p,this._password=_,this._tenantId=K}static _fromEmailAndPassword(p,_){return new vr(p,_,"password")}static _fromEmailAndCode(p,_,A=null){return new vr(p,_,"emailLink",A)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p;if((null==_?void 0:_.email)&&(null==_?void 0:_.password)){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(p){var _=this;return(0,a.Z)(function*(){switch(_.signInMethod){case"password":return function bi(b,p){return fi.apply(this,arguments)}(p,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function jt(b,p){return un.apply(this,arguments)}(p,{email:_._email,oobCode:_._password});default:vt(p,"internal-error")}})()}_linkToIdToken(p,_){var A=this;return(0,a.Z)(function*(){switch(A.signInMethod){case"password":return Qi(p,{idToken:_,returnSecureToken:!0,email:A._email,password:A._password});case"emailLink":return function An(b,p){return Yn.apply(this,arguments)}(p,{idToken:_,email:A._email,oobCode:A._password});default:vt(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function Lr(b,p){return nt.apply(this,arguments)}function nt(){return(nt=(0,a.Z)(function*(b,p){return Rn(b,"POST","/v1/accounts:signInWithIdp",Vt(b,p))})).apply(this,arguments)}class _t extends Zi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const _=new _t(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(_.idToken=p.idToken),p.accessToken&&(_.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(_.nonce=p.nonce),p.pendingToken&&(_.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(_.accessToken=p.oauthToken,_.secret=p.oauthTokenSecret):vt("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:A,signInMethod:K}=_,ue=(0,he._T)(_,["providerId","signInMethod"]);if(!A||!K)return null;const rt=new _t(A,K);return rt.idToken=ue.idToken||void 0,rt.accessToken=ue.accessToken||void 0,rt.secret=ue.secret,rt.nonce=ue.nonce,rt.pendingToken=ue.pendingToken||null,rt}_getIdTokenResponse(p){return Lr(p,this.buildRequest())}_linkToIdToken(p,_){const A=this.buildRequest();return A.idToken=_,Lr(p,A)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,Lr(p,_)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),p.postBody=(0,Y.xO)(_)}return p}}function Ut(b,p){return en.apply(this,arguments)}function en(){return(en=(0,a.Z)(function*(b,p){return Nt(b,"POST","/v1/accounts:sendVerificationCode",Vt(b,p))})).apply(this,arguments)}function qn(){return(qn=(0,a.Z)(function*(b,p){return Rn(b,"POST","/v1/accounts:signInWithPhoneNumber",Vt(b,p))})).apply(this,arguments)}function Br(){return(Br=(0,a.Z)(function*(b,p){const _=yield Rn(b,"POST","/v1/accounts:signInWithPhoneNumber",Vt(b,p));if(_.temporaryProof)throw or(b,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Rs={USER_NOT_FOUND:"user-not-found"};function Ir(){return(Ir=(0,a.Z)(function*(b,p){return Rn(b,"POST","/v1/accounts:signInWithPhoneNumber",Vt(b,Object.assign(Object.assign({},p),{operation:"REAUTH"})),Rs)})).apply(this,arguments)}class Xn extends Zi{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,_){return new Xn({verificationId:p,verificationCode:_})}static _fromTokenResponse(p,_){return new Xn({phoneNumber:p,temporaryProof:_})}_getIdTokenResponse(p){return function Sn(b,p){return qn.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,_){return function ui(b,p){return Br.apply(this,arguments)}(p,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Sr(b,p){return Ir.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:_,verificationId:A,verificationCode:K}=this.params;return p&&_?{temporaryProof:p,phoneNumber:_}:{sessionInfo:A,code:K}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:_,verificationCode:A,phoneNumber:K,temporaryProof:ue}=p;return A||_||K||ue?new Xn({verificationId:_,verificationCode:A,phoneNumber:K,temporaryProof:ue}):null}}class Os{constructor(p){var _,A,K,ue,rt,Bt;const hn=(0,Y.zd)((0,Y.pd)(p)),Un=null!==(_=hn.apiKey)&&void 0!==_?_:null,gr=null!==(A=hn.oobCode)&&void 0!==A?A:null,jn=function Ji(b){switch(b){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(K=hn.mode)&&void 0!==K?K:null);ye(Un&&gr&&jn,"argument-error"),this.apiKey=Un,this.operation=jn,this.code=gr,this.continueUrl=null!==(ue=hn.continueUrl)&&void 0!==ue?ue:null,this.languageCode=null!==(rt=hn.languageCode)&&void 0!==rt?rt:null,this.tenantId=null!==(Bt=hn.tenantId)&&void 0!==Bt?Bt:null}static parseLink(p){const _=function Zr(b){const p=(0,Y.zd)((0,Y.pd)(b)).link,_=p?(0,Y.zd)((0,Y.pd)(p)).deep_link_id:null,A=(0,Y.zd)((0,Y.pd)(b)).deep_link_id;return(A?(0,Y.zd)((0,Y.pd)(A)).link:null)||A||_||p||b}(p);try{return new Os(_)}catch(A){return null}}}let es=(()=>{class b{constructor(){this.providerId=b.PROVIDER_ID}static credential(_,A){return vr._fromEmailAndPassword(_,A)}static credentialWithLink(_,A){const K=Os.parseLink(A);return ye(K,"argument-error"),vr._fromEmailAndCode(_,K.code,K.tenantId)}}return b.PROVIDER_ID="password",b.EMAIL_PASSWORD_SIGN_IN_METHOD="password",b.EMAIL_LINK_SIGN_IN_METHOD="emailLink",b})();class Bs{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class Tr extends Bs{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class dr extends Tr{static credentialFromJSON(p){const _="string"==typeof p?JSON.parse(p):p;return ye("providerId"in _&&"signInMethod"in _,"argument-error"),_t._fromParams(_)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return ye(p.idToken||p.accessToken,"argument-error"),_t._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return dr.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return dr.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:_,oauthAccessToken:A,oauthTokenSecret:K,pendingToken:ue,nonce:rt,providerId:Bt}=p;if(!A&&!K&&!_&&!ue||!Bt)return null;try{return new dr(Bt)._credential({idToken:_,accessToken:A,nonce:rt,pendingToken:ue})}catch(hn){return null}}}let mi=(()=>{class b extends Tr{constructor(){super("facebook.com")}static credential(_){return _t._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return b.credential(_.oauthAccessToken)}catch(A){return null}}}return b.FACEBOOK_SIGN_IN_METHOD="facebook.com",b.PROVIDER_ID="facebook.com",b})(),Ys=(()=>{class b extends Tr{constructor(){super("google.com"),this.addScope("profile")}static credential(_,A){return _t._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:A})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:A,oauthAccessToken:K}=_;if(!A&&!K)return null;try{return b.credential(A,K)}catch(ue){return null}}}return b.GOOGLE_SIGN_IN_METHOD="google.com",b.PROVIDER_ID="google.com",b})(),$s=(()=>{class b extends Tr{constructor(){super("github.com")}static credential(_){return _t._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return b.credential(_.oauthAccessToken)}catch(A){return null}}}return b.GITHUB_SIGN_IN_METHOD="github.com",b.PROVIDER_ID="github.com",b})();class as extends Zi{constructor(p,_){super(p,p),this.pendingToken=_}_getIdTokenResponse(p){return Lr(p,this.buildRequest())}_linkToIdToken(p,_){const A=this.buildRequest();return A.idToken=_,Lr(p,A)}_getReauthenticationResolver(p){const _=this.buildRequest();return _.autoCreate=!1,Lr(p,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const _="string"==typeof p?JSON.parse(p):p,{providerId:A,signInMethod:K,pendingToken:ue}=_;return A&&K&&ue&&A===K?new as(A,ue):null}static _create(p,_){return new as(p,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Es extends Bs{constructor(p){ye(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return Es.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return Es.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const _=as.fromJSON(p);return ye(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:_,providerId:A}=p;if(!_||!A)return null;try{return as._create(A,_)}catch(K){return null}}}let gs=(()=>{class b extends Tr{constructor(){super("twitter.com")}static credential(_,A){return _t._fromParams({providerId:b.PROVIDER_ID,signInMethod:b.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:A})}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:A,oauthTokenSecret:K}=_;if(!A||!K)return null;try{return b.credential(A,K)}catch(ue){return null}}}return b.TWITTER_SIGN_IN_METHOD="twitter.com",b.PROVIDER_ID="twitter.com",b})();function Ci(b,p){return No.apply(this,arguments)}function No(){return(No=(0,a.Z)(function*(b,p){return Rn(b,"POST","/v1/accounts:signUp",Vt(b,p))})).apply(this,arguments)}class Hi{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,_,A,K=!1){return(0,a.Z)(function*(){const ue=yield On._fromIdTokenResponse(p,A,K),rt=ts(A);return new Hi({user:ue,providerId:rt,_tokenResponse:A,operationType:_})})()}static _forOperation(p,_,A){return(0,a.Z)(function*(){yield p._updateTokensIfNecessary(A,!0);const K=ts(A);return new Hi({user:p,providerId:K,_tokenResponse:A,operationType:_})})()}}function ts(b){return b.providerId?b.providerId:"phoneNumber"in b?"phone":null}function ai(){return(ai=(0,a.Z)(function*(b){var p;const _=kr(b);if(yield _._initializationPromise,null!==(p=_.currentUser)&&void 0!==p&&p.isAnonymous)return new Hi({user:_.currentUser,providerId:null,operationType:"signIn"});const A=yield Ci(_,{returnSecureToken:!0}),K=yield Hi._fromIdTokenResponse(_,"signIn",A,!0);return yield _._updateCurrentUser(K.user),K})).apply(this,arguments)}class qs extends Y.ZR{constructor(p,_,A,K){var ue;super(_.code,_.message),this.operationType=A,this.user=K,Object.setPrototypeOf(this,qs.prototype),this.customData={appName:p.name,tenantId:null!==(ue=p.tenantId)&&void 0!==ue?ue:void 0,_serverResponse:_.customData._serverResponse,operationType:A}}static _fromErrorAndOperation(p,_,A,K){return new qs(p,_,A,K)}}function Us(b,p,_,A){return("reauthenticate"===p?_._getReauthenticationResolver(b):_._getIdTokenResponse(b)).catch(ue=>{throw"auth/multi-factor-auth-required"===ue.code?qs._fromErrorAndOperation(b,ue,p,A):ue})}function wr(b){return new Set(b.map(({providerId:p})=>p).filter(p=>!!p))}function nr(){return(nr=(0,a.Z)(function*(b,p){const _=(0,Y.m9)(b);yield Or(!0,_,p);const{providerUserInfo:A}=yield rr(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[p]}),K=wr(A||[]);return _.providerData=_.providerData.filter(ue=>K.has(ue.providerId)),K.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function ys(b,p){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,a.Z)(function*(b,p,_=!1){const A=yield Bn(b,p._linkToIdToken(b.auth,yield b.getIdToken()),_);return Hi._forOperation(b,"link",A)})).apply(this,arguments)}function Or(b,p,_){return ls.apply(this,arguments)}function ls(){return(ls=(0,a.Z)(function*(b,p,_){yield Ln(p);const K=!1===b?"provider-already-linked":"no-such-provider";ye(wr(p.providerData).has(_)===b,p.auth,K)})).apply(this,arguments)}function Ts(b,p){return us.apply(this,arguments)}function us(){return(us=(0,a.Z)(function*(b,p,_=!1){var A;const{auth:K}=b,ue="reauthenticate";try{const rt=yield Bn(b,Us(K,ue,p,b),_);ye(rt.idToken,K,"internal-error");const Bt=Tt(rt.idToken);ye(Bt,K,"internal-error");const{sub:hn}=Bt;return ye(b.uid===hn,K,"user-mismatch"),Hi._forOperation(b,ue,rt)}catch(rt){throw"auth/user-not-found"===(null===(A=rt)||void 0===A?void 0:A.code)&&vt(K,"user-mismatch"),rt}})).apply(this,arguments)}function Is(b,p){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,a.Z)(function*(b,p,_=!1){const A="signIn",K=yield Us(b,A,p),ue=yield Hi._fromIdTokenResponse(b,A,K);return _||(yield b._updateCurrentUser(ue.user)),ue})).apply(this,arguments)}function Vr(b,p){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,a.Z)(function*(b,p){return Is(kr(b),p)})).apply(this,arguments)}function to(b,p){return qo.apply(this,arguments)}function qo(){return(qo=(0,a.Z)(function*(b,p){const _=(0,Y.m9)(b);return yield Or(!1,_,p.providerId),ys(_,p)})).apply(this,arguments)}function Ks(b,p){return Po.apply(this,arguments)}function Po(){return(Po=(0,a.Z)(function*(b,p){return Ts((0,Y.m9)(b),p)})).apply(this,arguments)}function ya(b,p){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,a.Z)(function*(b,p){return Rn(b,"POST","/v1/accounts:signInWithCustomToken",Vt(b,p))})).apply(this,arguments)}function wo(){return(wo=(0,a.Z)(function*(b,p){const _=kr(b),A=yield ya(_,{token:p,returnSecureToken:!0}),K=yield Hi._fromIdTokenResponse(_,"signIn",A);return yield _._updateCurrentUser(K.user),K})).apply(this,arguments)}class qt{constructor(p,_){this.factorId=p,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(p,_){return"phoneInfo"in _?br._fromServerResponse(p,_):vt(p,"internal-error")}}class br extends qt{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,_){return new br(_)}}function Ko(b,p,_){var A;ye((null===(A=_.url)||void 0===A?void 0:A.length)>0,b,"invalid-continue-uri"),ye(void 0===_.dynamicLinkDomain||_.dynamicLinkDomain.length>0,b,"invalid-dynamic-link-domain"),p.continueUrl=_.url,p.dynamicLinkDomain=_.dynamicLinkDomain,p.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(ye(_.iOS.bundleId.length>0,b,"missing-ios-bundle-id"),p.iOSBundleId=_.iOS.bundleId),_.android&&(ye(_.android.packageName.length>0,b,"missing-android-pkg-name"),p.androidInstallApp=_.android.installApp,p.androidMinimumVersionCode=_.android.minimumVersion,p.androidPackageName=_.android.packageName)}function Ti(){return(Ti=(0,a.Z)(function*(b,p,_){const A=(0,Y.m9)(b),K={requestType:"PASSWORD_RESET",email:p};_&&Ko(A,K,_),yield Xe(A,K)})).apply(this,arguments)}function Gi(){return(Gi=(0,a.Z)(function*(b,p,_){yield oi((0,Y.m9)(b),{oobCode:p,newPassword:_})})).apply(this,arguments)}function As(){return(As=(0,a.Z)(function*(b,p){yield wi((0,Y.m9)(b),{oobCode:p})})).apply(this,arguments)}function G(b,p){return B.apply(this,arguments)}function B(){return(B=(0,a.Z)(function*(b,p){const _=(0,Y.m9)(b),A=yield oi(_,{oobCode:p}),K=A.requestType;switch(ye(K,_,"internal-error"),K){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ye(A.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ye(A.mfaInfo,_,"internal-error");default:ye(A.email,_,"internal-error")}let ue=null;return A.mfaInfo&&(ue=qt._fromServerResponse(kr(_),A.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===A.requestType?A.newEmail:A.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===A.requestType?A.email:A.newEmail)||null,multiFactorInfo:ue},operation:K}})).apply(this,arguments)}function g(){return(g=(0,a.Z)(function*(b,p){const{data:_}=yield G((0,Y.m9)(b),p);return _.email})).apply(this,arguments)}function E(){return(E=(0,a.Z)(function*(b,p,_){const A=kr(b),K=yield Ci(A,{returnSecureToken:!0,email:p,password:_}),ue=yield Hi._fromIdTokenResponse(A,"signIn",K);return yield A._updateCurrentUser(ue.user),ue})).apply(this,arguments)}function ut(){return(ut=(0,a.Z)(function*(b,p,_){const A=(0,Y.m9)(b),K={requestType:"EMAIL_SIGNIN",email:p};ye(_.handleCodeInApp,A,"argument-error"),_&&Ko(A,K,_),yield _e(A,K)})).apply(this,arguments)}function Zn(){return(Zn=(0,a.Z)(function*(b,p,_){const A=(0,Y.m9)(b),K=es.credentialWithLink(p,_||J());return ye(K._tenantId===(A.tenantId||null),A,"tenant-id-mismatch"),Vr(A,K)})).apply(this,arguments)}function ni(b,p){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,a.Z)(function*(b,p){return Nt(b,"POST","/v1/accounts:createAuthUri",Vt(b,p))})).apply(this,arguments)}function ns(){return(ns=(0,a.Z)(function*(b,p){const A={identifier:p,continueUri:Gt()?J():"http://localhost"},{signinMethods:K}=yield ni((0,Y.m9)(b),A);return K||[]})).apply(this,arguments)}function Cs(){return(Cs=(0,a.Z)(function*(b,p){const _=(0,Y.m9)(b),K={requestType:"VERIFY_EMAIL",idToken:yield b.getIdToken()};p&&Ko(_.auth,K,p);const{email:ue}=yield we(_.auth,K);ue!==b.email&&(yield b.reload())})).apply(this,arguments)}function ks(){return(ks=(0,a.Z)(function*(b,p,_){const A=(0,Y.m9)(b),ue={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield b.getIdToken(),newEmail:p};_&&Ko(A.auth,ue,_);const{email:rt}=yield yt(A.auth,ue);rt!==b.email&&(yield b.reload())})).apply(this,arguments)}function Co(b,p){return la.apply(this,arguments)}function la(){return(la=(0,a.Z)(function*(b,p){return Nt(b,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function ua(){return(ua=(0,a.Z)(function*(b,{displayName:p,photoURL:_}){if(void 0===p&&void 0===_)return;const A=(0,Y.m9)(b),ue={idToken:yield A.getIdToken(),displayName:p,photoUrl:_,returnSecureToken:!0},rt=yield Bn(A,Co(A.auth,ue));A.displayName=rt.displayName||null,A.photoURL=rt.photoUrl||null;const Bt=A.providerData.find(({providerId:hn})=>"password"===hn);Bt&&(Bt.displayName=A.displayName,Bt.photoURL=A.photoURL),yield A._updateTokensIfNecessary(rt)})).apply(this,arguments)}function $(b,p,_){return re.apply(this,arguments)}function re(){return(re=(0,a.Z)(function*(b,p,_){const{auth:A}=b,ue={idToken:yield b.getIdToken(),returnSecureToken:!0};p&&(ue.email=p),_&&(ue.password=_);const rt=yield Bn(b,Qi(A,ue));yield b._updateTokensIfNecessary(rt,!0)})).apply(this,arguments)}class St{constructor(p,_,A={}){this.isNewUser=p,this.providerId=_,this.profile=A}}class kt extends St{constructor(p,_,A,K){super(p,_,A),this.username=K}}class xn extends St{constructor(p,_){super(p,"facebook.com",_)}}class qr extends kt{constructor(p,_){super(p,"github.com",_,"string"==typeof(null==_?void 0:_.login)?null==_?void 0:_.login:null)}}class Gr extends St{constructor(p,_){super(p,"google.com",_)}}class Wr extends kt{constructor(p,_,A){super(p,"twitter.com",_,A)}}function $r(b){const{user:p,_tokenResponse:_}=b;return p.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function ke(b){var p,_;if(!b)return null;const{providerId:A}=b,K=b.rawUserInfo?JSON.parse(b.rawUserInfo):{},ue=b.isNewUser||"identitytoolkit#SignupNewUserResponse"===b.kind;if(!A&&(null==b?void 0:b.idToken)){const rt=null===(_=null===(p=Tt(b.idToken))||void 0===p?void 0:p.firebase)||void 0===_?void 0:_.sign_in_provider;if(rt)return new St(ue,"anonymous"!==rt&&"custom"!==rt?rt:null)}if(!A)return null;switch(A){case"facebook.com":return new xn(ue,K);case"github.com":return new qr(ue,K);case"google.com":return new Gr(ue,K);case"twitter.com":return new Wr(ue,K,b.screenName||null);case"custom":case"anonymous":return new St(ue,null);default:return new St(ue,A,K)}}(_)}class Bi{constructor(p,_,A){this.type=p,this.credential=_,this.auth=A}static _fromIdtoken(p,_){return new Bi("enroll",p,_)}static _fromMfaPendingCredential(p){return new Bi("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var _,A;if(null!=p&&p.multiFactorSession){if(null!==(_=p.multiFactorSession)&&void 0!==_&&_.pendingCredential)return Bi._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(A=p.multiFactorSession)&&void 0!==A&&A.idToken)return Bi._fromIdtoken(p.multiFactorSession.idToken)}return null}}class xa{constructor(p,_,A){this.session=p,this.hints=_,this.signInResolver=A}static _fromError(p,_){const A=kr(p),K=_.customData._serverResponse,ue=(K.mfaInfo||[]).map(Bt=>qt._fromServerResponse(A,Bt));ye(K.mfaPendingCredential,A,"internal-error");const rt=Bi._fromMfaPendingCredential(K.mfaPendingCredential);return new xa(rt,ue,function(){var Bt=(0,a.Z)(function*(hn){const Un=yield hn._process(A,rt);delete K.mfaInfo,delete K.mfaPendingCredential;const gr=Object.assign(Object.assign({},K),{idToken:Un.idToken,refreshToken:Un.refreshToken});switch(_.operationType){case"signIn":const jn=yield Hi._fromIdTokenResponse(A,_.operationType,gr);return yield A._updateCurrentUser(jn.user),jn;case"reauthenticate":return ye(_.user,A,"internal-error"),Hi._forOperation(_.user,_.operationType,gr);default:vt(A,"internal-error")}});return function(hn){return Bt.apply(this,arguments)}}())}resolveSignIn(p){var _=this;return(0,a.Z)(function*(){return _.signInResolver(p)})()}}function Wi(b,p){return Nt(b,"POST","/v2/accounts/mfaEnrollment:start",Vt(b,p))}class Xa{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(A=>qt._fromServerResponse(p.auth,A)))})}static _fromUser(p){return new Xa(p)}getSession(){var p=this;return(0,a.Z)(function*(){return Bi._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,_){var A=this;return(0,a.Z)(function*(){const K=p,ue=yield A.getSession(),rt=yield Bn(A.user,K._process(A.user.auth,ue,_));return yield A.user._updateTokensIfNecessary(rt),A.user.reload()})()}unenroll(p){var _=this;return(0,a.Z)(function*(){var A;const K="string"==typeof p?p:p.uid,ue=yield _.user.getIdToken(),rt=yield Bn(_.user,function Gl(b,p){return Nt(b,"POST","/v2/accounts/mfaEnrollment:withdraw",Vt(b,p))}(_.user.auth,{idToken:ue,mfaEnrollmentId:K}));_.enrolledFactors=_.enrolledFactors.filter(({uid:Bt})=>Bt!==K),yield _.user._updateTokensIfNecessary(rt);try{yield _.user.reload()}catch(Bt){if("auth/user-token-expired"!==(null===(A=Bt)||void 0===A?void 0:A.code))throw Bt}})()}}const Ha=new WeakMap,fo="__sak";class Zo{constructor(p,_){this.storageRetriever=p,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(fo,"1"),this.storage.removeItem(fo),Promise.resolve(!0)):Promise.resolve(!1)}catch(p){return Promise.resolve(!1)}}_set(p,_){return this.storage.setItem(p,JSON.stringify(_)),Promise.resolve()}_get(p){const _=this.storage.getItem(p);return Promise.resolve(_?JSON.parse(_):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const _a=(()=>{class b extends Zo{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,A)=>this.onStorageEvent(_,A),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function po(){const b=(0,Y.z$)();return _n(b)||xe(b)}()&&function Zt(){try{return!(!window||window===window.top)}catch(b){return!1}}(),this.fallbackToPolling=pn(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const A of Object.keys(this.listeners)){const K=this.storage.getItem(A),ue=this.localCache[A];K!==ue&&_(A,ue,K)}}onStorageEvent(_,A=!1){if(!_.key)return void this.forAllChangedKeys((Bt,hn,Un)=>{this.notifyListeners(Bt,Un)});const K=_.key;if(A?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Bt=this.storage.getItem(K);if(_.newValue!==Bt)null!==_.newValue?this.storage.setItem(K,_.newValue):this.storage.removeItem(K);else if(this.localCache[K]===_.newValue&&!A)return}const ue=()=>{const Bt=this.storage.getItem(K);!A&&this.localCache[K]===Bt||this.notifyListeners(K,Bt)},rt=this.storage.getItem(K);!function fn(){return(0,Y.w1)()&&10===document.documentMode}()||rt===_.newValue||_.newValue===_.oldValue?ue():setTimeout(ue,10)}notifyListeners(_,A){this.localCache[_]=A;const K=this.listeners[_];if(K)for(const ue of Array.from(K))ue(A&&JSON.parse(A))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,A,K)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:A,newValue:K}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,A){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(A)}_removeListener(_,A){this.listeners[_]&&(this.listeners[_].delete(A),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,A){var K=()=>super._set,ue=this;return(0,a.Z)(function*(){yield K().call(ue,_,A),ue.localCache[_]=JSON.stringify(A)})()}_get(_){var A=()=>super._get,K=this;return(0,a.Z)(function*(){const ue=yield A().call(K,_);return K.localCache[_]=JSON.stringify(ue),ue})()}_remove(_){var A=()=>super._remove,K=this;return(0,a.Z)(function*(){yield A().call(K,_),delete K.localCache[_]})()}}return b.type="LOCAL",b})(),io=(()=>{class b extends Zo{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,A){}_removeListener(_,A){}}return b.type="SESSION",b})();let rn=(()=>{class b{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const A=this.receivers.find(ue=>ue.isListeningto(_));if(A)return A;const K=new b(_);return this.receivers.push(K),K}isListeningto(_){return this.eventTarget===_}handleEvent(_){var A=this;return(0,a.Z)(function*(){const K=_,{eventId:ue,eventType:rt,data:Bt}=K.data,hn=A.handlersMap[rt];if(null==hn||!hn.size)return;K.ports[0].postMessage({status:"ack",eventId:ue,eventType:rt});const Un=Array.from(hn).map(function(){var jn=(0,a.Z)(function*(uo){return uo(K.origin,Bt)});return function(uo){return jn.apply(this,arguments)}}()),gr=yield function ca(b){return Promise.all(b.map(function(){var p=(0,a.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(A){return{fulfilled:!1,reason:A}}});return function(_){return p.apply(this,arguments)}}()))}(Un);K.ports[0].postMessage({status:"done",eventId:ue,eventType:rt,response:gr})})()}_subscribe(_,A){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(A)}_unsubscribe(_,A){this.handlersMap[_]&&A&&this.handlersMap[_].delete(A),(!A||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return b.receivers=[],b})();function vi(b="",p=10){let _="";for(let A=0;A<p;A++)_+=Math.floor(10*Math.random());return b+_}class js{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,_,A=50){var K=this;return(0,a.Z)(function*(){const ue="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!ue)throw new Error("connection_unavailable");let rt,Bt;return new Promise((hn,Un)=>{const gr=vi("",20);ue.port1.start();const jn=setTimeout(()=>{Un(new Error("unsupported_event"))},A);Bt={messageChannel:ue,onMessage(uo){const ma=uo;if(ma.data.eventId===gr)switch(ma.data.status){case"ack":clearTimeout(jn),rt=setTimeout(()=>{Un(new Error("timeout"))},3e3);break;case"done":clearTimeout(rt),hn(ma.data.response);break;default:clearTimeout(jn),clearTimeout(rt),Un(new Error("invalid_response"))}}},K.handlers.add(Bt),ue.port1.addEventListener("message",Bt.onMessage),K.target.postMessage({eventType:p,eventId:gr,data:_},[ue.port2])}).finally(()=>{Bt&&K.removeMessageHandler(Bt)})})()}}function zi(){return window}function En(){return void 0!==zi().WorkerGlobalScope&&"function"==typeof zi().importScripts}function cn(){return(cn=(0,a.Z)(function*(){if(null==navigator||!navigator.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch(b){return null}})).apply(this,arguments)}const Ni="firebaseLocalStorageDb",Ea="firebaseLocalStorage",Fo="fbase_key";class Qo{constructor(p){this.request=p}toPromise(){return new Promise((p,_)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function Xo(b,p){return b.transaction([Ea],p?"readwrite":"readonly").objectStore(Ea)}function Jo(){const b=indexedDB.open(Ni,1);return new Promise((p,_)=>{b.addEventListener("error",()=>{_(b.error)}),b.addEventListener("upgradeneeded",()=>{const A=b.result;try{A.createObjectStore(Ea,{keyPath:Fo})}catch(K){_(K)}}),b.addEventListener("success",(0,a.Z)(function*(){const A=b.result;A.objectStoreNames.contains(Ea)?p(A):(A.close(),yield function zl(){const b=indexedDB.deleteDatabase(Ni);return new Qo(b).toPromise()}(),p(yield Jo()))}))})}function Oa(b,p,_){return hu.apply(this,arguments)}function hu(){return(hu=(0,a.Z)(function*(b,p,_){const A=Xo(b,!0).put({[Fo]:p,value:_});return new Qo(A).toPromise()})).apply(this,arguments)}function da(){return(da=(0,a.Z)(function*(b,p){const _=Xo(b,!1).get(p),A=yield new Qo(_).toPromise();return void 0===A?null:A.value})).apply(this,arguments)}function ur(b,p){const _=Xo(b,!0).delete(p);return new Qo(_).toPromise()}const er=(()=>{class b{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,a.Z)(function*(){return _.db||(_.db=yield Jo()),_.db})()}_withRetries(_){var A=this;return(0,a.Z)(function*(){let K=0;for(;;)try{const ue=yield A._openDb();return yield _(ue)}catch(ue){if(K++>3)throw ue;A.db&&(A.db.close(),A.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,a.Z)(function*(){return En()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,a.Z)(function*(){_.receiver=rn._getInstance(function Qt(){return En()?self:null}()),_.receiver._subscribe("keyChanged",function(){var A=(0,a.Z)(function*(K,ue){return{keyProcessed:(yield _._poll()).includes(ue.key)}});return function(K,ue){return A.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var A=(0,a.Z)(function*(K,ue){return["keyChanged"]});return function(K,ue){return A.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,a.Z)(function*(){var A,K;if(_.activeServiceWorker=yield function Hs(){return cn.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new js(_.activeServiceWorker);const ue=yield _.sender._send("ping",{},800);!ue||(null===(A=ue[0])||void 0===A?void 0:A.fulfilled)&&(null===(K=ue[0])||void 0===K?void 0:K.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var A=this;return(0,a.Z)(function*(){if(A.sender&&A.activeServiceWorker&&function Pt(){var b;return(null===(b=null==navigator?void 0:navigator.serviceWorker)||void 0===b?void 0:b.controller)||null}()===A.activeServiceWorker)try{yield A.sender._send("keyChanged",{key:_},A.serviceWorkerReceiverAvailable?800:50)}catch(K){}})()}_isAvailable(){return(0,a.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Jo();return yield Oa(_,fo,"1"),yield ur(_,fo),!0}catch(_){}return!1})()}_withPendingWrite(_){var A=this;return(0,a.Z)(function*(){A.pendingWrites++;try{yield _()}finally{A.pendingWrites--}})()}_set(_,A){var K=this;return(0,a.Z)(function*(){return K._withPendingWrite((0,a.Z)(function*(){return yield K._withRetries(ue=>Oa(ue,_,A)),K.localCache[_]=A,K.notifyServiceWorker(_)}))})()}_get(_){var A=this;return(0,a.Z)(function*(){const K=yield A._withRetries(ue=>function Cl(b,p){return da.apply(this,arguments)}(ue,_));return A.localCache[_]=K,K})()}_remove(_){var A=this;return(0,a.Z)(function*(){return A._withPendingWrite((0,a.Z)(function*(){return yield A._withRetries(K=>ur(K,_)),delete A.localCache[_],A.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,a.Z)(function*(){const A=yield _._withRetries(rt=>{const Bt=Xo(rt,!1).getAll();return new Qo(Bt).toPromise()});if(!A)return[];if(0!==_.pendingWrites)return[];const K=[],ue=new Set;for(const{fbase_key:rt,value:Bt}of A)ue.add(rt),JSON.stringify(_.localCache[rt])!==JSON.stringify(Bt)&&(_.notifyListeners(rt,Bt),K.push(rt));for(const rt of Object.keys(_.localCache))_.localCache[rt]&&!ue.has(rt)&&(_.notifyListeners(rt,null),K.push(rt));return K})()}notifyListeners(_,A){this.localCache[_]=A;const K=this.listeners[_];if(K)for(const ue of Array.from(K))ue(A)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,a.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,A){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(A)}_removeListener(_,A){this.listeners[_]&&(this.listeners[_].delete(A),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return b.type="LOCAL",b})();function ea(b,p){return Nt(b,"POST","/v2/accounts/mfaSignIn:start",Vt(b,p))}function _i(){return(_i=(0,a.Z)(function*(b){return(yield Nt(b,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function wa(b){return new Promise((p,_)=>{const A=document.createElement("script");A.setAttribute("src",b),A.onload=p,A.onerror=K=>{const ue=mt("internal-error");ue.customData=K,_(ue)},A.type="text/javascript",A.charset="UTF-8",function dn(){var b,p;return null!==(p=null===(b=document.getElementsByTagName("head"))||void 0===b?void 0:b[0])&&void 0!==p?p:document}().appendChild(A)})}function ta(b){return`__${b}${Math.floor(1e6*Math.random())}`}const So=1e12;class Di{constructor(p){this.auth=p,this.counter=So,this._widgets=new Map}render(p,_){const A=this.counter;return this._widgets.set(A,new Na(p,this.auth.name,_||{})),this.counter++,A}reset(p){var _;const A=p||So;null===(_=this._widgets.get(A))||void 0===_||_.delete(),this._widgets.delete(A)}getResponse(p){var _;return(null===(_=this._widgets.get(p||So))||void 0===_?void 0:_.getResponse())||""}execute(p){var _=this;return(0,a.Z)(function*(){var A;return null===(A=_._widgets.get(p||So))||void 0===A||A.execute(),""})()}}class Na{constructor(p,_,A){this.params=A,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const K="string"==typeof p?document.getElementById(p):p;ye(K,"argument-error",{appName:_}),this.container=K,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function fu(b){const p=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let A=0;A<b;A++)p.push(_.charAt(Math.floor(Math.random()*_.length)));return p.join("")}(50);const{callback:p,"expired-callback":_}=this.params;if(p)try{p(this.responseToken)}catch(A){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch(A){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Yl=ta("rcb"),To=new Ue(3e4,6e4);class ql{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=zi().grecaptcha)||void 0===p||!p.render)}load(p,_=""){return ye(function gu(b){return b.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(b)}(_),p,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(zi().grecaptcha):new Promise((A,K)=>{const ue=zi().setTimeout(()=>{K(mt(p,"network-request-failed"))},To.get());zi()[Yl]=()=>{zi().clearTimeout(ue),delete zi()[Yl];const Bt=zi().grecaptcha;if(!Bt)return void K(mt(p,"internal-error"));const hn=Bt.render;Bt.render=(Un,gr)=>{const jn=hn(Un,gr);return this.counter++,jn},this.hostLanguage=_,A(Bt)},wa(`https://www.google.com/recaptcha/api.js??${(0,Y.xO)({onload:Yl,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(ue),K(mt(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var _;return!(null===(_=zi().grecaptcha)||void 0===_||!_.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ao{load(p){return(0,a.Z)(function*(){return new Di(p)})()}clearedOneInstance(){}}const Kl="recaptcha",Rt={theme:"light",type:"image"};class Ds{constructor(p,_=Object.assign({},Rt),A){this.parameters=_,this.type=Kl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=kr(A),this.isInvisible="invisible"===this.parameters.size,ye("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const K="string"==typeof p?document.getElementById(p):p;ye(K,this.auth,"argument-error"),this.container=K,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ao:new ql,this.validateStartingState()}verify(){var p=this;return(0,a.Z)(function*(){p.assertNotDestroyed();const _=yield p.render(),A=p.getAssertedRecaptcha();return A.getResponse(_)||new Promise(ue=>{const rt=Bt=>{!Bt||(p.tokenChangeListeners.delete(rt),ue(Bt))};p.tokenChangeListeners.add(rt),p.isInvisible&&A.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){ye(!this.parameters.sitekey,this.auth,"argument-error"),ye(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ye("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return _=>{if(this.tokenChangeListeners.forEach(A=>A(_)),"function"==typeof p)p(_);else if("string"==typeof p){const A=zi()[p];"function"==typeof A&&A(_)}}}assertNotDestroyed(){ye(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,a.Z)(function*(){if(yield p.init(),!p.widgetId){let _=p.container;if(!p.isInvisible){const A=document.createElement("div");_.appendChild(A),_=A}p.widgetId=p.getAssertedRecaptcha().render(_,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,a.Z)(function*(){ye(Gt()&&!En(),p.auth,"internal-error"),yield function so(){let b=null;return new Promise(p=>{"complete"!==document.readyState?(b=()=>p(),window.addEventListener("load",b)):p()}).catch(p=>{throw b&&window.removeEventListener("load",b),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const _=yield function go(b){return _i.apply(this,arguments)}(p.auth);ye(_,p.auth,"internal-error"),p.parameters.sitekey=_})()}getAssertedRecaptcha(){return ye(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class mo{constructor(p,_){this.verificationId=p,this.onConfirmation=_}confirm(p){const _=Xn._fromVerification(this.verificationId,p);return this.onConfirmation(_)}}function na(){return(na=(0,a.Z)(function*(b,p,_){const A=kr(b),K=yield ka(A,p,(0,Y.m9)(_));return new mo(K,ue=>Vr(A,ue))})).apply(this,arguments)}function xs(){return(xs=(0,a.Z)(function*(b,p,_){const A=(0,Y.m9)(b);yield Or(!1,A,"phone");const K=yield ka(A.auth,p,(0,Y.m9)(_));return new mo(K,ue=>to(A,ue))})).apply(this,arguments)}function Pa(){return(Pa=(0,a.Z)(function*(b,p,_){const A=(0,Y.m9)(b),K=yield ka(A.auth,p,(0,Y.m9)(_));return new mo(K,ue=>Ks(A,ue))})).apply(this,arguments)}function ka(b,p,_){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,a.Z)(function*(b,p,_){var A;const K=yield _.verify();try{let ue;if(ye("string"==typeof K,b,"argument-error"),ye(_.type===Kl,b,"argument-error"),ue="string"==typeof p?{phoneNumber:p}:p,"session"in ue){const rt=ue.session;if("phoneNumber"in ue)return ye("enroll"===rt.type,b,"internal-error"),(yield Wi(b,{idToken:rt.credential,phoneEnrollmentInfo:{phoneNumber:ue.phoneNumber,recaptchaToken:K}})).phoneSessionInfo.sessionInfo;{ye("signin"===rt.type,b,"internal-error");const Bt=(null===(A=ue.multiFactorHint)||void 0===A?void 0:A.uid)||ue.multiFactorUid;return ye(Bt,b,"missing-multi-factor-info"),(yield ea(b,{mfaPendingCredential:rt.credential,mfaEnrollmentId:Bt,phoneSignInInfo:{recaptchaToken:K}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:rt}=yield Ut(b,{phoneNumber:ue.phoneNumber,recaptchaToken:K});return rt}}finally{_._reset()}})).apply(this,arguments)}function Ja(){return(Ja=(0,a.Z)(function*(b,p){yield ys((0,Y.m9)(b),p)})).apply(this,arguments)}let ra=(()=>{class b{constructor(_){this.providerId=b.PROVIDER_ID,this.auth=kr(_)}verifyPhoneNumber(_,A){return ka(this.auth,_,(0,Y.m9)(A))}static credential(_,A){return Xn._fromVerification(_,A)}static credentialFromResult(_){return b.credentialFromTaggedObject(_)}static credentialFromError(_){return b.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:A,temporaryProof:K}=_;return A&&K?Xn._fromTokenResponse(A,K):null}}return b.PROVIDER_ID="phone",b.PHONE_SIGN_IN_METHOD="phone",b})();function Lo(b,p){return p?Ce(p):(ye(b._popupRedirectResolver,b,"argument-error"),b._popupRedirectResolver)}class Pi extends Zi{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return Lr(p,this._buildIdpRequest())}_linkToIdToken(p,_){return Lr(p,this._buildIdpRequest(_))}_getReauthenticationResolver(p){return Lr(p,this._buildIdpRequest())}_buildIdpRequest(p){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(_.idToken=p),_}}function Ms(b){return Is(b.auth,new Pi(b),b.bypassAuthState)}function ds(b){const{auth:p,user:_}=b;return ye(_,p,"internal-error"),Ts(_,new Pi(b),b.bypassAuthState)}function Xr(b){return mu.apply(this,arguments)}function mu(){return(mu=(0,a.Z)(function*(b){const{auth:p,user:_}=b;return ye(_,p,"internal-error"),ys(_,new Pi(b),b.bypassAuthState)})).apply(this,arguments)}class Fa{constructor(p,_,A,K,ue=!1){this.auth=p,this.resolver=A,this.user=K,this.bypassAuthState=ue,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var p=this;return new Promise(function(){var _=(0,a.Z)(function*(A,K){p.pendingPromise={resolve:A,reject:K};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(ue){p.reject(ue)}});return function(A,K){return _.apply(this,arguments)}}())}onAuthEvent(p){var _=this;return(0,a.Z)(function*(){const{urlResponse:A,sessionId:K,postBody:ue,tenantId:rt,error:Bt,type:hn}=p;if(Bt)return void _.reject(Bt);const Un={auth:_.auth,requestUri:A,sessionId:K,tenantId:rt||void 0,postBody:ue||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(hn)(Un))}catch(gr){_.reject(gr)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return Ms;case"linkViaPopup":case"linkViaRedirect":return Xr;case"reauthViaPopup":case"reauthViaRedirect":return ds;default:vt(this.auth,"internal-error")}}resolve(p){ve(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){ve(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ao=new Ue(2e3,1e4);function _s(){return(_s=(0,a.Z)(function*(b,p,_){const A=kr(b);Be(b,p,Bs);const K=Lo(A,_);return new S(A,"signInViaPopup",p,K).executeNotNull()})).apply(this,arguments)}function Vo(){return(Vo=(0,a.Z)(function*(b,p,_){const A=(0,Y.m9)(b);Be(A.auth,p,Bs);const K=Lo(A.auth,_);return new S(A.auth,"reauthViaPopup",p,K,A).executeNotNull()})).apply(this,arguments)}function ia(){return(ia=(0,a.Z)(function*(b,p,_){const A=(0,Y.m9)(b);Be(A.auth,p,Bs);const K=Lo(A.auth,_);return new S(A.auth,"linkViaPopup",p,K,A).executeNotNull()})).apply(this,arguments)}let S=(()=>{class b extends Fa{constructor(_,A,K,ue,rt){super(_,A,ue,rt),this.provider=K,this.authWindow=null,this.pollId=null,b.currentPopupAction&&b.currentPopupAction.cancel(),b.currentPopupAction=this}executeNotNull(){var _=this;return(0,a.Z)(function*(){const A=yield _.execute();return ye(A,_.auth,"internal-error"),A})()}onExecution(){var _=this;return(0,a.Z)(function*(){ve(1===_.filter.length,"Popup operations only handle one event");const A=vi();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],A),_.authWindow.associatedEvent=A,_.resolver._originValidation(_.auth).catch(K=>{_.reject(K)}),_.resolver._isIframeWebStorageSupported(_.auth,K=>{K||_.reject(mt(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(mt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,b.currentPopupAction=null}pollUserCancellation(){const _=()=>{var A,K;this.pollId=null!==(K=null===(A=this.authWindow)||void 0===A?void 0:A.window)&&void 0!==K&&K.closed?window.setTimeout(()=>{this.pollId=null,this.reject(mt(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,ao.get())};_()}}return b.currentPopupAction=null,b})();const w=new Map;class N extends Fa{constructor(p,_,A=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,A),this.eventId=null}execute(){var p=()=>super.execute,_=this;return(0,a.Z)(function*(){let A=w.get(_.auth._key());if(!A){try{const ue=(yield function j(b,p){return te.apply(this,arguments)}(_.resolver,_.auth))?yield p().call(_):null;A=()=>Promise.resolve(ue)}catch(K){A=()=>Promise.reject(K)}w.set(_.auth._key(),A)}return _.bypassAuthState||w.set(_.auth._key(),()=>Promise.resolve(null)),A()})()}onAuthEvent(p){var _=()=>super.onAuthEvent,A=this;return(0,a.Z)(function*(){if("signInViaRedirect"===p.type)return _().call(A,p);if("unknown"!==p.type){if(p.eventId){const K=yield A.auth._redirectUserForId(p.eventId);if(K)return A.user=K,_().call(A,p);A.resolve(null)}}else A.resolve(null)})()}onExecution(){return(0,a.Z)(function*(){})()}cleanUp(){}}function te(){return(te=(0,a.Z)(function*(b,p){const _=Q(p),A=U(b);if(!(yield A._isAvailable()))return!1;const K="true"===(yield A._get(_));return yield A._remove(_),K})).apply(this,arguments)}function Ae(b,p){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,a.Z)(function*(b,p){return U(b)._set(Q(p),"true")})).apply(this,arguments)}function O(b,p){w.set(b._key(),p)}function U(b){return Ce(b._redirectPersistence)}function Q(b){return He("pendingRedirect",b.config.apiKey,b.name)}function wt(){return(wt=(0,a.Z)(function*(b,p,_){const A=kr(b);Be(b,p,Bs);const K=Lo(A,_);return yield Ae(K,A),K._openRedirect(A,p,"signInViaRedirect")})).apply(this,arguments)}function Vn(){return(Vn=(0,a.Z)(function*(b,p,_){const A=(0,Y.m9)(b);Be(A.auth,p,Bs);const K=Lo(A.auth,_);yield Ae(K,A.auth);const ue=yield tl(A);return K._openRedirect(A.auth,p,"reauthViaRedirect",ue)})).apply(this,arguments)}function Fn(){return(Fn=(0,a.Z)(function*(b,p,_){const A=(0,Y.m9)(b);Be(A.auth,p,Bs);const K=Lo(A.auth,_);yield Or(!1,A,p.providerId),yield Ae(K,A.auth);const ue=yield tl(A);return K._openRedirect(A.auth,p,"linkViaRedirect",ue)})).apply(this,arguments)}function Gs(){return(Gs=(0,a.Z)(function*(b,p){return yield kr(b)._initializationPromise,lo(b,p,!1)})).apply(this,arguments)}function lo(b,p){return Da.apply(this,arguments)}function Da(){return(Da=(0,a.Z)(function*(b,p,_=!1){const A=kr(b),K=Lo(A,p),rt=yield new N(A,K,_).execute();return rt&&!_&&(delete rt.user._redirectEventId,yield A._persistUserIfCurrent(rt.user),yield A._setRedirectUser(null,p)),rt})).apply(this,arguments)}function tl(b){return ha.apply(this,arguments)}function ha(){return(ha=(0,a.Z)(function*(b){const p=vi(`${b.uid}:::`);return b._redirectEventId=p,yield b.auth._setRedirectUser(b),yield b.auth._persistUserIfCurrent(b),p})).apply(this,arguments)}class Wa{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let _=!1;return this.consumers.forEach(A=>{this.isEventForConsumer(p,A)&&(_=!0,this.sendToConsumer(p,A),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function li(b){switch(b.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fa(b);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=p,_=!0)),_}sendToConsumer(p,_){var A;if(p.error&&!fa(p)){const K=(null===(A=p.error.code)||void 0===A?void 0:A.split("auth/")[1])||"internal-error";_.onError(mt(this.auth,K))}else _.onAuthEvent(p)}isEventForConsumer(p,_){const A=null===_.eventId||!!p.eventId&&p.eventId===_.eventId;return _.filter.includes(p.type)&&A}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(is(p))}saveEventToCache(p){this.cachedEventUids.add(is(p)),this.lastProcessedEventTime=Date.now()}}function is(b){return[b.type,b.eventId,b.sessionId,b.tenantId].filter(p=>p).join("-")}function fa({type:b,error:p}){return"unknown"===b&&"auth/no-auth-event"===(null==p?void 0:p.code)}function Sl(b){return vu.apply(this,arguments)}function vu(){return(vu=(0,a.Z)(function*(b,p={}){return Nt(b,"GET","/v1/projects",p)})).apply(this,arguments)}const Tl=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Fd=/^https?/;function Vu(){return(Vu=(0,a.Z)(function*(b){if(b.config.emulator)return;const{authorizedDomains:p}=yield Sl(b);for(const _ of p)try{if(yc(_))return}catch(A){}vt(b,"unauthorized-domain")})).apply(this,arguments)}function yc(b){const p=J(),{protocol:_,hostname:A}=new URL(p);if(b.startsWith("chrome-extension://")){const rt=new URL(b);return""===rt.hostname&&""===A?"chrome-extension:"===_&&b.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===_&&rt.hostname===A}if(!Fd.test(_))return!1;if(Tl.test(b))return A===b;const K=b.replace(/\./g,"\\.");return new RegExp("^(.+\\."+K+"|"+K+")$","i").test(A)}const Ld=new Ue(3e4,6e4);function Bu(){const b=zi().___jsl;if(null!=b&&b.H)for(const p of Object.keys(b.H))if(b.H[p].r=b.H[p].r||[],b.H[p].L=b.H[p].L||[],b.H[p].r=[...b.H[p].L],b.CP)for(let _=0;_<b.CP.length;_++)b.CP[_]=null}let $u=null;function Vd(b){return $u=$u||function Fs(b){return new Promise((p,_)=>{var A,K,ue;function rt(){Bu(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{Bu(),_(mt(b,"network-request-failed"))},timeout:Ld.get()})}if(null!==(K=null===(A=zi().gapi)||void 0===A?void 0:A.iframes)&&void 0!==K&&K.Iframe)p(gapi.iframes.getContext());else{if(null===(ue=zi().gapi)||void 0===ue||!ue.load){const Bt=ta("iframefcb");return zi()[Bt]=()=>{gapi.load?rt():_(mt(b,"network-request-failed"))},wa(`https://apis.google.com/js/api.js?onload=${Bt}`).catch(hn=>_(hn))}rt()}}).catch(p=>{throw $u=null,p})}(b),$u}const Bd=new Ue(5e3,15e3),$d={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Uu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Xc(b){const p=b.config;ye(p.authDomain,b,"auth-domain-config-required");const _=p.emulator?Je(p,"emulator/auth/iframe"):`https://${b.config.authDomain}/__/auth/iframe`,A={apiKey:p.apiKey,appName:b.name,v:Pe.SDK_VERSION},K=Uu.get(b.config.apiHost);K&&(A.eid=K);const ue=b._getFrameworks();return ue.length&&(A.fw=ue.join(",")),`${_}?${(0,Y.xO)(A).slice(1)}`}function xo(){return xo=(0,a.Z)(function*(b){const p=yield Vd(b),_=zi().gapi;return ye(_,b,"internal-error"),p.open({where:document.body,url:Xc(b),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:$d,dontclear:!0},A=>new Promise(function(){var K=(0,a.Z)(function*(ue,rt){yield A.restyle({setHideOnLeave:!1});const Bt=mt(b,"network-request-failed"),hn=zi().setTimeout(()=>{rt(Bt)},Bd.get());function Un(){zi().clearTimeout(hn),ue(A)}A.ping(Un).then(Un,()=>{rt(Bt)})});return function(ue,rt){return K.apply(this,arguments)}}()))}),xo.apply(this,arguments)}const ju={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class rl{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(p){}}}function cl(b,p,_,A,K,ue){ye(b.config.authDomain,b,"auth-domain-config-required"),ye(b.config.apiKey,b,"invalid-api-key");const rt={apiKey:b.config.apiKey,appName:b.name,authType:_,redirectUrl:A,v:Pe.SDK_VERSION,eventId:K};if(p instanceof Bs){p.setDefaultLanguage(b.languageCode),rt.providerId=p.providerId||"",(0,Y.xb)(p.getCustomParameters())||(rt.customParameters=JSON.stringify(p.getCustomParameters()));for(const[hn,Un]of Object.entries(ue||{}))rt[hn]=Un}if(p instanceof Tr){const hn=p.getScopes().filter(Un=>""!==Un);hn.length>0&&(rt.scopes=hn.join(","))}b.tenantId&&(rt.tid=b.tenantId);const Bt=rt;for(const hn of Object.keys(Bt))void 0===Bt[hn]&&delete Bt[hn];return`${function Mo({config:b}){return b.emulator?Je(b,"emulator/auth/handler"):`https://${b.authDomain}/__/auth/handler`}(b)}?${(0,Y.xO)(Bt).slice(1)}`}const dl="webStorageSupport";class Ws extends class Zl{constructor(p){this.factorId=p}_process(p,_,A){switch(_.type){case"enroll":return this._finalizeEnroll(p,_.credential,A);case"signin":return this._finalizeSignIn(p,_.credential);default:return Oe("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Ws(p)}_finalizeEnroll(p,_,A){return function bl(b,p){return Nt(b,"POST","/v2/accounts/mfaEnrollment:finalize",Vt(b,p))}(p,{idToken:_,displayName:A,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,_){return function Qr(b,p){return Nt(b,"POST","/v2/accounts/mfaSignIn:finalize",Vt(b,p))}(p,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let il=(()=>{class b{constructor(){}static assertion(_){return Ws._fromCredential(_)}}return b.FACTOR_ID="phone",b})();var ed="@firebase/auth",Hd="0.20.11";class td{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var _=this;return(0,a.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const _=this.auth.onIdTokenChanged(A=>{var K;p((null===(K=A)||void 0===K?void 0:K.stsTokenManager.accessToken)||null)});this.internalListeners.set(p,_),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const _=this.internalListeners.get(p);!_||(this.internalListeners.delete(p),_(),this.updateProactiveRefresh())}assertAuthConfigured(){ye(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function pa(){return window}function Rl(){return(Rl=(0,a.Z)(function*(b,p,_){var A;const{BuildInfo:K}=pa();ve(p.sessionId,"AuthEvent did not contain a session ID");const ue=yield ss(p.sessionId),rt={};return xe()?rt.ibi=K.packageName:Rr()?rt.apn=K.packageName:vt(b,"operation-not-supported-in-this-environment"),K.displayName&&(rt.appDisplayName=K.displayName),rt.sessionId=ue,cl(b,_,p.type,void 0,null!==(A=p.eventId)&&void 0!==A?A:void 0,rt)})).apply(this,arguments)}function Wu(){return(Wu=(0,a.Z)(function*(b){const{BuildInfo:p}=pa(),_={};xe()?_.iosBundleId=p.packageName:Rr()?_.androidPackageName=p.packageName:vt(b,"operation-not-supported-in-this-environment"),yield Sl(b,_)})).apply(this,arguments)}function sd(){return(sd=(0,a.Z)(function*(b,p,_){const{cordova:A}=pa();let K=()=>{};try{yield new Promise((ue,rt)=>{let Bt=null;function hn(){var jn;ue();const uo=null===(jn=A.plugins.browsertab)||void 0===jn?void 0:jn.close;"function"==typeof uo&&uo(),"function"==typeof(null==_?void 0:_.close)&&_.close()}function Un(){Bt||(Bt=window.setTimeout(()=>{rt(mt(b,"redirect-cancelled-by-user"))},2e3))}function gr(){"visible"===(null==document?void 0:document.visibilityState)&&Un()}p.addPassiveListener(hn),document.addEventListener("resume",Un,!1),Rr()&&document.addEventListener("visibilitychange",gr,!1),K=()=>{p.removePassiveListener(hn),document.removeEventListener("resume",Un,!1),document.removeEventListener("visibilitychange",gr,!1),Bt&&window.clearTimeout(Bt)}})}finally{K()}})).apply(this,arguments)}function ss(b){return hl.apply(this,arguments)}function hl(){return(hl=(0,a.Z)(function*(b){const p=od(b),_=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(_)).map(K=>K.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function od(b){if(ve(/[0-9a-zA-Z]+/.test(b),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(b);const p=new ArrayBuffer(b.length),_=new Uint8Array(p);for(let A=0;A<b.length;A++)_[A]=b.charCodeAt(A);return _}(0,Y.Pz)("authIdTokenMaxAge"),function Gu(b){(0,Pe._registerComponent)(new Ee.wA("auth",(p,{options:_})=>{const A=p.getProvider("app").getImmediate(),K=p.getProvider("heartbeat"),{apiKey:ue,authDomain:rt}=A.options;return((Bt,hn)=>{ye(ue&&!ue.includes(":"),"invalid-api-key",{appName:Bt.name}),ye(!(null!=rt&&rt.includes(":")),"argument-error",{appName:Bt.name});const Un={apiKey:ue,authDomain:rt,clientPlatform:b,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Dn(b)},gr=new Hr(Bt,hn,Un);return function lt(b,p){const _=(null==p?void 0:p.persistence)||[],A=(Array.isArray(_)?_:[_]).map(Ce);null!=p&&p.errorMap&&b._updateErrorMap(p.errorMap),b._initializeWithPersistence(A,null==p?void 0:p.popupRedirectResolver)}(gr,_),gr})(A,K)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,_,A)=>{p.getProvider("auth-internal").initialize()})),(0,Pe._registerComponent)(new Ee.wA("auth-internal",p=>{const _=kr(p.getProvider("auth").getImmediate());return new td(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Pe.registerVersion)(ed,Hd,function Hu(b){switch(b){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(b)),(0,Pe.registerVersion)(ed,Hd,"esm2017")}("Browser");class zu extends Wa{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(_=>_(p)),super.onEvent(p)}initialized(){var p=this;return(0,a.Z)(function*(){yield p.initPromise})()}}function ud(b){return Nl.apply(this,arguments)}function Nl(){return(Nl=(0,a.Z)(function*(b){const p=yield wc()._get(wu(b));return p&&(yield wc()._remove(wu(b))),p})).apply(this,arguments)}function Iu(){const b=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let _=0;_<20;_++){const A=Math.floor(Math.random()*p.length);b.push(p.charAt(A))}return b.join("")}function wc(){return Ce(_a)}function wu(b){return He("authEvent",b.config.apiKey,b.name)}function qu(b){if(null==b||!b.includes("?"))return{};const[p,..._]=b.split("?");return(0,Y.zd)(_.join("?"))}function cd(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:mt("no-auth-event")}}function Pl(){var b;return(null===(b=null==self?void 0:self.location)||void 0===b?void 0:b.protocol)||null}function Uo(b=(0,Y.z$)()){return!("file:"!==Pl()&&"ionic:"!==Pl()&&"capacitor:"!==Pl()||!b.toLowerCase().match(/iphone|ipad|ipod|android/))}function jr(){try{const b=self.localStorage,p=vi();if(b)return b.setItem(p,"1"),b.removeItem(p),!function Dc(b=(0,Y.z$)()){return function fl(){return(0,Y.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Cc(b=(0,Y.z$)()){return/Edge\/\d+/.test(b)}(b)}()||(0,Y.hl)()}catch(b){return Sc()&&(0,Y.hl)()}return!1}function Sc(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function pl(){return(function Wd(){return"http:"===Pl()||"https:"===Pl()}()||(0,Y.ru)()||Uo())&&!function Ku(){return(0,Y.b$)()||(0,Y.UG)()}()&&jr()&&!Sc()}function kl(){return Uo()&&"undefined"!=typeof document}function Xl(){return(Xl=(0,a.Z)(function*(){return!!kl()&&new Promise(b=>{const p=setTimeout(()=>{b(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),b(!0)})})})).apply(this,arguments)}const jo={LOCAL:"local",NONE:"none",SESSION:"session"},Js=ye,za="persistence";function ml(b){return Ro.apply(this,arguments)}function Ro(){return(Ro=(0,a.Z)(function*(b){yield b._initializationPromise;const p=Qu(),_=He(za,b.config.apiKey,b.name);p&&p.setItem(_,b._getPersistence())})).apply(this,arguments)}function Qu(){var b;try{return(null===(b=function Cu(){return"undefined"!=typeof window?window:null}())||void 0===b?void 0:b.sessionStorage)||null}catch(p){return null}}const yl=ye;class zs{constructor(){this.browserResolver=Ce(class Eu{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=io,this._completeRedirectFn=lo,this._overrideRedirectResult=O}_openPopup(p,_,A,K){var ue=this;return(0,a.Z)(function*(){var rt;ve(null===(rt=ue.eventManagers[p._key()])||void 0===rt?void 0:rt.manager,"_initialize() not called before _openPopup()");const Bt=cl(p,_,A,J(),K);return function xl(b,p,_,A=500,K=600){const ue=Math.max((window.screen.availHeight-K)/2,0).toString(),rt=Math.max((window.screen.availWidth-A)/2,0).toString();let Bt="";const hn=Object.assign(Object.assign({},ju),{width:A.toString(),height:K.toString(),top:ue,left:rt}),Un=(0,Y.z$)().toLowerCase();_&&(Bt=ar(Un)?"_blank":_),on(Un)&&(p=p||"http://localhost",hn.scrollbars="yes");const gr=Object.entries(hn).reduce((uo,[ma,$a])=>`${uo}${ma}=${$a},`,"");if(function Mt(b=(0,Y.z$)()){var p;return xe(b)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(Un)&&"_self"!==Bt)return function _u(b,p){const _=document.createElement("a");_.href=b,_.target=p;const A=document.createEvent("MouseEvent");A.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(A)}(p||"",Bt),new rl(null);const jn=window.open(p||"",Bt,gr);ye(jn,b,"popup-blocked");try{jn.focus()}catch(uo){}return new rl(jn)}(p,Bt,vi())})()}_openRedirect(p,_,A,K){var ue=this;return(0,a.Z)(function*(){return yield ue._originValidation(p),function wn(b){zi().location.href=b}(cl(p,_,A,J(),K)),new Promise(()=>{})})()}_initialize(p){const _=p._key();if(this.eventManagers[_]){const{manager:K,promise:ue}=this.eventManagers[_];return K?Promise.resolve(K):(ve(ue,"If manager is not set, promise should be"),ue)}const A=this.initAndGetManager(p);return this.eventManagers[_]={promise:A},A.catch(()=>{delete this.eventManagers[_]}),A}initAndGetManager(p){var _=this;return(0,a.Z)(function*(){const A=yield function La(b){return xo.apply(this,arguments)}(p),K=new Wa(p);return A.register("authEvent",ue=>(ye(null==ue?void 0:ue.authEvent,p,"invalid-auth-event"),{status:K.onEvent(ue.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[p._key()]={manager:K},_.iframes[p._key()]=A,K})()}_isIframeWebStorageSupported(p,_){this.iframes[p._key()].send(dl,{type:dl},K=>{var ue;const rt=null===(ue=null==K?void 0:K[0])||void 0===ue?void 0:ue[dl];void 0!==rt&&_(!!rt),vt(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const _=p._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function ul(b){return Vu.apply(this,arguments)}(p)),this.originValidationPromises[_]}get _shouldInitProactively(){return pn()||_n()||xe()}}),this.cordovaResolver=Ce(class Kr{constructor(){this._redirectPersistence=io,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=lo,this._overrideRedirectResult=O}_initialize(p){var _=this;return(0,a.Z)(function*(){const A=p._key();let K=_.eventManagers.get(A);return K||(K=new zu(p),_.eventManagers.set(A,K),_.attachCallbackListeners(p,K)),K})()}_openPopup(p){vt(p,"operation-not-supported-in-this-environment")}_openRedirect(p,_,A,K){var ue=this;return(0,a.Z)(function*(){!function Ic(b){var p,_,A,K,ue,rt,Bt,hn,Un,gr;const jn=pa();ye("function"==typeof(null===(p=null==jn?void 0:jn.universalLinks)||void 0===p?void 0:p.subscribe),b,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ye(void 0!==(null===(_=null==jn?void 0:jn.BuildInfo)||void 0===_?void 0:_.packageName),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ye("function"==typeof(null===(ue=null===(K=null===(A=null==jn?void 0:jn.cordova)||void 0===A?void 0:A.plugins)||void 0===K?void 0:K.browsertab)||void 0===ue?void 0:ue.openUrl),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ye("function"==typeof(null===(hn=null===(Bt=null===(rt=null==jn?void 0:jn.cordova)||void 0===rt?void 0:rt.plugins)||void 0===Bt?void 0:Bt.browsertab)||void 0===hn?void 0:hn.isAvailable),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ye("function"==typeof(null===(gr=null===(Un=null==jn?void 0:jn.cordova)||void 0===Un?void 0:Un.InAppBrowser)||void 0===gr?void 0:gr.open),b,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const rt=yield ue._initialize(p);yield rt.initialized(),rt.resetRedirect(),function It(){w.clear()}(),yield ue._originValidation(p);const Bt=function Yu(b,p,_=null){return{type:p,eventId:_,urlResponse:null,sessionId:Iu(),postBody:null,tenantId:b.tenantId,error:mt(b,"no-auth-event")}}(p,A,K);yield function ld(b,p){return wc()._set(wu(b),p)}(p,Bt);const hn=yield function $o(b,p,_){return Rl.apply(this,arguments)}(p,Bt,_),Un=yield function id(b){const{cordova:p}=pa();return new Promise(_=>{p.plugins.browsertab.isAvailable(A=>{let K=null;A?p.plugins.browsertab.openUrl(b):K=p.InAppBrowser.open(b,function Et(b=(0,Y.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(b)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(b)}()?"_blank":"_system","location=yes"),_(K)})})}(hn);return function Ec(b,p,_){return sd.apply(this,arguments)}(p,rt,Un)})()}_isIframeWebStorageSupported(p,_){throw new Error("Method not implemented.")}_originValidation(p){const _=p._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function Ol(b){return Wu.apply(this,arguments)}(p)),this.originValidationPromises[_]}attachCallbackListeners(p,_){const{universalLinks:A,handleOpenURL:K,BuildInfo:ue}=pa(),rt=setTimeout((0,a.Z)(function*(){yield ud(p),_.onEvent(cd())}),500),Bt=function(){var gr=(0,a.Z)(function*(jn){clearTimeout(rt);const uo=yield ud(p);let ma=null;uo&&(null==jn?void 0:jn.url)&&(ma=function sl(b,p){var _,A;const K=function Ss(b){const p=qu(b),_=p.link?decodeURIComponent(p.link):void 0,A=qu(_).link,K=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return qu(K).link||K||A||_||b}(p);if(K.includes("/__/auth/callback")){const ue=qu(K),rt=ue.firebaseError?function bu(b){try{return JSON.parse(b)}catch(p){return null}}(decodeURIComponent(ue.firebaseError)):null,Bt=null===(A=null===(_=null==rt?void 0:rt.code)||void 0===_?void 0:_.split("auth/"))||void 0===A?void 0:A[1],hn=Bt?mt(Bt):null;return hn?{type:b.type,eventId:b.eventId,tenantId:b.tenantId,error:hn,urlResponse:null,sessionId:null,postBody:null}:{type:b.type,eventId:b.eventId,tenantId:b.tenantId,sessionId:b.sessionId,urlResponse:K,postBody:null}}return null}(uo,jn.url)),_.onEvent(ma||cd())});return function(uo){return gr.apply(this,arguments)}}();void 0!==A&&"function"==typeof A.subscribe&&A.subscribe(null,Bt);const hn=K,Un=`${ue.packageName.toLowerCase()}://`;pa().handleOpenURL=function(){var gr=(0,a.Z)(function*(jn){if(jn.toLowerCase().startsWith(Un)&&Bt({url:jn}),"function"==typeof hn)try{hn(jn)}catch(uo){console.error(uo)}});return function(jn){return gr.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=io,this._completeRedirectFn=lo,this._overrideRedirectResult=O}_initialize(p){var _=this;return(0,a.Z)(function*(){return yield _.selectUnderlyingResolver(),_.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,_,A,K){var ue=this;return(0,a.Z)(function*(){return yield ue.selectUnderlyingResolver(),ue.assertedUnderlyingResolver._openPopup(p,_,A,K)})()}_openRedirect(p,_,A,K){var ue=this;return(0,a.Z)(function*(){return yield ue.selectUnderlyingResolver(),ue.assertedUnderlyingResolver._openRedirect(p,_,A,K)})()}_isIframeWebStorageSupported(p,_){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,_)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return kl()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return yl(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,a.Z)(function*(){if(p.underlyingResolver)return;const _=yield function Zu(){return Xl.apply(this,arguments)}();p.underlyingResolver=_?p.cordovaResolver:p.browserResolver})()}}function zd(b){return b.unwrap()}function dd(b){return eu(b)}function eu(b){const{_tokenResponse:p}=b instanceof Y.ZR?b.customData:b;if(!p)return null;if(!(b instanceof Y.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return ra.credentialFromResult(b);const _=p.providerId;if(!_||"password"===_)return null;let A;switch(_){case"google.com":A=Ys;break;case"facebook.com":A=mi;break;case"github.com":A=$s;break;case"twitter.com":A=gs;break;default:const{oauthIdToken:K,oauthAccessToken:ue,oauthTokenSecret:rt,pendingToken:Bt,nonce:hn}=p;return ue||rt||K||Bt?Bt?_.startsWith("saml.")?as._create(_,Bt):_t._fromParams({providerId:_,signInMethod:_,pendingToken:Bt,idToken:K,accessToken:ue}):new dr(_).credential({idToken:K,accessToken:ue,rawNonce:hn}):null}return b instanceof Y.ZR?A.credentialFromError(b):A.credentialFromResult(b)}function qi(b,p){return p.catch(_=>{throw _ instanceof Y.ZR&&function Tc(b,p){var _,A;const K=null===(_=p.customData)||void 0===_?void 0:_._tokenResponse;if("auth/multi-factor-auth-required"===(null===(A=p)||void 0===A?void 0:A.code))p.resolver=new vl(b,function rs(b,p){var _;const A=(0,Y.m9)(b),K=p;return ye(p.customData.operationType,A,"argument-error"),ye(null===(_=K.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,A,"argument-error"),xa._fromError(A,K)}(b,p));else if(K){const ue=eu(p),rt=p;ue&&(rt.credential=ue,rt.tenantId=K.tenantId||void 0,rt.email=K.email||void 0,rt.phoneNumber=K.phoneNumber||void 0)}}(b,_),_}).then(_=>{const K=_.user;return{operationType:_.operationType,credential:dd(_),additionalUserInfo:$r(_),user:Ta.getOrCreate(K)}})}function Xu(b,p){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,a.Z)(function*(b,p){const _=yield p;return{verificationId:_.verificationId,confirm:A=>qi(b,_.confirm(A))}})).apply(this,arguments)}class vl{constructor(p,_){this.resolver=_,this.auth=function eo(b){return b.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return qi(zd(this.auth),this.resolver.resolveSignIn(p))}}class Ta{constructor(p){this._delegate=p,this.multiFactor=function Ma(b){const p=(0,Y.m9)(b);return Ha.has(p)||Ha.set(p,Xa._fromUser(p)),Ha.get(p)}(p)}static getOrCreate(p){return Ta.USER_MAP.has(p)||Ta.USER_MAP.set(p,new Ta(p)),Ta.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var _=this;return(0,a.Z)(function*(){return qi(_.auth,to(_._delegate,p))})()}linkWithPhoneNumber(p,_){var A=this;return(0,a.Z)(function*(){return Xu(A.auth,function yo(b,p,_){return xs.apply(this,arguments)}(A._delegate,p,_))})()}linkWithPopup(p){var _=this;return(0,a.Z)(function*(){return qi(_.auth,function Yi(b,p,_){return ia.apply(this,arguments)}(_._delegate,p,zs))})()}linkWithRedirect(p){var _=this;return(0,a.Z)(function*(){return yield ml(kr(_.auth)),function pr(b,p,_){return function Ar(b,p,_){return Fn.apply(this,arguments)}(b,p,_)}(_._delegate,p,zs)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var _=this;return(0,a.Z)(function*(){return qi(_.auth,Ks(_._delegate,p))})()}reauthenticateWithPhoneNumber(p,_){return Xu(this.auth,function Ga(b,p,_){return Pa.apply(this,arguments)}(this._delegate,p,_))}reauthenticateWithPopup(p){return qi(this.auth,function el(b,p,_){return Vo.apply(this,arguments)}(this._delegate,p,zs))}reauthenticateWithRedirect(p){var _=this;return(0,a.Z)(function*(){return yield ml(kr(_.auth)),function Ht(b,p,_){return function sn(b,p,_){return Vn.apply(this,arguments)}(b,p,_)}(_._delegate,p,zs)})()}sendEmailVerification(p){return function bs(b,p){return Cs.apply(this,arguments)}(this._delegate,p)}unlink(p){var _=this;return(0,a.Z)(function*(){return yield function yi(b,p){return nr.apply(this,arguments)}(_._delegate,p),_})()}updateEmail(p){return function F(b,p){return $((0,Y.m9)(b),p,null)}(this._delegate,p)}updatePassword(p){return function Z(b,p){return $((0,Y.m9)(b),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function oo(b,p){return Ja.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function Zs(b,p){return ua.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,_){return function cs(b,p,_){return ks.apply(this,arguments)}(this._delegate,p,_)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ta.USER_MAP=new WeakMap;const Ba=ye;let Ju=(()=>{class b{constructor(_,A){if(this.app=_,A.isInitialized())return this._delegate=A.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:K}=_.options;Ba(K,"invalid-api-key",{appName:_.name}),Ba(K,"invalid-api-key",{appName:_.name});const ue="undefined"!=typeof window?zs:void 0;this._delegate=A.initialize({options:{persistence:Yd(K,_.name),popupRedirectResolver:ue}}),this._delegate._updateErrorMap(st),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ta.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(_){this._delegate.languageCode=_}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(_){this._delegate.tenantId=_}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(_,A){!function hi(b,p,_){const A=kr(b);ye(A._canInitEmulator,A,"emulator-config-failed"),ye(/^https?:\/\//.test(p),A,"invalid-emulator-scheme");const K=!(null==_||!_.disableWarnings),ue=Er(p),{host:rt,port:Bt}=function Fi(b){const p=Er(b),_=/(\/\/)?([^?#/]+)/.exec(b.substr(p.length));if(!_)return{host:"",port:null};const A=_[2].split("@").pop()||"",K=/^(\[[^\]]+\])(:|$)/.exec(A);if(K){const ue=K[1];return{host:ue,port:Ei(A.substr(ue.length+1))}}{const[ue,rt]=A.split(":");return{host:ue,port:Ei(rt)}}}(p);A.config.emulator={url:`${ue}//${rt}${null===Bt?"":`:${Bt}`}/`},A.settings.appVerificationDisabledForTesting=!0,A.emulatorConfig=Object.freeze({host:rt,port:Bt,protocol:ue.replace(":",""),options:Object.freeze({disableWarnings:K})}),K||function zn(){function b(){const p=document.createElement("p"),_=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",b):b())}()}(this._delegate,_,A)}applyActionCode(_){return function ws(b,p){return As.apply(this,arguments)}(this._delegate,_)}checkActionCode(_){return G(this._delegate,_)}confirmPasswordReset(_,A){return function bo(b,p,_){return Gi.apply(this,arguments)}(this._delegate,_,A)}createUserWithEmailAndPassword(_,A){var K=this;return(0,a.Z)(function*(){return qi(K._delegate,function P(b,p,_){return E.apply(this,arguments)}(K._delegate,_,A))})()}fetchProvidersForEmail(_){return this.fetchSignInMethodsForEmail(_)}fetchSignInMethodsForEmail(_){return function ci(b,p){return ns.apply(this,arguments)}(this._delegate,_)}isSignInWithEmailLink(_){return function Xt(b,p){const _=Os.parseLink(p);return"EMAIL_SIGNIN"===(null==_?void 0:_.operation)}(0,_)}getRedirectResult(){var _=this;return(0,a.Z)(function*(){Ba(pl(),_._delegate,"operation-not-supported-in-this-environment");const A=yield function hs(b,p){return Gs.apply(this,arguments)}(_._delegate,zs);return A?qi(_._delegate,Promise.resolve(A)):{credential:null,user:null}})()}addFrameworkForLogging(_){!function al(b,p){kr(b)._logFramework(p)}(this._delegate,_)}onAuthStateChanged(_,A,K){const{next:ue,error:rt,complete:Bt}=xc(_,A,K);return this._delegate.onAuthStateChanged(ue,rt,Bt)}onIdTokenChanged(_,A,K){const{next:ue,error:rt,complete:Bt}=xc(_,A,K);return this._delegate.onIdTokenChanged(ue,rt,Bt)}sendSignInLinkToEmail(_,A){return function se(b,p,_){return ut.apply(this,arguments)}(this._delegate,_,A)}sendPasswordResetEmail(_,A){return function ri(b,p,_){return Ti.apply(this,arguments)}(this._delegate,_,A||void 0)}setPersistence(_){var A=this;return(0,a.Z)(function*(){let K;switch(function gl(b,p){Js(Object.values(jo).includes(p),b,"invalid-persistence-type"),(0,Y.b$)()?Js(p!==jo.SESSION,b,"unsupported-persistence-type"):(0,Y.UG)()?Js(p===jo.NONE,b,"unsupported-persistence-type"):Sc()?Js(p===jo.NONE||p===jo.LOCAL&&(0,Y.hl)(),b,"unsupported-persistence-type"):Js(p===jo.NONE||jr(),b,"unsupported-persistence-type")}(A._delegate,_),_){case jo.SESSION:K=io;break;case jo.LOCAL:K=(yield Ce(er)._isAvailable())?er:_a;break;case jo.NONE:K=Ne;break;default:return vt("argument-error",{appName:A._delegate.name})}return A._delegate.setPersistence(K)})()}signInAndRetrieveDataWithCredential(_){return this.signInWithCredential(_)}signInAnonymously(){return qi(this._delegate,function ms(b){return ai.apply(this,arguments)}(this._delegate))}signInWithCredential(_){return qi(this._delegate,Vr(this._delegate,_))}signInWithCustomToken(_){return qi(this._delegate,function va(b,p){return wo.apply(this,arguments)}(this._delegate,_))}signInWithEmailAndPassword(_,A){return qi(this._delegate,function V(b,p,_){return Vr((0,Y.m9)(b),es.credential(p,_))}(this._delegate,_,A))}signInWithEmailLink(_,A){return qi(this._delegate,function yn(b,p,_){return Zn.apply(this,arguments)}(this._delegate,_,A))}signInWithPhoneNumber(_,A){return Xu(this._delegate,function Ca(b,p,_){return na.apply(this,arguments)}(this._delegate,_,A))}signInWithPopup(_){var A=this;return(0,a.Z)(function*(){return Ba(pl(),A._delegate,"operation-not-supported-in-this-environment"),qi(A._delegate,function yu(b,p,_){return _s.apply(this,arguments)}(A._delegate,_,zs))})()}signInWithRedirect(_){var A=this;return(0,a.Z)(function*(){return Ba(pl(),A._delegate,"operation-not-supported-in-this-environment"),yield ml(A._delegate),function fe(b,p,_){return function Ye(b,p,_){return wt.apply(this,arguments)}(b,p,_)}(A._delegate,_,zs)})()}updateCurrentUser(_){return this._delegate.updateCurrentUser(_)}verifyPasswordResetCode(_){return function M(b,p){return g.apply(this,arguments)}(this._delegate,_)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return b.Persistence=jo,b})();function xc(b,p,_){let A=b;"function"!=typeof b&&({next:A,error:p,complete:_}=b);const K=A;return{next:rt=>K(rt&&Ta.getOrCreate(rt)),error:p,complete:_}}function Yd(b,p){const _=function Jl(b,p){const _=Qu();if(!_)return[];const A=He(za,b,p);switch(_.getItem(A)){case jo.NONE:return[Ne];case jo.LOCAL:return[er,io];case jo.SESSION:return[io];default:return[]}}(b,p);if("undefined"!=typeof self&&!_.includes(er)&&_.push(er),"undefined"!=typeof window)for(const A of[_a,io])_.includes(A)||_.push(A);return _.includes(Ne)||_.push(Ne),_}class _l{constructor(){this.providerId="phone",this._delegate=new ra(zd(ne.Z.auth()))}static credential(p,_){return ra.credential(p,_)}verifyPhoneNumber(p,_){return this._delegate.verifyPhoneNumber(p,_)}unwrap(){return this._delegate}}_l.PHONE_SIGN_IN_METHOD=ra.PHONE_SIGN_IN_METHOD,_l.PROVIDER_ID=ra.PROVIDER_ID;const hd=ye;class qd{constructor(p,_,A=ne.Z.app()){var K;hd(null===(K=A.options)||void 0===K?void 0:K.apiKey,"invalid-api-key",{appName:A.name}),this._delegate=new Ds(p,_,A.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Mc(b){b.INTERNAL.registerComponent(new Ee.wA("auth-compat",p=>{const _=p.getProvider("app-compat").getImmediate(),A=p.getProvider("auth");return new Ju(_,A)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:es,FacebookAuthProvider:mi,GithubAuthProvider:$s,GoogleAuthProvider:Ys,OAuthProvider:dr,SAMLAuthProvider:Es,PhoneAuthProvider:_l,PhoneMultiFactorGenerator:il,RecaptchaVerifier:qd,TwitterAuthProvider:gs,Auth:Ju,AuthCredential:Zi,Error:Y.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),b.registerVersion("@firebase/auth-compat","0.2.24")}(ne.Z)},591:(tn,ot,H)=>{"use strict";H.d(ot,{X:()=>Y});var a=H(8929),ne=H(5279);class Y extends a.xQ{constructor(Le){super(),this._value=Le}get value(){return this.getValue()}_subscribe(Le){const he=super._subscribe(Le);return he&&!he.closed&&Le.next(this._value),he}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new ne.N;return this._value}next(Le){super.next(this._value=Le)}}},6498:(tn,ot,H)=>{"use strict";H.d(ot,{y:()=>be});var a=H(3489),Y=H(7668),Pe=H(3292),he=H(3821),Ee=H(4843),pe=H(2830);let be=(()=>{class de{constructor(Ie){this._isScalar=!1,Ie&&(this._subscribe=Ie)}lift(Ie){const Ge=new de;return Ge.source=this,Ge.operator=Ie,Ge}subscribe(Ie,Ge,st){const{operator:et}=this,Re=function Le(de,ie,Ie){if(de){if(de instanceof a.L)return de;if(de[Y.b])return de[Y.b]()}return de||ie||Ie?new a.L(de,ie,Ie):new a.L(Pe.c)}(Ie,Ge,st);if(Re.add(et?et.call(Re,this.source):this.source||pe.v.useDeprecatedSynchronousErrorHandling&&!Re.syncErrorThrowable?this._subscribe(Re):this._trySubscribe(Re)),pe.v.useDeprecatedSynchronousErrorHandling&&Re.syncErrorThrowable&&(Re.syncErrorThrowable=!1,Re.syncErrorThrown))throw Re.syncErrorValue;return Re}_trySubscribe(Ie){try{return this._subscribe(Ie)}catch(Ge){pe.v.useDeprecatedSynchronousErrorHandling&&(Ie.syncErrorThrown=!0,Ie.syncErrorValue=Ge),function ne(de){for(;de;){const{closed:ie,destination:Ie,isStopped:Ge}=de;if(ie||Ge)return!1;de=Ie&&Ie instanceof a.L?Ie:null}return!0}(Ie)?Ie.error(Ge):console.warn(Ge)}}forEach(Ie,Ge){return new(Ge=ce(Ge))((st,et)=>{let Re;Re=this.subscribe(De=>{try{Ie(De)}catch(ct){et(ct),Re&&Re.unsubscribe()}},et,st)})}_subscribe(Ie){const{source:Ge}=this;return Ge&&Ge.subscribe(Ie)}[he.L](){return this}pipe(...Ie){return 0===Ie.length?this:(0,Ee.U)(Ie)(this)}toPromise(Ie){return new(Ie=ce(Ie))((Ge,st)=>{let et;this.subscribe(Re=>et=Re,Re=>st(Re),()=>Ge(et))})}}return de.create=ie=>new de(ie),de})();function ce(de){if(de||(de=pe.v.Promise||Promise),!de)throw new Error("no Promise impl found");return de}},3292:(tn,ot,H)=>{"use strict";H.d(ot,{c:()=>Y});var a=H(2830),ne=H(2782);const Y={closed:!0,next(Pe){},error(Pe){if(a.v.useDeprecatedSynchronousErrorHandling)throw Pe;(0,ne.z)(Pe)},complete(){}}},826:(tn,ot,H)=>{"use strict";H.d(ot,{L:()=>ne});var a=H(3489);class ne extends a.L{notifyNext(Pe,Le,he,Ee,pe){this.destination.next(Le)}notifyError(Pe,Le){this.destination.error(Pe)}notifyComplete(Pe){this.destination.complete()}}},8929:(tn,ot,H)=>{"use strict";H.d(ot,{Yc:()=>Ee,xQ:()=>pe});var a=H(6498),ne=H(3489),Y=H(2654),Pe=H(5279),Le=H(5283),he=H(7668);class Ee extends ne.L{constructor(de){super(de),this.destination=de}}let pe=(()=>{class ce extends a.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[he.b](){return new Ee(this)}lift(ie){const Ie=new be(this,this);return Ie.operator=ie,Ie}next(ie){if(this.closed)throw new Pe.N;if(!this.isStopped){const{observers:Ie}=this,Ge=Ie.length,st=Ie.slice();for(let et=0;et<Ge;et++)st[et].next(ie)}}error(ie){if(this.closed)throw new Pe.N;this.hasError=!0,this.thrownError=ie,this.isStopped=!0;const{observers:Ie}=this,Ge=Ie.length,st=Ie.slice();for(let et=0;et<Ge;et++)st[et].error(ie);this.observers.length=0}complete(){if(this.closed)throw new Pe.N;this.isStopped=!0;const{observers:ie}=this,Ie=ie.length,Ge=ie.slice();for(let st=0;st<Ie;st++)Ge[st].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(ie){if(this.closed)throw new Pe.N;return super._trySubscribe(ie)}_subscribe(ie){if(this.closed)throw new Pe.N;return this.hasError?(ie.error(this.thrownError),Y.w.EMPTY):this.isStopped?(ie.complete(),Y.w.EMPTY):(this.observers.push(ie),new Le.W(this,ie))}asObservable(){const ie=new a.y;return ie.source=this,ie}}return ce.create=(de,ie)=>new be(de,ie),ce})();class be extends pe{constructor(de,ie){super(),this.destination=de,this.source=ie}next(de){const{destination:ie}=this;ie&&ie.next&&ie.next(de)}error(de){const{destination:ie}=this;ie&&ie.error&&this.destination.error(de)}complete(){const{destination:de}=this;de&&de.complete&&this.destination.complete()}_subscribe(de){const{source:ie}=this;return ie?this.source.subscribe(de):Y.w.EMPTY}}},5283:(tn,ot,H)=>{"use strict";H.d(ot,{W:()=>ne});var a=H(2654);class ne extends a.w{constructor(Pe,Le){super(),this.subject=Pe,this.subscriber=Le,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const Pe=this.subject,Le=Pe.observers;if(this.subject=null,!Le||0===Le.length||Pe.isStopped||Pe.closed)return;const he=Le.indexOf(this.subscriber);-1!==he&&Le.splice(he,1)}}},3489:(tn,ot,H)=>{"use strict";H.d(ot,{L:()=>Ee});var a=H(7043),ne=H(3292),Y=H(2654),Pe=H(7668),Le=H(2830),he=H(2782);class Ee extends Y.w{constructor(ce,de,ie){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=ne.c;break;case 1:if(!ce){this.destination=ne.c;break}if("object"==typeof ce){ce instanceof Ee?(this.syncErrorThrowable=ce.syncErrorThrowable,this.destination=ce,ce.add(this)):(this.syncErrorThrowable=!0,this.destination=new pe(this,ce));break}default:this.syncErrorThrowable=!0,this.destination=new pe(this,ce,de,ie)}}[Pe.b](){return this}static create(ce,de,ie){const Ie=new Ee(ce,de,ie);return Ie.syncErrorThrowable=!1,Ie}next(ce){this.isStopped||this._next(ce)}error(ce){this.isStopped||(this.isStopped=!0,this._error(ce))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(ce){this.destination.next(ce)}_error(ce){this.destination.error(ce),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:ce}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=ce,this}}class pe extends Ee{constructor(ce,de,ie,Ie){super(),this._parentSubscriber=ce;let Ge,st=this;(0,a.m)(de)?Ge=de:de&&(Ge=de.next,ie=de.error,Ie=de.complete,de!==ne.c&&(st=Object.create(de),(0,a.m)(st.unsubscribe)&&this.add(st.unsubscribe.bind(st)),st.unsubscribe=this.unsubscribe.bind(this))),this._context=st,this._next=Ge,this._error=ie,this._complete=Ie}next(ce){if(!this.isStopped&&this._next){const{_parentSubscriber:de}=this;Le.v.useDeprecatedSynchronousErrorHandling&&de.syncErrorThrowable?this.__tryOrSetError(de,this._next,ce)&&this.unsubscribe():this.__tryOrUnsub(this._next,ce)}}error(ce){if(!this.isStopped){const{_parentSubscriber:de}=this,{useDeprecatedSynchronousErrorHandling:ie}=Le.v;if(this._error)ie&&de.syncErrorThrowable?(this.__tryOrSetError(de,this._error,ce),this.unsubscribe()):(this.__tryOrUnsub(this._error,ce),this.unsubscribe());else if(de.syncErrorThrowable)ie?(de.syncErrorValue=ce,de.syncErrorThrown=!0):(0,he.z)(ce),this.unsubscribe();else{if(this.unsubscribe(),ie)throw ce;(0,he.z)(ce)}}}complete(){if(!this.isStopped){const{_parentSubscriber:ce}=this;if(this._complete){const de=()=>this._complete.call(this._context);Le.v.useDeprecatedSynchronousErrorHandling&&ce.syncErrorThrowable?(this.__tryOrSetError(ce,de),this.unsubscribe()):(this.__tryOrUnsub(de),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(ce,de){try{ce.call(this._context,de)}catch(ie){if(this.unsubscribe(),Le.v.useDeprecatedSynchronousErrorHandling)throw ie;(0,he.z)(ie)}}__tryOrSetError(ce,de,ie){if(!Le.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{de.call(this._context,ie)}catch(Ie){return Le.v.useDeprecatedSynchronousErrorHandling?(ce.syncErrorValue=Ie,ce.syncErrorThrown=!0,!0):((0,he.z)(Ie),!0)}return!1}_unsubscribe(){const{_parentSubscriber:ce}=this;this._context=null,this._parentSubscriber=null,ce.unsubscribe()}}},2654:(tn,ot,H)=>{"use strict";H.d(ot,{w:()=>he});var a=H(6688),ne=H(7830),Y=H(7043);const Le=(()=>{function pe(be){return Error.call(this),this.message=be?`${be.length} errors occurred during unsubscription:\n${be.map((ce,de)=>`${de+1}) ${ce.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=be,this}return pe.prototype=Object.create(Error.prototype),pe})();class he{constructor(be){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,be&&(this._ctorUnsubscribe=!0,this._unsubscribe=be)}unsubscribe(){let be;if(this.closed)return;let{_parentOrParents:ce,_ctorUnsubscribe:de,_unsubscribe:ie,_subscriptions:Ie}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,ce instanceof he)ce.remove(this);else if(null!==ce)for(let Ge=0;Ge<ce.length;++Ge)ce[Ge].remove(this);if((0,Y.m)(ie)){de&&(this._unsubscribe=void 0);try{ie.call(this)}catch(Ge){be=Ge instanceof Le?Ee(Ge.errors):[Ge]}}if((0,a.k)(Ie)){let Ge=-1,st=Ie.length;for(;++Ge<st;){const et=Ie[Ge];if((0,ne.K)(et))try{et.unsubscribe()}catch(Re){be=be||[],Re instanceof Le?be=be.concat(Ee(Re.errors)):be.push(Re)}}}if(be)throw new Le(be)}add(be){let ce=be;if(!be)return he.EMPTY;switch(typeof be){case"function":ce=new he(be);case"object":if(ce===this||ce.closed||"function"!=typeof ce.unsubscribe)return ce;if(this.closed)return ce.unsubscribe(),ce;if(!(ce instanceof he)){const Ie=ce;ce=new he,ce._subscriptions=[Ie]}break;default:throw new Error("unrecognized teardown "+be+" added to Subscription.")}let{_parentOrParents:de}=ce;if(null===de)ce._parentOrParents=this;else if(de instanceof he){if(de===this)return ce;ce._parentOrParents=[de,this]}else{if(-1!==de.indexOf(this))return ce;de.push(this)}const ie=this._subscriptions;return null===ie?this._subscriptions=[ce]:ie.push(ce),ce}remove(be){const ce=this._subscriptions;if(ce){const de=ce.indexOf(be);-1!==de&&ce.splice(de,1)}}}var pe;function Ee(pe){return pe.reduce((be,ce)=>be.concat(ce instanceof Le?ce.errors:ce),[])}he.EMPTY=((pe=new he).closed=!0,pe)},2830:(tn,ot,H)=>{"use strict";H.d(ot,{v:()=>ne});let a=!1;const ne={Promise:void 0,set useDeprecatedSynchronousErrorHandling(Y){if(Y){const Pe=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+Pe.stack)}else a&&console.log("RxJS: Back to a better error behavior. Thank you. <3");a=Y},get useDeprecatedSynchronousErrorHandling(){return a}}},1177:(tn,ot,H)=>{"use strict";H.d(ot,{Ds:()=>he,IY:()=>Pe,ft:()=>pe});var a=H(3489),ne=H(6498),Y=H(9249);class Pe extends a.L{constructor(ce){super(),this.parent=ce}_next(ce){this.parent.notifyNext(ce)}_error(ce){this.parent.notifyError(ce),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class he extends a.L{notifyNext(ce){this.destination.next(ce)}notifyError(ce){this.destination.error(ce)}notifyComplete(){this.destination.complete()}}function pe(be,ce){if(ce.closed)return;if(be instanceof ne.y)return be.subscribe(ce);let de;try{de=(0,Y.s)(be)(ce)}catch(ie){ce.error(ie)}return de}},1762:(tn,ot,H)=>{"use strict";H.d(ot,{N:()=>he,c:()=>Le});var a=H(8929),ne=H(6498),Y=H(2654),Pe=H(4327);class Le extends ne.y{constructor(de,ie){super(),this.source=de,this.subjectFactory=ie,this._refCount=0,this._isComplete=!1}_subscribe(de){return this.getSubject().subscribe(de)}getSubject(){const de=this._subject;return(!de||de.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let de=this._connection;return de||(this._isComplete=!1,de=this._connection=new Y.w,de.add(this.source.subscribe(new Ee(this.getSubject(),this))),de.closed&&(this._connection=null,de=Y.w.EMPTY)),de}refCount(){return(0,Pe.x)()(this)}}const he=(()=>{const ce=Le.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:ce._subscribe},_isComplete:{value:ce._isComplete,writable:!0},getSubject:{value:ce.getSubject},connect:{value:ce.connect},refCount:{value:ce.refCount}}})();class Ee extends a.Yc{constructor(de,ie){super(de),this.connectable=ie}_error(de){this._unsubscribe(),super._error(de)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const de=this.connectable;if(de){this.connectable=null;const ie=de._connection;de._refCount=0,de._subject=null,de._connection=null,ie&&ie.unsubscribe()}}}},1221:(tn,ot,H)=>{"use strict";H.d(ot,{z:()=>Pe});var a=H(1086),ne=H(9146);function Pe(...Le){return function Y(){return(0,ne.J)(1)}()((0,a.of)(...Le))}},8896:(tn,ot,H)=>{"use strict";H.d(ot,{E:()=>ne,c:()=>Y});var a=H(6498);const ne=new a.y(Le=>Le.complete());function Y(Le){return Le?function Pe(Le){return new a.y(he=>Le.schedule(()=>he.complete()))}(Le):ne}},5254:(tn,ot,H)=>{"use strict";H.d(ot,{D:()=>st});var a=H(6498),ne=H(9249),Y=H(2654),Pe=H(3821),Ee=H(6454),pe=H(5430),de=H(8955),ie=H(8515);function st(et,Re){return Re?function Ge(et,Re){if(null!=et){if(function ce(et){return et&&"function"==typeof et[Pe.L]}(et))return function Le(et,Re){return new a.y(De=>{const ct=new Y.w;return ct.add(Re.schedule(()=>{const me=et[Pe.L]();ct.add(me.subscribe({next(vt){ct.add(Re.schedule(()=>De.next(vt)))},error(vt){ct.add(Re.schedule(()=>De.error(vt)))},complete(){ct.add(Re.schedule(()=>De.complete()))}}))})),ct})}(et,Re);if((0,de.t)(et))return function he(et,Re){return new a.y(De=>{const ct=new Y.w;return ct.add(Re.schedule(()=>et.then(me=>{ct.add(Re.schedule(()=>{De.next(me),ct.add(Re.schedule(()=>De.complete()))}))},me=>{ct.add(Re.schedule(()=>De.error(me)))}))),ct})}(et,Re);if((0,ie.z)(et))return(0,Ee.r)(et,Re);if(function Ie(et){return et&&"function"==typeof et[pe.hZ]}(et)||"string"==typeof et)return function be(et,Re){if(!et)throw new Error("Iterable cannot be null");return new a.y(De=>{const ct=new Y.w;let me;return ct.add(()=>{me&&"function"==typeof me.return&&me.return()}),ct.add(Re.schedule(()=>{me=et[pe.hZ](),ct.add(Re.schedule(function(){if(De.closed)return;let vt,mt;try{const xt=me.next();vt=xt.value,mt=xt.done}catch(xt){return void De.error(xt)}mt?De.complete():(De.next(vt),this.schedule())}))})),ct})}(et,Re)}throw new TypeError((null!==et&&typeof et||et)+" is not observable")}(et,Re):et instanceof a.y?et:new a.y((0,ne.s)(et))}},3009:(tn,ot,H)=>{"use strict";H.d(ot,{n:()=>Pe});var a=H(6498),ne=H(3650),Y=H(6454);function Pe(Le,he){return he?(0,Y.r)(Le,he):new a.y((0,ne.V)(Le))}},6787:(tn,ot,H)=>{"use strict";H.d(ot,{T:()=>Le});var a=H(6498),ne=H(2866),Y=H(9146),Pe=H(3009);function Le(...he){let Ee=Number.POSITIVE_INFINITY,pe=null,be=he[he.length-1];return(0,ne.K)(be)?(pe=he.pop(),he.length>1&&"number"==typeof he[he.length-1]&&(Ee=he.pop())):"number"==typeof be&&(Ee=he.pop()),null===pe&&1===he.length&&he[0]instanceof a.y?he[0]:(0,Y.J)(Ee)((0,Pe.n)(he,pe))}},1086:(tn,ot,H)=>{"use strict";H.d(ot,{of:()=>Pe});var a=H(2866),ne=H(3009),Y=H(6454);function Pe(...Le){let he=Le[Le.length-1];return(0,a.K)(he)?(Le.pop(),(0,Y.r)(Le,he)):(0,ne.n)(Le)}},1737:(tn,ot,H)=>{"use strict";H.d(ot,{_:()=>ne});var a=H(6498);function ne(Pe,Le){return new a.y(Le?he=>Le.schedule(Y,0,{error:Pe,subscriber:he}):he=>he.error(Pe))}function Y({error:Pe,subscriber:Le}){Le.error(Pe)}},7314:(tn,ot,H)=>{"use strict";H.d(ot,{d:()=>ne});var a=H(3489);function ne(Le=null){return he=>he.lift(new Y(Le))}class Y{constructor(he){this.defaultValue=he}call(he,Ee){return Ee.subscribe(new Pe(he,this.defaultValue))}}class Pe extends a.L{constructor(he,Ee){super(he),this.defaultValue=Ee,this.isEmpty=!0}_next(he){this.isEmpty=!1,this.destination.next(he)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}},5778:(tn,ot,H)=>{"use strict";H.d(ot,{x:()=>ne});var a=H(3489);function ne(Le,he){return Ee=>Ee.lift(new Y(Le,he))}class Y{constructor(he,Ee){this.compare=he,this.keySelector=Ee}call(he,Ee){return Ee.subscribe(new Pe(he,this.compare,this.keySelector))}}class Pe extends a.L{constructor(he,Ee,pe){super(he),this.keySelector=pe,this.hasKey=!1,"function"==typeof Ee&&(this.compare=Ee)}compare(he,Ee){return he===Ee}_next(he){let Ee;try{const{keySelector:be}=this;Ee=be?be(he):he}catch(be){return this.destination.error(be)}let pe=!1;if(this.hasKey)try{const{compare:be}=this;pe=be(this.key,Ee)}catch(be){return this.destination.error(be)}else this.hasKey=!0;pe||(this.key=Ee,this.destination.next(he))}}},2198:(tn,ot,H)=>{"use strict";H.d(ot,{h:()=>ne});var a=H(3489);function ne(Le,he){return function(pe){return pe.lift(new Y(Le,he))}}class Y{constructor(he,Ee){this.predicate=he,this.thisArg=Ee}call(he,Ee){return Ee.subscribe(new Pe(he,this.predicate,this.thisArg))}}class Pe extends a.L{constructor(he,Ee,pe){super(he),this.predicate=Ee,this.thisArg=pe,this.count=0}_next(he){let Ee;try{Ee=this.predicate.call(this.thisArg,he,this.count++)}catch(pe){return void this.destination.error(pe)}Ee&&this.destination.next(he)}}},7224:(tn,ot,H)=>{"use strict";H.d(ot,{P:()=>Ee});var a=H(4450),ne=H(2198),Y=H(2986),Pe=H(7314),Le=H(4907),he=H(5379);function Ee(pe,be){const ce=arguments.length>=2;return de=>de.pipe(pe?(0,ne.h)((ie,Ie)=>pe(ie,Ie,de)):he.y,(0,Y.q)(1),ce?(0,Pe.d)(be):(0,Le.T)(()=>new a.K))}},4850:(tn,ot,H)=>{"use strict";H.d(ot,{U:()=>ne});var a=H(3489);function ne(Le,he){return function(pe){if("function"!=typeof Le)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return pe.lift(new Y(Le,he))}}class Y{constructor(he,Ee){this.project=he,this.thisArg=Ee}call(he,Ee){return Ee.subscribe(new Pe(he,this.project,this.thisArg))}}class Pe extends a.L{constructor(he,Ee,pe){super(he),this.project=Ee,this.count=0,this.thisArg=pe||this}_next(he){let Ee;try{Ee=this.project.call(this.thisArg,he,this.count++)}catch(pe){return void this.destination.error(pe)}this.destination.next(Ee)}}},9146:(tn,ot,H)=>{"use strict";H.d(ot,{J:()=>Y});var a=H(1709),ne=H(5379);function Y(Pe=Number.POSITIVE_INFINITY){return(0,a.zg)(ne.y,Pe)}},1709:(tn,ot,H)=>{"use strict";H.d(ot,{zg:()=>Pe});var a=H(4850),ne=H(5254),Y=H(1177);function Pe(pe,be,ce=Number.POSITIVE_INFINITY){return"function"==typeof be?de=>de.pipe(Pe((ie,Ie)=>(0,ne.D)(pe(ie,Ie)).pipe((0,a.U)((Ge,st)=>be(ie,Ge,Ie,st))),ce)):("number"==typeof be&&(ce=be),de=>de.lift(new Le(pe,ce)))}class Le{constructor(be,ce=Number.POSITIVE_INFINITY){this.project=be,this.concurrent=ce}call(be,ce){return ce.subscribe(new he(be,this.project,this.concurrent))}}class he extends Y.Ds{constructor(be,ce,de=Number.POSITIVE_INFINITY){super(be),this.project=ce,this.concurrent=de,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(be){this.active<this.concurrent?this._tryNext(be):this.buffer.push(be)}_tryNext(be){let ce;const de=this.index++;try{ce=this.project(be,de)}catch(ie){return void this.destination.error(ie)}this.active++,this._innerSub(ce)}_innerSub(be){const ce=new Y.IY(this),de=this.destination;de.add(ce);const ie=(0,Y.ft)(be,ce);ie!==ce&&de.add(ie)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(be){this.destination.next(be)}notifyComplete(){const be=this.buffer;this.active--,be.length>0?this._next(be.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},2102:(tn,ot,H)=>{"use strict";H.d(ot,{ht:()=>be,QV:()=>Ee});var a=H(3489),ne=H(8896),Y=H(1086),Pe=H(1737);class he{constructor(ie,Ie,Ge){this.kind=ie,this.value=Ie,this.error=Ge,this.hasValue="N"===ie}observe(ie){switch(this.kind){case"N":return ie.next&&ie.next(this.value);case"E":return ie.error&&ie.error(this.error);case"C":return ie.complete&&ie.complete()}}do(ie,Ie,Ge){switch(this.kind){case"N":return ie&&ie(this.value);case"E":return Ie&&Ie(this.error);case"C":return Ge&&Ge()}}accept(ie,Ie,Ge){return ie&&"function"==typeof ie.next?this.observe(ie):this.do(ie,Ie,Ge)}toObservable(){switch(this.kind){case"N":return(0,Y.of)(this.value);case"E":return(0,Pe._)(this.error);case"C":return(0,ne.c)()}throw new Error("unexpected notification kind value")}static createNext(ie){return void 0!==ie?new he("N",ie):he.undefinedValueNotification}static createError(ie){return new he("E",void 0,ie)}static createComplete(){return he.completeNotification}}function Ee(de,ie=0){return function(Ge){return Ge.lift(new pe(de,ie))}}he.completeNotification=new he("C"),he.undefinedValueNotification=new he("N",void 0);class pe{constructor(ie,Ie=0){this.scheduler=ie,this.delay=Ie}call(ie,Ie){return Ie.subscribe(new be(ie,this.scheduler,this.delay))}}class be extends a.L{constructor(ie,Ie,Ge=0){super(ie),this.scheduler=Ie,this.delay=Ge}static dispatch(ie){const{notification:Ie,destination:Ge}=ie;Ie.observe(Ge),this.unsubscribe()}scheduleMessage(ie){this.destination.add(this.scheduler.schedule(be.dispatch,this.delay,new ce(ie,this.destination)))}_next(ie){this.scheduleMessage(he.createNext(ie))}_error(ie){this.scheduleMessage(he.createError(ie)),this.unsubscribe()}_complete(){this.scheduleMessage(he.createComplete()),this.unsubscribe()}}class ce{constructor(ie,Ie){this.notification=ie,this.destination=Ie}}},4327:(tn,ot,H)=>{"use strict";H.d(ot,{x:()=>ne});var a=H(3489);function ne(){return function(he){return he.lift(new Y(he))}}class Y{constructor(he){this.connectable=he}call(he,Ee){const{connectable:pe}=this;pe._refCount++;const be=new Pe(he,pe),ce=Ee.subscribe(be);return be.closed||(be.connection=pe.connect()),ce}}class Pe extends a.L{constructor(he,Ee){super(he),this.connectable=Ee}_unsubscribe(){const{connectable:he}=this;if(!he)return void(this.connection=null);this.connectable=null;const Ee=he._refCount;if(Ee<=0)return void(this.connection=null);if(he._refCount=Ee-1,Ee>1)return void(this.connection=null);const{connection:pe}=this,be=he._connection;this.connection=null,be&&(!pe||be===pe)&&be.unsubscribe()}}},2014:(tn,ot,H)=>{"use strict";H.d(ot,{R:()=>ne});var a=H(3489);function ne(Le,he){let Ee=!1;return arguments.length>=2&&(Ee=!0),function(be){return be.lift(new Y(Le,he,Ee))}}class Y{constructor(he,Ee,pe=!1){this.accumulator=he,this.seed=Ee,this.hasSeed=pe}call(he,Ee){return Ee.subscribe(new Pe(he,this.accumulator,this.seed,this.hasSeed))}}class Pe extends a.L{constructor(he,Ee,pe,be){super(he),this.accumulator=Ee,this._seed=pe,this.hasSeed=be,this.index=0}get seed(){return this._seed}set seed(he){this.hasSeed=!0,this._seed=he}_next(he){if(this.hasSeed)return this._tryNext(he);this.seed=he,this.destination.next(he)}_tryNext(he){const Ee=this.index++;let pe;try{pe=this.accumulator(this.seed,he,Ee)}catch(be){this.destination.error(be)}this.seed=pe,this.destination.next(pe)}}},2474:(tn,ot,H)=>{"use strict";H.d(ot,{B:()=>Ee});var a=H(1762);class Y{constructor(be,ce){this.subjectFactory=be,this.selector=ce}call(be,ce){const{selector:de}=this,ie=this.subjectFactory(),Ie=de(ie).subscribe(be);return Ie.add(ce.subscribe(ie)),Ie}}var Pe=H(4327),Le=H(8929);function he(){return new Le.xQ}function Ee(){return pe=>(0,Pe.x)()(function ne(pe,be){return function(de){let ie;if(ie="function"==typeof pe?pe:function(){return pe},"function"==typeof be)return de.lift(new Y(ie,be));const Ie=Object.create(de,a.N);return Ie.source=de,Ie.subjectFactory=ie,Ie}}(he)(pe))}},1059:(tn,ot,H)=>{"use strict";H.d(ot,{O:()=>Y});var a=H(1221),ne=H(2866);function Y(...Pe){const Le=Pe[Pe.length-1];return(0,ne.K)(Le)?(Pe.pop(),he=>(0,a.z)(Pe,he,Le)):he=>(0,a.z)(Pe,he)}},8915:(tn,ot,H)=>{"use strict";H.d(ot,{R:()=>Re});var a=H(6498);let ne=1;const Y=Promise.resolve(),Pe={};function Le(ct){return ct in Pe&&(delete Pe[ct],!0)}const he={setImmediate(ct){const me=ne++;return Pe[me]=!0,Y.then(()=>Le(me)&&ct()),me},clearImmediate(ct){Le(ct)}};var pe=H(6686),ce=H(2268);const Ie=new class de extends ce.v{flush(me){this.active=!0,this.scheduled=void 0;const{actions:vt}=this;let mt,xt=-1,Be=vt.length;me=me||vt.shift();do{if(mt=me.execute(me.state,me.delay))break}while(++xt<Be&&(me=vt.shift()));if(this.active=!1,mt){for(;++xt<Be&&(me=vt.shift());)me.unsubscribe();throw mt}}}(class be extends pe.o{constructor(me,vt){super(me,vt),this.scheduler=me,this.work=vt}requestAsyncId(me,vt,mt=0){return null!==mt&&mt>0?super.requestAsyncId(me,vt,mt):(me.actions.push(this),me.scheduled||(me.scheduled=he.setImmediate(me.flush.bind(me,null))))}recycleAsyncId(me,vt,mt=0){if(null!==mt&&mt>0||null===mt&&this.delay>0)return super.recycleAsyncId(me,vt,mt);0===me.actions.length&&(he.clearImmediate(vt),me.scheduled=void 0)}});var Ge=H(6688);class et extends a.y{constructor(me,vt=0,mt=Ie){super(),this.source=me,this.delayTime=vt,this.scheduler=mt,(!function st(ct){return!(0,Ge.k)(ct)&&ct-parseFloat(ct)+1>=0}(vt)||vt<0)&&(this.delayTime=0),(!mt||"function"!=typeof mt.schedule)&&(this.scheduler=Ie)}static create(me,vt=0,mt=Ie){return new et(me,vt,mt)}static dispatch(me){const{source:vt,subscriber:mt}=me;return this.add(vt.subscribe(mt))}_subscribe(me){return this.scheduler.schedule(et.dispatch,this.delayTime,{source:this.source,subscriber:me})}}function Re(ct,me=0){return function(mt){return mt.lift(new De(ct,me))}}class De{constructor(me,vt){this.scheduler=me,this.delay=vt}call(me,vt){return new et(vt,this.delay,this.scheduler).subscribe(me)}}},7545:(tn,ot,H)=>{"use strict";H.d(ot,{w:()=>Pe});var a=H(4850),ne=H(5254),Y=H(1177);function Pe(Ee,pe){return"function"==typeof pe?be=>be.pipe(Pe((ce,de)=>(0,ne.D)(Ee(ce,de)).pipe((0,a.U)((ie,Ie)=>pe(ce,ie,de,Ie))))):be=>be.lift(new Le(Ee))}class Le{constructor(pe){this.project=pe}call(pe,be){return be.subscribe(new he(pe,this.project))}}class he extends Y.Ds{constructor(pe,be){super(pe),this.project=be,this.index=0}_next(pe){let be;const ce=this.index++;try{be=this.project(pe,ce)}catch(de){return void this.destination.error(de)}this._innerSub(be)}_innerSub(pe){const be=this.innerSubscription;be&&be.unsubscribe();const ce=new Y.IY(this),de=this.destination;de.add(ce),this.innerSubscription=(0,Y.ft)(pe,ce),this.innerSubscription!==ce&&de.add(this.innerSubscription)}_complete(){const{innerSubscription:pe}=this;(!pe||pe.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(pe){this.destination.next(pe)}}},2986:(tn,ot,H)=>{"use strict";H.d(ot,{q:()=>Pe});var a=H(3489),ne=H(4231),Y=H(8896);function Pe(Ee){return pe=>0===Ee?(0,Y.c)():pe.lift(new Le(Ee))}class Le{constructor(pe){if(this.total=pe,this.total<0)throw new ne.W}call(pe,be){return be.subscribe(new he(pe,this.total))}}class he extends a.L{constructor(pe,be){super(pe),this.total=be,this.count=0}_next(pe){const be=this.total,ce=++this.count;ce<=be&&(this.destination.next(pe),ce===be&&(this.destination.complete(),this.unsubscribe()))}}},2868:(tn,ot,H)=>{"use strict";H.d(ot,{b:()=>Pe});var a=H(3489);function ne(){}var Y=H(7043);function Pe(Ee,pe,be){return function(de){return de.lift(new Le(Ee,pe,be))}}class Le{constructor(pe,be,ce){this.nextOrObserver=pe,this.error=be,this.complete=ce}call(pe,be){return be.subscribe(new he(pe,this.nextOrObserver,this.error,this.complete))}}class he extends a.L{constructor(pe,be,ce,de){super(pe),this._tapNext=ne,this._tapError=ne,this._tapComplete=ne,this._tapError=ce||ne,this._tapComplete=de||ne,(0,Y.m)(be)?(this._context=this,this._tapNext=be):be&&(this._context=be,this._tapNext=be.next||ne,this._tapError=be.error||ne,this._tapComplete=be.complete||ne)}_next(pe){try{this._tapNext.call(this._context,pe)}catch(be){return void this.destination.error(be)}this.destination.next(pe)}_error(pe){try{this._tapError.call(this._context,pe)}catch(be){return void this.destination.error(be)}this.destination.error(pe)}_complete(){try{this._tapComplete.call(this._context)}catch(pe){return void this.destination.error(pe)}return this.destination.complete()}}},4907:(tn,ot,H)=>{"use strict";H.d(ot,{T:()=>Y});var a=H(4450),ne=H(3489);function Y(Ee=he){return pe=>pe.lift(new Pe(Ee))}class Pe{constructor(pe){this.errorFactory=pe}call(pe,be){return be.subscribe(new Le(pe,this.errorFactory))}}class Le extends ne.L{constructor(pe,be){super(pe),this.errorFactory=be,this.hasValue=!1}_next(pe){this.hasValue=!0,this.destination.next(pe)}_complete(){if(this.hasValue)return this.destination.complete();{let pe;try{pe=this.errorFactory()}catch(be){pe=be}this.destination.error(pe)}}}function he(){return new a.K}},6454:(tn,ot,H)=>{"use strict";H.d(ot,{r:()=>Y});var a=H(6498),ne=H(2654);function Y(Pe,Le){return new a.y(he=>{const Ee=new ne.w;let pe=0;return Ee.add(Le.schedule(function(){pe!==Pe.length?(he.next(Pe[pe++]),he.closed||Ee.add(this.schedule())):he.complete()})),Ee})}},6686:(tn,ot,H)=>{"use strict";H.d(ot,{o:()=>Y});var a=H(2654);class ne extends a.w{constructor(Le,he){super()}schedule(Le,he=0){return this}}class Y extends ne{constructor(Le,he){super(Le,he),this.scheduler=Le,this.work=he,this.pending=!1}schedule(Le,he=0){if(this.closed)return this;this.state=Le;const Ee=this.id,pe=this.scheduler;return null!=Ee&&(this.id=this.recycleAsyncId(pe,Ee,he)),this.pending=!0,this.delay=he,this.id=this.id||this.requestAsyncId(pe,this.id,he),this}requestAsyncId(Le,he,Ee=0){return setInterval(Le.flush.bind(Le,this),Ee)}recycleAsyncId(Le,he,Ee=0){if(null!==Ee&&this.delay===Ee&&!1===this.pending)return he;clearInterval(he)}execute(Le,he){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ee=this._execute(Le,he);if(Ee)return Ee;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Le,he){let pe,Ee=!1;try{this.work(Le)}catch(be){Ee=!0,pe=!!be&&be||new Error(be)}if(Ee)return this.unsubscribe(),pe}_unsubscribe(){const Le=this.id,he=this.scheduler,Ee=he.actions,pe=Ee.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==pe&&Ee.splice(pe,1),null!=Le&&(this.id=this.recycleAsyncId(he,Le,null)),this.delay=null}}},2268:(tn,ot,H)=>{"use strict";H.d(ot,{v:()=>ne});let a=(()=>{class Y{constructor(Le,he=Y.now){this.SchedulerAction=Le,this.now=he}schedule(Le,he=0,Ee){return new this.SchedulerAction(this,Le).schedule(Ee,he)}}return Y.now=()=>Date.now(),Y})();class ne extends a{constructor(Pe,Le=a.now){super(Pe,()=>ne.delegate&&ne.delegate!==this?ne.delegate.now():Le()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(Pe,Le=0,he){return ne.delegate&&ne.delegate!==this?ne.delegate.schedule(Pe,Le,he):super.schedule(Pe,Le,he)}flush(Pe){const{actions:Le}=this;if(this.active)return void Le.push(Pe);let he;this.active=!0;do{if(he=Pe.execute(Pe.state,Pe.delay))break}while(Pe=Le.shift());if(this.active=!1,he){for(;Pe=Le.shift();)Pe.unsubscribe();throw he}}}},353:(tn,ot,H)=>{"use strict";H.d(ot,{z:()=>Y});var a=H(6686);const Y=new(H(2268).v)(a.o)},341:(tn,ot,H)=>{"use strict";H.d(ot,{c:()=>he,N:()=>Le});var a=H(6686),Y=H(2268);const Le=new class Pe extends Y.v{}(class ne extends a.o{constructor(pe,be){super(pe,be),this.scheduler=pe,this.work=be}schedule(pe,be=0){return be>0?super.schedule(pe,be):(this.delay=be,this.state=pe,this.scheduler.flush(this),this)}execute(pe,be){return be>0||this.closed?super.execute(pe,be):this._execute(pe,be)}requestAsyncId(pe,be,ce=0){return null!==ce&&ce>0||null===ce&&this.delay>0?super.requestAsyncId(pe,be,ce):pe.flush(this)}}),he=Le},5430:(tn,ot,H)=>{"use strict";H.d(ot,{hZ:()=>ne});const ne=function a(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3821:(tn,ot,H)=>{"use strict";H.d(ot,{L:()=>a});const a="function"==typeof Symbol&&Symbol.observable||"@@observable"},7668:(tn,ot,H)=>{"use strict";H.d(ot,{b:()=>a});const a="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},4231:(tn,ot,H)=>{"use strict";H.d(ot,{W:()=>ne});const ne=(()=>{function Y(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return Y.prototype=Object.create(Error.prototype),Y})()},4450:(tn,ot,H)=>{"use strict";H.d(ot,{K:()=>ne});const ne=(()=>{function Y(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return Y.prototype=Object.create(Error.prototype),Y})()},5279:(tn,ot,H)=>{"use strict";H.d(ot,{N:()=>ne});const ne=(()=>{function Y(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return Y.prototype=Object.create(Error.prototype),Y})()},2782:(tn,ot,H)=>{"use strict";function a(ne){setTimeout(()=>{throw ne},0)}H.d(ot,{z:()=>a})},5379:(tn,ot,H)=>{"use strict";function a(ne){return ne}H.d(ot,{y:()=>a})},6688:(tn,ot,H)=>{"use strict";H.d(ot,{k:()=>a});const a=Array.isArray||(ne=>ne&&"number"==typeof ne.length)},8515:(tn,ot,H)=>{"use strict";H.d(ot,{z:()=>a});const a=ne=>ne&&"number"==typeof ne.length&&"function"!=typeof ne},7043:(tn,ot,H)=>{"use strict";function a(ne){return"function"==typeof ne}H.d(ot,{m:()=>a})},7830:(tn,ot,H)=>{"use strict";function a(ne){return null!==ne&&"object"==typeof ne}H.d(ot,{K:()=>a})},8955:(tn,ot,H)=>{"use strict";function a(ne){return!!ne&&"function"!=typeof ne.subscribe&&"function"==typeof ne.then}H.d(ot,{t:()=>a})},2866:(tn,ot,H)=>{"use strict";function a(ne){return ne&&"function"==typeof ne.schedule}H.d(ot,{K:()=>a})},4843:(tn,ot,H)=>{"use strict";H.d(ot,{U:()=>Y,z:()=>ne});var a=H(5379);function ne(...Pe){return Y(Pe)}function Y(Pe){return 0===Pe.length?a.y:1===Pe.length?Pe[0]:function(he){return Pe.reduce((Ee,pe)=>pe(Ee),he)}}},9249:(tn,ot,H)=>{"use strict";H.d(ot,{s:()=>de});var a=H(3650),ne=H(2782),Pe=H(5430),he=H(3821),pe=H(8515),be=H(8955),ce=H(7830);const de=ie=>{if(ie&&"function"==typeof ie[he.L])return(ie=>Ie=>{const Ge=ie[he.L]();if("function"!=typeof Ge.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return Ge.subscribe(Ie)})(ie);if((0,pe.z)(ie))return(0,a.V)(ie);if((0,be.t)(ie))return(ie=>Ie=>(ie.then(Ge=>{Ie.closed||(Ie.next(Ge),Ie.complete())},Ge=>Ie.error(Ge)).then(null,ne.z),Ie))(ie);if(ie&&"function"==typeof ie[Pe.hZ])return(ie=>Ie=>{const Ge=ie[Pe.hZ]();for(;;){let st;try{st=Ge.next()}catch(et){return Ie.error(et),Ie}if(st.done){Ie.complete();break}if(Ie.next(st.value),Ie.closed)break}return"function"==typeof Ge.return&&Ie.add(()=>{Ge.return&&Ge.return()}),Ie})(ie);{const Ge=`You provided ${(0,ce.K)(ie)?"an invalid object":`'${ie}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(Ge)}}},3650:(tn,ot,H)=>{"use strict";H.d(ot,{V:()=>a});const a=ne=>Y=>{for(let Pe=0,Le=ne.length;Pe<Le&&!Y.closed;Pe++)Y.next(ne[Pe]);Y.complete()}},448:(tn,ot,H)=>{"use strict";H.d(ot,{D:()=>Le});var a=H(3489);class ne extends a.L{constructor(Ee,pe,be){super(),this.parent=Ee,this.outerValue=pe,this.outerIndex=be,this.index=0}_next(Ee){this.parent.notifyNext(this.outerValue,Ee,this.outerIndex,this.index++,this)}_error(Ee){this.parent.notifyError(Ee,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Y=H(9249),Pe=H(6498);function Le(he,Ee,pe,be,ce=new ne(he,pe,be)){if(!ce.closed)return Ee instanceof Pe.y?Ee.subscribe(ce):(0,Y.s)(Ee)(ce)}},863:(tn,ot,H)=>{var a={"./ion-accordion_2.entry.js":[9654,8592,9654],"./ion-action-sheet.entry.js":[3648,8592,3648],"./ion-alert.entry.js":[1118,8592,1118],"./ion-app_8.entry.js":[53,8592,3236],"./ion-avatar_3.entry.js":[4753,4753],"./ion-back-button.entry.js":[2073,8592,2073],"./ion-backdrop.entry.js":[8939,8939],"./ion-breadcrumb_2.entry.js":[7544,8592,7544],"./ion-button_2.entry.js":[5652,5652],"./ion-card_5.entry.js":[388,388],"./ion-checkbox.entry.js":[9922,9922],"./ion-chip.entry.js":[657,657],"./ion-col_3.entry.js":[9824,9824],"./ion-datetime-button.entry.js":[9230,6868,9230],"./ion-datetime_3.entry.js":[4959,6868,8592,4959],"./ion-fab_3.entry.js":[5836,8592,5836],"./ion-img.entry.js":[1033,1033],"./ion-infinite-scroll_2.entry.js":[8034,8592,5817],"./ion-input.entry.js":[1217,1217],"./ion-item-option_3.entry.js":[2933,8592,4651],"./ion-item_8.entry.js":[4711,8592,4711],"./ion-loading.entry.js":[9434,8592,9434],"./ion-menu_3.entry.js":[8136,8592,8136],"./ion-modal.entry.js":[2349,8592,2349],"./ion-nav_2.entry.js":[5349,8592,5349],"./ion-picker-column-internal.entry.js":[7602,8592,7602],"./ion-picker-internal.entry.js":[9016,9016],"./ion-popover.entry.js":[3804,8592,3804],"./ion-progress-bar.entry.js":[4174,4174],"./ion-radio_2.entry.js":[4432,4432],"./ion-range.entry.js":[3545,8592,1709],"./ion-refresher_2.entry.js":[3326,8592,2175],"./ion-reorder_2.entry.js":[3583,8592,1186],"./ion-ripple-effect.entry.js":[9958,9958],"./ion-route_4.entry.js":[4330,4330],"./ion-searchbar.entry.js":[8628,8592,8628],"./ion-segment_2.entry.js":[9325,8592,9325],"./ion-select_3.entry.js":[2773,2773],"./ion-slide_2.entry.js":[1650,1650],"./ion-spinner.entry.js":[4908,8592,4908],"./ion-split-pane.entry.js":[9536,9536],"./ion-tab-bar_2.entry.js":[438,8592,438],"./ion-tab_2.entry.js":[1536,8592,1536],"./ion-text.entry.js":[4376,4376],"./ion-textarea.entry.js":[6560,6560],"./ion-toast.entry.js":[6120,8592,6120],"./ion-toggle.entry.js":[5168,8592,5168],"./ion-virtual-scroll.entry.js":[2289,2289]};function ne(Y){if(!H.o(a,Y))return Promise.resolve().then(()=>{var he=new Error("Cannot find module '"+Y+"'");throw he.code="MODULE_NOT_FOUND",he});var Pe=a[Y],Le=Pe[0];return Promise.all(Pe.slice(1).map(H.e)).then(()=>H(Le))}ne.keys=()=>Object.keys(a),ne.id=863,tn.exports=ne},655:(tn,ot,H)=>{"use strict";function Pe(ve,oe){var Ce={};for(var Te in ve)Object.prototype.hasOwnProperty.call(ve,Te)&&oe.indexOf(Te)<0&&(Ce[Te]=ve[Te]);if(null!=ve&&"function"==typeof Object.getOwnPropertySymbols){var lt=0;for(Te=Object.getOwnPropertySymbols(ve);lt<Te.length;lt++)oe.indexOf(Te[lt])<0&&Object.prototype.propertyIsEnumerable.call(ve,Te[lt])&&(Ce[Te[lt]]=ve[Te[lt]])}return Ce}function Le(ve,oe,Ce,Te){var Gt,lt=arguments.length,J=lt<3?oe:null===Te?Te=Object.getOwnPropertyDescriptor(oe,Ce):Te;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)J=Reflect.decorate(ve,oe,Ce,Te);else for(var bt=ve.length-1;bt>=0;bt--)(Gt=ve[bt])&&(J=(lt<3?Gt(J):lt>3?Gt(oe,Ce,J):Gt(oe,Ce))||J);return lt>3&&J&&Object.defineProperty(oe,Ce,J),J}function pe(ve,oe,Ce,Te){return new(Ce||(Ce=Promise))(function(J,Gt){function bt(Ue){try{$e(Te.next(Ue))}catch(Je){Gt(Je)}}function at(Ue){try{$e(Te.throw(Ue))}catch(Je){Gt(Je)}}function $e(Ue){Ue.done?J(Ue.value):function lt(J){return J instanceof Ce?J:new Ce(function(Gt){Gt(J)})}(Ue.value).then(bt,at)}$e((Te=Te.apply(ve,oe||[])).next())})}H.d(ot,{_T:()=>Pe,gn:()=>Le,mG:()=>pe})},9808:(tn,ot,H)=>{"use strict";H.d(ot,{Do:()=>me,EM:()=>qs,HT:()=>Le,JF:()=>ys,K0:()=>Ee,Mx:()=>Ii,O5:()=>we,PM:()=>Hi,S$:()=>Re,V_:()=>ce,Ye:()=>vt,b0:()=>ct,bD:()=>ps,ez:()=>as,q:()=>Y,sg:()=>fi,tP:()=>Yn,w_:()=>he});var a=H(5e3);let ne=null;function Y(){return ne}function Le(F){ne||(ne=F)}class he{}const Ee=new a.OlP("DocumentToken");let pe=(()=>{class F{historyGo($){throw new Error("Not implemented")}}return F.\u0275fac=function($){return new($||F)},F.\u0275prov=a.Yz7({token:F,factory:function(){return function be(){return(0,a.LFG)(de)}()},providedIn:"platform"}),F})();const ce=new a.OlP("Location Initialized");let de=(()=>{class F extends pe{constructor($){super(),this._doc=$,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Y().getBaseHref(this._doc)}onPopState($){const re=Y().getGlobalEventTarget(this._doc,"window");return re.addEventListener("popstate",$,!1),()=>re.removeEventListener("popstate",$)}onHashChange($){const re=Y().getGlobalEventTarget(this._doc,"window");return re.addEventListener("hashchange",$,!1),()=>re.removeEventListener("hashchange",$)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname($){this.location.pathname=$}pushState($,re,ke){ie()?this._history.pushState($,re,ke):this.location.hash=ke}replaceState($,re,ke){ie()?this._history.replaceState($,re,ke):this.location.hash=ke}forward(){this._history.forward()}back(){this._history.back()}historyGo($=0){this._history.go($)}getState(){return this._history.state}}return F.\u0275fac=function($){return new($||F)(a.LFG(Ee))},F.\u0275prov=a.Yz7({token:F,factory:function(){return function Ie(){return new de((0,a.LFG)(Ee))}()},providedIn:"platform"}),F})();function ie(){return!!window.history.pushState}function Ge(F,Z){if(0==F.length)return Z;if(0==Z.length)return F;let $=0;return F.endsWith("/")&&$++,Z.startsWith("/")&&$++,2==$?F+Z.substring(1):1==$?F+Z:F+"/"+Z}function st(F){const Z=F.match(/#|\?|$/),$=Z&&Z.index||F.length;return F.slice(0,$-("/"===F[$-1]?1:0))+F.slice($)}function et(F){return F&&"?"!==F[0]?"?"+F:F}let Re=(()=>{class F{historyGo($){throw new Error("Not implemented")}}return F.\u0275fac=function($){return new($||F)},F.\u0275prov=a.Yz7({token:F,factory:function(){return(0,a.f3M)(ct)},providedIn:"root"}),F})();const De=new a.OlP("appBaseHref");let ct=(()=>{class F extends Re{constructor($,re){var ke,St,kt;super(),this._platformLocation=$,this._removeListenerFns=[],this._baseHref=null!==(kt=null!==(ke=null!=re?re:this._platformLocation.getBaseHrefFromDOM())&&void 0!==ke?ke:null===(St=(0,a.f3M)(Ee).location)||void 0===St?void 0:St.origin)&&void 0!==kt?kt:""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState($){this._removeListenerFns.push(this._platformLocation.onPopState($),this._platformLocation.onHashChange($))}getBaseHref(){return this._baseHref}prepareExternalUrl($){return Ge(this._baseHref,$)}path($=!1){const re=this._platformLocation.pathname+et(this._platformLocation.search),ke=this._platformLocation.hash;return ke&&$?`${re}${ke}`:re}pushState($,re,ke,St){const kt=this.prepareExternalUrl(ke+et(St));this._platformLocation.pushState($,re,kt)}replaceState($,re,ke,St){const kt=this.prepareExternalUrl(ke+et(St));this._platformLocation.replaceState($,re,kt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo($=0){var re,ke;null===(ke=(re=this._platformLocation).historyGo)||void 0===ke||ke.call(re,$)}}return F.\u0275fac=function($){return new($||F)(a.LFG(pe),a.LFG(De,8))},F.\u0275prov=a.Yz7({token:F,factory:F.\u0275fac,providedIn:"root"}),F})(),me=(()=>{class F extends Re{constructor($,re){super(),this._platformLocation=$,this._baseHref="",this._removeListenerFns=[],null!=re&&(this._baseHref=re)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState($){this._removeListenerFns.push(this._platformLocation.onPopState($),this._platformLocation.onHashChange($))}getBaseHref(){return this._baseHref}path($=!1){let re=this._platformLocation.hash;return null==re&&(re="#"),re.length>0?re.substring(1):re}prepareExternalUrl($){const re=Ge(this._baseHref,$);return re.length>0?"#"+re:re}pushState($,re,ke,St){let kt=this.prepareExternalUrl(ke+et(St));0==kt.length&&(kt=this._platformLocation.pathname),this._platformLocation.pushState($,re,kt)}replaceState($,re,ke,St){let kt=this.prepareExternalUrl(ke+et(St));0==kt.length&&(kt=this._platformLocation.pathname),this._platformLocation.replaceState($,re,kt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo($=0){var re,ke;null===(ke=(re=this._platformLocation).historyGo)||void 0===ke||ke.call(re,$)}}return F.\u0275fac=function($){return new($||F)(a.LFG(pe),a.LFG(De,8))},F.\u0275prov=a.Yz7({token:F,factory:F.\u0275fac}),F})(),vt=(()=>{class F{constructor($){this._subject=new a.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=$;const re=this._locationStrategy.getBaseHref();this._baseHref=st(Be(re)),this._locationStrategy.onPopState(ke=>{this._subject.emit({url:this.path(!0),pop:!0,state:ke.state,type:ke.type})})}ngOnDestroy(){var $;null===($=this._urlChangeSubscription)||void 0===$||$.unsubscribe(),this._urlChangeListeners=[]}path($=!1){return this.normalize(this._locationStrategy.path($))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo($,re=""){return this.path()==this.normalize($+et(re))}normalize($){return F.stripTrailingSlash(function xt(F,Z){return F&&Z.startsWith(F)?Z.substring(F.length):Z}(this._baseHref,Be($)))}prepareExternalUrl($){return $&&"/"!==$[0]&&($="/"+$),this._locationStrategy.prepareExternalUrl($)}go($,re="",ke=null){this._locationStrategy.pushState(ke,"",$,re),this._notifyUrlChangeListeners(this.prepareExternalUrl($+et(re)),ke)}replaceState($,re="",ke=null){this._locationStrategy.replaceState(ke,"",$,re),this._notifyUrlChangeListeners(this.prepareExternalUrl($+et(re)),ke)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo($=0){var re,ke;null===(ke=(re=this._locationStrategy).historyGo)||void 0===ke||ke.call(re,$)}onUrlChange($){return this._urlChangeListeners.push($),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(re=>{this._notifyUrlChangeListeners(re.url,re.state)})),()=>{var re;const ke=this._urlChangeListeners.indexOf($);this._urlChangeListeners.splice(ke,1),0===this._urlChangeListeners.length&&(null===(re=this._urlChangeSubscription)||void 0===re||re.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners($="",re){this._urlChangeListeners.forEach(ke=>ke($,re))}subscribe($,re,ke){return this._subject.subscribe({next:$,error:re,complete:ke})}}return F.normalizeQueryParams=et,F.joinWithSlash=Ge,F.stripTrailingSlash=st,F.\u0275fac=function($){return new($||F)(a.LFG(Re))},F.\u0275prov=a.Yz7({token:F,factory:function(){return function mt(){return new vt((0,a.LFG)(Re))}()},providedIn:"root"}),F})();function Be(F){return F.replace(/\/index.html$/,"")}function Ii(F,Z){Z=encodeURIComponent(Z);for(const $ of F.split(";")){const re=$.indexOf("="),[ke,St]=-1==re?[$,""]:[$.slice(0,re),$.slice(re+1)];if(ke.trim()===Z)return decodeURIComponent(St)}return null}class bi{constructor(Z,$,re,ke){this.$implicit=Z,this.ngForOf=$,this.index=re,this.count=ke}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let fi=(()=>{class F{constructor($,re,ke){this._viewContainer=$,this._template=re,this._differs=ke,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf($){this._ngForOf=$,this._ngForOfDirty=!0}set ngForTrackBy($){this._trackByFn=$}get ngForTrackBy(){return this._trackByFn}set ngForTemplate($){$&&(this._template=$)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const $=this._ngForOf;!this._differ&&$&&(this._differ=this._differs.find($).create(this.ngForTrackBy))}if(this._differ){const $=this._differ.diff(this._ngForOf);$&&this._applyChanges($)}}_applyChanges($){const re=this._viewContainer;$.forEachOperation((ke,St,kt)=>{if(null==ke.previousIndex)re.createEmbeddedView(this._template,new bi(ke.item,this._ngForOf,-1,-1),null===kt?void 0:kt);else if(null==kt)re.remove(null===St?void 0:St);else if(null!==St){const xn=re.get(St);re.move(xn,kt),Li(xn,ke)}});for(let ke=0,St=re.length;ke<St;ke++){const xn=re.get(ke).context;xn.index=ke,xn.count=St,xn.ngForOf=this._ngForOf}$.forEachIdentityChange(ke=>{Li(re.get(ke.currentIndex),ke)})}static ngTemplateContextGuard($,re){return!0}}return F.\u0275fac=function($){return new($||F)(a.Y36(a.s_b),a.Y36(a.Rgc),a.Y36(a.ZZ4))},F.\u0275dir=a.lG2({type:F,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),F})();function Li(F,Z){F.context.$implicit=Z.item}let we=(()=>{class F{constructor($,re){this._viewContainer=$,this._context=new Ze,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=re}set ngIf($){this._context.$implicit=this._context.ngIf=$,this._updateView()}set ngIfThen($){Xe("ngIfThen",$),this._thenTemplateRef=$,this._thenViewRef=null,this._updateView()}set ngIfElse($){Xe("ngIfElse",$),this._elseTemplateRef=$,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard($,re){return!0}}return F.\u0275fac=function($){return new($||F)(a.Y36(a.s_b),a.Y36(a.Rgc))},F.\u0275dir=a.lG2({type:F,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),F})();class Ze{constructor(){this.$implicit=null,this.ngIf=null}}function Xe(F,Z){if(Z&&!Z.createEmbeddedView)throw new Error(`${F} must be a TemplateRef, but received '${(0,a.AaK)(Z)}'.`)}let Yn=(()=>{class F{constructor($){this._viewContainerRef=$,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges($){if($.ngTemplateOutlet||$.ngTemplateOutletInjector){const re=this._viewContainerRef;if(this._viewRef&&re.remove(re.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:ke,ngTemplateOutletContext:St,ngTemplateOutletInjector:kt}=this;this._viewRef=re.createEmbeddedView(ke,St,kt?{injector:kt}:void 0)}else this._viewRef=null}else this._viewRef&&$.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return F.\u0275fac=function($){return new($||F)(a.Y36(a.s_b))},F.\u0275dir=a.lG2({type:F,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[a.TTD]}),F})(),as=(()=>{class F{}return F.\u0275fac=function($){return new($||F)},F.\u0275mod=a.oAB({type:F}),F.\u0275inj=a.cJS({}),F})();const ps="browser";function Hi(F){return"server"===F}let qs=(()=>{class F{}return F.\u0275prov=(0,a.Yz7)({token:F,providedIn:"root",factory:()=>new Us((0,a.LFG)(Ee),window)}),F})();class Us{constructor(Z,$){this.document=Z,this.window=$,this.offset=()=>[0,0]}setOffset(Z){this.offset=Array.isArray(Z)?()=>Z:Z}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(Z){this.supportsScrolling()&&this.window.scrollTo(Z[0],Z[1])}scrollToAnchor(Z){if(!this.supportsScrolling())return;const $=function yi(F,Z){const $=F.getElementById(Z)||F.getElementsByName(Z)[0];if($)return $;if("function"==typeof F.createTreeWalker&&F.body&&(F.body.createShadowRoot||F.body.attachShadow)){const re=F.createTreeWalker(F.body,NodeFilter.SHOW_ELEMENT);let ke=re.currentNode;for(;ke;){const St=ke.shadowRoot;if(St){const kt=St.getElementById(Z)||St.querySelector(`[name="${Z}"]`);if(kt)return kt}ke=re.nextNode()}}return null}(this.document,Z);$&&(this.scrollToElement($),$.focus())}setHistoryScrollRestoration(Z){if(this.supportScrollRestoration()){const $=this.window.history;$&&$.scrollRestoration&&($.scrollRestoration=Z)}}scrollToElement(Z){const $=Z.getBoundingClientRect(),re=$.left+this.window.pageXOffset,ke=$.top+this.window.pageYOffset,St=this.offset();this.window.scrollTo(re-St[0],ke-St[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const Z=wr(this.window.history)||wr(Object.getPrototypeOf(this.window.history));return!(!Z||!Z.writable&&!Z.set)}catch(Z){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(Z){return!1}}}function wr(F){return Object.getOwnPropertyDescriptor(F,"scrollRestoration")}class ys{}},5e3:(tn,ot,H)=>{"use strict";H.d(ot,{$8M:()=>Qr,$Z:()=>Fm,AFp:()=>mE,AaK:()=>pe,BQk:()=>Sh,CHM:()=>Ko,CRH:()=>Y0,CZH:()=>iv,CqO:()=>Ip,D6c:()=>Ob,EJc:()=>Yw,EpF:()=>yy,F$t:()=>_f,F4k:()=>Ep,FYo:()=>K,FiY:()=>hs,G48:()=>pb,Gf:()=>W0,GfV:()=>hn,GkF:()=>Wg,Gpc:()=>de,Hsn:()=>qg,JOm:()=>Ka,KtG:()=>ri,LFG:()=>fe,LSH:()=>Kr,Lbi:()=>Gw,Lck:()=>kI,MMx:()=>d_,NdJ:()=>wp,OlP:()=>Di,Oqu:()=>om,PXZ:()=>lb,Q6J:()=>mp,QGY:()=>zg,QP$:()=>ar,Qsj:()=>ue,R0b:()=>Lu,RDi:()=>Xc,Rgc:()=>gm,SBq:()=>p,Sil:()=>Kw,Suo:()=>z0,TTD:()=>Tr,TgZ:()=>_p,X6Q:()=>fb,XFs:()=>Wt,Xpm:()=>$t,Xts:()=>Ku,Y36:()=>$c,YKP:()=>D0,YNc:()=>mf,Yjl:()=>dt,Yz7:()=>ft,Z0I:()=>bn,ZZ4:()=>k_,_Bn:()=>C0,_UZ:()=>Dh,_Vd:()=>Ho,_c5:()=>Mb,_uU:()=>Ry,aQg:()=>F_,c2e:()=>Ww,cJS:()=>Vt,cg1:()=>Cf,dDg:()=>ib,dqk:()=>yr,eFA:()=>xE,ekj:()=>Tp,eoX:()=>SE,f3M:()=>wt,g9A:()=>vE,h0i:()=>kp,hGG:()=>Rb,hij:()=>Ap,iGM:()=>G0,ifc:()=>Tt,ip1:()=>gE,jDz:()=>T0,kL8:()=>cm,lG2:()=>He,lqb:()=>zs,lri:()=>CE,n5z:()=>ll,oAB:()=>On,oxw:()=>_y,q4F:()=>Un,qLn:()=>Nc,qOj:()=>df,qZA:()=>Nu,rWj:()=>DE,sBO:()=>gb,sIi:()=>hf,s_b:()=>tv,soG:()=>sv,tb:()=>_E,tp0:()=>lo,uIk:()=>Hg,vHH:()=>st,vpe:()=>Kc,wAp:()=>xr,xp6:()=>Hf,ynx:()=>vf,z2F:()=>ov,zSh:()=>ml,zs3:()=>Ed});var a=H(8929),ne=H(2654),Y=H(6498),Pe=H(6787),Le=H(2474);function he(n){for(let r in n)if(n[r]===he)return r;throw Error("Could not find renamed property on target object.")}function Ee(n,r){for(const s in r)r.hasOwnProperty(s)&&!n.hasOwnProperty(s)&&(n[s]=r[s])}function pe(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(pe).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const r=n.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function be(n,r){return null==n||""===n?null===r?"":r:null==r||""===r?n:n+" "+r}const ce=he({__forward_ref__:he});function de(n){return n.__forward_ref__=de,n.toString=function(){return pe(this())},n}function ie(n){return Ie(n)?n():n}function Ie(n){return"function"==typeof n&&n.hasOwnProperty(ce)&&n.__forward_ref__===de}class st extends Error{constructor(r,s){super(function et(n,r){return`NG0${Math.abs(n)}${r?": "+r.trim():""}`}(r,s)),this.code=r}}function Re(n){return"string"==typeof n?n:null==n?"":String(n)}function mt(n,r){throw new st(-201,!1)}function at(n,r){null==n&&function $e(n,r,s,l){throw new Error(`ASSERTION ERROR: ${n}`+(null==l?"":` [Expected=> ${s} ${l} ${r} <=Actual]`))}(r,n,null,"!=")}function ft(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function Vt(n){return{providers:n.providers||[],imports:n.imports||[]}}function Nt(n){return In(n,cr)||In(n,or)}function bn(n){return null!==Nt(n)}function In(n,r){return n.hasOwnProperty(r)?n[r]:null}function Wn(n){return n&&(n.hasOwnProperty(Hn)||n.hasOwnProperty(mr))?n[Hn]:null}const cr=he({\u0275prov:he}),Hn=he({\u0275inj:he}),or=he({ngInjectableDef:he}),mr=he({ngInjectorDef:he});var Wt=(()=>((Wt=Wt||{})[Wt.Default=0]="Default",Wt[Wt.Host=1]="Host",Wt[Wt.Self=2]="Self",Wt[Wt.SkipSelf=4]="SkipSelf",Wt[Wt.Optional=8]="Optional",Wt))();let rr;function tr(n){const r=rr;return rr=n,r}function Jn(n,r,s){const l=Nt(n);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:s&Wt.Optional?null:void 0!==r?r:void mt(pe(n))}function an(n){return{toString:n}.toString()}var fr=(()=>((fr=fr||{})[fr.OnPush=0]="OnPush",fr[fr.Default=1]="Default",fr))(),Tt=(()=>{return(n=Tt||(Tt={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",Tt;var n})();const yr=(()=>"undefined"!=typeof globalThis&&globalThis||"undefined"!=typeof global&&global||"undefined"!=typeof window&&window||"undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self)(),Pr={},$n=[],ji=he({\u0275cmp:he}),Ln=he({\u0275dir:he}),si=he({\u0275pipe:he}),ir=he({\u0275mod:he}),Yr=he({\u0275fac:he}),ei=he({__NG_ELEMENT_ID__:he});let mn=0;function $t(n){return an(()=>{const s=!0===n.standalone,l={},f={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===fr.OnPush,directiveDefs:null,pipeDefs:null,standalone:s,dependencies:s&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||$n,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||Tt.Emulated,id:"c"+mn++,styles:n.styles||$n,_:null,setInput:null,schemas:n.schemas||null,tView:null},v=n.dependencies,C=n.features;return f.inputs=Ne(n.inputs,l),f.outputs=Ne(n.outputs),C&&C.forEach(x=>x(f)),f.directiveDefs=v?()=>("function"==typeof v?v():v).map(kn).filter(Cn):null,f.pipeDefs=v?()=>("function"==typeof v?v():v).map(_n).filter(Cn):null,f})}function kn(n){return tt(n)||on(n)}function Cn(n){return null!==n}function On(n){return an(()=>({type:n.type,bootstrap:n.bootstrap||$n,declarations:n.declarations||$n,imports:n.imports||$n,exports:n.exports||$n,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function Ne(n,r){if(null==n)return Pr;const s={};for(const l in n)if(n.hasOwnProperty(l)){let f=n[l],v=f;Array.isArray(f)&&(v=f[1],f=f[0]),s[f]=l,r&&(r[f]=v)}return s}const He=$t;function dt(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function tt(n){return n[ji]||null}function on(n){return n[Ln]||null}function _n(n){return n[si]||null}function ar(n){const r=tt(n)||on(n)||_n(n);return null!==r&&r.standalone}function _r(n,r){const s=n[ir]||null;if(!s&&!0===r)throw new Error(`Type ${pe(n)} does not have '\u0275mod' property.`);return s}function Xe(n){return Array.isArray(n)&&"object"==typeof n[1]}function Ct(n){return Array.isArray(n)&&!0===n[1]}function _e(n){return 0!=(8&n.flags)}function qe(n){return 2==(2&n.flags)}function yt(n){return 1==(1&n.flags)}function Ot(n){return null!==n.template}function jt(n){return 0!=(256&n[2])}function es(n,r){return n.hasOwnProperty(Yr)?n[Yr]:null}class Bs{constructor(r,s,l){this.previousValue=r,this.currentValue=s,this.firstChange=l}isFirstChange(){return this.firstChange}}function Tr(){return dr}function dr(n){return n.type.prototype.ngOnChanges&&(n.setInput=Ys),mi}function mi(){const n=pi(this),r=null==n?void 0:n.current;if(r){const s=n.previous;if(s===Pr)n.previous=r;else for(let l in r)s[l]=r[l];n.current=null,this.ngOnChanges(r)}}function Ys(n,r,s,l){const f=pi(n)||function as(n,r){return n[$s]=r}(n,{previous:Pr,current:null}),v=f.current||(f.current={}),C=f.previous,x=this.declaredInputs[s],L=C[x];v[x]=new Bs(L&&L.currentValue,r,C===Pr),n[l]=r}Tr.ngInherit=!0;const $s="__ngSimpleChanges__";function pi(n){return n[$s]||null}function ai(n){for(;Array.isArray(n);)n=n[0];return n}function wr(n,r){return ai(r[n])}function yi(n,r){return ai(r[n.index])}function ys(n,r){return n.data[r]}function Or(n,r){const s=r[n];return Xe(s)?s:s[0]}function Ts(n){return 64==(64&n[2])}function Is(n,r){return null==r?null:n[r]}function Ri(n){n[18]=0}function Vr(n,r){n[5]+=r;let s=n,l=n[3];for(;null!==l&&(1===r&&1===s[5]||-1===r&&0===s[5]);)l[5]+=r,s=l,l=l[3]}const Kn={lFrame:Zs(null),bindingsEnabled:!0};function Ps(){return Kn.bindingsEnabled}function qt(){return Kn.lFrame.lView}function br(){return Kn.lFrame.tView}function Ko(n){return Kn.lFrame.contextLView=n,n[8]}function ri(n){return Kn.lFrame.contextLView=null,n}function Ti(){let n=bo();for(;null!==n&&64===n.type;)n=n.parent;return n}function bo(){return Kn.lFrame.currentTNode}function ws(n,r){const s=Kn.lFrame;s.currentTNode=n,s.isParent=r}function As(){return Kn.lFrame.isParent}function G(){Kn.lFrame.isParent=!1}function ut(){return Kn.lFrame.bindingIndex++}function ni(n,r){const s=Kn.lFrame;s.bindingIndex=s.bindingRootIndex=n,ci(r)}function ci(n){Kn.lFrame.currentDirectiveIndex=n}function bs(){return Kn.lFrame.currentQueryIndex}function Cs(n){Kn.lFrame.currentQueryIndex=n}function cs(n){const r=n[1];return 2===r.type?r.declTNode:1===r.type?n[6]:null}function ks(n,r,s){if(s&Wt.SkipSelf){let f=r,v=n;for(;!(f=f.parent,null!==f||s&Wt.Host||(f=cs(v),null===f||(v=v[15],10&f.type))););if(null===f)return!1;r=f,n=v}const l=Kn.lFrame=la();return l.currentTNode=r,l.lView=n,!0}function Co(n){const r=la(),s=n[1];Kn.lFrame=r,r.currentTNode=s.firstChild,r.lView=n,r.tView=s,r.contextLView=n,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function la(){const n=Kn.lFrame,r=null===n?null:n.child;return null===r?Zs(n):r}function Zs(n){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=r),r}function ua(){const n=Kn.lFrame;return Kn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const F=ua;function Z(){const n=ua();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function ke(){return Kn.lFrame.selectedIndex}function St(n){Kn.lFrame.selectedIndex=n}function kt(){const n=Kn.lFrame;return ys(n.tView,n.selectedIndex)}function ii(n,r){for(let s=r.directiveStart,l=r.directiveEnd;s<l;s++){const v=n.data[s].type.prototype,{ngAfterContentInit:C,ngAfterContentChecked:x,ngAfterViewInit:L,ngAfterViewChecked:q,ngOnDestroy:le}=v;C&&(n.contentHooks||(n.contentHooks=[])).push(-s,C),x&&((n.contentHooks||(n.contentHooks=[])).push(s,x),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(s,x)),L&&(n.viewHooks||(n.viewHooks=[])).push(-s,L),q&&((n.viewHooks||(n.viewHooks=[])).push(s,q),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(s,q)),null!=le&&(n.destroyHooks||(n.destroyHooks=[])).push(s,le)}}function xi(n,r,s){ro(n,r,3,s)}function vs(n,r,s,l){(3&n[2])===s&&ro(n,r,s,l)}function no(n,r){let s=n[2];(3&s)===r&&(s&=2047,s+=1,n[2]=s)}function ro(n,r,s,l){const v=null!=l?l:-1,C=r.length-1;let x=0;for(let L=void 0!==l?65535&n[18]:0;L<C;L++)if("number"==typeof r[L+1]){if(x=r[L],null!=l&&x>=l)break}else r[L]<0&&(n[18]+=65536),(x<v||-1==v)&&(Do(n,s,r,L),n[18]=(4294901760&n[18])+L+2),L++}function Do(n,r,s,l){const f=s[l]<0,v=s[l+1],x=n[f?-s[l]:s[l]];if(f){if(n[2]>>11<n[18]>>16&&(3&n[2])===r){n[2]+=2048;try{v.call(x)}finally{}}}else try{v.call(x)}finally{}}class Qs{constructor(r,s,l){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=l}}function Ma(n,r,s){let l=0;for(;l<s.length;){const f=s[l];if("number"==typeof f){if(0!==f)break;l++;const v=s[l++],C=s[l++],x=s[l++];n.setAttribute(r,C,x,v)}else{const v=f,C=s[++l];Zo(v)?n.setProperty(r,v,C):n.setAttribute(r,v,C),l++}}return l}function fo(n){return 3===n||4===n||6===n}function Zo(n){return 64===n.charCodeAt(0)}function po(n,r){if(null!==r&&0!==r.length)if(null===n||0===n.length)n=r.slice();else{let s=-1;for(let l=0;l<r.length;l++){const f=r[l];"number"==typeof f?s=f:0===s||du(n,s,f,null,-1===s||2===s?r[++l]:null)}}return n}function du(n,r,s,l,f){let v=0,C=n.length;if(-1===r)C=-1;else for(;v<n.length;){const x=n[v++];if("number"==typeof x){if(x===r){C=-1;break}if(x>r){C=v-1;break}}}for(;v<n.length;){const x=n[v];if("number"==typeof x)break;if(x===s){if(null===l)return void(null!==f&&(n[v+1]=f));if(l===n[v+1])return void(n[v+2]=f)}v++,null!==l&&v++,null!==f&&v++}-1!==C&&(n.splice(C,0,r),v=C+1),n.splice(v++,0,s),null!==l&&n.splice(v++,0,l),null!==f&&n.splice(v++,0,f)}function Wl(n){return-1!==n}function zr(n){return 32767&n}function ko(n,r){let s=function _a(n){return n>>16}(n),l=r;for(;s>0;)l=l[15],s--;return l}let io=!0;function ca(n){const r=io;return io=n,r}let zi=0;const wn={};function Hs(n,r){const s=Pt(n,r);if(-1!==s)return s;const l=r[1];l.firstCreatePass&&(n.injectorIndex=r.length,cn(l.data,n),cn(r,null),cn(l.blueprint,null));const f=Qt(n,r),v=n.injectorIndex;if(Wl(f)){const C=zr(f),x=ko(f,r),L=x[1].data;for(let q=0;q<8;q++)r[v+q]=x[C+q]|L[C+q]}return r[v+8]=f,v}function cn(n,r){n.push(0,0,0,0,0,0,0,0,r)}function Pt(n,r){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===r[n.injectorIndex+8]?-1:n.injectorIndex}function Qt(n,r){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let s=0,l=null,f=r;for(;null!==f;){if(l=ea(f),null===l)return-1;if(s++,f=f[15],-1!==l.injectorIndex)return l.injectorIndex|s<<16}return-1}function Ni(n,r,s){!function En(n,r,s){let l;"string"==typeof s?l=s.charCodeAt(0)||0:s.hasOwnProperty(ei)&&(l=s[ei]),null==l&&(l=s[ei]=zi++);const f=255&l;r.data[n+(f>>5)]|=1<<f}(n,r,s)}function Ea(n,r,s){if(s&Wt.Optional||void 0!==n)return n;mt()}function Fo(n,r,s,l){if(s&Wt.Optional&&void 0===l&&(l=null),0==(s&(Wt.Self|Wt.Host))){const f=n[9],v=tr(void 0);try{return f?f.get(r,l,s&Wt.Optional):Jn(r,l,s&Wt.Optional)}finally{tr(v)}}return Ea(l,0,s)}function Qo(n,r,s,l=Wt.Default,f){if(null!==n){if(1024&r[2]){const C=function er(n,r,s,l,f){let v=n,C=r;for(;null!==v&&null!==C&&1024&C[2]&&!(256&C[2]);){const x=Xo(v,C,s,l|Wt.Self,wn);if(x!==wn)return x;let L=v.parent;if(!L){const q=C[21];if(q){const le=q.get(s,wn,l);if(le!==wn)return le}L=ea(C),C=C[15]}v=L}return f}(n,r,s,l,wn);if(C!==wn)return C}const v=Xo(n,r,s,l,wn);if(v!==wn)return v}return Fo(r,s,l,f)}function Xo(n,r,s,l,f){const v=function hu(n){if("string"==typeof n)return n.charCodeAt(0)||0;const r=n.hasOwnProperty(ei)?n[ei]:void 0;return"number"==typeof r?r>=0?255&r:Ia:r}(s);if("function"==typeof v){if(!ks(r,n,l))return l&Wt.Host?Ea(f,0,l):Fo(r,s,l,f);try{const C=v(l);if(null!=C||l&Wt.Optional)return C;mt()}finally{F()}}else if("number"==typeof v){let C=null,x=Pt(n,r),L=-1,q=l&Wt.Host?r[16][6]:null;for((-1===x||l&Wt.SkipSelf)&&(L=-1===x?Qt(n,r):r[x+8],-1!==L&&da(l,!1)?(C=r[1],x=zr(L),r=ko(L,r)):x=-1);-1!==x;){const le=r[1];if(Cl(v,x,le.data)){const Se=zl(x,r,s,C,l,q);if(Se!==wn)return Se}L=r[x+8],-1!==L&&da(l,r[1].data[x+8]===q)&&Cl(v,x,r)?(C=le,x=zr(L),r=ko(L,r)):x=-1}}return f}function zl(n,r,s,l,f,v){const C=r[1],x=C.data[n+8],le=Jo(x,C,s,null==l?qe(x)&&io:l!=C&&0!=(3&x.type),f&Wt.Host&&v===x);return null!==le?Oa(r,C,le,x):wn}function Jo(n,r,s,l,f){const v=n.providerIndexes,C=r.data,x=1048575&v,L=n.directiveStart,le=v>>20,it=f?x+le:n.directiveEnd;for(let At=l?x:x+le;At<it;At++){const Kt=C[At];if(At<L&&s===Kt||At>=L&&Kt.type===s)return At}if(f){const At=C[L];if(At&&Ot(At)&&At.type===s)return L}return null}function Oa(n,r,s,l){let f=n[s];const v=r.data;if(function Bi(n){return n instanceof Qs}(f)){const C=f;C.resolving&&function ct(n,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${n}`:"";throw new st(-200,`Circular dependency in DI detected for ${n}${s}`)}(function De(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():Re(n)}(v[s]));const x=ca(C.canSeeViewProviders);C.resolving=!0;const L=C.injectImpl?tr(C.injectImpl):null;ks(n,l,Wt.Default);try{f=n[s]=C.factory(void 0,v,n,l),r.firstCreatePass&&s>=l.directiveStart&&function Oi(n,r,s){const{ngOnChanges:l,ngOnInit:f,ngDoCheck:v}=r.type.prototype;if(l){const C=dr(r);(s.preOrderHooks||(s.preOrderHooks=[])).push(n,C),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,C)}f&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-n,f),v&&((s.preOrderHooks||(s.preOrderHooks=[])).push(n,v),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(n,v))}(s,v[s],r)}finally{null!==L&&tr(L),ca(x),C.resolving=!1,F()}}return f}function Cl(n,r,s){return!!(s[r+(n>>5)]&1<<n)}function da(n,r){return!(n&Wt.Self||n&Wt.Host&&r)}class ur{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,l){return Qo(this._tNode,this._lView,r,l,s)}}function Ia(){return new ur(Ti(),qt())}function ll(n){return an(()=>{const r=n.prototype.constructor,s=r[Yr]||Mi(r),l=Object.prototype;let f=Object.getPrototypeOf(n.prototype).constructor;for(;f&&f!==l;){const v=f[Yr]||Mi(f);if(v&&v!==s)return v;f=Object.getPrototypeOf(f)}return v=>new v})}function Mi(n){return Ie(n)?()=>{const r=Mi(ie(n));return r&&r()}:es(n)}function ea(n){const r=n[1],s=r.type;return 2===s?r.declTNode:1===s?n[6]:null}function Qr(n){return function Ra(n,r){if("class"===r)return n.classes;if("style"===r)return n.styles;const s=n.attrs;if(s){const l=s.length;let f=0;for(;f<l;){const v=s[f];if(fo(v))break;if(0===v)f+=2;else if("number"==typeof v)for(f++;f<l&&"string"==typeof s[f];)f++;else{if(v===r)return s[f+1];f+=2}}}return null}(Ti(),n)}const _i="__parameters__";function di(n,r,s){return an(()=>{const l=function ta(n){return function(...s){if(n){const l=n(...s);for(const f in l)this[f]=l[f]}}}(r);function f(...v){if(this instanceof f)return l.apply(this,v),this;const C=new f(...v);return x.annotation=C,x;function x(L,q,le){const Se=L.hasOwnProperty(_i)?L[_i]:Object.defineProperty(L,_i,{value:[]})[_i];for(;Se.length<=le;)Se.push(null);return(Se[le]=Se[le]||[]).push(C),L}}return s&&(f.prototype=Object.create(s.prototype)),f.prototype.ngMetadataName=n,f.annotationCls=f,f})}class Di{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=ft({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function yo(n,r){void 0===r&&(r=n);for(let s=0;s<n.length;s++){let l=n[s];Array.isArray(l)?(r===n&&(r=n.slice(0,s)),yo(l,r)):r!==n&&r.push(l)}return r}function xs(n,r){n.forEach(s=>Array.isArray(s)?xs(s,r):r(s))}function Ga(n,r,s){r>=n.length?n.push(s):n.splice(r,0,s)}function Pa(n,r){return r>=n.length-1?n.pop():n.splice(r,1)[0]}function ka(n,r){const s=[];for(let l=0;l<n;l++)s.push(r);return s}function Ms(n,r,s){let l=Xr(n,r);return l>=0?n[1|l]=s:(l=~l,function Ja(n,r,s,l){let f=n.length;if(f==r)n.push(s,l);else if(1===f)n.push(l,n[0]),n[0]=s;else{for(f--,n.push(n[f-1],n[f]);f>r;)n[f]=n[f-2],f--;n[r]=s,n[r+1]=l}}(n,l,r,s)),l}function ds(n,r){const s=Xr(n,r);if(s>=0)return n[1|s]}function Xr(n,r){return function Fa(n,r,s){let l=0,f=n.length>>s;for(;f!==l;){const v=l+(f-l>>1),C=n[v<<s];if(r===C)return v<<s;C>r?f=v:l=v+1}return~(f<<s)}(n,r,1)}const w={},N="__NG_DI_FLAG__",j="ngTempTokenPath",Ae=/\n/gm,It="__source";let O;function U(n){const r=O;return O=n,r}function Q(n,r=Wt.Default){if(void 0===O)throw new st(-203,!1);return null===O?Jn(n,void 0,r):O.get(n,r&Wt.Optional?null:void 0,r)}function fe(n,r=Wt.Default){return(function Nr(){return rr}()||Q)(ie(n),r)}function wt(n,r=Wt.Default){return"number"!=typeof r&&(r=0|(r.optional&&8)|(r.host&&1)|(r.self&&2)|(r.skipSelf&&4)),fe(n,r)}function Ht(n){const r=[];for(let s=0;s<n.length;s++){const l=ie(n[s]);if(Array.isArray(l)){if(0===l.length)throw new st(900,!1);let f,v=Wt.Default;for(let C=0;C<l.length;C++){const x=l[C],L=Vn(x);"number"==typeof L?-1===L?f=x.token:v|=L:f=x}r.push(fe(f,v))}else r.push(fe(l))}return r}function sn(n,r){return n[N]=r,n.prototype[N]=r,n}function Vn(n){return n[N]}const hs=sn(di("Optional"),8),lo=sn(di("SkipSelf"),4);let Uu;function Xc(n){Uu=n}class cl{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Ws(n){return n instanceof cl?n.changingThisBreaksApplicationSecurity:n}const pa=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Ss=(()=>((Ss=Ss||{})[Ss.NONE=0]="NONE",Ss[Ss.HTML=1]="HTML",Ss[Ss.STYLE=2]="STYLE",Ss[Ss.SCRIPT=3]="SCRIPT",Ss[Ss.URL=4]="URL",Ss[Ss.RESOURCE_URL=5]="RESOURCE_URL",Ss))();function Kr(n){const r=function Uo(){const n=qt();return n&&n[12]}();return r?r.sanitize(Ss.URL,n)||"":function il(n,r){const s=function ed(n){return n instanceof cl&&n.getTypeName()||null}(n);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see https://g.co/ng/security#xss)`)}return s===r}(n,"URL")?Ws(n):function Bo(n){return(n=String(n)).match(pa)?n:"unsafe:"+n}(Re(n))}const Ku=new Di("ENVIRONMENT_INITIALIZER"),fl=new Di("INJECTOR",-1),Cc=new Di("INJECTOR_DEF_TYPES");class Dc{get(r,s=w){if(s===w){const l=new Error(`NullInjectorError: No provider for ${pe(r)}!`);throw l.name="NullInjectorError",l}return s}}function jr(...n){return{\u0275providers:Sc(0,n)}}function Sc(n,...r){const s=[],l=new Set;let f;return xs(r,v=>{const C=v;kl(C,s,[],l)&&(f||(f=[]),f.push(C))}),void 0!==f&&pl(f,s),s}function pl(n,r){for(let s=0;s<n.length;s++){const{providers:f}=n[s];xs(f,v=>{r.push(v)})}}function kl(n,r,s,l){if(!(n=ie(n)))return!1;let f=null,v=Wn(n);const C=!v&&tt(n);if(v||C){if(C&&!C.standalone)return!1;f=n}else{const L=n.ngModule;if(v=Wn(L),!v)return!1;f=L}const x=l.has(f);if(C){if(x)return!1;if(l.add(f),C.dependencies){const L="function"==typeof C.dependencies?C.dependencies():C.dependencies;for(const q of L)kl(q,r,s,l)}}else{if(!v)return!1;{if(null!=v.imports&&!x){let q;l.add(f);try{xs(v.imports,le=>{kl(le,r,s,l)&&(q||(q=[]),q.push(le))})}finally{}void 0!==q&&pl(q,r)}if(!x){const q=es(f)||(()=>new f);r.push({provide:f,useFactory:q,deps:$n},{provide:Cc,useValue:f,multi:!0},{provide:Ku,useValue:()=>fe(f),multi:!0})}const L=v.providers;null==L||x||xs(L,le=>{r.push(le)})}}return f!==n&&void 0!==n.providers}const Xl=he({provide:String,useValue:he});function Cu(n){return null!==n&&"object"==typeof n&&Xl in n}function za(n){return"function"==typeof n}const ml=new Di("Set Injector scope."),Ro={},Jl={};let Qu;function yl(){return void 0===Qu&&(Qu=new Dc),Qu}class zs{}class zd extends zs{constructor(r,s,l,f){super(),this.parent=s,this.source=l,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Ba(r,C=>this.processProvider(C)),this.records.set(fl,qi(void 0,this)),f.has("environment")&&this.records.set(zs,qi(void 0,this));const v=this.records.get(ml);null!=v&&"string"==typeof v.value&&this.scopes.add(v.value),this.injectorDefTypes=new Set(this.get(Cc.multi,$n,Wt.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();for(const r of this._onDestroyHooks)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(r){this._onDestroyHooks.push(r)}runInContext(r){this.assertNotDestroyed();const s=U(this),l=tr(void 0);try{return r()}finally{U(s),tr(l)}}get(r,s=w,l=Wt.Default){this.assertNotDestroyed();const f=U(this),v=tr(void 0);try{if(!(l&Wt.SkipSelf)){let x=this.records.get(r);if(void 0===x){const L=function vl(n){return"function"==typeof n||"object"==typeof n&&n instanceof Di}(r)&&Nt(r);x=L&&this.injectableDefInScope(L)?qi(eo(r),Ro):null,this.records.set(r,x)}if(null!=x)return this.hydrate(r,x)}return(l&Wt.Self?yl():this.parent).get(r,s=l&Wt.Optional&&s===w?null:s)}catch(C){if("NullInjectorError"===C.name){if((C[j]=C[j]||[]).unshift(pe(r)),f)throw C;return function pr(n,r,s,l){const f=n[j];throw r[It]&&f.unshift(r[It]),n.message=function Ar(n,r,s,l=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let f=pe(r);if(Array.isArray(r))f=r.map(pe).join(" -> ");else if("object"==typeof r){let v=[];for(let C in r)if(r.hasOwnProperty(C)){let x=r[C];v.push(C+":"+("string"==typeof x?JSON.stringify(x):pe(x)))}f=`{${v.join(", ")}}`}return`${s}${l?"("+l+")":""}[${f}]: ${n.replace(Ae,"\n  ")}`}("\n"+n.message,f,s,l),n.ngTokenPath=f,n[j]=null,n}(C,r,"R3InjectorError",this.source)}throw C}finally{tr(v),U(f)}}resolveInjectorInitializers(){const r=U(this),s=tr(void 0);try{const l=this.get(Ku.multi,$n,Wt.Self);for(const f of l)f()}finally{U(r),tr(s)}}toString(){const r=[],s=this.records;for(const l of s.keys())r.push(pe(l));return`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new st(205,!1)}processProvider(r){let s=za(r=ie(r))?r:ie(r&&r.provide);const l=function Tc(n){return Cu(n)?qi(void 0,n.useValue):qi(eu(n),Ro)}(r);if(za(r)||!0!==r.multi)this.records.get(s);else{let f=this.records.get(s);f||(f=qi(void 0,Ro,!0),f.factory=()=>Ht(f.multi),this.records.set(s,f)),s=r,f.multi.push(r)}this.records.set(s,l)}hydrate(r,s){return s.value===Ro&&(s.value=Jl,s.value=s.factory()),"object"==typeof s.value&&s.value&&function Ac(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(s.value)&&this._ngOnDestroyHooks.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=ie(r.providedIn);return"string"==typeof s?"any"===s||this.scopes.has(s):this.injectorDefTypes.has(s)}}function eo(n){const r=Nt(n),s=null!==r?r.factory:es(n);if(null!==s)return s;if(n instanceof Di)throw new st(204,!1);if(n instanceof Function)return function dd(n){const r=n.length;if(r>0)throw ka(r,"?"),new st(204,!1);const s=function Qn(n){const r=n&&(n[cr]||n[or]);if(r){const s=function Rn(n){if(n.hasOwnProperty("name"))return n.name;const r=(""+n).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),r}return null}(n);return null!==s?()=>s.factory(n):()=>new n}(n);throw new st(204,!1)}function eu(n,r,s){let l;if(za(n)){const f=ie(n);return es(f)||eo(f)}if(Cu(n))l=()=>ie(n.useValue);else if(function Js(n){return!(!n||!n.useFactory)}(n))l=()=>n.useFactory(...Ht(n.deps||[]));else if(function jo(n){return!(!n||!n.useExisting)}(n))l=()=>fe(ie(n.useExisting));else{const f=ie(n&&(n.useClass||n.provide));if(!function Xu(n){return!!n.deps}(n))return es(f)||eo(f);l=()=>new f(...Ht(n.deps))}return l}function qi(n,r,s=!1){return{factory:n,value:r,multi:s?[]:void 0}}function Ta(n){return!!n.\u0275providers}function Ba(n,r){for(const s of n)Array.isArray(s)?Ba(s,r):Ta(s)?Ba(s.\u0275providers,r):r(s)}class xc{}class qd{resolveComponentFactory(r){throw function Yd(n){const r=Error(`No component factory found for ${pe(n)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=n,r}(r)}}let Ho=(()=>{class n{}return n.NULL=new qd,n})();function Mc(){return b(Ti(),qt())}function b(n,r){return new p(yi(n,r))}let p=(()=>{class n{constructor(s){this.nativeElement=s}}return n.__NG_ELEMENT_ID__=Mc,n})();function _(n){return n instanceof p?n.nativeElement:n}class K{}let ue=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function rt(){const n=qt(),s=Or(Ti().index,n);return(Xe(s)?s:n)[11]}(),n})(),Bt=(()=>{class n{}return n.\u0275prov=ft({token:n,providedIn:"root",factory:()=>null}),n})();class hn{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const Un=new hn("14.2.8"),gr={};function Fh(n){return n.ngOriginalError}class Nc{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r);this._console.error("ERROR",r),s&&this._console.error("ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&Fh(r);for(;s&&Fh(s);)s=Fh(s);return s||null}}const gd=new Map;let Vh=0;const Ll="__ngContext__";function vo(n,r){Xe(r)?(n[Ll]=r[20],function Du(n){gd.set(n[20],n)}(r)):n[Ll]=r}function ru(n){return n instanceof Function?n():n}var Ka=(()=>((Ka=Ka||{})[Ka.Important=1]="Important",Ka[Ka.DashCase=2]="DashCase",Ka))();function jh(n,r){return undefined(n,r)}function iu(n){const r=n[3];return Ct(r)?r[3]:r}function sa(n){return _d(n[13])}function eh(n){return _d(n[4])}function _d(n){for(;null!==n&&!Ct(n);)n=n[4];return n}function sc(n,r,s,l,f){if(null!=l){let v,C=!1;Ct(l)?v=l:Xe(l)&&(C=!0,l=l[0]);const x=ai(l);0===n&&null!==s?null==f?Yt(r,s,x):Ft(r,s,x,f||null,!0):1===n&&null!==s?Ft(r,s,x,f||null,!0):2===n?function bm(n,r,s){const l=co(n,r);l&&function hr(n,r,s,l){n.removeChild(r,s,l)}(n,l,r,s)}(r,x,C):3===n&&r.destroyNode(x),null!=v&&function Hp(n,r,s,l,f){const v=s[7];v!==ai(s)&&sc(r,n,l,v,f);for(let x=10;x<s.length;x++){const L=s[x];Gh(L[1],L,n,r,l,v)}}(r,n,v,s,f)}}function su(n,r,s){return n.createElement(r,s)}function y(n,r){const s=n[9],l=s.indexOf(r),f=r[3];512&r[2]&&(r[2]&=-513,Vr(f,-1)),s.splice(l,1)}function D(n,r){if(n.length<=10)return;const s=10+r,l=n[s];if(l){const f=l[17];null!==f&&f!==n&&y(f,l),r>0&&(n[s-1][4]=l[4]);const v=Pa(n,10+r);!function Ff(n,r){Gh(n,r,r[11],2,null,null),r[0]=null,r[6]=null}(l[1],l);const C=v[19];null!==C&&C.detachView(v[1]),l[3]=null,l[4]=null,l[2]&=-65}return l}function k(n,r){if(!(128&r[2])){const s=r[11];s.destroyNode&&Gh(n,r,s,3,null,null),function h(n){let r=n[13];if(!r)return W(n[1],n);for(;r;){let s=null;if(Xe(r))s=r[13];else{const l=r[10];l&&(s=l)}if(!s){for(;r&&!r[4]&&r!==n;)Xe(r)&&W(r[1],r),r=r[3];null===r&&(r=n),Xe(r)&&W(r[1],r),s=r&&r[4]}r=s}}(r)}}function W(n,r){if(!(128&r[2])){r[2]&=-65,r[2]|=128,function Me(n,r){let s;if(null!=n&&null!=(s=n.destroyHooks))for(let l=0;l<s.length;l+=2){const f=r[s[l]];if(!(f instanceof Qs)){const v=s[l+1];if(Array.isArray(v))for(let C=0;C<v.length;C+=2){const x=f[v[C]],L=v[C+1];try{L.call(x)}finally{}}else try{v.call(f)}finally{}}}}(n,r),function ae(n,r){const s=n.cleanup,l=r[7];let f=-1;if(null!==s)for(let v=0;v<s.length-1;v+=2)if("string"==typeof s[v]){const C=s[v+1],x="function"==typeof C?C(r):ai(r[C]),L=l[f=s[v+2]],q=s[v+3];"boolean"==typeof q?x.removeEventListener(s[v],L,q):q>=0?l[f=q]():l[f=-q].unsubscribe(),v+=2}else{const C=l[f=s[v+1]];s[v].call(C)}if(null!==l){for(let v=f+1;v<l.length;v++)(0,l[v])();r[7]=null}}(n,r),1===r[1].type&&r[11].destroy();const s=r[17];if(null!==s&&Ct(r[3])){s!==r[3]&&y(s,r);const l=r[19];null!==l&&l.detachView(n)}!function _m(n){gd.delete(n[20])}(r)}}function We(n,r,s){return function Lt(n,r,s){let l=r;for(;null!==l&&40&l.type;)l=(r=l).parent;if(null===l)return s[0];if(2&l.flags){const f=n.data[l.directiveStart].encapsulation;if(f===Tt.None||f===Tt.Emulated)return null}return yi(l,s)}(n,r.parent,s)}function Ft(n,r,s,l,f){n.insertBefore(r,s,l,f)}function Yt(n,r,s){n.appendChild(r,s)}function Mn(n,r,s,l,f){null!==l?Ft(n,r,s,l,f):Yt(n,r,s)}function co(n,r){return n.parentNode(r)}function Bl(n,r,s){return nh(n,r,s)}let nh=function ac(n,r,s){return 40&n.type?yi(n,s):null};function Vf(n,r,s,l){const f=We(n,l,r),v=r[11],x=Bl(l.parent||r[6],l,r);if(null!=f)if(Array.isArray(s))for(let L=0;L<s.length;L++)Mn(v,f,s[L],x,!1);else Mn(v,f,s,x,!1)}function Bf(n,r){if(null!==r){const s=r.type;if(3&s)return yi(r,n);if(4&s)return $f(-1,n[r.index]);if(8&s){const l=r.child;if(null!==l)return Bf(n,l);{const f=n[r.index];return Ct(f)?$f(-1,f):ai(f)}}if(32&s)return jh(r,n)()||ai(n[r.index]);{const l=wm(n,r);return null!==l?Array.isArray(l)?l[0]:Bf(iu(n[16]),l):Bf(n,r.next)}}return null}function wm(n,r){return null!==r?n[16][6].projection[r.projection]:null}function $f(n,r){const s=10+n+1;if(s<r.length){const l=r[s],f=l[1].firstChild;if(null!==f)return Bf(l,f)}return r[7]}function rh(n,r,s,l,f,v,C){for(;null!=s;){const x=l[s.index],L=s.type;if(C&&0===r&&(x&&vo(ai(x),l),s.flags|=4),64!=(64&s.flags))if(8&L)rh(n,r,s.child,l,f,v,!1),sc(r,n,f,x,v);else if(32&L){const q=jh(s,l);let le;for(;le=q();)sc(r,n,f,le,v);sc(r,n,f,x,v)}else 16&L?Uf(n,r,l,s,f,v):sc(r,n,f,x,v);s=C?s.projectionNext:s.next}}function Gh(n,r,s,l,f,v){rh(s,l,n.firstChild,r,f,v,!1)}function Uf(n,r,s,l,f,v){const C=s[16],L=C[6].projection[l.projection];if(Array.isArray(L))for(let q=0;q<L.length;q++)sc(r,n,f,L[q],v);else rh(n,r,L,C[3],f,v,!0)}function zh(n,r,s){n.setAttribute(r,"style",s)}function Yh(n,r,s){""===s?n.removeAttribute(r,"class"):n.setAttribute(r,"class",s)}function jf(n,r,s){let l=n.length;for(;;){const f=n.indexOf(r,s);if(-1===f)return f;if(0===f||n.charCodeAt(f-1)<=32){const v=r.length;if(f+v===l||n.charCodeAt(f+v)<=32)return f}s=f+1}}const Dm="ng-template";function Sm(n,r,s){let l=0;for(;l<n.length;){let f=n[l++];if(s&&"class"===f){if(f=n[l],-1!==jf(f.toLowerCase(),r,0))return!0}else if(1===f){for(;l<n.length&&"string"==typeof(f=n[l++]);)if(f.toLowerCase()===r)return!0;return!1}}return!1}function Gp(n){return 4===n.type&&n.value!==Dm}function Wp(n,r,s){return r===(4!==n.type||s?n.value:Dm)}function dv(n,r,s){let l=4;const f=n.attrs||[],v=function ih(n){for(let r=0;r<n.length;r++)if(fo(n[r]))return r;return n.length}(f);let C=!1;for(let x=0;x<r.length;x++){const L=r[x];if("number"!=typeof L){if(!C)if(4&l){if(l=2|1&l,""!==L&&!Wp(n,L,s)||""===L&&1===r.length){if($l(l))return!1;C=!0}}else{const q=8&l?L:r[++x];if(8&l&&null!==n.attrs){if(!Sm(n.attrs,q,s)){if($l(l))return!1;C=!0}continue}const Se=hv(8&l?"class":L,f,Gp(n),s);if(-1===Se){if($l(l))return!1;C=!0;continue}if(""!==q){let it;it=Se>v?"":f[Se+1].toLowerCase();const At=8&l?it:null;if(At&&-1!==jf(At,q,0)||2&l&&q!==it){if($l(l))return!1;C=!0}}}}else{if(!C&&!$l(l)&&!$l(L))return!1;if(C&&$l(L))continue;C=!1,l=L|1&l}}return $l(l)||C}function $l(n){return 0==(1&n)}function hv(n,r,s,l){if(null===r)return-1;let f=0;if(l||!s){let v=!1;for(;f<r.length;){const C=r[f];if(C===n)return f;if(3===C||6===C)v=!0;else{if(1===C||2===C){let x=r[++f];for(;"string"==typeof x;)x=r[++f];continue}if(4===C)break;if(0===C){f+=4;continue}}f+=v?1:2}return-1}return function sh(n,r){let s=n.indexOf(4);if(s>-1)for(s++;s<n.length;){const l=n[s];if("number"==typeof l)return-1;if(l===r)return s;s++}return-1}(r,n)}function zp(n,r,s=!1){for(let l=0;l<r.length;l++)if(dv(n,r[l],s))return!0;return!1}function Yp(n,r){e:for(let s=0;s<r.length;s++){const l=r[s];if(n.length===l.length){for(let f=0;f<n.length;f++)if(n[f]!==l[f])continue e;return!0}}return!1}function qh(n,r){return n?":not("+r.trim()+")":r}function Tm(n){let r=n[0],s=1,l=2,f="",v=!1;for(;s<n.length;){let C=n[s];if("string"==typeof C)if(2&l){const x=n[++s];f+="["+C+(x.length>0?'="'+x+'"':"")+"]"}else 8&l?f+="."+C:4&l&&(f+=" "+C);else""!==f&&!$l(C)&&(r+=qh(v,f),f=""),l=C,v=v||!$l(l);s++}return""!==f&&(r+=qh(v,f)),r}const Jr={};function Hf(n){Mm(br(),qt(),ke()+n,!1)}function Mm(n,r,s,l){if(!l)if(3==(3&r[2])){const v=n.preOrderCheckHooks;null!==v&&xi(r,v,s)}else{const v=n.preOrderHooks;null!==v&&vs(r,v,0,s)}St(s)}function qf(n,r=null,s=null,l){const f=Kp(n,r,s,l);return f.resolveInjectorInitializers(),f}function Kp(n,r=null,s=null,l,f=new Set){const v=[s||$n,jr(n)];return l=l||("object"==typeof n?void 0:pe(n)),new zd(v,r||yl(),l||null,f)}let Ed=(()=>{class n{static create(s,l){var f;if(Array.isArray(s))return qf({name:""},l,s,"");{const v=null!==(f=s.name)&&void 0!==f?f:"";return qf({name:v},s.parent,s.providers,v)}}}return n.THROW_IF_NOT_FOUND=w,n.NULL=new Dc,n.\u0275prov=ft({token:n,providedIn:"any",factory:()=>fe(fl)}),n.__NG_ELEMENT_ID__=-1,n})();function $c(n,r=Wt.Default){const s=qt();return null===s?fe(n,r):Qo(Ti(),s,ie(n),r)}function Fm(){throw new Error("invalid")}function Id(n,r){return n<<17|r<<2}function Il(n){return n>>17&32767}function Zh(n){return 2|n}function lc(n){return(131068&n)>>2}function og(n,r){return-131069&n|r<<2}function rp(n){return 1|n}function zm(n,r){const s=n.contentQueries;if(null!==s)for(let l=0;l<s.length;l+=2){const f=s[l],v=s[l+1];if(-1!==v){const C=n.data[v];Cs(f),C.contentQueries(2,r[v],v)}}}function ph(n,r,s,l,f,v,C,x,L,q,le){const Se=r.blueprint.slice();return Se[0]=f,Se[2]=76|l,(null!==le||n&&1024&n[2])&&(Se[2]|=1024),Ri(Se),Se[3]=Se[15]=n,Se[8]=s,Se[10]=C||n&&n[10],Se[11]=x||n&&n[11],Se[12]=L||n&&n[12]||null,Se[9]=q||n&&n[9]||null,Se[6]=v,Se[20]=function Bh(){return Vh++}(),Se[21]=le,Se[16]=2==r.type?n[16]:Se,Se}function bd(n,r,s,l,f){let v=n.data[r];if(null===v)v=function ef(n,r,s,l,f){const v=bo(),C=As(),L=n.data[r]=function bg(n,r,s,l,f,v){return{type:s,index:l,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:v,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,C?v:v&&v.parent,s,r,l,f);return null===n.firstChild&&(n.firstChild=L),null!==v&&(C?null==v.child&&null!==L.parent&&(v.child=L):null===v.next&&(v.next=L)),L}(n,r,s,l,f),function yn(){return Kn.lFrame.inI18n}()&&(v.flags|=64);else if(64&v.type){v.type=s,v.value=l,v.attrs=f;const C=function Gi(){const n=Kn.lFrame,r=n.currentTNode;return n.isParent?r:r.parent}();v.injectorIndex=null===C?-1:C.injectorIndex}return ws(v,!0),v}function Cd(n,r,s,l){if(0===s)return-1;const f=r.length;for(let v=0;v<s;v++)r.push(l),n.blueprint.push(l),n.data.push(null);return f}function _g(n,r,s){Co(r);try{const l=n.viewQuery;null!==l&&dp(1,l,s);const f=n.template;null!==f&&Ym(n,r,f,1,s),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&zm(n,r),n.staticViewQueries&&dp(2,n.viewQuery,s);const v=n.components;null!==v&&function Cv(n,r){for(let s=0;s<r.length;s++)iy(n,r[s])}(r,v)}catch(l){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),l}finally{r[2]&=-5,Z()}}function gh(n,r,s,l){const f=r[2];if(128!=(128&f)){Co(r);try{Ri(r),function se(n){return Kn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==s&&Ym(n,r,s,2,l);const C=3==(3&f);if(C){const q=n.preOrderCheckHooks;null!==q&&xi(r,q,null)}else{const q=n.preOrderHooks;null!==q&&vs(r,q,0,null),no(r,0)}if(function Tv(n){for(let r=sa(n);null!==r;r=eh(r)){if(!r[2])continue;const s=r[9];for(let l=0;l<s.length;l++){const f=s[l],v=f[3];0==(512&f[2])&&Vr(v,1),f[2]|=512}}}(r),function ry(n){for(let r=sa(n);null!==r;r=eh(r))for(let s=10;s<r.length;s++){const l=r[s],f=l[1];Ts(l)&&gh(f,l,f.template,l[8])}}(r),null!==n.contentQueries&&zm(n,r),C){const q=n.contentCheckHooks;null!==q&&xi(r,q)}else{const q=n.contentHooks;null!==q&&vs(r,q,1),no(r,1)}!function yg(n,r){const s=n.hostBindingOpCodes;if(null!==s)try{for(let l=0;l<s.length;l++){const f=s[l];if(f<0)St(~f);else{const v=f,C=s[++l],x=s[++l];ni(C,v),x(2,r[v])}}}finally{St(-1)}}(n,r);const x=n.components;null!==x&&function vg(n,r){for(let s=0;s<r.length;s++)Pg(n,r[s])}(r,x);const L=n.viewQuery;if(null!==L&&dp(2,L,l),C){const q=n.viewCheckHooks;null!==q&&xi(r,q)}else{const q=n.viewHooks;null!==q&&vs(r,q,2),no(r,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),r[2]&=-41,512&r[2]&&(r[2]&=-513,Vr(r[3],-1))}finally{Z()}}}function Ym(n,r,s,l,f){const v=ke(),C=2&l;try{St(-1),C&&r.length>22&&Mm(n,r,22,!1),s(l,f)}finally{St(v)}}function up(n,r,s){if(_e(r)){const f=r.directiveEnd;for(let v=r.directiveStart;v<f;v++){const C=n.data[v];C.contentQueries&&C.contentQueries(1,s[v],v)}}}function Eg(n,r,s){!Ps()||(function Sv(n,r,s,l){const f=s.directiveStart,v=s.directiveEnd;n.firstCreatePass||Hs(s,r),vo(l,r);const C=s.initialInputs;for(let x=f;x<v;x++){const L=n.data[x],q=Ot(L);q&&Mg(r,s,L);const le=Oa(r,n,x,s);vo(le,r),null!==C&&Rg(0,x-f,le,L,0,C),q&&(Or(s.index,r)[8]=le)}}(n,r,s,yi(s,r)),128==(128&s.flags)&&function Sg(n,r,s){const l=s.directiveStart,f=s.directiveEnd,v=s.index,C=function Ai(){return Kn.lFrame.currentDirectiveIndex}();try{St(v);for(let x=l;x<f;x++){const L=n.data[x],q=r[x];ci(x),(null!==L.hostBindings||0!==L.hostVars||null!==L.hostAttrs)&&Jm(L,q)}}finally{St(-1),ci(C)}}(n,r,s))}function tf(n,r,s=yi){const l=r.localNames;if(null!==l){let f=r.index+1;for(let v=0;v<l.length;v+=2){const C=l[v+1],x=-1===C?s(r,n):n[C];n[f++]=x}}}function qm(n){const r=n.tView;return null===r||r.incompleteFirstPass?n.tView=nf(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):r}function nf(n,r,s,l,f,v,C,x,L,q){const le=22+l,Se=le+f,it=function Ig(n,r){const s=[];for(let l=0;l<r;l++)s.push(l<n?null:Jr);return s}(le,Se),At="function"==typeof q?q():q;return it[1]={type:n,blueprint:it,template:s,queries:null,viewQuery:x,declTNode:r,data:it.slice().fill(null,le),bindingStartIndex:le,expandoStartIndex:Se,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof v?v():v,pipeRegistry:"function"==typeof C?C():C,firstChild:null,schemas:L,consts:At,incompleteFirstPass:!1}}function wg(n,r,s,l){const f=vh(r);null===s?f.push(l):(f.push(s),n.firstCreatePass&&kg(n).push(l,f.length-1))}function Zm(n,r,s){for(let l in n)if(n.hasOwnProperty(l)){const f=n[l];(s=null===s?{}:s).hasOwnProperty(l)?s[l].push(r,f):s[l]=[r,f]}return s}function cp(n,r){const l=r.directiveEnd,f=n.data,v=r.attrs,C=[];let x=null,L=null;for(let q=r.directiveStart;q<l;q++){const le=f[q],Se=le.inputs,it=null===v||Gp(r)?null:Og(Se,v);C.push(it),x=Zm(Se,q,x),L=Zm(le.outputs,q,L)}null!==x&&(x.hasOwnProperty("class")&&(r.flags|=16),x.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=C,r.inputs=x,r.outputs=L}function Qm(n,r){const s=Or(r,n);16&s[2]||(s[2]|=32)}function rf(n,r,s,l){let f=!1;if(Ps()){const v=function Tg(n,r,s){const l=n.directiveRegistry;let f=null;if(l)for(let v=0;v<l.length;v++){const C=l[v];zp(s,C.selectors,!1)&&(f||(f=[]),Ni(Hs(s,r),n,C.type),Ot(C)?(Ag(n,s),f.unshift(C)):f.push(C))}return f}(n,r,s),C=null===l?null:{"":-1};if(null!==v){f=!0,ty(s,n.data.length,v.length);for(let le=0;le<v.length;le++){const Se=v[le];Se.providersResolver&&Se.providersResolver(Se)}let x=!1,L=!1,q=Cd(n,r,v.length,null);for(let le=0;le<v.length;le++){const Se=v[le];s.mergedAttrs=po(s.mergedAttrs,Se.hostAttrs),ny(n,s,r,q,Se),ey(q,Se,C),null!==Se.contentQueries&&(s.flags|=8),(null!==Se.hostBindings||null!==Se.hostAttrs||0!==Se.hostVars)&&(s.flags|=128);const it=Se.type.prototype;!x&&(it.ngOnChanges||it.ngOnInit||it.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(s.index),x=!0),!L&&(it.ngOnChanges||it.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(s.index),L=!0),q++}cp(n,s)}C&&function xg(n,r,s){if(r){const l=n.localNames=[];for(let f=0;f<r.length;f+=2){const v=s[r[f+1]];if(null==v)throw new st(-301,!1);l.push(r[f],v)}}}(s,l,C)}return s.mergedAttrs=po(s.mergedAttrs,s.attrs),f}function Xm(n,r,s,l,f,v){const C=v.hostBindings;if(C){let x=n.hostBindingOpCodes;null===x&&(x=n.hostBindingOpCodes=[]);const L=~r.index;(function Dg(n){let r=n.length;for(;r>0;){const s=n[--r];if("number"==typeof s&&s<0)return s}return 0})(x)!=L&&x.push(L),x.push(l,f,C)}}function Jm(n,r){null!==n.hostBindings&&n.hostBindings(1,r)}function Ag(n,r){r.flags|=2,(n.components||(n.components=[])).push(r.index)}function ey(n,r,s){if(s){if(r.exportAs)for(let l=0;l<r.exportAs.length;l++)s[r.exportAs[l]]=n;Ot(r)&&(s[""]=n)}}function ty(n,r,s){n.flags|=1,n.directiveStart=r,n.directiveEnd=r+s,n.providerIndexes=r}function ny(n,r,s,l,f){n.data[l]=f;const v=f.factory||(f.factory=es(f.type)),C=new Qs(v,Ot(f),$c);n.blueprint[l]=C,s[l]=C,Xm(n,r,0,l,Cd(n,s,f.hostVars,Jr),f)}function Mg(n,r,s){const l=yi(r,n),f=qm(s),v=n[10],C=lf(n,ph(n,f,null,s.onPush?32:16,l,r,v,v.createRenderer(l,s),null,null,null));n[r.index]=C}function xu(n,r,s,l,f,v){const C=yi(n,r);!function sf(n,r,s,l,f,v,C){if(null==v)n.removeAttribute(r,f,s);else{const x=null==C?Re(v):C(v,l||"",f);n.setAttribute(r,f,x,s)}}(r[11],C,v,n.value,s,l,f)}function Rg(n,r,s,l,f,v){const C=v[r];if(null!==C){const x=l.setInput;for(let L=0;L<C.length;){const q=C[L++],le=C[L++],Se=C[L++];null!==x?l.setInput(s,Se,q,le):s[le]=Se}}}function Og(n,r){let s=null,l=0;for(;l<r.length;){const f=r[l];if(0!==f)if(5!==f){if("number"==typeof f)break;n.hasOwnProperty(f)&&(null===s&&(s=[]),s.push(f,n[f],r[l+1])),l+=2}else l+=2;else l+=4}return s}function Ng(n,r,s,l){return new Array(n,!0,!1,r,null,0,l,s,null,null)}function Pg(n,r){const s=Or(r,n);if(Ts(s)){const l=s[1];48&s[2]?gh(l,s,l.template,s[8]):s[5]>0&&af(s)}}function af(n){for(let l=sa(n);null!==l;l=eh(l))for(let f=10;f<l.length;f++){const v=l[f];if(Ts(v))if(512&v[2]){const C=v[1];gh(C,v,C.template,v[8])}else v[5]>0&&af(v)}const s=n[1].components;if(null!==s)for(let l=0;l<s.length;l++){const f=Or(s[l],n);Ts(f)&&f[5]>0&&af(f)}}function iy(n,r){const s=Or(r,n),l=s[1];(function sy(n,r){for(let s=r.length;s<n.blueprint.length;s++)r.push(n.blueprint[s])})(l,s),_g(l,s,s[8])}function lf(n,r){return n[13]?n[14][4]=r:n[13]=r,n[14]=r,r}function yh(n){for(;n;){n[2]|=32;const r=iu(n);if(jt(n)&&!r)return n;n=r}return null}function gi(n,r,s,l=!0){const f=r[10];f.begin&&f.begin();try{gh(n,r,n.template,s)}catch(C){throw l&&Aa(r,C),C}finally{f.end&&f.end()}}function dp(n,r,s){Cs(0),r(n,s)}function vh(n){return n[7]||(n[7]=[])}function kg(n){return n.cleanup||(n.cleanup=[])}function Aa(n,r){const s=n[9],l=s?s.get(Nc,null):null;l&&l.handleError(r)}function Ul(n,r,s,l,f){for(let v=0;v<s.length;){const C=s[v++],x=s[v++],L=r[C],q=n.data[C];null!==q.setInput?q.setInput(L,f,l,x):L[x]=f}}function hp(n,r,s){let l=s?n.styles:null,f=s?n.classes:null,v=0;if(null!==r)for(let C=0;C<r.length;C++){const x=r[C];"number"==typeof x?v=x:1==v?f=be(f,x):2==v&&(l=be(l,x+": "+r[++C]+";"))}s?n.styles=l:n.stylesWithoutHost=l,s?n.classes=f:n.classesWithoutHost=f}function Dd(n,r,s,l,f=!1){for(;null!==s;){const v=r[s.index];if(null!==v&&l.push(ai(v)),Ct(v))for(let x=10;x<v.length;x++){const L=v[x],q=L[1].firstChild;null!==q&&Dd(L[1],L,q,l)}const C=s.type;if(8&C)Dd(n,r,s.child,l);else if(32&C){const x=jh(s,r);let L;for(;L=x();)l.push(L)}else if(16&C){const x=wm(r,s);if(Array.isArray(x))l.push(...x);else{const L=iu(r[16]);Dd(L[1],L,x,l,!0)}}s=f?s.projectionNext:s.next}return l}class _h{constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,s=r[1];return Dd(s,r,s.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(Ct(r)){const s=r[8],l=s?s.indexOf(this):-1;l>-1&&(D(r,l),Pa(s,l))}this._attachedToViewContainer=!1}k(this._lView[1],this._lView)}onDestroy(r){wg(this._lView[1],this._lView,null,r)}markForCheck(){yh(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){gi(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new st(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Lf(n,r){Gh(n,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new st(902,!1);this._appRef=r}}class Fg extends _h{constructor(r){super(r),this._view=r}detectChanges(){const r=this._view;gi(r[1],r,r[8],!1)}checkNoChanges(){}get context(){return null}}class fp extends Ho{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=tt(r);return new cf(s,this.ngModule)}}function uf(n){const r=[];for(let s in n)n.hasOwnProperty(s)&&r.push({propName:n[s],templateName:s});return r}class t0{constructor(r,s){this.injector=r,this.parentInjector=s}get(r,s,l){const f=this.injector.get(r,gr,l);return f!==gr||s===gr?f:this.parentInjector.get(r,s,l)}}class cf extends xc{constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function Am(n){return n.map(Tm).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return uf(this.componentDef.inputs)}get outputs(){return uf(this.componentDef.outputs)}create(r,s,l,f){let v=(f=f||this.ngModule)instanceof zs?f:null==f?void 0:f.injector;v&&null!==this.componentDef.getStandaloneInjector&&(v=this.componentDef.getStandaloneInjector(v)||v);const C=v?new t0(r,v):r,x=C.get(K,null);if(null===x)throw new st(407,!1);const L=C.get(Bt,null),q=x.createRenderer(null,this.componentDef),le=this.componentDef.selectors[0][0]||"div",Se=l?function mh(n,r,s){return n.selectRootElement(r,s===Tt.ShadowDom)}(q,l,this.componentDef.encapsulation):su(x.createRenderer(null,this.componentDef),le,function Mv(n){const r=n.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(le)),it=this.componentDef.onPush?288:272,At=nf(0,null,null,1,0,null,null,null,null,null),Kt=ph(null,At,null,it,null,null,x,q,L,C,null);let vn,Pn;Co(Kt);try{const sr=function oy(n,r,s,l,f,v){const C=s[1];s[22]=n;const L=bd(C,22,2,"#host",null),q=L.mergedAttrs=r.hostAttrs;null!==q&&(hp(L,q,!0),null!==n&&(Ma(f,n,q),null!==L.classes&&Yh(f,n,L.classes),null!==L.styles&&zh(f,n,L.styles)));const le=l.createRenderer(n,r),Se=ph(s,qm(r),null,r.onPush?32:16,s[22],L,l,le,v||null,null,null);return C.firstCreatePass&&(Ni(Hs(L,s),C,r.type),Ag(C,L),ty(L,s.length,1)),lf(s,Se),s[22]=Se}(Se,this.componentDef,Kt,x,q);if(Se)if(l)Ma(q,Se,["ng-version",Un.full]);else{const{attrs:Mr,classes:nn}=function xm(n){const r=[],s=[];let l=1,f=2;for(;l<n.length;){let v=n[l];if("string"==typeof v)2===f?""!==v&&r.push(v,n[++l]):8===f&&s.push(v);else{if(!$l(f))break;f=v}l++}return{attrs:r,classes:s}}(this.componentDef.selectors[0]);Mr&&Ma(q,Se,Mr),nn&&nn.length>0&&Yh(q,Se,nn.join(" "))}if(Pn=ys(At,22),void 0!==s){const Mr=Pn.projection=[];for(let nn=0;nn<this.ngContentSelectors.length;nn++){const Ur=s[nn];Mr.push(null!=Ur?Array.from(Ur):null)}}vn=function Lg(n,r,s,l){const f=s[1],v=function Dv(n,r,s){const l=Ti();n.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),ny(n,l,r,Cd(n,r,1,null),s),cp(n,l));const f=Oa(r,n,l.directiveStart,l);vo(f,r);const v=yi(l,r);return v&&vo(v,r),f}(f,s,r);if(n[8]=s[8]=v,null!==l)for(const x of l)x(v,r);if(r.contentQueries){const x=Ti();r.contentQueries(1,v,x.directiveStart)}const C=Ti();return!f.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(St(C.index),Xm(s[1],C,0,C.directiveStart,C.directiveEnd,r),Jm(r,v)),v}(sr,this.componentDef,Kt,[ay]),_g(At,Kt,null)}finally{Z()}return new Ov(this.componentType,vn,b(Pn,Kt),Kt,Pn)}}class Ov extends class Ju{}{constructor(r,s,l,f,v){super(),this.location=l,this._rootLView=f,this._tNode=v,this.instance=s,this.hostView=this.changeDetectorRef=new Fg(f),this.componentType=r}setInput(r,s){const l=this._tNode.inputs;let f;if(null!==l&&(f=l[r])){const v=this._rootLView;Ul(v[1],v,f,r,s),Qm(v,this._tNode.index)}}get injector(){return new ur(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}function ay(){const n=Ti();ii(qt()[1],n)}function df(n){let r=function pp(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),s=!0;const l=[n];for(;r;){let f;if(Ot(n))f=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new st(903,!1);f=r.\u0275dir}if(f){if(s){l.push(f);const C=n;C.inputs=Eh(n.inputs),C.declaredInputs=Eh(n.declaredInputs),C.outputs=Eh(n.outputs);const x=f.hostBindings;x&&gp(n,x);const L=f.viewQuery,q=f.contentQueries;if(L&&Bg(n,L),q&&ly(n,q),Ee(n.inputs,f.inputs),Ee(n.declaredInputs,f.declaredInputs),Ee(n.outputs,f.outputs),Ot(f)&&f.data.animation){const le=n.data;le.animation=(le.animation||[]).concat(f.data.animation)}}const v=f.features;if(v)for(let C=0;C<v.length;C++){const x=v[C];x&&x.ngInherit&&x(n),x===df&&(s=!1)}}r=Object.getPrototypeOf(r)}!function Vg(n){let r=0,s=null;for(let l=n.length-1;l>=0;l--){const f=n[l];f.hostVars=r+=f.hostVars,f.hostAttrs=po(f.hostAttrs,s=po(s,f.hostAttrs))}}(l)}function Eh(n){return n===Pr?{}:n===$n?[]:n}function Bg(n,r){const s=n.viewQuery;n.viewQuery=s?(l,f)=>{r(l,f),s(l,f)}:r}function ly(n,r){const s=n.contentQueries;n.contentQueries=s?(l,f,v)=>{r(l,f,v),s(l,f,v)}:r}function gp(n,r){const s=n.hostBindings;n.hostBindings=s?(l,f)=>{r(l,f),s(l,f)}:r}let dc=null;function hc(){if(!dc){const n=yr.Symbol;if(n&&n.iterator)dc=n.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<r.length;++s){const l=r[s];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(dc=l)}}}return dc}function hf(n){return!!jg(n)&&(Array.isArray(n)||!(n instanceof Map)&&hc()in n)}function jg(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function Ua(n,r,s){return!Object.is(n[r],s)&&(n[r]=s,!0)}function Hg(n,r,s,l){const f=qt();return Ua(f,ut(),r)&&(br(),xu(kt(),f,n,r,s,l)),Hg}function mf(n,r,s,l,f,v,C,x){const L=qt(),q=br(),le=n+22,Se=q.firstCreatePass?function xd(n,r,s,l,f,v,C,x,L){const q=r.consts,le=bd(r,n,4,C||null,Is(q,x));rf(r,s,le,Is(q,L)),ii(r,le);const Se=le.tViews=nf(2,le,l,f,v,r.directiveRegistry,r.pipeRegistry,null,r.schemas,q);return null!==r.queries&&(r.queries.template(r,le),Se.queries=r.queries.embeddedTView(le)),le}(le,q,L,r,s,l,f,v,C):q.data[le];ws(Se,!1);const it=L[11].createComment("");Vf(q,L,it,Se),vo(it,L),lf(L,L[le]=Ng(it,L,it,Se)),yt(Se)&&Eg(q,L,Se),null!=C&&tf(L,Se,x)}function mp(n,r,s){const l=qt();return Ua(l,ut(),r)&&function Za(n,r,s,l,f,v,C,x){const L=yi(r,s);let le,q=r.inputs;!x&&null!=q&&(le=q[l])?(Ul(n,s,le,l,f),qe(r)&&Qm(s,r.index)):3&r.type&&(l=function cc(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(l),f=null!=C?C(f,r.value||"",l):f,v.setProperty(L,l,f))}(br(),kt(),l,n,r,l[11],s,!1),mp}function yp(n,r,s,l,f){const C=f?"class":"style";Ul(n,s,r.inputs[C],C,l)}function _p(n,r,s,l){const f=qt(),v=br(),C=22+n,x=f[11],L=f[C]=su(x,r,function $r(){return Kn.lFrame.currentNamespace}()),q=v.firstCreatePass?function vp(n,r,s,l,f,v,C){const x=r.consts,q=bd(r,n,2,f,Is(x,v));return rf(r,s,q,Is(x,C)),null!==q.attrs&&hp(q,q.attrs,!1),null!==q.mergedAttrs&&hp(q,q.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,q),q}(C,v,f,0,r,s,l):v.data[C];ws(q,!0);const le=q.mergedAttrs;null!==le&&Ma(x,L,le);const Se=q.classes;null!==Se&&Yh(x,L,Se);const it=q.styles;return null!==it&&zh(x,L,it),64!=(64&q.flags)&&Vf(v,f,L,q),0===function Ks(){return Kn.lFrame.elementDepthCount}()&&vo(L,f),function Po(){Kn.lFrame.elementDepthCount++}(),yt(q)&&(Eg(v,f,q),up(v,q,f)),null!==l&&tf(f,q),_p}function Nu(){let n=Ti();As()?G():(n=n.parent,ws(n,!1));const r=n;!function ya(){Kn.lFrame.elementDepthCount--}();const s=br();return s.firstCreatePass&&(ii(s,n),_e(n)&&s.queries.elementEnd(n)),null!=r.classesWithoutHost&&function bl(n){return 0!=(16&n.flags)}(r)&&yp(s,r,qt(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function Gl(n){return 0!=(32&n.flags)}(r)&&yp(s,r,qt(),r.stylesWithoutHost,!1),Nu}function Dh(n,r,s,l){return _p(n,r,s,l),Nu(),Dh}function vf(n,r,s){const l=qt(),f=br(),v=n+22,C=f.firstCreatePass?function yf(n,r,s,l,f){const v=r.consts,C=Is(v,l),x=bd(r,n,8,"ng-container",C);return null!==C&&hp(x,C,!0),rf(r,s,x,Is(v,f)),null!==r.queries&&r.queries.elementStart(r,x),x}(v,f,l,r,s):f.data[v];ws(C,!0);const x=l[v]=l[11].createComment("");return Vf(f,l,x,C),vo(x,l),yt(C)&&(Eg(f,l,C),up(f,C,l)),null!=s&&tf(l,C),vf}function Sh(){let n=Ti();const r=br();return As()?G():(n=n.parent,ws(n,!1)),r.firstCreatePass&&(ii(r,n),_e(n)&&r.queries.elementEnd(n)),Sh}function Wg(n,r,s){return vf(n,r,s),Sh(),Wg}function yy(){return qt()}function zg(n){return!!n&&"function"==typeof n.then}function Ep(n){return!!n&&"function"==typeof n.subscribe}const Ip=Ep;function wp(n,r,s,l){const f=qt(),v=br(),C=Ti();return function Yg(n,r,s,l,f,v,C,x){const L=yt(l),le=n.firstCreatePass&&kg(n),Se=r[8],it=vh(r);let At=!0;if(3&l.type||x){const Pn=yi(l,r),sr=x?x(Pn):Pn,Mr=it.length,nn=x?Ki=>x(ai(Ki[l.index])):l.index;let Ur=null;if(!x&&L&&(Ur=function vy(n,r,s,l){const f=n.cleanup;if(null!=f)for(let v=0;v<f.length-1;v+=2){const C=f[v];if(C===s&&f[v+1]===l){const x=r[7],L=f[v+2];return x.length>L?x[L]:null}"string"==typeof C&&(v+=2)}return null}(n,r,f,l.index)),null!==Ur)(Ur.__ngLastListenerFn__||Ur).__ngNextListenerFn__=v,Ur.__ngLastListenerFn__=v,At=!1;else{v=Cp(l,r,Se,v,!1);const Ki=s.listen(sr,f,v);it.push(v,Ki),le&&le.push(f,nn,Mr,Mr+1)}}else v=Cp(l,r,Se,v,!1);const Kt=l.outputs;let vn;if(At&&null!==Kt&&(vn=Kt[f])){const Pn=vn.length;if(Pn)for(let sr=0;sr<Pn;sr+=2){const Io=r[vn[sr]][vn[sr+1]].subscribe(v),Sf=it.length;it.push(v,Io),le&&le.push(f,l.index,Sf,-(Sf+1))}}}(v,f,f[11],C,n,r,0,l),wp}function bp(n,r,s,l){try{return!1!==s(l)}catch(f){return Aa(n,f),!1}}function Cp(n,r,s,l,f){return function v(C){if(C===Function)return l;yh(2&n.flags?Or(n.index,r):r);let L=bp(r,0,l,C),q=v.__ngNextListenerFn__;for(;q;)L=bp(r,0,q,C)&&L,q=q.__ngNextListenerFn__;return f&&!1===L&&(C.preventDefault(),C.returnValue=!1),L}}function _y(n=1){return function $(n){return(Kn.lFrame.contextLView=function re(n,r){for(;n>0;)r=r[15],n--;return r}(n,Kn.lFrame.contextLView))[8]}(n)}function Dp(n,r){let s=null;const l=function fv(n){const r=n.attrs;if(null!=r){const s=r.indexOf(5);if(0==(1&s))return r[s+1]}return null}(n);for(let f=0;f<r.length;f++){const v=r[f];if("*"!==v){if(null===l?zp(n,v,!0):Yp(l,v))return f}else s=f}return s}function _f(n){const r=qt()[16][6];if(!r.projection){const l=r.projection=ka(n?n.length:1,null),f=l.slice();let v=r.child;for(;null!==v;){const C=n?Dp(v,n):0;null!==C&&(f[C]?f[C].projectionNext=v:l[C]=v,f[C]=v),v=v.next}}}function qg(n,r=0,s){const l=qt(),f=br(),v=bd(f,22+n,16,null,s||null);null===v.projection&&(v.projection=r),G(),64!=(64&v.flags)&&function Cm(n,r,s){Uf(r[11],0,r,s,We(n,s,r),Bl(s.parent||r[6],s,r))}(f,l,v)}function Qg(n,r,s,l,f){const v=n[s+1],C=null===r;let x=l?Il(v):lc(v),L=!1;for(;0!==x&&(!1===L||C);){const le=n[x+1];$v(n[x],r)&&(L=!0,n[x+1]=l?rp(le):Zh(le)),x=l?Il(le):lc(le)}L&&(n[s+1]=l?Zh(v):rp(v))}function $v(n,r){return null===n||null==r||(Array.isArray(n)?n[1]:n)===r||!(!Array.isArray(n)||"string"!=typeof r)&&Xr(n,r)>=0}function Tp(n,r){return function lu(n,r,s,l){const f=qt(),v=br(),C=function Xt(n){const r=Kn.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+n,s}(2);v.firstUpdatePass&&function nm(n,r,s,l){const f=n.data;if(null===f[s+1]){const v=f[ke()],C=function Sy(n,r){return r>=n.expandoStartIndex}(n,s);(function My(n,r){return 0!=(n.flags&(r?16:32))})(v,l)&&null===r&&!C&&(r=!1),r=function Ty(n,r,s,l){const f=function ns(n){const r=Kn.lFrame.currentDirectiveIndex;return-1===r?null:n[r]}(n);let v=l?r.residualClasses:r.residualStyles;if(null===f)0===(l?r.classBindings:r.styleBindings)&&(s=Fu(s=rm(null,n,r,s,l),r.attrs,l),v=null);else{const C=r.directiveStylingLast;if(-1===C||n[C]!==f)if(s=rm(f,n,r,s,l),null===v){let L=function Wv(n,r,s){const l=s?r.classBindings:r.styleBindings;if(0!==lc(l))return n[Il(l)]}(n,r,l);void 0!==L&&Array.isArray(L)&&(L=rm(null,n,r,L[1],l),L=Fu(L,r.attrs,l),function zv(n,r,s,l){n[Il(s?r.classBindings:r.styleBindings)]=l}(n,r,l,L))}else v=function Ay(n,r,s){let l;const f=r.directiveEnd;for(let v=1+r.directiveStylingLast;v<f;v++)l=Fu(l,n[v].hostAttrs,s);return Fu(l,r.attrs,s)}(n,r,l)}return void 0!==v&&(l?r.residualClasses=v:r.residualStyles=v),s}(f,v,r,l),function Vv(n,r,s,l,f,v){let C=v?r.classBindings:r.styleBindings,x=Il(C),L=lc(C);n[l]=s;let le,q=!1;if(Array.isArray(s)){const Se=s;le=Se[1],(null===le||Xr(Se,le)>0)&&(q=!0)}else le=s;if(f)if(0!==L){const it=Il(n[x+1]);n[l+1]=Id(it,x),0!==it&&(n[it+1]=og(n[it+1],l)),n[x+1]=function ch(n,r){return 131071&n|r<<17}(n[x+1],l)}else n[l+1]=Id(x,0),0!==x&&(n[x+1]=og(n[x+1],l)),x=l;else n[l+1]=Id(L,0),0===x?x=l:n[L+1]=og(n[L+1],l),L=l;q&&(n[l+1]=Zh(n[l+1])),Qg(n,le,l,!0),Qg(n,le,l,!1),function Bv(n,r,s,l,f){const v=f?n.residualClasses:n.residualStyles;null!=v&&"string"==typeof r&&Xr(v,r)>=0&&(s[l+1]=rp(s[l+1]))}(r,le,n,l,v),C=Id(x,L),v?r.classBindings=C:r.styleBindings=C}(f,v,r,s,C,l)}}(v,n,C,l),r!==Jr&&Ua(f,C,r)&&function xy(n,r,s,l,f,v,C,x){if(!(3&r.type))return;const L=n.data,q=L[x+1];cu(function ag(n){return 1==(1&n)}(q)?sm(L,r,s,f,lc(q),C):void 0)||(cu(v)||function sg(n){return 2==(2&n)}(q)&&(v=sm(L,null,s,f,x,C)),function Wh(n,r,s,l,f){if(r)f?n.addClass(s,l):n.removeClass(s,l);else{let v=-1===l.indexOf("-")?void 0:Ka.DashCase;null==f?n.removeStyle(s,l,v):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),v|=Ka.Important),n.setStyle(s,l,f,v))}}(l,C,wr(ke(),s),f,v))}(v,v.data[ke()],f,f[11],n,f[C+1]=function qv(n,r){return null==n||("string"==typeof r?n+=r:"object"==typeof n&&(n=pe(Ws(n)))),n}(r,s),l,C)}(n,r,null,!0),Tp}function rm(n,r,s,l,f){let v=null;const C=s.directiveEnd;let x=s.directiveStylingLast;for(-1===x?x=s.directiveStart:x++;x<C&&(v=r[x],l=Fu(l,v.hostAttrs,f),v!==n);)x++;return null!==n&&(s.directiveStylingLast=x),l}function Fu(n,r,s){const l=s?1:2;let f=-1;if(null!==r)for(let v=0;v<r.length;v++){const C=r[v];"number"==typeof C?f=C:f===l&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),Ms(n,C,!!s||r[++v]))}return void 0===n?null:n}function sm(n,r,s,l,f,v){const C=null===r;let x;for(;f>0;){const L=n[f],q=Array.isArray(L),le=q?L[1]:L,Se=null===le;let it=s[f+1];it===Jr&&(it=Se?$n:void 0);let At=Se?ds(it,l):le===l?it:void 0;if(q&&!cu(At)&&(At=ds(L,l)),cu(At)&&(x=At,C))return x;const Kt=n[f+1];f=C?Il(Kt):lc(Kt)}if(null!==r){let L=v?r.residualClasses:r.residualStyles;null!=L&&(x=ds(L,l))}return x}function cu(n){return void 0!==n}function Ry(n,r=""){const s=qt(),l=br(),f=n+22,v=l.firstCreatePass?bd(l,f,1,r,null):l.data[f],C=s[f]=function Vl(n,r){return n.createText(r)}(s[11],r);Vf(l,s,C,v),ws(v,!1)}function om(n){return Ap("",n,""),om}function Ap(n,r,s){const l=qt(),f=function pf(n,r,s,l){return Ua(n,ut(),s)?r+Re(s)+l:Jr}(l,n,r,s);return f!==Jr&&function Mu(n,r,s){const l=wr(r,n);!function oc(n,r,s){n.setValue(r,s)}(n[11],l,s)}(l,ke(),f),Ap}const Nd=void 0;var e_=["en",[["a","p"],["AM","PM"],Nd],[["AM","PM"],Nd,Nd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Nd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Nd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Nd,"{1} 'at' {0}",Nd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function l0(n){const s=Math.floor(Math.abs(n)),l=n.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===l?1:5}];let Pd={};function Cf(n){const r=function Ky(n){return n.toLowerCase().replace(/_/g,"-")}(n);let s=Yy(r);if(s)return s;const l=r.split("-")[0];if(s=Yy(l),s)return s;if("en"===l)return e_;throw new st(701,!1)}function cm(n){return Cf(n)[xr.PluralCase]}function Yy(n){return n in Pd||(Pd[n]=yr.ng&&yr.ng.common&&yr.ng.common.locales&&yr.ng.common.locales[n]),Pd[n]}var xr=(()=>((xr=xr||{})[xr.LocaleId=0]="LocaleId",xr[xr.DayPeriodsFormat=1]="DayPeriodsFormat",xr[xr.DayPeriodsStandalone=2]="DayPeriodsStandalone",xr[xr.DaysFormat=3]="DaysFormat",xr[xr.DaysStandalone=4]="DaysStandalone",xr[xr.MonthsFormat=5]="MonthsFormat",xr[xr.MonthsStandalone=6]="MonthsStandalone",xr[xr.Eras=7]="Eras",xr[xr.FirstDayOfWeek=8]="FirstDayOfWeek",xr[xr.WeekendRange=9]="WeekendRange",xr[xr.DateFormat=10]="DateFormat",xr[xr.TimeFormat=11]="TimeFormat",xr[xr.DateTimeFormat=12]="DateTimeFormat",xr[xr.NumberSymbols=13]="NumberSymbols",xr[xr.NumberFormats=14]="NumberFormats",xr[xr.CurrencyCode=15]="CurrencyCode",xr[xr.CurrencySymbol=16]="CurrencySymbol",xr[xr.CurrencyName=17]="CurrencyName",xr[xr.Currencies=18]="Currencies",xr[xr.Directionality=19]="Directionality",xr[xr.PluralCase=20]="PluralCase",xr[xr.ExtraData=21]="ExtraData",xr))();const Mh="en-US";let Xy=Mh;function o_(n,r,s,l,f){if(n=ie(n),Array.isArray(n))for(let v=0;v<n.length;v++)o_(n[v],r,s,l,f);else{const v=br(),C=qt();let x=za(n)?n:ie(n.provide),L=eu(n);const q=Ti(),le=1048575&q.providerIndexes,Se=q.directiveStart,it=q.providerIndexes>>20;if(za(n)||!n.multi){const At=new Qs(L,f,$c),Kt=l_(x,r,f?le:le+it,Se);-1===Kt?(Ni(Hs(q,C),v,x),a_(v,n,r.length),r.push(x),q.directiveStart++,q.directiveEnd++,f&&(q.providerIndexes+=1048576),s.push(At),C.push(At)):(s[Kt]=At,C[Kt]=At)}else{const At=l_(x,r,le+it,Se),Kt=l_(x,r,le,le+it),vn=At>=0&&s[At],Pn=Kt>=0&&s[Kt];if(f&&!Pn||!f&&!vn){Ni(Hs(q,C),v,x);const sr=function PI(n,r,s,l,f){const v=new Qs(n,s,$c);return v.multi=[],v.index=r,v.componentProviders=0,b0(v,f,l&&!s),v}(f?NI:OI,s.length,f,l,L);!f&&Pn&&(s[Kt].providerFactory=sr),a_(v,n,r.length,0),r.push(x),q.directiveStart++,q.directiveEnd++,f&&(q.providerIndexes+=1048576),s.push(sr),C.push(sr)}else a_(v,n,At>-1?At:Kt,b0(s[f?Kt:At],L,!f&&l));!f&&l&&Pn&&s[Kt].componentProviders++}}}function a_(n,r,s,l){const f=za(r),v=function gl(n){return!!n.useClass}(r);if(f||v){const L=(v?ie(r.useClass):r).prototype.ngOnDestroy;if(L){const q=n.destroyHooks||(n.destroyHooks=[]);if(!f&&r.multi){const le=q.indexOf(s);-1===le?q.push(s,[l,L]):q[le+1].push(l,L)}else q.push(s,L)}}}function b0(n,r,s){return s&&n.componentProviders++,n.multi.push(r)-1}function l_(n,r,s,l){for(let f=s;f<l;f++)if(r[f]===n)return f;return-1}function OI(n,r,s,l){return u_(this.multi,[])}function NI(n,r,s,l){const f=this.multi;let v;if(this.providerFactory){const C=this.providerFactory.componentProviders,x=Oa(s,s[1],this.providerFactory.index,l);v=x.slice(0,C),u_(f,v);for(let L=C;L<x.length;L++)v.push(x[L])}else v=[],u_(f,v);return v}function u_(n,r){for(let s=0;s<n.length;s++)r.push((0,n[s])());return r}function C0(n,r=[]){return s=>{s.providersResolver=(l,f)=>function RI(n,r,s){const l=br();if(l.firstCreatePass){const f=Ot(n);o_(s,l.data,l.blueprint,f,!0),o_(r,l.data,l.blueprint,f,!1)}}(l,f?f(n):n,r)}}class kp{}class D0{}function kI(n,r){return new S0(n,null!=r?r:null)}class S0 extends kp{constructor(r,s){super(),this._parent=s,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new fp(this);const l=_r(r);this._bootstrapComponents=ru(l.bootstrap),this._r3Injector=Kp(r,s,[{provide:kp,useValue:this},{provide:Ho,useValue:this.componentFactoryResolver}],pe(r),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(r)}get injector(){return this._r3Injector}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class c_ extends D0{constructor(r){super(),this.moduleType=r}create(r){return new S0(this.moduleType,r)}}class FI extends kp{constructor(r,s,l){super(),this.componentFactoryResolver=new fp(this),this.instance=null;const f=new zd([...r,{provide:kp,useValue:this},{provide:Ho,useValue:this.componentFactoryResolver}],s||yl(),l,new Set(["environment"]));this.injector=f,f.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(r){this.injector.onDestroy(r)}}function d_(n,r,s=null){return new FI(n,r,s).injector}let LI=(()=>{class n{constructor(s){this._injector=s,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(s){if(!s.standalone)return null;if(!this.cachedInjectors.has(s.id)){const l=Sc(0,s.type),f=l.length>0?d_([l],this._injector,`Standalone[${s.type.name}]`):null;this.cachedInjectors.set(s.id,f)}return this.cachedInjectors.get(s.id)}ngOnDestroy(){try{for(const s of this.cachedInjectors.values())null!==s&&s.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=ft({token:n,providedIn:"environment",factory:()=>new n(fe(zs))}),n})();function T0(n){n.getStandaloneInjector=r=>r.get(LI).getOrCreateStandaloneInjector(n)}function f_(n){return r=>{setTimeout(n,void 0,r)}}const Kc=class uw extends a.xQ{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,l){var f,v,C;let x=r,L=s||(()=>null),q=l;if(r&&"object"==typeof r){const Se=r;x=null===(f=Se.next)||void 0===f?void 0:f.bind(Se),L=null===(v=Se.error)||void 0===v?void 0:v.bind(Se),q=null===(C=Se.complete)||void 0===C?void 0:C.bind(Se)}this.__isAsync&&(L=f_(L),x&&(x=f_(x)),q&&(q=f_(q)));const le=super.subscribe({next:x,error:L,complete:q});return r instanceof ne.w&&r.add(le),le}};function cw(){return this._results[hc()]()}class p_{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=hc(),l=p_.prototype;l[s]||(l[s]=cw)}get changes(){return this._changes||(this._changes=new Kc)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const l=this;l.dirty=!1;const f=yo(r);(this._changesDetected=!function na(n,r,s){if(n.length!==r.length)return!1;for(let l=0;l<n.length;l++){let f=n[l],v=r[l];if(s&&(f=s(f),v=s(v)),v!==f)return!1}return!0}(l._results,f,s))&&(l._results=f,l.length=f.length,l.last=f[this.length-1],l.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let gm=(()=>{class n{}return n.__NG_ELEMENT_ID__=fw,n})();const dw=gm,hw=class extends dw{constructor(r,s,l){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=l}createEmbeddedView(r,s){const l=this._declarationTContainer.tViews,f=ph(this._declarationLView,l,r,16,null,l.declTNode,null,null,null,null,s||null);f[17]=this._declarationLView[this._declarationTContainer.index];const C=this._declarationLView[19];return null!==C&&(f[19]=C.createEmbeddedView(l)),_g(l,f,r),new _h(f)}};function fw(){return ev(Ti(),qt())}function ev(n,r){return 4&n.type?new hw(r,n,b(n,r)):null}let tv=(()=>{class n{}return n.__NG_ELEMENT_ID__=pw,n})();function pw(){return U0(Ti(),qt())}const gw=tv,B0=class extends gw{constructor(r,s,l){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=l}get element(){return b(this._hostTNode,this._hostLView)}get injector(){return new ur(this._hostTNode,this._hostLView)}get parentInjector(){const r=Qt(this._hostTNode,this._hostLView);if(Wl(r)){const s=ko(r,this._hostLView),l=zr(r);return new ur(s[1].data[l+8],s)}return new ur(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=$0(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,s,l){let f,v;"number"==typeof l?f=l:null!=l&&(f=l.index,v=l.injector);const C=r.createEmbeddedView(s||{},v);return this.insert(C,f),C}createComponent(r,s,l,f,v){const C=r&&!function mo(n){return"function"==typeof n}(r);let x;if(C)x=s;else{const Se=s||{};x=Se.index,l=Se.injector,f=Se.projectableNodes,v=Se.environmentInjector||Se.ngModuleRef}const L=C?r:new cf(tt(r)),q=l||this.parentInjector;if(!v&&null==L.ngModule){const it=(C?q:this.parentInjector).get(zs,null);it&&(v=it)}const le=L.create(q,f,void 0,v);return this.insert(le.hostView,x),le}insert(r,s){const l=r._lView,f=l[1];if(function us(n){return Ct(n[3])}(l)){const le=this.indexOf(r);if(-1!==le)this.detach(le);else{const Se=l[3],it=new B0(Se,Se[6],Se[3]);it.detach(it.indexOf(r))}}const v=this._adjustIndex(s),C=this._lContainer;!function u(n,r,s,l){const f=10+l,v=s.length;l>0&&(s[f-1][4]=r),l<v-10?(r[4]=s[f],Ga(s,10+l,r)):(s.push(r),r[4]=null),r[3]=s;const C=r[17];null!==C&&s!==C&&function c(n,r){const s=n[9];r[16]!==r[3][3][16]&&(n[2]=!0),null===s?n[9]=[r]:s.push(r)}(C,r);const x=r[19];null!==x&&x.insertView(n),r[2]|=64}(f,l,C,v);const x=$f(v,C),L=l[11],q=co(L,C[7]);return null!==q&&function Bc(n,r,s,l,f,v){l[0]=f,l[6]=r,Gh(n,l,s,1,f,v)}(f,C[6],L,l,q,x),r.attachToViewContainerRef(),Ga(g_(C),v,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=$0(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),l=D(this._lContainer,s);l&&(Pa(g_(this._lContainer),s),k(l[1],l))}detach(r){const s=this._adjustIndex(r,-1),l=D(this._lContainer,s);return l&&null!=Pa(g_(this._lContainer),s)?new _h(l):null}_adjustIndex(r,s=0){return null==r?this.length+s:r}};function $0(n){return n[8]}function g_(n){return n[8]||(n[8]=[])}function U0(n,r){let s;const l=r[n.index];if(Ct(l))s=l;else{let f;if(8&n.type)f=ai(l);else{const v=r[11];f=v.createComment("");const C=yi(n,r);Ft(v,co(v,C),f,function El(n,r){return n.nextSibling(r)}(v,C),!1)}r[n.index]=s=Ng(l,r,f,n),lf(r,s)}return new B0(s,n,r)}class m_{constructor(r){this.queryList=r,this.matches=null}clone(){return new m_(this.queryList)}setDirty(){this.queryList.setDirty()}}class y_{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const l=null!==r.contentQueries?r.contentQueries[0]:s.length,f=[];for(let v=0;v<l;v++){const C=s.getByIndex(v);f.push(this.queries[C.indexInDeclarationView].clone())}return new y_(f)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==Z0(r,s).matches&&this.queries[s].setDirty()}}class j0{constructor(r,s,l=null){this.predicate=r,this.flags=s,this.read=l}}class v_{constructor(r=[]){this.queries=r}elementStart(r,s){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let l=0;l<this.length;l++){const f=null!==s?s.length:0,v=this.getByIndex(l).embeddedTView(r,f);v&&(v.indexInDeclarationView=l,null!==s?s.push(v):s=[v])}return null!==s?new v_(s):null}template(r,s){for(let l=0;l<this.queries.length;l++)this.queries[l].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class __{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new __(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let l=r.parent;for(;null!==l&&8&l.type&&l.index!==s;)l=l.parent;return s===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const l=this.metadata.predicate;if(Array.isArray(l))for(let f=0;f<l.length;f++){const v=l[f];this.matchTNodeWithReadOption(r,s,vw(s,v)),this.matchTNodeWithReadOption(r,s,Jo(s,r,v,!1,!1))}else l===gm?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,Jo(s,r,l,!1,!1))}matchTNodeWithReadOption(r,s,l){if(null!==l){const f=this.metadata.read;if(null!==f)if(f===p||f===tv||f===gm&&4&s.type)this.addMatch(s.index,-2);else{const v=Jo(s,r,f,!1,!1);null!==v&&this.addMatch(s.index,v)}else this.addMatch(s.index,l)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function vw(n,r){const s=n.localNames;if(null!==s)for(let l=0;l<s.length;l+=2)if(s[l]===r)return s[l+1];return null}function Ew(n,r,s,l){return-1===s?function _w(n,r){return 11&n.type?b(n,r):4&n.type?ev(n,r):null}(r,n):-2===s?function Iw(n,r,s){return s===p?b(r,n):s===gm?ev(r,n):s===tv?U0(r,n):void 0}(n,r,l):Oa(n,n[1],s,r)}function H0(n,r,s,l){const f=r[19].queries[l];if(null===f.matches){const v=n.data,C=s.matches,x=[];for(let L=0;L<C.length;L+=2){const q=C[L];x.push(q<0?null:Ew(r,v[q],C[L+1],s.metadata.read))}f.matches=x}return f.matches}function E_(n,r,s,l){const f=n.queries.getByIndex(s),v=f.matches;if(null!==v){const C=H0(n,r,f,s);for(let x=0;x<v.length;x+=2){const L=v[x];if(L>0)l.push(C[x/2]);else{const q=v[x+1],le=r[-L];for(let Se=10;Se<le.length;Se++){const it=le[Se];it[17]===it[3]&&E_(it[1],it,q,l)}if(null!==le[9]){const Se=le[9];for(let it=0;it<Se.length;it++){const At=Se[it];E_(At[1],At,q,l)}}}}}return l}function G0(n){const r=qt(),s=br(),l=bs();Cs(l+1);const f=Z0(s,l);if(n.dirty&&function ls(n){return 4==(4&n[2])}(r)===(2==(2&f.metadata.flags))){if(null===f.matches)n.reset([]);else{const v=f.crossesNgTemplate?E_(s,r,l,[]):H0(s,r,f,l);n.reset(v,_),n.notifyOnChanges()}return!0}return!1}function W0(n,r,s){const l=br();l.firstCreatePass&&(K0(l,new j0(n,r,s),-1),2==(2&r)&&(l.staticViewQueries=!0)),q0(l,qt(),r)}function z0(n,r,s,l){const f=br();if(f.firstCreatePass){const v=Ti();K0(f,new j0(r,s,l),v.index),function bw(n,r){const s=n.contentQueries||(n.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(n.queries.length-1,r)}(f,n),2==(2&s)&&(f.staticContentQueries=!0)}q0(f,qt(),s)}function Y0(){return function ww(n,r){return n[19].queries[r].queryList}(qt(),bs())}function q0(n,r,s){const l=new p_(4==(4&s));wg(n,r,l,l.destroy),null===r[19]&&(r[19]=new y_),r[19].queries.push(new m_(l))}function K0(n,r,s){null===n.queries&&(n.queries=new v_),n.queries.track(new __(r,s))}function Z0(n,r){return n.queries.getByIndex(r)}function rv(...n){}const gE=new Di("Application Initializer");let iv=(()=>{class n{constructor(s){this.appInits=s,this.resolve=rv,this.reject=rv,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,f)=>{this.resolve=l,this.reject=f})}runInitializers(){if(this.initialized)return;const s=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const v=this.appInits[f]();if(zg(v))s.push(v);else if(Ip(v)){const C=new Promise((x,L)=>{v.subscribe({complete:x,error:L})});s.push(C)}}Promise.all(s).then(()=>{l()}).catch(f=>{this.reject(f)}),0===s.length&&l(),this.initialized=!0}}return n.\u0275fac=function(s){return new(s||n)(fe(gE,8))},n.\u0275prov=ft({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const mE=new Di("AppId",{providedIn:"root",factory:function yE(){return`${D_()}${D_()}${D_()}`}});function D_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const vE=new Di("Platform Initializer"),Gw=new Di("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),_E=new Di("appBootstrapListener");let Ww=(()=>{class n{log(s){console.log(s)}warn(s){console.warn(s)}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=ft({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const sv=new Di("LocaleId",{providedIn:"root",factory:()=>wt(sv,Wt.Optional|Wt.SkipSelf)||function zw(){return"undefined"!=typeof $localize&&$localize.locale||Mh}()}),Yw=new Di("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class qw{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let Kw=(()=>{class n{compileModuleSync(s){return new c_(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const l=this.compileModuleSync(s),v=ru(_r(s).declarations).reduce((C,x)=>{const L=tt(x);return L&&C.push(new cf(L)),C},[]);return new qw(l,v)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=ft({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Xw=(()=>Promise.resolve(0))();function S_(n){"undefined"==typeof Zone?Xw.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Lu{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Kc(!1),this.onMicrotaskEmpty=new Kc(!1),this.onStable=new Kc(!1),this.onError=new Kc(!1),"undefined"==typeof Zone)throw new st(908,!1);Zone.assertZonePatched();const f=this;if(f._nesting=0,f._outer=f._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const v=Zone.AsyncStackTaggingZoneSpec;f._inner=f._inner.fork(new v("Angular"))}Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!l&&s,f.shouldCoalesceRunChangeDetection=l,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function Jw(){let n=yr.requestAnimationFrame,r=yr.cancelAnimationFrame;if("undefined"!=typeof Zone&&n&&r){const s=n[Zone.__symbol__("OriginalDelegate")];s&&(n=s);const l=r[Zone.__symbol__("OriginalDelegate")];l&&(r=l)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function nb(n){const r=()=>{!function tb(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(yr,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,A_(n),n.isCheckStableRunning=!0,T_(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),A_(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,l,f,v,C,x)=>{try{return wE(n),s.invokeTask(f,v,C,x)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===v.type||n.shouldCoalesceRunChangeDetection)&&r(),bE(n)}},onInvoke:(s,l,f,v,C,x,L)=>{try{return wE(n),s.invoke(f,v,C,x,L)}finally{n.shouldCoalesceRunChangeDetection&&r(),bE(n)}},onHasTask:(s,l,f,v)=>{s.hasTask(f,v),l===f&&("microTask"==v.change?(n._hasPendingMicrotasks=v.microTask,A_(n),T_(n)):"macroTask"==v.change&&(n.hasPendingMacrotasks=v.macroTask))},onHandleError:(s,l,f,v)=>(s.handleError(f,v),n.runOutsideAngular(()=>n.onError.emit(v)),!1)})}(f)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Lu.isInAngularZone())throw new st(909,!1)}static assertNotInAngularZone(){if(Lu.isInAngularZone())throw new st(909,!1)}run(r,s,l){return this._inner.run(r,s,l)}runTask(r,s,l,f){const v=this._inner,C=v.scheduleEventTask("NgZoneEvent: "+f,r,eb,rv,rv);try{return v.runTask(C,s,l)}finally{v.cancelTask(C)}}runGuarded(r,s,l){return this._inner.runGuarded(r,s,l)}runOutsideAngular(r){return this._outer.run(r)}}const eb={};function T_(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function A_(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function wE(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function bE(n){n._nesting--,T_(n)}class rb{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Kc,this.onMicrotaskEmpty=new Kc,this.onStable=new Kc,this.onError=new Kc}run(r,s,l){return r.apply(s,l)}runGuarded(r,s,l){return r.apply(s,l)}runOutsideAngular(r){return r()}runTask(r,s,l,f){return r.apply(s,l)}}const CE=new Di(""),DE=new Di("");let ym,ib=(()=>{class n{constructor(s,l,f){this._ngZone=s,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,ym||(function sb(n){ym=n}(f),f.addToWindow(l)),this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Lu.assertNotInAngularZone(),S_(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())S_(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(s)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,l,f){let v=-1;l&&l>0&&(v=setTimeout(()=>{this._callbacks=this._callbacks.filter(C=>C.timeoutId!==v),s(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:s,timeoutId:v,updateCb:f})}whenStable(s,l,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,l,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(s){this.registry.registerApplication(s,this)}unregisterApplication(s){this.registry.unregisterApplication(s)}findProviders(s,l,f){return[]}}return n.\u0275fac=function(s){return new(s||n)(fe(Lu),fe(SE),fe(DE))},n.\u0275prov=ft({token:n,factory:n.\u0275fac}),n})(),SE=(()=>{class n{constructor(){this._applications=new Map}registerApplication(s,l){this._applications.set(s,l)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,l=!0){var f;return null!==(f=null==ym?void 0:ym.findTestabilityInTree(this,s,l))&&void 0!==f?f:null}}return n.\u0275fac=function(s){return new(s||n)},n.\u0275prov=ft({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),Zc=null;const TE=new Di("AllowMultipleToken"),x_=new Di("PlatformDestroyListeners");class lb{constructor(r,s){this.name=r,this.token=s}}function xE(n,r,s=[]){const l=`Platform: ${r}`,f=new Di(l);return(v=[])=>{let C=M_();if(!C||C.injector.get(TE,!1)){const x=[...s,...v,{provide:f,useValue:!0}];n?n(x):function ub(n){if(Zc&&!Zc.get(TE,!1))throw new st(400,!1);Zc=n;const r=n.get(RE);(function AE(n){const r=n.get(vE,null);r&&r.forEach(s=>s())})(n)}(function ME(n=[],r){return Ed.create({name:r,providers:[{provide:ml,useValue:"platform"},{provide:x_,useValue:new Set([()=>Zc=null])},...n]})}(x,l))}return function db(n){const r=M_();if(!r)throw new st(401,!1);return r}()}}function M_(){var n;return null!==(n=null==Zc?void 0:Zc.get(RE))&&void 0!==n?n:null}let RE=(()=>{class n{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,l){const f=function NE(n,r){let s;return s="noop"===n?new rb:("zone.js"===n?void 0:n)||new Lu(r),s}(null==l?void 0:l.ngZone,function OE(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(l)),v=[{provide:Lu,useValue:f}];return f.run(()=>{const C=Ed.create({providers:v,parent:this.injector,name:s.moduleType.name}),x=s.create(C),L=x.injector.get(Nc,null);if(!L)throw new st(402,!1);return f.runOutsideAngular(()=>{const q=f.onError.subscribe({next:le=>{L.handleError(le)}});x.onDestroy(()=>{av(this._modules,x),q.unsubscribe()})}),function PE(n,r,s){try{const l=s();return zg(l)?l.catch(f=>{throw r.runOutsideAngular(()=>n.handleError(f)),f}):l}catch(l){throw r.runOutsideAngular(()=>n.handleError(l)),l}}(L,f,()=>{const q=x.injector.get(iv);return q.runInitializers(),q.donePromise.then(()=>(function r_(n){at(n,"Expected localeId to be defined"),"string"==typeof n&&(Xy=n.toLowerCase().replace(/_/g,"-"))}(x.injector.get(sv,Mh)||Mh),this._moduleDoBootstrap(x),x))})})}bootstrapModule(s,l=[]){const f=kE({},l);return function ob(n,r,s){const l=new c_(s);return Promise.resolve(l)}(0,0,s).then(v=>this.bootstrapModuleFactory(v,f))}_moduleDoBootstrap(s){const l=s.injector.get(ov);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(f=>l.bootstrap(f));else{if(!s.instance.ngDoBootstrap)throw new st(403,!1);s.instance.ngDoBootstrap(l)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new st(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const s=this._injector.get(x_,null);s&&(s.forEach(l=>l()),s.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(s){return new(s||n)(fe(Ed))},n.\u0275prov=ft({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function kE(n,r){return Array.isArray(r)?r.reduce(kE,n):Object.assign(Object.assign({},n),r)}let ov=(()=>{class n{constructor(s,l,f){this._zone=s,this._injector=l,this._exceptionHandler=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const v=new Y.y(x=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{x.next(this._stable),x.complete()})}),C=new Y.y(x=>{let L;this._zone.runOutsideAngular(()=>{L=this._zone.onStable.subscribe(()=>{Lu.assertNotInAngularZone(),S_(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,x.next(!0))})})});const q=this._zone.onUnstable.subscribe(()=>{Lu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{x.next(!1)}))});return()=>{L.unsubscribe(),q.unsubscribe()}});this.isStable=(0,Pe.T)(v,C.pipe((0,Le.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(s,l){const f=s instanceof xc;if(!this._injector.get(iv).done)throw!f&&ar(s),new st(405,false);let C;C=f?s:this._injector.get(Ho).resolveComponentFactory(s),this.componentTypes.push(C.componentType);const x=function ab(n){return n.isBoundToModule}(C)?void 0:this._injector.get(kp),q=C.create(Ed.NULL,[],l||C.selector,x),le=q.location.nativeElement,Se=q.injector.get(CE,null);return null==Se||Se.registerApplication(le),q.onDestroy(()=>{this.detachView(q.hostView),av(this.components,q),null==Se||Se.unregisterApplication(le)}),this._loadComponent(q),q}tick(){if(this._runningTick)throw new st(101,!1);try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const l=s;this._views.push(l),l.attachToAppRef(this)}detachView(s){const l=s;av(this._views,l),l.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get(_E,[]).concat(this._bootstrapListeners).forEach(f=>f(s))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(s=>s()),this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(s){return this._destroyListeners.push(s),()=>av(this._destroyListeners,s)}destroy(){if(this._destroyed)throw new st(406,!1);const s=this._injector;s.destroy&&!s.destroyed&&s.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(s){return new(s||n)(fe(Lu),fe(zs),fe(Nc))},n.\u0275prov=ft({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function av(n,r){const s=n.indexOf(r);s>-1&&n.splice(s,1)}let LE=!0,VE=!1;function fb(){return VE=!0,LE}function pb(){if(VE)throw new Error("Cannot enable prod mode after platform setup.");LE=!1}let gb=(()=>{class n{}return n.__NG_ELEMENT_ID__=mb,n})();function mb(n){return function yb(n,r,s){if(qe(n)&&!s){const l=Or(n.index,r);return new _h(l,l)}return 47&n.type?new _h(r[16],r):null}(Ti(),qt(),16==(16&n))}class jE{constructor(){}supports(r){return hf(r)}create(r){return new bb(r)}}const wb=(n,r)=>r;class bb{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||wb}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,l=this._removalsHead,f=0,v=null;for(;s||l;){const C=!l||s&&s.currentIndex<GE(l,f,v)?s:l,x=GE(C,f,v),L=C.currentIndex;if(C===l)f--,l=l._nextRemoved;else if(s=s._next,null==C.previousIndex)f++;else{v||(v=[]);const q=x-f,le=L-f;if(q!=le){for(let it=0;it<q;it++){const At=it<v.length?v[it]:v[it]=0,Kt=At+it;le<=Kt&&Kt<q&&(v[it]=At+1)}v[C.previousIndex]=le-q}}x!==L&&r(C,x,L)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!hf(r))throw new st(900,!1);return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let f,v,C,s=this._itHead,l=!1;if(Array.isArray(r)){this.length=r.length;for(let x=0;x<this.length;x++)v=r[x],C=this._trackByFn(x,v),null!==s&&Object.is(s.trackById,C)?(l&&(s=this._verifyReinsertion(s,v,C,x)),Object.is(s.item,v)||this._addIdentityChange(s,v)):(s=this._mismatch(s,v,C,x),l=!0),s=s._next}else f=0,function cy(n,r){if(Array.isArray(n))for(let s=0;s<n.length;s++)r(n[s]);else{const s=n[hc()]();let l;for(;!(l=s.next()).done;)r(l.value)}}(r,x=>{C=this._trackByFn(f,x),null!==s&&Object.is(s.trackById,C)?(l&&(s=this._verifyReinsertion(s,x,C,f)),Object.is(s.item,x)||this._addIdentityChange(s,x)):(s=this._mismatch(s,x,C,f),l=!0),s=s._next,f++}),this.length=f;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,l,f){let v;return null===r?v=this._itTail:(v=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,v,f)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(l,f))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,v,f)):r=this._addAfter(new Cb(s,l),v,f),r}_verifyReinsertion(r,s,l,f){let v=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==v?r=this._reinsertAfter(v,r._prev,f):r.currentIndex!=f&&(r.currentIndex=f,this._addToMoves(r,f)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const f=r._prevRemoved,v=r._nextRemoved;return null===f?this._removalsHead=v:f._nextRemoved=v,null===v?this._removalsTail=f:v._prevRemoved=f,this._insertAfter(r,s,l),this._addToMoves(r,l),r}_moveAfter(r,s,l){return this._unlink(r),this._insertAfter(r,s,l),this._addToMoves(r,l),r}_addAfter(r,s,l){return this._insertAfter(r,s,l),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,l){const f=null===s?this._itHead:s._next;return r._next=f,r._prev=s,null===f?this._itTail=r:f._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new HE),this._linkedRecords.put(r),r.currentIndex=l,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,l=r._next;return null===s?this._itHead=l:s._next=l,null===l?this._itTail=s:l._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new HE),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class Cb{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Db{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===s||s<=l.currentIndex)&&Object.is(l.trackById,r))return l;return null}remove(r){const s=r._prevDup,l=r._nextDup;return null===s?this._head=l:s._nextDup=l,null===l?this._tail=s:l._prevDup=s,null===this._head}}class HE{constructor(){this.map=new Map}put(r){const s=r.trackById;let l=this.map.get(s);l||(l=new Db,this.map.set(s,l)),l.add(r)}get(r,s){const f=this.map.get(r);return f?f.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function GE(n,r,s){const l=n.previousIndex;if(null===l)return l;let f=0;return s&&l<s.length&&(f=s[l]),l+r+f}class WE{constructor(){}supports(r){return r instanceof Map||jg(r)}create(){return new Sb}}class Sb{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||jg(r)))throw new st(900,!1)}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(l,f)=>{if(s&&s.key===f)this._maybeAddToChanges(s,l),this._appendAfter=s,s=s._next;else{const v=this._getOrCreateRecordForKey(f,l);s=this._insertBeforeOrAppend(s,v)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let l=s;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const l=r._prev;return s._next=r,s._prev=l,r._prev=s,l&&(l._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const f=this._records.get(r);this._maybeAddToChanges(f,s);const v=f._prev,C=f._next;return v&&(v._next=C),C&&(C._prev=v),f._next=null,f._prev=null,f}const l=new Tb(r);return this._records.set(r,l),l.currentValue=s,this._addToAdditions(l),l}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(l=>s(r[l],l))}}class Tb{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function zE(){return new k_([new jE])}let k_=(()=>{class n{constructor(s){this.factories=s}static create(s,l){if(null!=l){const f=l.factories.slice();s=s.concat(f)}return new n(s)}static extend(s){return{provide:n,useFactory:l=>n.create(s,l||zE()),deps:[[n,new lo,new hs]]}}find(s){const l=this.factories.find(f=>f.supports(s));if(null!=l)return l;throw new st(901,!1)}}return n.\u0275prov=ft({token:n,providedIn:"root",factory:zE}),n})();function YE(){return new F_([new WE])}let F_=(()=>{class n{constructor(s){this.factories=s}static create(s,l){if(l){const f=l.factories.slice();s=s.concat(f)}return new n(s)}static extend(s){return{provide:n,useFactory:l=>n.create(s,l||YE()),deps:[[n,new lo,new hs]]}}find(s){const l=this.factories.find(f=>f.supports(s));if(l)return l;throw new st(901,!1)}}return n.\u0275prov=ft({token:n,providedIn:"root",factory:YE}),n})();const Mb=xE(null,"core",[]);let Rb=(()=>{class n{constructor(s){}}return n.\u0275fac=function(s){return new(s||n)(fe(ov))},n.\u0275mod=On({type:n}),n.\u0275inj=Vt({}),n})();function Ob(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}},4182:(tn,ot,H)=>{"use strict";H.d(ot,{qu:()=>bo,u:()=>Ys,sg:()=>Os,u5:()=>wo,JU:()=>ie,a5:()=>mr,JJ:()=>Jn,JL:()=>Cr,UX:()=>qt,kI:()=>ht,_Y:()=>Ke});var a=H(5e3),ne=H(9808),Y=H(5254),Pe=H(6498),Le=H(6688),he=H(4850),Ee=H(7830);function be(G,B){return new Pe.y(M=>{const g=G.length;if(0===g)return void M.complete();const P=new Array(g);let E=0,V=0;for(let se=0;se<g;se++){const ut=(0,Y.D)(G[se]);let Xt=!1;M.add(ut.subscribe({next:yn=>{Xt||(Xt=!0,V++),P[se]=yn},error:yn=>M.error(yn),complete:()=>{E++,(E===g||!Xt)&&(V===g&&M.next(B?B.reduce((yn,Zn,ni)=>(yn[Zn]=P[ni],yn),{}):P),M.complete())}}))}})}let ce=(()=>{class G{constructor(M,g){this._renderer=M,this._elementRef=g,this.onChange=P=>{},this.onTouched=()=>{}}setProperty(M,g){this._renderer.setProperty(this._elementRef.nativeElement,M,g)}registerOnTouched(M){this.onTouched=M}registerOnChange(M){this.onChange=M}setDisabledState(M){this.setProperty("disabled",M)}}return G.\u0275fac=function(M){return new(M||G)(a.Y36(a.Qsj),a.Y36(a.SBq))},G.\u0275dir=a.lG2({type:G}),G})(),de=(()=>{class G extends ce{}return G.\u0275fac=function(){let B;return function(g){return(B||(B=a.n5z(G)))(g||G)}}(),G.\u0275dir=a.lG2({type:G,features:[a.qOj]}),G})();const ie=new a.OlP("NgValueAccessor"),st={provide:ie,useExisting:(0,a.Gpc)(()=>De),multi:!0},Re=new a.OlP("CompositionEventMode");let De=(()=>{class G extends ce{constructor(M,g,P){super(M,g),this._compositionMode=P,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function et(){const G=(0,ne.q)()?(0,ne.q)().getUserAgent():"";return/android (\d+)/.test(G.toLowerCase())}())}writeValue(M){this.setProperty("value",null==M?"":M)}_handleInput(M){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(M)}_compositionStart(){this._composing=!0}_compositionEnd(M){this._composing=!1,this._compositionMode&&this.onChange(M)}}return G.\u0275fac=function(M){return new(M||G)(a.Y36(a.Qsj),a.Y36(a.SBq),a.Y36(Re,8))},G.\u0275dir=a.lG2({type:G,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(M,g){1&M&&a.NdJ("input",function(E){return g._handleInput(E.target.value)})("blur",function(){return g.onTouched()})("compositionstart",function(){return g._compositionStart()})("compositionend",function(E){return g._compositionEnd(E.target.value)})},features:[a._Bn([st]),a.qOj]}),G})();function me(G){return null==G||("string"==typeof G||Array.isArray(G))&&0===G.length}function vt(G){return null!=G&&"number"==typeof G.length}const mt=new a.OlP("NgValidators"),xt=new a.OlP("NgAsyncValidators"),Be=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class ht{static min(B){return function ye(G){return B=>{if(me(B.value)||me(G))return null;const M=parseFloat(B.value);return!isNaN(M)&&M<G?{min:{min:G,actual:B.value}}:null}}(B)}static max(B){return function Oe(G){return B=>{if(me(B.value)||me(G))return null;const M=parseFloat(B.value);return!isNaN(M)&&M>G?{max:{max:G,actual:B.value}}:null}}(B)}static required(B){return function ve(G){return me(G.value)?{required:!0}:null}(B)}static requiredTrue(B){return function oe(G){return!0===G.value?null:{required:!0}}(B)}static email(B){return function Ce(G){return me(G.value)||Be.test(G.value)?null:{email:!0}}(B)}static minLength(B){return function Te(G){return B=>me(B.value)||!vt(B.value)?null:B.value.length<G?{minlength:{requiredLength:G,actualLength:B.value.length}}:null}(B)}static maxLength(B){return function lt(G){return B=>vt(B.value)&&B.value.length>G?{maxlength:{requiredLength:G,actualLength:B.value.length}}:null}(B)}static pattern(B){return function J(G){if(!G)return Gt;let B,M;return"string"==typeof G?(M="","^"!==G.charAt(0)&&(M+="^"),M+=G,"$"!==G.charAt(G.length-1)&&(M+="$"),B=new RegExp(M)):(M=G.toString(),B=G),g=>{if(me(g.value))return null;const P=g.value;return B.test(P)?null:{pattern:{requiredPattern:M,actualValue:P}}}}(B)}static nullValidator(B){return null}static compose(B){return ft(B)}static composeAsync(B){return Vt(B)}}function Gt(G){return null}function bt(G){return null!=G}function at(G){return(0,a.QGY)(G)?(0,Y.D)(G):G}function $e(G){let B={};return G.forEach(M=>{B=null!=M?Object.assign(Object.assign({},B),M):B}),0===Object.keys(B).length?null:B}function Ue(G,B){return B.map(M=>M(G))}function Qe(G){return G.map(B=>function Je(G){return!G.validate}(B)?B:M=>B.validate(M))}function ft(G){if(!G)return null;const B=G.filter(bt);return 0==B.length?null:function(M){return $e(Ue(M,B))}}function pt(G){return null!=G?ft(Qe(G)):null}function Vt(G){if(!G)return null;const B=G.filter(bt);return 0==B.length?null:function(M){return function pe(...G){if(1===G.length){const B=G[0];if((0,Le.k)(B))return be(B,null);if((0,Ee.K)(B)&&Object.getPrototypeOf(B)===Object.prototype){const M=Object.keys(B);return be(M.map(g=>B[g]),M)}}if("function"==typeof G[G.length-1]){const B=G.pop();return be(G=1===G.length&&(0,Le.k)(G[0])?G[0]:G,null).pipe((0,he.U)(M=>B(...M)))}return be(G,null)}(Ue(M,B).map(at)).pipe((0,he.U)($e))}}function Nt(G){return null!=G?Vt(Qe(G)):null}function bn(G,B){return null===G?[B]:Array.isArray(G)?[...G,B]:[G,B]}function In(G){return G._rawValidators}function Qn(G){return G._rawAsyncValidators}function Rn(G){return G?Array.isArray(G)?G:[G]:[]}function Wn(G,B){return Array.isArray(G)?G.includes(B):G===B}function cr(G,B){const M=Rn(B);return Rn(G).forEach(P=>{Wn(M,P)||M.push(P)}),M}function Hn(G,B){return Rn(B).filter(M=>!Wn(G,M))}class or{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(B){this._rawValidators=B||[],this._composedValidatorFn=pt(this._rawValidators)}_setAsyncValidators(B){this._rawAsyncValidators=B||[],this._composedAsyncValidatorFn=Nt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(B){this._onDestroyCallbacks.push(B)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(B=>B()),this._onDestroyCallbacks=[]}reset(B){this.control&&this.control.reset(B)}hasError(B,M){return!!this.control&&this.control.hasError(B,M)}getError(B,M){return this.control?this.control.getError(B,M):null}}class mr extends or{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Wt extends or{get formDirective(){return null}get path(){return null}}class rr{constructor(B){this._cd=B}get isTouched(){var B,M;return!(null===(M=null===(B=this._cd)||void 0===B?void 0:B.control)||void 0===M||!M.touched)}get isUntouched(){var B,M;return!(null===(M=null===(B=this._cd)||void 0===B?void 0:B.control)||void 0===M||!M.untouched)}get isPristine(){var B,M;return!(null===(M=null===(B=this._cd)||void 0===B?void 0:B.control)||void 0===M||!M.pristine)}get isDirty(){var B,M;return!(null===(M=null===(B=this._cd)||void 0===B?void 0:B.control)||void 0===M||!M.dirty)}get isValid(){var B,M;return!(null===(M=null===(B=this._cd)||void 0===B?void 0:B.control)||void 0===M||!M.valid)}get isInvalid(){var B,M;return!(null===(M=null===(B=this._cd)||void 0===B?void 0:B.control)||void 0===M||!M.invalid)}get isPending(){var B,M;return!(null===(M=null===(B=this._cd)||void 0===B?void 0:B.control)||void 0===M||!M.pending)}get isSubmitted(){var B;return!(null===(B=this._cd)||void 0===B||!B.submitted)}}let Jn=(()=>{class G extends rr{constructor(M){super(M)}}return G.\u0275fac=function(M){return new(M||G)(a.Y36(mr,2))},G.\u0275dir=a.lG2({type:G,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(M,g){2&M&&a.ekj("ng-untouched",g.isUntouched)("ng-touched",g.isTouched)("ng-pristine",g.isPristine)("ng-dirty",g.isDirty)("ng-valid",g.isValid)("ng-invalid",g.isInvalid)("ng-pending",g.isPending)},features:[a.qOj]}),G})(),Cr=(()=>{class G extends rr{constructor(M){super(M)}}return G.\u0275fac=function(M){return new(M||G)(a.Y36(Wt,10))},G.\u0275dir=a.lG2({type:G,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(M,g){2&M&&a.ekj("ng-untouched",g.isUntouched)("ng-touched",g.isTouched)("ng-pristine",g.isPristine)("ng-dirty",g.isDirty)("ng-valid",g.isValid)("ng-invalid",g.isInvalid)("ng-pending",g.isPending)("ng-submitted",g.isSubmitted)},features:[a.qOj]}),G})();const ln="VALID",kn="INVALID",Cn="PENDING",On="DISABLED";function je(G){return(tt(G)?G.validators:G)||null}function Ne(G){return Array.isArray(G)?pt(G):G||null}function He(G,B){return(tt(B)?B.asyncValidators:G)||null}function dt(G){return Array.isArray(G)?Nt(G):G||null}function tt(G){return null!=G&&!Array.isArray(G)&&"object"==typeof G}function on(G,B,M){const g=G.controls;if(!(B?Object.keys(g):g).length)throw new a.vHH(1e3,"");if(!g[M])throw new a.vHH(1001,"")}function _n(G,B,M){G._forEachChild((g,P)=>{if(void 0===M[P])throw new a.vHH(1002,"")})}class ar{constructor(B,M){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=B,this._rawAsyncValidators=M,this._composedValidatorFn=Ne(this._rawValidators),this._composedAsyncValidatorFn=dt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(B){this._rawValidators=this._composedValidatorFn=B}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(B){this._rawAsyncValidators=this._composedAsyncValidatorFn=B}get parent(){return this._parent}get valid(){return this.status===ln}get invalid(){return this.status===kn}get pending(){return this.status==Cn}get disabled(){return this.status===On}get enabled(){return this.status!==On}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(B){this._rawValidators=B,this._composedValidatorFn=Ne(B)}setAsyncValidators(B){this._rawAsyncValidators=B,this._composedAsyncValidatorFn=dt(B)}addValidators(B){this.setValidators(cr(B,this._rawValidators))}addAsyncValidators(B){this.setAsyncValidators(cr(B,this._rawAsyncValidators))}removeValidators(B){this.setValidators(Hn(B,this._rawValidators))}removeAsyncValidators(B){this.setAsyncValidators(Hn(B,this._rawAsyncValidators))}hasValidator(B){return Wn(this._rawValidators,B)}hasAsyncValidator(B){return Wn(this._rawAsyncValidators,B)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(B={}){this.touched=!0,this._parent&&!B.onlySelf&&this._parent.markAsTouched(B)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(B=>B.markAllAsTouched())}markAsUntouched(B={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(M=>{M.markAsUntouched({onlySelf:!0})}),this._parent&&!B.onlySelf&&this._parent._updateTouched(B)}markAsDirty(B={}){this.pristine=!1,this._parent&&!B.onlySelf&&this._parent.markAsDirty(B)}markAsPristine(B={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(M=>{M.markAsPristine({onlySelf:!0})}),this._parent&&!B.onlySelf&&this._parent._updatePristine(B)}markAsPending(B={}){this.status=Cn,!1!==B.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!B.onlySelf&&this._parent.markAsPending(B)}disable(B={}){const M=this._parentMarkedDirty(B.onlySelf);this.status=On,this.errors=null,this._forEachChild(g=>{g.disable(Object.assign(Object.assign({},B),{onlySelf:!0}))}),this._updateValue(),!1!==B.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},B),{skipPristineCheck:M})),this._onDisabledChange.forEach(g=>g(!0))}enable(B={}){const M=this._parentMarkedDirty(B.onlySelf);this.status=ln,this._forEachChild(g=>{g.enable(Object.assign(Object.assign({},B),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:B.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},B),{skipPristineCheck:M})),this._onDisabledChange.forEach(g=>g(!1))}_updateAncestors(B){this._parent&&!B.onlySelf&&(this._parent.updateValueAndValidity(B),B.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(B){this._parent=B}getRawValue(){return this.value}updateValueAndValidity(B={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ln||this.status===Cn)&&this._runAsyncValidator(B.emitEvent)),!1!==B.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!B.onlySelf&&this._parent.updateValueAndValidity(B)}_updateTreeValidity(B={emitEvent:!0}){this._forEachChild(M=>M._updateTreeValidity(B)),this.updateValueAndValidity({onlySelf:!0,emitEvent:B.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?On:ln}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(B){if(this.asyncValidator){this.status=Cn,this._hasOwnPendingAsyncValidator=!0;const M=at(this.asyncValidator(this));this._asyncValidationSubscription=M.subscribe(g=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(g,{emitEvent:B})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(B,M={}){this.errors=B,this._updateControlsErrors(!1!==M.emitEvent)}get(B){let M=B;return null==M||(Array.isArray(M)||(M=M.split(".")),0===M.length)?null:M.reduce((g,P)=>g&&g._find(P),this)}getError(B,M){const g=M?this.get(M):this;return g&&g.errors?g.errors[B]:null}hasError(B,M){return!!this.getError(B,M)}get root(){let B=this;for(;B._parent;)B=B._parent;return B}_updateControlsErrors(B){this.status=this._calculateStatus(),B&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(B)}_initObservables(){this.valueChanges=new a.vpe,this.statusChanges=new a.vpe}_calculateStatus(){return this._allControlsDisabled()?On:this.errors?kn:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Cn)?Cn:this._anyControlsHaveStatus(kn)?kn:ln}_anyControlsHaveStatus(B){return this._anyControls(M=>M.status===B)}_anyControlsDirty(){return this._anyControls(B=>B.dirty)}_anyControlsTouched(){return this._anyControls(B=>B.touched)}_updatePristine(B={}){this.pristine=!this._anyControlsDirty(),this._parent&&!B.onlySelf&&this._parent._updatePristine(B)}_updateTouched(B={}){this.touched=this._anyControlsTouched(),this._parent&&!B.onlySelf&&this._parent._updateTouched(B)}_registerOnCollectionChange(B){this._onCollectionChange=B}_setUpdateStrategy(B){tt(B)&&null!=B.updateOn&&(this._updateOn=B.updateOn)}_parentMarkedDirty(B){return!B&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(B){return null}}class _r extends ar{constructor(B,M,g){super(je(M),He(g,M)),this.controls=B,this._initObservables(),this._setUpdateStrategy(M),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(B,M){return this.controls[B]?this.controls[B]:(this.controls[B]=M,M.setParent(this),M._registerOnCollectionChange(this._onCollectionChange),M)}addControl(B,M,g={}){this.registerControl(B,M),this.updateValueAndValidity({emitEvent:g.emitEvent}),this._onCollectionChange()}removeControl(B,M={}){this.controls[B]&&this.controls[B]._registerOnCollectionChange(()=>{}),delete this.controls[B],this.updateValueAndValidity({emitEvent:M.emitEvent}),this._onCollectionChange()}setControl(B,M,g={}){this.controls[B]&&this.controls[B]._registerOnCollectionChange(()=>{}),delete this.controls[B],M&&this.registerControl(B,M),this.updateValueAndValidity({emitEvent:g.emitEvent}),this._onCollectionChange()}contains(B){return this.controls.hasOwnProperty(B)&&this.controls[B].enabled}setValue(B,M={}){_n(this,0,B),Object.keys(B).forEach(g=>{on(this,!0,g),this.controls[g].setValue(B[g],{onlySelf:!0,emitEvent:M.emitEvent})}),this.updateValueAndValidity(M)}patchValue(B,M={}){null!=B&&(Object.keys(B).forEach(g=>{const P=this.controls[g];P&&P.patchValue(B[g],{onlySelf:!0,emitEvent:M.emitEvent})}),this.updateValueAndValidity(M))}reset(B={},M={}){this._forEachChild((g,P)=>{g.reset(B[P],{onlySelf:!0,emitEvent:M.emitEvent})}),this._updatePristine(M),this._updateTouched(M),this.updateValueAndValidity(M)}getRawValue(){return this._reduceChildren({},(B,M,g)=>(B[g]=M.getRawValue(),B))}_syncPendingControls(){let B=this._reduceChildren(!1,(M,g)=>!!g._syncPendingControls()||M);return B&&this.updateValueAndValidity({onlySelf:!0}),B}_forEachChild(B){Object.keys(this.controls).forEach(M=>{const g=this.controls[M];g&&B(g,M)})}_setUpControls(){this._forEachChild(B=>{B.setParent(this),B._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(B){for(const[M,g]of Object.entries(this.controls))if(this.contains(M)&&B(g))return!0;return!1}_reduceValue(){return this._reduceChildren({},(M,g,P)=>((g.enabled||this.disabled)&&(M[P]=g.value),M))}_reduceChildren(B,M){let g=B;return this._forEachChild((P,E)=>{g=M(g,P,E)}),g}_allControlsDisabled(){for(const B of Object.keys(this.controls))if(this.controls[B].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(B){return this.controls.hasOwnProperty(B)?this.controls[B]:null}}class Ve extends _r{}function Mt(G,B){var M,g;Dn(G,B),B.valueAccessor.writeValue(G.value),G.disabled&&(null===(g=(M=B.valueAccessor).setDisabledState)||void 0===g||g.call(M,!0)),function Hr(G,B){B.valueAccessor.registerOnChange(M=>{G._pendingValue=M,G._pendingChange=!0,G._pendingDirty=!0,"change"===G.updateOn&&ti(G,B)})}(G,B),function hi(G,B){const M=(g,P)=>{B.valueAccessor.writeValue(g),P&&B.viewToModelUpdate(g)};G.registerOnChange(M),B._registerOnDestroy(()=>{G._unregisterOnChange(M)})}(G,B),function kr(G,B){B.valueAccessor.registerOnTouched(()=>{G._pendingTouched=!0,"blur"===G.updateOn&&G._pendingChange&&ti(G,B),"submit"!==G.updateOn&&G.markAsTouched()})}(G,B),function Zt(G,B){if(B.valueAccessor.setDisabledState){const M=g=>{B.valueAccessor.setDisabledState(g)};G.registerOnDisabledChange(M),B._registerOnDestroy(()=>{G._unregisterOnDisabledChange(M)})}}(G,B)}function fn(G,B,M=!0){const g=()=>{};B.valueAccessor&&(B.valueAccessor.registerOnChange(g),B.valueAccessor.registerOnTouched(g)),lr(G,B),G&&(B._invokeOnDestroyCallbacks(),G._registerOnCollectionChange(()=>{}))}function pn(G,B){G.forEach(M=>{M.registerOnValidatorChange&&M.registerOnValidatorChange(B)})}function Dn(G,B){const M=In(G);null!==B.validator?G.setValidators(bn(M,B.validator)):"function"==typeof M&&G.setValidators([M]);const g=Qn(G);null!==B.asyncValidator?G.setAsyncValidators(bn(g,B.asyncValidator)):"function"==typeof g&&G.setAsyncValidators([g]);const P=()=>G.updateValueAndValidity();pn(B._rawValidators,P),pn(B._rawAsyncValidators,P)}function lr(G,B){let M=!1;if(null!==G){if(null!==B.validator){const P=In(G);if(Array.isArray(P)&&P.length>0){const E=P.filter(V=>V!==B.validator);E.length!==P.length&&(M=!0,G.setValidators(E))}}if(null!==B.asyncValidator){const P=Qn(G);if(Array.isArray(P)&&P.length>0){const E=P.filter(V=>V!==B.asyncValidator);E.length!==P.length&&(M=!0,G.setAsyncValidators(E))}}}const g=()=>{};return pn(B._rawValidators,g),pn(B._rawAsyncValidators,g),M}function ti(G,B){G._pendingDirty&&G.markAsDirty(),G.setValue(G._pendingValue,{emitModelToViewChange:!1}),B.viewToModelUpdate(G._pendingValue),G._pendingChange=!1}function we(G,B){const M=G.indexOf(B);M>-1&&G.splice(M,1)}function Ze(G){return"object"==typeof G&&null!==G&&2===Object.keys(G).length&&"value"in G&&"disabled"in G}const Xe=class extends ar{constructor(B=null,M,g){super(je(M),He(g,M)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(B),this._setUpdateStrategy(M),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),tt(M)&&(M.nonNullable||M.initialValueIsDefault)&&(this.defaultValue=Ze(B)?B.value:B)}setValue(B,M={}){this.value=this._pendingValue=B,this._onChange.length&&!1!==M.emitModelToViewChange&&this._onChange.forEach(g=>g(this.value,!1!==M.emitViewToModelChange)),this.updateValueAndValidity(M)}patchValue(B,M={}){this.setValue(B,M)}reset(B=this.defaultValue,M={}){this._applyFormState(B),this.markAsPristine(M),this.markAsUntouched(M),this.setValue(this.value,M),this._pendingChange=!1}_updateValue(){}_anyControls(B){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(B){this._onChange.push(B)}_unregisterOnChange(B){we(this._onChange,B)}registerOnDisabledChange(B){this._onDisabledChange.push(B)}_unregisterOnDisabledChange(B){we(this._onDisabledChange,B)}_forEachChild(B){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(B){Ze(B)?(this.value=this._pendingValue=B.value,B.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=B}};let Ke=(()=>{class G{}return G.\u0275fac=function(M){return new(M||G)},G.\u0275dir=a.lG2({type:G,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),G})(),qn=(()=>{class G{}return G.\u0275fac=function(M){return new(M||G)},G.\u0275mod=a.oAB({type:G}),G.\u0275inj=a.cJS({}),G})();const Ir=new a.OlP("NgModelWithFormControlWarning"),Zr={provide:Wt,useExisting:(0,a.Gpc)(()=>Os)};let Os=(()=>{class G extends Wt{constructor(M,g){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new a.vpe,this._setValidators(M),this._setAsyncValidators(g)}ngOnChanges(M){this._checkFormPresent(),M.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(lr(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(M){const g=this.form.get(M.path);return Mt(g,M),g.updateValueAndValidity({emitEvent:!1}),this.directives.push(M),g}getControl(M){return this.form.get(M.path)}removeControl(M){fn(M.control||null,M,!1),function Xi(G,B){const M=G.indexOf(B);M>-1&&G.splice(M,1)}(this.directives,M)}addFormGroup(M){this._setUpFormContainer(M)}removeFormGroup(M){this._cleanUpFormContainer(M)}getFormGroup(M){return this.form.get(M.path)}addFormArray(M){this._setUpFormContainer(M)}removeFormArray(M){this._cleanUpFormContainer(M)}getFormArray(M){return this.form.get(M.path)}updateModel(M,g){this.form.get(M.path).setValue(g)}onSubmit(M){var g;return this.submitted=!0,function Fr(G,B){G._syncPendingControls(),B.forEach(M=>{const g=M.control;"submit"===g.updateOn&&g._pendingChange&&(M.viewToModelUpdate(g._pendingValue),g._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(M),"dialog"===(null===(g=null==M?void 0:M.target)||void 0===g?void 0:g.method)}onReset(){this.resetForm()}resetForm(M){this.form.reset(M),this.submitted=!1}_updateDomValue(){this.directives.forEach(M=>{const g=M.control,P=this.form.get(M.path);g!==P&&(fn(g||null,M),(G=>G instanceof Xe)(P)&&(Mt(P,M),M.control=P))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(M){const g=this.form.get(M.path);(function Er(G,B){Dn(G,B)})(g,M),g.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(M){if(this.form){const g=this.form.get(M.path);g&&function Fi(G,B){return lr(G,B)}(g,M)&&g.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Dn(this.form,this),this._oldForm&&lr(this._oldForm,this)}_checkFormPresent(){}}return G.\u0275fac=function(M){return new(M||G)(a.Y36(mt,10),a.Y36(xt,10))},G.\u0275dir=a.lG2({type:G,selectors:[["","formGroup",""]],hostBindings:function(M,g){1&M&&a.NdJ("submit",function(E){return g.onSubmit(E)})("reset",function(){return g.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[a._Bn([Zr]),a.qOj,a.TTD]}),G})();const mi={provide:mr,useExisting:(0,a.Gpc)(()=>Ys)};let Ys=(()=>{class G extends mr{constructor(M,g,P,E,V){super(),this._ngModelWarningConfig=V,this._added=!1,this.update=new a.vpe,this._ngModelWarningSent=!1,this._parent=M,this._setValidators(g),this._setAsyncValidators(P),this.valueAccessor=function wi(G,B){if(!B)return null;let M,g,P;return Array.isArray(B),B.forEach(E=>{E.constructor===De?M=E:function Qi(G){return Object.getPrototypeOf(G.constructor)===de}(E)?g=E:P=E}),P||g||M||null}(0,E)}set isDisabled(M){}ngOnChanges(M){this._added||this._setUpControl(),function Ii(G,B){if(!G.hasOwnProperty("model"))return!1;const M=G.model;return!!M.isFirstChange()||!Object.is(B,M.currentValue)}(M,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(M){this.viewModel=M,this.update.emit(M)}get path(){return function Et(G,B){return[...B.path,G]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return G._ngModelWarningSentOnce=!1,G.\u0275fac=function(M){return new(M||G)(a.Y36(Wt,13),a.Y36(mt,10),a.Y36(xt,10),a.Y36(ie,10),a.Y36(Ir,8))},G.\u0275dir=a.lG2({type:G,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[a._Bn([mi]),a.qOj,a.TTD]}),G})(),va=(()=>{class G{}return G.\u0275fac=function(M){return new(M||G)},G.\u0275mod=a.oAB({type:G}),G.\u0275inj=a.cJS({imports:[qn]}),G})(),wo=(()=>{class G{}return G.\u0275fac=function(M){return new(M||G)},G.\u0275mod=a.oAB({type:G}),G.\u0275inj=a.cJS({imports:[va]}),G})(),qt=(()=>{class G{static withConfig(M){return{ngModule:G,providers:[{provide:Ir,useValue:M.warnOnNgModelWithFormControl}]}}}return G.\u0275fac=function(M){return new(M||G)},G.\u0275mod=a.oAB({type:G}),G.\u0275inj=a.cJS({imports:[va]}),G})();class br extends ar{constructor(B,M,g){super(je(M),He(g,M)),this.controls=B,this._initObservables(),this._setUpdateStrategy(M),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(B){return this.controls[this._adjustIndex(B)]}push(B,M={}){this.controls.push(B),this._registerControl(B),this.updateValueAndValidity({emitEvent:M.emitEvent}),this._onCollectionChange()}insert(B,M,g={}){this.controls.splice(B,0,M),this._registerControl(M),this.updateValueAndValidity({emitEvent:g.emitEvent})}removeAt(B,M={}){let g=this._adjustIndex(B);g<0&&(g=0),this.controls[g]&&this.controls[g]._registerOnCollectionChange(()=>{}),this.controls.splice(g,1),this.updateValueAndValidity({emitEvent:M.emitEvent})}setControl(B,M,g={}){let P=this._adjustIndex(B);P<0&&(P=0),this.controls[P]&&this.controls[P]._registerOnCollectionChange(()=>{}),this.controls.splice(P,1),M&&(this.controls.splice(P,0,M),this._registerControl(M)),this.updateValueAndValidity({emitEvent:g.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(B,M={}){_n(this,0,B),B.forEach((g,P)=>{on(this,!1,P),this.at(P).setValue(g,{onlySelf:!0,emitEvent:M.emitEvent})}),this.updateValueAndValidity(M)}patchValue(B,M={}){null!=B&&(B.forEach((g,P)=>{this.at(P)&&this.at(P).patchValue(g,{onlySelf:!0,emitEvent:M.emitEvent})}),this.updateValueAndValidity(M))}reset(B=[],M={}){this._forEachChild((g,P)=>{g.reset(B[P],{onlySelf:!0,emitEvent:M.emitEvent})}),this._updatePristine(M),this._updateTouched(M),this.updateValueAndValidity(M)}getRawValue(){return this.controls.map(B=>B.getRawValue())}clear(B={}){this.controls.length<1||(this._forEachChild(M=>M._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:B.emitEvent}))}_adjustIndex(B){return B<0?B+this.length:B}_syncPendingControls(){let B=this.controls.reduce((M,g)=>!!g._syncPendingControls()||M,!1);return B&&this.updateValueAndValidity({onlySelf:!0}),B}_forEachChild(B){this.controls.forEach((M,g)=>{B(M,g)})}_updateValue(){this.value=this.controls.filter(B=>B.enabled||this.disabled).map(B=>B.value)}_anyControls(B){return this.controls.some(M=>M.enabled&&B(M))}_setUpControls(){this._forEachChild(B=>this._registerControl(B))}_allControlsDisabled(){for(const B of this.controls)if(B.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(B){B.setParent(this),B._registerOnCollectionChange(this._onCollectionChange)}_find(B){var M;return null!==(M=this.at(B))&&void 0!==M?M:null}}function Ti(G){return!!G&&(void 0!==G.asyncValidators||void 0!==G.validators||void 0!==G.updateOn)}let bo=(()=>{class G{constructor(){this.useNonNullable=!1}get nonNullable(){const M=new G;return M.useNonNullable=!0,M}group(M,g=null){const P=this._reduceControls(M);let E={};return Ti(g)?E=g:null!==g&&(E.validators=g.validator,E.asyncValidators=g.asyncValidator),new _r(P,E)}record(M,g=null){const P=this._reduceControls(M);return new Ve(P,g)}control(M,g,P){let E={};return this.useNonNullable?(Ti(g)?E=g:(E.validators=g,E.asyncValidators=P),new Xe(M,Object.assign(Object.assign({},E),{nonNullable:!0}))):new Xe(M,g,P)}array(M,g,P){const E=M.map(V=>this._createControl(V));return new br(E,g,P)}_reduceControls(M){const g={};return Object.keys(M).forEach(P=>{g[P]=this._createControl(M[P])}),g}_createControl(M){return M instanceof Xe||M instanceof ar?M:Array.isArray(M)?this.control(M[0],M.length>1?M[1]:null,M.length>2?M[2]:null):this.control(M)}}return G.\u0275fac=function(M){return new(M||G)},G.\u0275prov=a.Yz7({token:G,factory:G.\u0275fac,providedIn:qt}),G})()},2313:(tn,ot,H)=>{"use strict";H.d(ot,{Dx:()=>fr,b2:()=>Nr,q6:()=>or});var a=H(9808),ne=H(5e3);class Y extends a.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Pe extends Y{static makeCurrent(){(0,a.HT)(new Pe)}onAndCancel(Ve,xe,Et){return Ve.addEventListener(xe,Et,!1),()=>{Ve.removeEventListener(xe,Et,!1)}}dispatchEvent(Ve,xe){Ve.dispatchEvent(xe)}remove(Ve){Ve.parentNode&&Ve.parentNode.removeChild(Ve)}createElement(Ve,xe){return(xe=xe||this.getDefaultDocument()).createElement(Ve)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(Ve){return Ve.nodeType===Node.ELEMENT_NODE}isShadowRoot(Ve){return Ve instanceof DocumentFragment}getGlobalEventTarget(Ve,xe){return"window"===xe?window:"document"===xe?Ve:"body"===xe?Ve.body:null}getBaseHref(Ve){const xe=function he(){return Le=Le||document.querySelector("base"),Le?Le.getAttribute("href"):null}();return null==xe?null:function pe(gt){Ee=Ee||document.createElement("a"),Ee.setAttribute("href",gt);const Ve=Ee.pathname;return"/"===Ve.charAt(0)?Ve:`/${Ve}`}(xe)}resetBaseElement(){Le=null}getUserAgent(){return window.navigator.userAgent}getCookie(Ve){return(0,a.Mx)(document.cookie,Ve)}}let Ee,Le=null;const be=new ne.OlP("TRANSITION_ID"),de=[{provide:ne.ip1,useFactory:function ce(gt,Ve,xe){return()=>{xe.get(ne.CZH).donePromise.then(()=>{const Et=(0,a.q)(),Mt=Ve.querySelectorAll(`style[ng-transition="${gt}"]`);for(let fn=0;fn<Mt.length;fn++)Et.remove(Mt[fn])})}},deps:[be,a.K0,ne.zs3],multi:!0}];let Ie=(()=>{class gt{build(){return new XMLHttpRequest}}return gt.\u0275fac=function(xe){return new(xe||gt)},gt.\u0275prov=ne.Yz7({token:gt,factory:gt.\u0275fac}),gt})();const Ge=new ne.OlP("EventManagerPlugins");let st=(()=>{class gt{constructor(xe,Et){this._zone=Et,this._eventNameToPlugin=new Map,xe.forEach(Mt=>Mt.manager=this),this._plugins=xe.slice().reverse()}addEventListener(xe,Et,Mt){return this._findPluginFor(Et).addEventListener(xe,Et,Mt)}addGlobalEventListener(xe,Et,Mt){return this._findPluginFor(Et).addGlobalEventListener(xe,Et,Mt)}getZone(){return this._zone}_findPluginFor(xe){const Et=this._eventNameToPlugin.get(xe);if(Et)return Et;const Mt=this._plugins;for(let fn=0;fn<Mt.length;fn++){const pn=Mt[fn];if(pn.supports(xe))return this._eventNameToPlugin.set(xe,pn),pn}throw new Error(`No event manager plugin found for event ${xe}`)}}return gt.\u0275fac=function(xe){return new(xe||gt)(ne.LFG(Ge),ne.LFG(ne.R0b))},gt.\u0275prov=ne.Yz7({token:gt,factory:gt.\u0275fac}),gt})();class et{constructor(Ve){this._doc=Ve}addGlobalEventListener(Ve,xe,Et){const Mt=(0,a.q)().getGlobalEventTarget(this._doc,Ve);if(!Mt)throw new Error(`Unsupported event target ${Mt} for event ${xe}`);return this.addEventListener(Mt,xe,Et)}}let Re=(()=>{class gt{constructor(){this._stylesSet=new Set}addStyles(xe){const Et=new Set;xe.forEach(Mt=>{this._stylesSet.has(Mt)||(this._stylesSet.add(Mt),Et.add(Mt))}),this.onStylesAdded(Et)}onStylesAdded(xe){}getAllStyles(){return Array.from(this._stylesSet)}}return gt.\u0275fac=function(xe){return new(xe||gt)},gt.\u0275prov=ne.Yz7({token:gt,factory:gt.\u0275fac}),gt})(),De=(()=>{class gt extends Re{constructor(xe){super(),this._doc=xe,this._hostNodes=new Map,this._hostNodes.set(xe.head,[])}_addStylesToHost(xe,Et,Mt){xe.forEach(fn=>{const pn=this._doc.createElement("style");pn.textContent=fn,Mt.push(Et.appendChild(pn))})}addHost(xe){const Et=[];this._addStylesToHost(this._stylesSet,xe,Et),this._hostNodes.set(xe,Et)}removeHost(xe){const Et=this._hostNodes.get(xe);Et&&Et.forEach(ct),this._hostNodes.delete(xe)}onStylesAdded(xe){this._hostNodes.forEach((Et,Mt)=>{this._addStylesToHost(xe,Mt,Et)})}ngOnDestroy(){this._hostNodes.forEach(xe=>xe.forEach(ct))}}return gt.\u0275fac=function(xe){return new(xe||gt)(ne.LFG(a.K0))},gt.\u0275prov=ne.Yz7({token:gt,factory:gt.\u0275fac}),gt})();function ct(gt){(0,a.q)().remove(gt)}const me={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},vt=/%COMP%/g;function ve(gt,Ve,xe){for(let Et=0;Et<Ve.length;Et++){let Mt=Ve[Et];Array.isArray(Mt)?ve(gt,Mt,xe):(Mt=Mt.replace(vt,gt),xe.push(Mt))}return xe}function oe(gt){return Ve=>{if("__ngUnwrap__"===Ve)return gt;!1===gt(Ve)&&(Ve.preventDefault(),Ve.returnValue=!1)}}let Te=(()=>{class gt{constructor(xe,Et,Mt){this.eventManager=xe,this.sharedStylesHost=Et,this.appId=Mt,this.rendererByCompId=new Map,this.defaultRenderer=new lt(xe)}createRenderer(xe,Et){if(!xe||!Et)return this.defaultRenderer;switch(Et.encapsulation){case ne.ifc.Emulated:{let Mt=this.rendererByCompId.get(Et.id);return Mt||(Mt=new at(this.eventManager,this.sharedStylesHost,Et,this.appId),this.rendererByCompId.set(Et.id,Mt)),Mt.applyToHost(xe),Mt}case 1:case ne.ifc.ShadowDom:return new $e(this.eventManager,this.sharedStylesHost,xe,Et);default:if(!this.rendererByCompId.has(Et.id)){const Mt=ve(Et.id,Et.styles,[]);this.sharedStylesHost.addStyles(Mt),this.rendererByCompId.set(Et.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return gt.\u0275fac=function(xe){return new(xe||gt)(ne.LFG(st),ne.LFG(De),ne.LFG(ne.AFp))},gt.\u0275prov=ne.Yz7({token:gt,factory:gt.\u0275fac}),gt})();class lt{constructor(Ve){this.eventManager=Ve,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(Ve,xe){return xe?document.createElementNS(me[xe]||xe,Ve):document.createElement(Ve)}createComment(Ve){return document.createComment(Ve)}createText(Ve){return document.createTextNode(Ve)}appendChild(Ve,xe){(bt(Ve)?Ve.content:Ve).appendChild(xe)}insertBefore(Ve,xe,Et){Ve&&(bt(Ve)?Ve.content:Ve).insertBefore(xe,Et)}removeChild(Ve,xe){Ve&&Ve.removeChild(xe)}selectRootElement(Ve,xe){let Et="string"==typeof Ve?document.querySelector(Ve):Ve;if(!Et)throw new Error(`The selector "${Ve}" did not match any elements`);return xe||(Et.textContent=""),Et}parentNode(Ve){return Ve.parentNode}nextSibling(Ve){return Ve.nextSibling}setAttribute(Ve,xe,Et,Mt){if(Mt){xe=Mt+":"+xe;const fn=me[Mt];fn?Ve.setAttributeNS(fn,xe,Et):Ve.setAttribute(xe,Et)}else Ve.setAttribute(xe,Et)}removeAttribute(Ve,xe,Et){if(Et){const Mt=me[Et];Mt?Ve.removeAttributeNS(Mt,xe):Ve.removeAttribute(`${Et}:${xe}`)}else Ve.removeAttribute(xe)}addClass(Ve,xe){Ve.classList.add(xe)}removeClass(Ve,xe){Ve.classList.remove(xe)}setStyle(Ve,xe,Et,Mt){Mt&(ne.JOm.DashCase|ne.JOm.Important)?Ve.style.setProperty(xe,Et,Mt&ne.JOm.Important?"important":""):Ve.style[xe]=Et}removeStyle(Ve,xe,Et){Et&ne.JOm.DashCase?Ve.style.removeProperty(xe):Ve.style[xe]=""}setProperty(Ve,xe,Et){Ve[xe]=Et}setValue(Ve,xe){Ve.nodeValue=xe}listen(Ve,xe,Et){return"string"==typeof Ve?this.eventManager.addGlobalEventListener(Ve,xe,oe(Et)):this.eventManager.addEventListener(Ve,xe,oe(Et))}}function bt(gt){return"TEMPLATE"===gt.tagName&&void 0!==gt.content}class at extends lt{constructor(Ve,xe,Et,Mt){super(Ve),this.component=Et;const fn=ve(Mt+"-"+Et.id,Et.styles,[]);xe.addStyles(fn),this.contentAttr=function ye(gt){return"_ngcontent-%COMP%".replace(vt,gt)}(Mt+"-"+Et.id),this.hostAttr=function Oe(gt){return"_nghost-%COMP%".replace(vt,gt)}(Mt+"-"+Et.id)}applyToHost(Ve){super.setAttribute(Ve,this.hostAttr,"")}createElement(Ve,xe){const Et=super.createElement(Ve,xe);return super.setAttribute(Et,this.contentAttr,""),Et}}class $e extends lt{constructor(Ve,xe,Et,Mt){super(Ve),this.sharedStylesHost=xe,this.hostEl=Et,this.shadowRoot=Et.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const fn=ve(Mt.id,Mt.styles,[]);for(let pn=0;pn<fn.length;pn++){const Zt=document.createElement("style");Zt.textContent=fn[pn],this.shadowRoot.appendChild(Zt)}}nodeOrShadowRoot(Ve){return Ve===this.hostEl?this.shadowRoot:Ve}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(Ve,xe){return super.appendChild(this.nodeOrShadowRoot(Ve),xe)}insertBefore(Ve,xe,Et){return super.insertBefore(this.nodeOrShadowRoot(Ve),xe,Et)}removeChild(Ve,xe){return super.removeChild(this.nodeOrShadowRoot(Ve),xe)}parentNode(Ve){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(Ve)))}}let Ue=(()=>{class gt extends et{constructor(xe){super(xe)}supports(xe){return!0}addEventListener(xe,Et,Mt){return xe.addEventListener(Et,Mt,!1),()=>this.removeEventListener(xe,Et,Mt)}removeEventListener(xe,Et,Mt){return xe.removeEventListener(Et,Mt)}}return gt.\u0275fac=function(xe){return new(xe||gt)(ne.LFG(a.K0))},gt.\u0275prov=ne.Yz7({token:gt,factory:gt.\u0275fac}),gt})();const Je=["alt","control","meta","shift"],Qe={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ft={alt:gt=>gt.altKey,control:gt=>gt.ctrlKey,meta:gt=>gt.metaKey,shift:gt=>gt.shiftKey};let pt=(()=>{class gt extends et{constructor(xe){super(xe)}supports(xe){return null!=gt.parseEventName(xe)}addEventListener(xe,Et,Mt){const fn=gt.parseEventName(Et),pn=gt.eventCallback(fn.fullKey,Mt,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,a.q)().onAndCancel(xe,fn.domEventName,pn))}static parseEventName(xe){const Et=xe.toLowerCase().split("."),Mt=Et.shift();if(0===Et.length||"keydown"!==Mt&&"keyup"!==Mt)return null;const fn=gt._normalizeKey(Et.pop());let pn="",Zt=Et.indexOf("code");if(Zt>-1&&(Et.splice(Zt,1),pn="code."),Je.forEach(lr=>{const Hr=Et.indexOf(lr);Hr>-1&&(Et.splice(Hr,1),pn+=lr+".")}),pn+=fn,0!=Et.length||0===fn.length)return null;const Dn={};return Dn.domEventName=Mt,Dn.fullKey=pn,Dn}static matchEventFullKeyCode(xe,Et){let Mt=Qe[xe.key]||xe.key,fn="";return Et.indexOf("code.")>-1&&(Mt=xe.code,fn="code."),!(null==Mt||!Mt)&&(Mt=Mt.toLowerCase()," "===Mt?Mt="space":"."===Mt&&(Mt="dot"),Je.forEach(pn=>{pn!==Mt&&(0,ft[pn])(xe)&&(fn+=pn+".")}),fn+=Mt,fn===Et)}static eventCallback(xe,Et,Mt){return fn=>{gt.matchEventFullKeyCode(fn,xe)&&Mt.runGuarded(()=>Et(fn))}}static _normalizeKey(xe){return"esc"===xe?"escape":xe}}return gt.\u0275fac=function(xe){return new(xe||gt)(ne.LFG(a.K0))},gt.\u0275prov=ne.Yz7({token:gt,factory:gt.\u0275fac}),gt})();const or=(0,ne.eFA)(ne._c5,"browser",[{provide:ne.Lbi,useValue:a.bD},{provide:ne.g9A,useValue:function Rn(){Pe.makeCurrent()},multi:!0},{provide:a.K0,useFactory:function cr(){return(0,ne.RDi)(document),document},deps:[]}]),mr=new ne.OlP(""),Wt=[{provide:ne.rWj,useClass:class ie{addToWindow(Ve){ne.dqk.getAngularTestability=(Et,Mt=!0)=>{const fn=Ve.findTestabilityInTree(Et,Mt);if(null==fn)throw new Error("Could not find testability for element.");return fn},ne.dqk.getAllAngularTestabilities=()=>Ve.getAllTestabilities(),ne.dqk.getAllAngularRootElements=()=>Ve.getAllRootElements(),ne.dqk.frameworkStabilizers||(ne.dqk.frameworkStabilizers=[]),ne.dqk.frameworkStabilizers.push(Et=>{const Mt=ne.dqk.getAllAngularTestabilities();let fn=Mt.length,pn=!1;const Zt=function(Dn){pn=pn||Dn,fn--,0==fn&&Et(pn)};Mt.forEach(function(Dn){Dn.whenStable(Zt)})})}findTestabilityInTree(Ve,xe,Et){if(null==xe)return null;const Mt=Ve.getTestability(xe);return null!=Mt?Mt:Et?(0,a.q)().isShadowRoot(xe)?this.findTestabilityInTree(Ve,xe.host,!0):this.findTestabilityInTree(Ve,xe.parentElement,!0):null}},deps:[]},{provide:ne.lri,useClass:ne.dDg,deps:[ne.R0b,ne.eoX,ne.rWj]},{provide:ne.dDg,useClass:ne.dDg,deps:[ne.R0b,ne.eoX,ne.rWj]}],rr=[{provide:ne.zSh,useValue:"root"},{provide:ne.qLn,useFactory:function Wn(){return new ne.qLn},deps:[]},{provide:Ge,useClass:Ue,multi:!0,deps:[a.K0,ne.R0b,ne.Lbi]},{provide:Ge,useClass:pt,multi:!0,deps:[a.K0]},{provide:Te,useClass:Te,deps:[st,De,ne.AFp]},{provide:ne.FYo,useExisting:Te},{provide:Re,useExisting:De},{provide:De,useClass:De,deps:[a.K0]},{provide:st,useClass:st,deps:[Ge,ne.R0b]},{provide:a.JF,useClass:Ie,deps:[]},[]];let Nr=(()=>{class gt{constructor(xe){}static withServerTransition(xe){return{ngModule:gt,providers:[{provide:ne.AFp,useValue:xe.appId},{provide:be,useExisting:ne.AFp},de]}}}return gt.\u0275fac=function(xe){return new(xe||gt)(ne.LFG(mr,12))},gt.\u0275mod=ne.oAB({type:gt}),gt.\u0275inj=ne.cJS({providers:[...rr,...Wt],imports:[a.ez,ne.hGG]}),gt})(),fr=(()=>{class gt{constructor(xe){this._doc=xe}getTitle(){return this._doc.title}setTitle(xe){this._doc.title=xe||""}}return gt.\u0275fac=function(xe){return new(xe||gt)(ne.LFG(a.K0))},gt.\u0275prov=ne.Yz7({token:gt,factory:function(xe){let Et=null;return Et=xe?new xe:function an(){return new fr((0,ne.LFG)(a.K0))}(),Et},providedIn:"root"}),gt})();"undefined"!=typeof window&&window},4740:(tn,ot,H)=>{"use strict";H.d(ot,{gz:()=>Ci,y6:()=>Vr,OD:()=>en,eC:()=>an,wm:()=>pu,wN:()=>Jo,F0:()=>di,rH:()=>Di,Bz:()=>mu,Hx:()=>_r});var a=H(5e3),ne=H(5254),Y=H(1086),Pe=H(591),Le=H(4450),he=H(2866),Ee=H(6688),pe=H(826),be=H(448),ce=H(3009);const de={};function ie(...S){let T,w;return(0,he.K)(S[S.length-1])&&(w=S.pop()),"function"==typeof S[S.length-1]&&(T=S.pop()),1===S.length&&(0,Ee.k)(S[0])&&(S=S[0]),(0,ce.n)(S,w).lift(new Ie(T))}class Ie{constructor(T){this.resultSelector=T}call(T,w){return w.subscribe(new Ge(T,this.resultSelector))}}class Ge extends pe.L{constructor(T,w){super(T),this.resultSelector=w,this.active=0,this.values=[],this.observables=[]}_next(T){this.values.push(de),this.observables.push(T)}_complete(){const T=this.observables,w=T.length;if(0===w)this.destination.complete();else{this.active=w,this.toRespond=w;for(let N=0;N<w;N++)this.add((0,be.D)(this,T[N],void 0,N))}}notifyComplete(T){0==(this.active-=1)&&this.destination.complete()}notifyNext(T,w,N){const j=this.values,Ae=this.toRespond?j[N]===de?--this.toRespond:this.toRespond:0;j[N]=w,0===Ae&&(this.resultSelector?this._tryResultSelector(j):this.destination.next(j.slice()))}_tryResultSelector(T){let w;try{w=this.resultSelector.apply(this,T)}catch(N){return void this.destination.error(N)}this.destination.next(w)}}var st=H(1221),et=H(6498),Re=H(8896);function De(S){return new et.y(T=>{let w;try{w=S()}catch(j){return void T.error(j)}return(w?(0,ne.D)(w):(0,Re.c)()).subscribe(T)})}var ct=H(4843),me=H(1737),vt=H(1762),mt=H(8929),xt=H(9808),Be=H(4850),ht=H(7545),ye=H(2986),Oe=H(1059),ve=H(2198),oe=H(1709),Ce=H(7224);function Te(S,T){return(0,oe.zg)(S,T,1)}var lt=H(2868),J=H(1177);function Gt(S){return function(w){const N=new bt(S),j=w.lift(N);return N.caught=j}}class bt{constructor(T){this.selector=T}call(T,w){return w.subscribe(new at(T,this.selector,this.caught))}}class at extends J.Ds{constructor(T,w,N){super(T),this.selector=w,this.caught=N}error(T){if(!this.isStopped){let w;try{w=this.selector(T,this.caught)}catch(te){return void super.error(te)}this._unsubscribeAndRecycle();const N=new J.IY(this);this.add(N);const j=(0,J.ft)(w,N);j!==N&&this.add(j)}}}var $e=H(2014),Ue=H(3489),Je=H(4231);function Qe(S){return function(w){return 0===S?(0,Re.c)():w.lift(new ft(S))}}class ft{constructor(T){if(this.total=T,this.total<0)throw new Je.W}call(T,w){return w.subscribe(new pt(T,this.total))}}class pt extends Ue.L{constructor(T,w){super(T),this.total=w,this.ring=new Array,this.count=0}_next(T){const w=this.ring,N=this.total,j=this.count++;w.length<N?w.push(T):w[j%N]=T}_complete(){const T=this.destination;let w=this.count;if(w>0){const N=this.count>=this.total?this.total:this.count,j=this.ring;for(let te=0;te<N;te++){const Ae=w++%N;T.next(j[Ae])}}T.complete()}}var Vt=H(4907),Nt=H(7314),bn=H(5379);function In(S,T){const w=arguments.length>=2;return N=>N.pipe(S?(0,ve.h)((j,te)=>S(j,te,N)):bn.y,Qe(1),w?(0,Nt.d)(T):(0,Vt.T)(()=>new Le.K))}class Rn{constructor(T,w){this.predicate=T,this.inclusive=w}call(T,w){return w.subscribe(new Wn(T,this.predicate,this.inclusive))}}class Wn extends Ue.L{constructor(T,w,N){super(T),this.predicate=w,this.inclusive=N,this.index=0}_next(T){const w=this.destination;let N;try{N=this.predicate(T,this.index++)}catch(j){return void w.error(j)}this.nextOrComplete(T,N)}nextOrComplete(T,w){const N=this.destination;Boolean(w)?N.next(T):(this.inclusive&&N.next(T),N.complete())}}class Hn{constructor(T){this.value=T}call(T,w){return w.subscribe(new or(T,this.value))}}class or extends Ue.L{constructor(T,w){super(T),this.value=w}_next(T){this.destination.next(this.value)}}var mr=H(2654);function Wt(S){return T=>T.lift(new rr(S))}class rr{constructor(T){this.callback=T}call(T,w){return w.subscribe(new Nr(T,this.callback))}}class Nr extends Ue.L{constructor(T,w){super(T),this.add(new mr.w(w))}}var tr=H(4327),Jn=H(9146),Cr=H(2313);const an="primary",fr=Symbol("RouteTitle");class Tn{constructor(T){this.params=T||{}}has(T){return Object.prototype.hasOwnProperty.call(this.params,T)}get(T){if(this.has(T)){const w=this.params[T];return Array.isArray(w)?w[0]:w}return null}getAll(T){if(this.has(T)){const w=this.params[T];return Array.isArray(w)?w:[w]}return[]}get keys(){return Object.keys(this.params)}}function gn(S){return new Tn(S)}function Tt(S,T,w){const N=w.path.split("/");if(N.length>S.length||"full"===w.pathMatch&&(T.hasChildren()||N.length<S.length))return null;const j={};for(let te=0;te<N.length;te++){const Ae=N[te],Fe=S[te];if(Ae.startsWith(":"))j[Ae.substring(1)]=Fe;else if(Ae!==Fe.path)return null}return{consumed:S.slice(0,N.length),posParams:j}}function Bn(S,T){const w=S?Object.keys(S):void 0,N=T?Object.keys(T):void 0;if(!w||!N||w.length!=N.length)return!1;let j;for(let te=0;te<w.length;te++)if(j=w[te],!Dr(S[j],T[j]))return!1;return!0}function Dr(S,T){if(Array.isArray(S)&&Array.isArray(T)){if(S.length!==T.length)return!1;const w=[...S].sort(),N=[...T].sort();return w.every((j,te)=>N[te]===j)}return S===T}function Pr(S){return Array.prototype.concat.apply([],S)}function $n(S){return S.length>0?S[S.length-1]:null}function Ln(S,T){for(const w in S)S.hasOwnProperty(w)&&T(S[w],w)}function si(S){return(0,a.CqO)(S)?S:(0,a.QGY)(S)?(0,ne.D)(Promise.resolve(S)):(0,Y.of)(S)}const ei={exact:function kn(S,T,w){if(!_n(S.segments,T.segments)||!Ne(S.segments,T.segments,w)||S.numberOfChildren!==T.numberOfChildren)return!1;for(const N in T.children)if(!S.children[N]||!kn(S.children[N],T.children[N],w))return!1;return!0},subset:On},mn={exact:function ln(S,T){return Bn(S,T)},subset:function Cn(S,T){return Object.keys(T).length<=Object.keys(S).length&&Object.keys(T).every(w=>Dr(S[w],T[w]))},ignored:()=>!0};function $t(S,T,w){return ei[w.paths](S.root,T.root,w.matrixParams)&&mn[w.queryParams](S.queryParams,T.queryParams)&&!("exact"===w.fragment&&S.fragment!==T.fragment)}function On(S,T,w){return je(S,T,T.segments,w)}function je(S,T,w,N){if(S.segments.length>w.length){const j=S.segments.slice(0,w.length);return!(!_n(j,w)||T.hasChildren()||!Ne(j,w,N))}if(S.segments.length===w.length){if(!_n(S.segments,w)||!Ne(S.segments,w,N))return!1;for(const j in T.children)if(!S.children[j]||!On(S.children[j],T.children[j],N))return!1;return!0}{const j=w.slice(0,S.segments.length),te=w.slice(S.segments.length);return!!(_n(S.segments,j)&&Ne(S.segments,j,N)&&S.children[an])&&je(S.children[an],T,te,N)}}function Ne(S,T,w){return T.every((N,j)=>mn[w](S[j].parameters,N.parameters))}class He{constructor(T,w,N){this.root=T,this.queryParams=w,this.fragment=N}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=gn(this.queryParams)),this._queryParamMap}toString(){return gt.serialize(this)}}class dt{constructor(T,w){this.segments=T,this.children=w,this.parent=null,Ln(w,(N,j)=>N.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ve(this)}}class tt{constructor(T,w){this.path=T,this.parameters=w}get parameterMap(){return this._parameterMap||(this._parameterMap=gn(this.parameters)),this._parameterMap}toString(){return lr(this)}}function _n(S,T){return S.length===T.length&&S.every((w,N)=>w.path===T[N].path)}let _r=(()=>{class S{}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=a.Yz7({token:S,factory:function(){return new Rr},providedIn:"root"}),S})();class Rr{parse(T){const w=new Zi(T);return new He(w.parseRootSegment(),w.parseQueryParams(),w.parseFragment())}serialize(T){const w=`/${xe(T.root,!0)}`,N=function kr(S){const T=Object.keys(S).map(w=>{const N=S[w];return Array.isArray(N)?N.map(j=>`${Mt(w)}=${Mt(j)}`).join("&"):`${Mt(w)}=${Mt(N)}`}).filter(w=>!!w);return T.length?`?${T.join("&")}`:""}(T.queryParams);return`${w}${N}${"string"==typeof T.fragment?`#${function fn(S){return encodeURI(S)}(T.fragment)}`:""}`}}const gt=new Rr;function Ve(S){return S.segments.map(T=>lr(T)).join("/")}function xe(S,T){if(!S.hasChildren())return Ve(S);if(T){const w=S.children[an]?xe(S.children[an],!1):"",N=[];return Ln(S.children,(j,te)=>{te!==an&&N.push(`${te}:${xe(j,!1)}`)}),N.length>0?`${w}(${N.join("//")})`:w}{const w=function ar(S,T){let w=[];return Ln(S.children,(N,j)=>{j===an&&(w=w.concat(T(N,j)))}),Ln(S.children,(N,j)=>{j!==an&&(w=w.concat(T(N,j)))}),w}(S,(N,j)=>j===an?[xe(S.children[an],!1)]:[`${j}:${xe(N,!1)}`]);return 1===Object.keys(S.children).length&&null!=S.children[an]?`${Ve(S)}/${w[0]}`:`${Ve(S)}/(${w.join("//")})`}}function Et(S){return encodeURIComponent(S).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Mt(S){return Et(S).replace(/%3B/gi,";")}function pn(S){return Et(S).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Zt(S){return decodeURIComponent(S)}function Dn(S){return Zt(S.replace(/\+/g,"%20"))}function lr(S){return`${pn(S.path)}${function Hr(S){return Object.keys(S).map(T=>`;${pn(T)}=${pn(S[T])}`).join("")}(S.parameters)}`}const ti=/^[^\/()?;=#]+/;function hi(S){const T=S.match(ti);return T?T[0]:""}const Er=/^[^=?&#]+/,Ei=/^[^&#]+/;class Zi{constructor(T){this.url=T,this.remaining=T}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new dt([],{}):new dt([],this.parseChildren())}parseQueryParams(){const T={};if(this.consumeOptional("?"))do{this.parseQueryParam(T)}while(this.consumeOptional("&"));return T}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const T=[];for(this.peekStartsWith("(")||T.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),T.push(this.parseSegment());let w={};this.peekStartsWith("/(")&&(this.capture("/"),w=this.parseParens(!0));let N={};return this.peekStartsWith("(")&&(N=this.parseParens(!1)),(T.length>0||Object.keys(w).length>0)&&(N[an]=new dt(T,w)),N}parseSegment(){const T=hi(this.remaining);if(""===T&&this.peekStartsWith(";"))throw new a.vHH(4009,!1);return this.capture(T),new tt(Zt(T),this.parseMatrixParams())}parseMatrixParams(){const T={};for(;this.consumeOptional(";");)this.parseParam(T);return T}parseParam(T){const w=hi(this.remaining);if(!w)return;this.capture(w);let N="";if(this.consumeOptional("=")){const j=hi(this.remaining);j&&(N=j,this.capture(N))}T[Zt(w)]=Zt(N)}parseQueryParam(T){const w=function Fi(S){const T=S.match(Er);return T?T[0]:""}(this.remaining);if(!w)return;this.capture(w);let N="";if(this.consumeOptional("=")){const Ae=function zn(S){const T=S.match(Ei);return T?T[0]:""}(this.remaining);Ae&&(N=Ae,this.capture(N))}const j=Dn(w),te=Dn(N);if(T.hasOwnProperty(j)){let Ae=T[j];Array.isArray(Ae)||(Ae=[Ae],T[j]=Ae),Ae.push(te)}else T[j]=te}parseParens(T){const w={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const N=hi(this.remaining),j=this.remaining[N.length];if("/"!==j&&")"!==j&&";"!==j)throw new a.vHH(4010,!1);let te;N.indexOf(":")>-1?(te=N.slice(0,N.indexOf(":")),this.capture(te),this.capture(":")):T&&(te=an);const Ae=this.parseChildren();w[te]=1===Object.keys(Ae).length?Ae[an]:new dt([],Ae),this.consumeOptional("//")}return w}peekStartsWith(T){return this.remaining.startsWith(T)}consumeOptional(T){return!!this.peekStartsWith(T)&&(this.remaining=this.remaining.substring(T.length),!0)}capture(T){if(!this.consumeOptional(T))throw new a.vHH(4011,!1)}}function oi(S){return S.segments.length>0?new dt([],{[an]:S}):S}function Ii(S){const T={};for(const N of Object.keys(S.children)){const te=Ii(S.children[N]);(te.segments.length>0||te.hasChildren())&&(T[N]=te)}return function Qi(S){if(1===S.numberOfChildren&&S.children[an]){const T=S.children[an];return new dt(S.segments.concat(T.segments),T.children)}return S}(new dt(S.segments,T))}function Fr(S){return S instanceof He}function Li(S,T,w,N,j){var te;if(0===w.length)return Ze(T.root,T.root,T.root,N,j);const Fe=function _e(S){if("string"==typeof S[0]&&1===S.length&&"/"===S[0])return new Ct(!0,0,S);let T=0,w=!1;const N=S.reduce((j,te,Ae)=>{if("object"==typeof te&&null!=te){if(te.outlets){const Fe={};return Ln(te.outlets,(It,O)=>{Fe[O]="string"==typeof It?It.split("/"):It}),[...j,{outlets:Fe}]}if(te.segmentPath)return[...j,te.segmentPath]}return"string"!=typeof te?[...j,te]:0===Ae?(te.split("/").forEach((Fe,It)=>{0==It&&"."===Fe||(0==It&&""===Fe?w=!0:".."===Fe?T++:""!=Fe&&j.push(Fe))}),j):[...j,te]},[]);return new Ct(w,T,N)}(w);return Fe.toRoot()?Ze(T.root,T.root,new dt([],{}),N,j):function It(U){var Q;const fe=function Ot(S,T,w,N){if(S.isAbsolute)return new qe(T.root,!0,0);if(-1===N)return new qe(w,w===T.root,0);return function jt(S,T,w){let N=S,j=T,te=w;for(;te>j;){if(te-=j,N=N.parent,!N)throw new a.vHH(4005,!1);j=N.segments.length}return new qe(N,!1,j-te)}(w,N+(ee(S.commands[0])?0:1),S.numberOfDoubleDots)}(Fe,T,null===(Q=S.snapshot)||void 0===Q?void 0:Q._urlSegment,U),Ye=fe.processChildren?Yn(fe.segmentGroup,fe.index,Fe.commands):An(fe.segmentGroup,fe.index,Fe.commands);return Ze(T.root,fe.segmentGroup,Ye,N,j)}(null===(te=S.snapshot)||void 0===te?void 0:te._lastPathIndex)}function ee(S){return"object"==typeof S&&null!=S&&!S.outlets&&!S.segmentPath}function we(S){return"object"==typeof S&&null!=S&&S.outlets}function Ze(S,T,w,N,j){let Ae,te={};N&&Ln(N,(It,O)=>{te[O]=Array.isArray(It)?It.map(U=>`${U}`):`${It}`}),Ae=S===T?w:Xe(S,T,w);const Fe=oi(Ii(Ae));return new He(Fe,te,j)}function Xe(S,T,w){const N={};return Ln(S.children,(j,te)=>{N[te]=j===T?w:Xe(j,T,w)}),new dt(S.segments,N)}class Ct{constructor(T,w,N){if(this.isAbsolute=T,this.numberOfDoubleDots=w,this.commands=N,T&&N.length>0&&ee(N[0]))throw new a.vHH(4003,!1);const j=N.find(we);if(j&&j!==$n(N))throw new a.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class qe{constructor(T,w,N){this.segmentGroup=T,this.processChildren=w,this.index=N}}function An(S,T,w){if(S||(S=new dt([],{})),0===S.segments.length&&S.hasChildren())return Yn(S,T,w);const N=function vr(S,T,w){let N=0,j=T;const te={match:!1,pathIndex:0,commandIndex:0};for(;j<S.segments.length;){if(N>=w.length)return te;const Ae=S.segments[j],Fe=w[N];if(we(Fe))break;const It=`${Fe}`,O=N<w.length-1?w[N+1]:null;if(j>0&&void 0===It)break;if(It&&O&&"object"==typeof O&&void 0===O.outlets){if(!_t(It,O,Ae))return te;N+=2}else{if(!_t(It,{},Ae))return te;N++}j++}return{match:!0,pathIndex:j,commandIndex:N}}(S,T,w),j=w.slice(N.commandIndex);if(N.match&&N.pathIndex<S.segments.length){const te=new dt(S.segments.slice(0,N.pathIndex),{});return te.children[an]=new dt(S.segments.slice(N.pathIndex),S.children),Yn(te,0,j)}return N.match&&0===j.length?new dt(S.segments,{}):N.match&&!S.hasChildren()?Lr(S,T,w):N.match?Yn(S,0,j):Lr(S,T,w)}function Yn(S,T,w){if(0===w.length)return new dt(S.segments,{});{const N=function un(S){return we(S[0])?S[0].outlets:{[an]:S}}(w),j={};return Ln(N,(te,Ae)=>{"string"==typeof te&&(te=[te]),null!==te&&(j[Ae]=An(S.children[Ae],T,te))}),Ln(S.children,(te,Ae)=>{void 0===N[Ae]&&(j[Ae]=te)}),new dt(S.segments,j)}}function Lr(S,T,w){const N=S.segments.slice(0,T);let j=0;for(;j<w.length;){const te=w[j];if(we(te)){const It=nt(te.outlets);return new dt(N,It)}if(0===j&&ee(w[0])){N.push(new tt(S.segments[T].path,Ke(w[0]))),j++;continue}const Ae=we(te)?te.outlets[an]:`${te}`,Fe=j<w.length-1?w[j+1]:null;Ae&&Fe&&ee(Fe)?(N.push(new tt(Ae,Ke(Fe))),j+=2):(N.push(new tt(Ae,{})),j++)}return new dt(N,{})}function nt(S){const T={};return Ln(S,(w,N)=>{"string"==typeof w&&(w=[w]),null!==w&&(T[N]=Lr(new dt([],{}),0,w))}),T}function Ke(S){const T={};return Ln(S,(w,N)=>T[N]=`${w}`),T}function _t(S,T,w){return S==w.path&&Bn(T,w.parameters)}class Ut{constructor(T,w){this.id=T,this.url=w}}class en extends Ut{constructor(T,w,N="imperative",j=null){super(T,w),this.type=0,this.navigationTrigger=N,this.restoredState=j}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Sn extends Ut{constructor(T,w,N){super(T,w),this.urlAfterRedirects=N,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class qn extends Ut{constructor(T,w,N,j){super(T,w),this.reason=N,this.code=j,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ui extends Ut{constructor(T,w,N,j){super(T,w),this.error=N,this.target=j,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Br extends Ut{constructor(T,w,N,j){super(T,w),this.urlAfterRedirects=N,this.state=j,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Rs extends Ut{constructor(T,w,N,j){super(T,w),this.urlAfterRedirects=N,this.state=j,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Sr extends Ut{constructor(T,w,N,j,te){super(T,w),this.urlAfterRedirects=N,this.state=j,this.shouldActivate=te,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Ir extends Ut{constructor(T,w,N,j){super(T,w),this.urlAfterRedirects=N,this.state=j,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Xn extends Ut{constructor(T,w,N,j){super(T,w),this.urlAfterRedirects=N,this.state=j,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ji{constructor(T){this.route=T,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Zr{constructor(T){this.route=T,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Os{constructor(T){this.snapshot=T,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class aa{constructor(T){this.snapshot=T,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class es{constructor(T){this.snapshot=T,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Bs{constructor(T){this.snapshot=T,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Tr{constructor(T,w,N){this.routerEvent=T,this.position=w,this.anchor=N,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class mi{constructor(T){this._root=T}get root(){return this._root.value}parent(T){const w=this.pathFromRoot(T);return w.length>1?w[w.length-2]:null}children(T){const w=Ys(T,this._root);return w?w.children.map(N=>N.value):[]}firstChild(T){const w=Ys(T,this._root);return w&&w.children.length>0?w.children[0].value:null}siblings(T){const w=$s(T,this._root);return w.length<2?[]:w[w.length-2].children.map(j=>j.value).filter(j=>j!==T)}pathFromRoot(T){return $s(T,this._root).map(w=>w.value)}}function Ys(S,T){if(S===T.value)return T;for(const w of T.children){const N=Ys(S,w);if(N)return N}return null}function $s(S,T){if(S===T.value)return[T];for(const w of T.children){const N=$s(S,w);if(N.length)return N.unshift(T),N}return[]}class pi{constructor(T,w){this.value=T,this.children=w}toString(){return`TreeNode(${this.value})`}}function as(S){const T={};return S&&S.children.forEach(w=>T[w.value.outlet]=w),T}class ps extends mi{constructor(T,w){super(T),this.snapshot=w,ai(this,T)}toString(){return this.snapshot.toString()}}function Es(S,T){const w=function gs(S,T){const Ae=new ts([],{},{},"",{},an,T,null,S.root,-1,{});return new ms("",new pi(Ae,[]))}(S,T),N=new Pe.X([new tt("",{})]),j=new Pe.X({}),te=new Pe.X({}),Ae=new Pe.X({}),Fe=new Pe.X(""),It=new Ci(N,j,Ae,Fe,te,an,T,w.root);return It.snapshot=w.root,new ps(new pi(It,[]),w)}class Ci{constructor(T,w,N,j,te,Ae,Fe,It){var O,U;this.url=T,this.params=w,this.queryParams=N,this.fragment=j,this.data=te,this.outlet=Ae,this.component=Fe,this.title=null!==(U=null===(O=this.data)||void 0===O?void 0:O.pipe((0,Be.U)(Q=>Q[fr])))&&void 0!==U?U:(0,Y.of)(void 0),this._futureSnapshot=It}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Be.U)(T=>gn(T)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Be.U)(T=>gn(T)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function No(S,T="emptyOnly"){const w=S.pathFromRoot;let N=0;if("always"!==T)for(N=w.length-1;N>=1;){const j=w[N],te=w[N-1];if(j.routeConfig&&""===j.routeConfig.path)N--;else{if(te.component)break;N--}}return function Hi(S){return S.reduce((T,w)=>{var N;return{params:Object.assign(Object.assign({},T.params),w.params),data:Object.assign(Object.assign({},T.data),w.data),resolve:Object.assign(Object.assign(Object.assign(Object.assign({},w.data),T.resolve),null===(N=w.routeConfig)||void 0===N?void 0:N.data),w._resolvedData)}},{params:{},data:{},resolve:{}})}(w.slice(N))}class ts{constructor(T,w,N,j,te,Ae,Fe,It,O,U,Q,fe){var Ye;this.url=T,this.params=w,this.queryParams=N,this.fragment=j,this.data=te,this.outlet=Ae,this.component=Fe,this.title=null===(Ye=this.data)||void 0===Ye?void 0:Ye[fr],this.routeConfig=It,this._urlSegment=O,this._lastPathIndex=U,this._correctedLastPathIndex=null!=fe?fe:U,this._resolve=Q}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=gn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=gn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(N=>N.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ms extends mi{constructor(T,w){super(w),this.url=T,ai(this,w)}toString(){return qs(this._root)}}function ai(S,T){T.value._routerState=S,T.children.forEach(w=>ai(S,w))}function qs(S){const T=S.children.length>0?` { ${S.children.map(qs).join(", ")} } `:"";return`${S.value}${T}`}function Us(S){if(S.snapshot){const T=S.snapshot,w=S._futureSnapshot;S.snapshot=w,Bn(T.queryParams,w.queryParams)||S.queryParams.next(w.queryParams),T.fragment!==w.fragment&&S.fragment.next(w.fragment),Bn(T.params,w.params)||S.params.next(w.params),function yr(S,T){if(S.length!==T.length)return!1;for(let w=0;w<S.length;++w)if(!Bn(S[w],T[w]))return!1;return!0}(T.url,w.url)||S.url.next(w.url),Bn(T.data,w.data)||S.data.next(w.data)}else S.snapshot=S._futureSnapshot,S.data.next(S._futureSnapshot.data)}function wr(S,T){const w=Bn(S.params,T.params)&&function on(S,T){return _n(S,T)&&S.every((w,N)=>Bn(w.parameters,T[N].parameters))}(S.url,T.url);return w&&!(!S.parent!=!T.parent)&&(!S.parent||wr(S.parent,T.parent))}function nr(S,T,w){if(w&&S.shouldReuseRoute(T.value,w.value.snapshot)){const N=w.value;N._futureSnapshot=T.value;const j=function ys(S,T,w){return T.children.map(N=>{for(const j of w.children)if(S.shouldReuseRoute(N.value,j.value.snapshot))return nr(S,N,j);return nr(S,N)})}(S,T,w);return new pi(N,j)}{if(S.shouldAttach(T.value)){const te=S.retrieve(T.value);if(null!==te){const Ae=te.route;return Ae.value._futureSnapshot=T.value,Ae.children=T.children.map(Fe=>nr(S,Fe)),Ae}}const N=function Ns(S){return new Ci(new Pe.X(S.url),new Pe.X(S.params),new Pe.X(S.queryParams),new Pe.X(S.fragment),new Pe.X(S.data),S.outlet,S.component,S)}(T.value),j=T.children.map(te=>nr(S,te));return new pi(N,j)}}const Or="ngNavigationCancelingError";function ls(S,T){const{redirectTo:w,navigationBehaviorOptions:N}=Fr(T)?{redirectTo:T,navigationBehaviorOptions:void 0}:T,j=Ts(!1,0,T);return j.url=w,j.navigationBehaviorOptions=N,j}function Ts(S,T,w){const N=new Error("NavigationCancelingError: "+(S||""));return N[Or]=!0,N.cancellationCode=T,w&&(N.url=w),N}function us(S){return Is(S)&&Fr(S.url)}function Is(S){return S&&S[Or]}class Ri{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Vr,this.attachRef=null}}let Vr=(()=>{class S{constructor(){this.contexts=new Map}onChildOutletCreated(w,N){const j=this.getOrCreateContext(w);j.outlet=N,this.contexts.set(w,j)}onChildOutletDestroyed(w){const N=this.getContext(w);N&&(N.outlet=null,N.attachRef=null)}onOutletDeactivated(){const w=this.contexts;return this.contexts=new Map,w}onOutletReAttached(w){this.contexts=w}getOrCreateContext(w){let N=this.getContext(w);return N||(N=new Ri,this.contexts.set(w,N)),N}getContext(w){return this.contexts.get(w)||null}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=a.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();const Kn=!1;let to=(()=>{class S{constructor(w,N,j,te,Ae){this.parentContexts=w,this.location=N,this.changeDetector=te,this.environmentInjector=Ae,this.activated=null,this._activatedRoute=null,this.activateEvents=new a.vpe,this.deactivateEvents=new a.vpe,this.attachEvents=new a.vpe,this.detachEvents=new a.vpe,this.name=j||an,w.onChildOutletCreated(this.name,this)}ngOnDestroy(){var w;(null===(w=this.parentContexts.getContext(this.name))||void 0===w?void 0:w.outlet)===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const w=this.parentContexts.getContext(this.name);w&&w.route&&(w.attachRef?this.attach(w.attachRef,w.route):this.activateWith(w.route,w.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new a.vHH(4012,Kn);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new a.vHH(4012,Kn);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new a.vHH(4012,Kn);this.location.detach();const w=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(w.instance),w}attach(w,N){this.activated=w,this._activatedRoute=N,this.location.insert(w.hostView),this.attachEvents.emit(w.instance)}deactivate(){if(this.activated){const w=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(w)}}activateWith(w,N){if(this.isActivated)throw new a.vHH(4013,Kn);this._activatedRoute=w;const j=this.location,Ae=w._futureSnapshot.component,Fe=this.parentContexts.getOrCreateContext(this.name).children,It=new qo(w,Fe,j.injector);if(N&&function Ks(S){return!!S.resolveComponentFactory}(N)){const O=N.resolveComponentFactory(Ae);this.activated=j.createComponent(O,j.length,It)}else this.activated=j.createComponent(Ae,{index:j.length,injector:It,environmentInjector:null!=N?N:this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return S.\u0275fac=function(w){return new(w||S)(a.Y36(Vr),a.Y36(a.s_b),a.$8M("name"),a.Y36(a.sBO),a.Y36(a.lqb))},S.\u0275dir=a.lG2({type:S,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),S})();class qo{constructor(T,w,N){this.route=T,this.childContexts=w,this.parent=N}get(T,w){return T===Ci?this.route:T===Vr?this.childContexts:this.parent.get(T,w)}}let Po=(()=>{class S{}return S.\u0275fac=function(w){return new(w||S)},S.\u0275cmp=a.Xpm({type:S,selectors:[["ng-component"]],standalone:!0,features:[a.jDz],decls:1,vars:0,template:function(w,N){1&w&&a._UZ(0,"router-outlet")},dependencies:[to],encapsulation:2}),S})();function ya(S,T){var w;return S.providers&&!S._injector&&(S._injector=(0,a.MMx)(S.providers,T,`Route: ${S.path}`)),null!==(w=S._injector)&&void 0!==w?w:T}function bo(S){const T=S.children&&S.children.map(bo),w=T?Object.assign(Object.assign({},S),{children:T}):Object.assign({},S);return!w.component&&!w.loadComponent&&(T||w.loadChildren)&&w.outlet&&w.outlet!==an&&(w.component=Po),w}function Gi(S){return S.outlet||an}function ws(S,T){const w=S.filter(N=>Gi(N)===T);return w.push(...S.filter(N=>Gi(N)!==T)),w}function As(S){var T;if(!S)return null;if(null!==(T=S.routeConfig)&&void 0!==T&&T._injector)return S.routeConfig._injector;for(let w=S.parent;w;w=w.parent){const N=w.routeConfig;if(null!=N&&N._loadedInjector)return N._loadedInjector;if(null!=N&&N._injector)return N._injector}return null}class B{constructor(T,w,N,j){this.routeReuseStrategy=T,this.futureState=w,this.currState=N,this.forwardEvent=j}activate(T){const w=this.futureState._root,N=this.currState?this.currState._root:null;this.deactivateChildRoutes(w,N,T),Us(this.futureState.root),this.activateChildRoutes(w,N,T)}deactivateChildRoutes(T,w,N){const j=as(w);T.children.forEach(te=>{const Ae=te.value.outlet;this.deactivateRoutes(te,j[Ae],N),delete j[Ae]}),Ln(j,(te,Ae)=>{this.deactivateRouteAndItsChildren(te,N)})}deactivateRoutes(T,w,N){const j=T.value,te=w?w.value:null;if(j===te)if(j.component){const Ae=N.getContext(j.outlet);Ae&&this.deactivateChildRoutes(T,w,Ae.children)}else this.deactivateChildRoutes(T,w,N);else te&&this.deactivateRouteAndItsChildren(w,N)}deactivateRouteAndItsChildren(T,w){T.value.component&&this.routeReuseStrategy.shouldDetach(T.value.snapshot)?this.detachAndStoreRouteSubtree(T,w):this.deactivateRouteAndOutlet(T,w)}detachAndStoreRouteSubtree(T,w){const N=w.getContext(T.value.outlet),j=N&&T.value.component?N.children:w,te=as(T);for(const Ae of Object.keys(te))this.deactivateRouteAndItsChildren(te[Ae],j);if(N&&N.outlet){const Ae=N.outlet.detach(),Fe=N.children.onOutletDeactivated();this.routeReuseStrategy.store(T.value.snapshot,{componentRef:Ae,route:T,contexts:Fe})}}deactivateRouteAndOutlet(T,w){const N=w.getContext(T.value.outlet),j=N&&T.value.component?N.children:w,te=as(T);for(const Ae of Object.keys(te))this.deactivateRouteAndItsChildren(te[Ae],j);N&&N.outlet&&(N.outlet.deactivate(),N.children.onOutletDeactivated(),N.attachRef=null,N.resolver=null,N.route=null)}activateChildRoutes(T,w,N){const j=as(w);T.children.forEach(te=>{this.activateRoutes(te,j[te.value.outlet],N),this.forwardEvent(new Bs(te.value.snapshot))}),T.children.length&&this.forwardEvent(new aa(T.value.snapshot))}activateRoutes(T,w,N){var j;const te=T.value,Ae=w?w.value:null;if(Us(te),te===Ae)if(te.component){const Fe=N.getOrCreateContext(te.outlet);this.activateChildRoutes(T,w,Fe.children)}else this.activateChildRoutes(T,w,N);else if(te.component){const Fe=N.getOrCreateContext(te.outlet);if(this.routeReuseStrategy.shouldAttach(te.snapshot)){const It=this.routeReuseStrategy.retrieve(te.snapshot);this.routeReuseStrategy.store(te.snapshot,null),Fe.children.onOutletReAttached(It.contexts),Fe.attachRef=It.componentRef,Fe.route=It.route.value,Fe.outlet&&Fe.outlet.attach(It.componentRef,It.route.value),Us(It.route.value),this.activateChildRoutes(T,null,Fe.children)}else{const It=As(te.snapshot),O=null!==(j=null==It?void 0:It.get(a._Vd))&&void 0!==j?j:null;Fe.attachRef=null,Fe.route=te,Fe.resolver=O,Fe.injector=It,Fe.outlet&&Fe.outlet.activateWith(te,Fe.injector),this.activateChildRoutes(T,null,Fe.children)}}else this.activateChildRoutes(T,null,N)}}class M{constructor(T){this.path=T,this.route=this.path[this.path.length-1]}}class g{constructor(T,w){this.component=T,this.route=w}}function P(S,T,w){const N=S._root;return se(N,T?T._root:null,w,[N.value])}function V(S,T){const w=Symbol(),N=T.get(S,w);return N===w?"function"!=typeof S||(0,a.Z0I)(S)?T.get(S):S:N}function se(S,T,w,N,j={canDeactivateChecks:[],canActivateChecks:[]}){const te=as(T);return S.children.forEach(Ae=>{(function ut(S,T,w,N,j={canDeactivateChecks:[],canActivateChecks:[]}){const te=S.value,Ae=T?T.value:null,Fe=w?w.getContext(S.value.outlet):null;if(Ae&&te.routeConfig===Ae.routeConfig){const It=function Xt(S,T,w){if("function"==typeof w)return w(S,T);switch(w){case"pathParamsChange":return!_n(S.url,T.url);case"pathParamsOrQueryParamsChange":return!_n(S.url,T.url)||!Bn(S.queryParams,T.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!wr(S,T)||!Bn(S.queryParams,T.queryParams);default:return!wr(S,T)}}(Ae,te,te.routeConfig.runGuardsAndResolvers);It?j.canActivateChecks.push(new M(N)):(te.data=Ae.data,te._resolvedData=Ae._resolvedData),se(S,T,te.component?Fe?Fe.children:null:w,N,j),It&&Fe&&Fe.outlet&&Fe.outlet.isActivated&&j.canDeactivateChecks.push(new g(Fe.outlet.component,Ae))}else Ae&&yn(T,Fe,j),j.canActivateChecks.push(new M(N)),se(S,null,te.component?Fe?Fe.children:null:w,N,j)})(Ae,te[Ae.value.outlet],w,N.concat([Ae.value]),j),delete te[Ae.value.outlet]}),Ln(te,(Ae,Fe)=>yn(Ae,w.getContext(Fe),j)),j}function yn(S,T,w){const N=as(S),j=S.value;Ln(N,(te,Ae)=>{yn(te,j.component?T?T.children.getContext(Ae):null:T,w)}),w.canDeactivateChecks.push(new g(j.component&&T&&T.outlet&&T.outlet.isActivated?T.outlet.component:null,j))}function Zn(S){return"function"==typeof S}function Co(S){return S instanceof Le.K||"EmptyError"===(null==S?void 0:S.name)}const la=Symbol("INITIAL_VALUE");function Zs(){return(0,ht.w)(S=>ie(S.map(T=>T.pipe((0,ye.q)(1),(0,Oe.O)(la)))).pipe((0,Be.U)(T=>{for(const w of T)if(!0!==w){if(w===la)return la;if(!1===w||w instanceof He)return w}return!0}),(0,ve.h)(T=>T!==la),(0,ye.q)(1)))}function qr(S){return(0,ct.z)((0,lt.b)(T=>{if(Fr(T))throw ls(0,T)}),(0,Be.U)(T=>!0===T))}const Wr={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function $r(S,T,w,N,j){const te=Oi(S,T,w);return te.matched?function Gr(S,T,w,N){const j=T.canMatch;if(!j||0===j.length)return(0,Y.of)(!0);const te=j.map(Ae=>{const Fe=V(Ae,S);return si(function Cs(S){return S&&Zn(S.canMatch)}(Fe)?Fe.canMatch(T,w):S.runInContext(()=>Fe(T,w)))});return(0,Y.of)(te).pipe(Zs(),qr())}(N=ya(T,N),T,w).pipe((0,Be.U)(Ae=>!0===Ae?te:Object.assign({},Wr))):(0,Y.of)(te)}function Oi(S,T,w){var N;if(""===T.path)return"full"===T.pathMatch&&(S.hasChildren()||w.length>0)?Object.assign({},Wr):{matched:!0,consumedSegments:[],remainingSegments:w,parameters:{},positionalParamSegments:{}};const te=(T.matcher||Tt)(w,S,T);if(!te)return Object.assign({},Wr);const Ae={};Ln(te.posParams,(It,O)=>{Ae[O]=It.path});const Fe=te.consumed.length>0?Object.assign(Object.assign({},Ae),te.consumed[te.consumed.length-1].parameters):Ae;return{matched:!0,consumedSegments:te.consumed,remainingSegments:w.slice(te.consumed.length),parameters:Fe,positionalParamSegments:null!==(N=te.posParams)&&void 0!==N?N:{}}}function ii(S,T,w,N,j="corrected"){if(w.length>0&&function no(S,T,w){return w.some(N=>Do(S,T,N)&&Gi(N)!==an)}(S,w,N)){const Ae=new dt(T,function vs(S,T,w,N){const j={};j[an]=N,N._sourceSegment=S,N._segmentIndexShift=T.length;for(const te of w)if(""===te.path&&Gi(te)!==an){const Ae=new dt([],{});Ae._sourceSegment=S,Ae._segmentIndexShift=T.length,j[Gi(te)]=Ae}return j}(S,T,N,new dt(w,S.children)));return Ae._sourceSegment=S,Ae._segmentIndexShift=T.length,{segmentGroup:Ae,slicedSegments:[]}}if(0===w.length&&function ro(S,T,w){return w.some(N=>Do(S,T,N))}(S,w,N)){const Ae=new dt(S.segments,function xi(S,T,w,N,j,te){const Ae={};for(const Fe of N)if(Do(S,w,Fe)&&!j[Gi(Fe)]){const It=new dt([],{});It._sourceSegment=S,It._segmentIndexShift="legacy"===te?S.segments.length:T.length,Ae[Gi(Fe)]=It}return Object.assign(Object.assign({},j),Ae)}(S,T,w,N,S.children,j));return Ae._sourceSegment=S,Ae._segmentIndexShift=T.length,{segmentGroup:Ae,slicedSegments:w}}const te=new dt(S.segments,S.children);return te._sourceSegment=S,te._segmentIndexShift=T.length,{segmentGroup:te,slicedSegments:w}}function Do(S,T,w){return(!(S.hasChildren()||T.length>0)||"full"!==w.pathMatch)&&""===w.path}function ho(S,T,w,N){return!!(Gi(S)===N||N!==an&&Do(T,w,S))&&("**"===S.path||Oi(T,S,w).matched)}function Qs(S,T,w){return 0===T.length&&!S.children[w]}const Bi=!1;class xa{constructor(T){this.segmentGroup=T||null}}class rs{constructor(T){this.urlTree=T}}function Wi(S){return(0,me._)(new xa(S))}function bl(S){return(0,me._)(new rs(S))}class Ma{constructor(T,w,N,j,te){this.injector=T,this.configLoader=w,this.urlSerializer=N,this.urlTree=j,this.config=te,this.allowRedirects=!0}apply(){const T=ii(this.urlTree.root,[],[],this.config).segmentGroup,w=new dt(T.segments,T.children);return this.expandSegmentGroup(this.injector,this.config,w,an).pipe((0,Be.U)(te=>this.createUrlTree(Ii(te),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Gt(te=>{if(te instanceof rs)return this.allowRedirects=!1,this.match(te.urlTree);throw te instanceof xa?this.noMatchError(te):te}))}match(T){return this.expandSegmentGroup(this.injector,this.config,T.root,an).pipe((0,Be.U)(j=>this.createUrlTree(Ii(j),T.queryParams,T.fragment))).pipe(Gt(j=>{throw j instanceof xa?this.noMatchError(j):j}))}noMatchError(T){return new a.vHH(4002,Bi)}createUrlTree(T,w,N){const j=oi(T);return new He(j,w,N)}expandSegmentGroup(T,w,N,j){return 0===N.segments.length&&N.hasChildren()?this.expandChildren(T,w,N).pipe((0,Be.U)(te=>new dt([],te))):this.expandSegment(T,N,w,N.segments,j,!0)}expandChildren(T,w,N){const j=[];for(const te of Object.keys(N.children))"primary"===te?j.unshift(te):j.push(te);return(0,ne.D)(j).pipe(Te(te=>{const Ae=N.children[te],Fe=ws(w,te);return this.expandSegmentGroup(T,Fe,Ae,te).pipe((0,Be.U)(It=>({segment:It,outlet:te})))}),(0,$e.R)((te,Ae)=>(te[Ae.outlet]=Ae.segment,te),{}),In())}expandSegment(T,w,N,j,te,Ae){return(0,ne.D)(N).pipe(Te(Fe=>this.expandSegmentAgainstRoute(T,w,N,Fe,j,te,Ae).pipe(Gt(O=>{if(O instanceof xa)return(0,Y.of)(null);throw O}))),(0,Ce.P)(Fe=>!!Fe),Gt((Fe,It)=>{if(Co(Fe))return Qs(w,j,te)?(0,Y.of)(new dt([],{})):Wi(w);throw Fe}))}expandSegmentAgainstRoute(T,w,N,j,te,Ae,Fe){return ho(j,w,te,Ae)?void 0===j.redirectTo?this.matchSegmentAgainstRoute(T,w,j,te,Ae):Fe&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(T,w,N,j,te,Ae):Wi(w):Wi(w)}expandSegmentAgainstRouteUsingRedirect(T,w,N,j,te,Ae){return"**"===j.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(T,N,j,Ae):this.expandRegularSegmentAgainstRouteUsingRedirect(T,w,N,j,te,Ae)}expandWildCardWithParamsAgainstRouteUsingRedirect(T,w,N,j){const te=this.applyRedirectCommands([],N.redirectTo,{});return N.redirectTo.startsWith("/")?bl(te):this.lineralizeSegments(N,te).pipe((0,oe.zg)(Ae=>{const Fe=new dt(Ae,{});return this.expandSegment(T,Fe,w,Ae,j,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(T,w,N,j,te,Ae){const{matched:Fe,consumedSegments:It,remainingSegments:O,positionalParamSegments:U}=Oi(w,j,te);if(!Fe)return Wi(w);const Q=this.applyRedirectCommands(It,j.redirectTo,U);return j.redirectTo.startsWith("/")?bl(Q):this.lineralizeSegments(j,Q).pipe((0,oe.zg)(fe=>this.expandSegment(T,w,N,fe.concat(O),Ae,!1)))}matchSegmentAgainstRoute(T,w,N,j,te){return"**"===N.path?(T=ya(N,T),N.loadChildren?(N._loadedRoutes?(0,Y.of)({routes:N._loadedRoutes,injector:N._loadedInjector}):this.configLoader.loadChildren(T,N)).pipe((0,Be.U)(Fe=>(N._loadedRoutes=Fe.routes,N._loadedInjector=Fe.injector,new dt(j,{})))):(0,Y.of)(new dt(j,{}))):$r(w,N,j,T).pipe((0,ht.w)(({matched:Ae,consumedSegments:Fe,remainingSegments:It})=>{var O;return Ae?(T=null!==(O=N._injector)&&void 0!==O?O:T,this.getChildConfig(T,N,j).pipe((0,oe.zg)(Q=>{var fe;const Ye=null!==(fe=Q.injector)&&void 0!==fe?fe:T,wt=Q.routes,{segmentGroup:Ht,slicedSegments:sn}=ii(w,Fe,It,wt),Vn=new dt(Ht.segments,Ht.children);if(0===sn.length&&Vn.hasChildren())return this.expandChildren(Ye,wt,Vn).pipe((0,Be.U)(hs=>new dt(Fe,hs)));if(0===wt.length&&0===sn.length)return(0,Y.of)(new dt(Fe,{}));const pr=Gi(N)===te;return this.expandSegment(Ye,Vn,wt,sn,pr?an:te,!0).pipe((0,Be.U)(Fn=>new dt(Fe.concat(Fn.segments),Fn.children)))}))):Wi(w)}))}getChildConfig(T,w,N){return w.children?(0,Y.of)({routes:w.children,injector:T}):w.loadChildren?void 0!==w._loadedRoutes?(0,Y.of)({routes:w._loadedRoutes,injector:w._loadedInjector}):function xn(S,T,w,N){const j=T.canLoad;if(void 0===j||0===j.length)return(0,Y.of)(!0);const te=j.map(Ae=>{const Fe=V(Ae,S);return si(function Ai(S){return S&&Zn(S.canLoad)}(Fe)?Fe.canLoad(T,w):S.runInContext(()=>Fe(T,w)))});return(0,Y.of)(te).pipe(Zs(),qr())}(T,w,N).pipe((0,oe.zg)(j=>j?this.configLoader.loadChildren(T,w).pipe((0,lt.b)(te=>{w._loadedRoutes=te.routes,w._loadedInjector=te.injector})):function Xa(S){return(0,me._)(Ts(Bi,3))}())):(0,Y.of)({routes:[],injector:T})}lineralizeSegments(T,w){let N=[],j=w.root;for(;;){if(N=N.concat(j.segments),0===j.numberOfChildren)return(0,Y.of)(N);if(j.numberOfChildren>1||!j.children[an])return(0,me._)(new a.vHH(4e3,Bi));j=j.children[an]}}applyRedirectCommands(T,w,N){return this.applyRedirectCreateUrlTree(w,this.urlSerializer.parse(w),T,N)}applyRedirectCreateUrlTree(T,w,N,j){const te=this.createSegmentGroup(T,w.root,N,j);return new He(te,this.createQueryParams(w.queryParams,this.urlTree.queryParams),w.fragment)}createQueryParams(T,w){const N={};return Ln(T,(j,te)=>{if("string"==typeof j&&j.startsWith(":")){const Fe=j.substring(1);N[te]=w[Fe]}else N[te]=j}),N}createSegmentGroup(T,w,N,j){const te=this.createSegments(T,w.segments,N,j);let Ae={};return Ln(w.children,(Fe,It)=>{Ae[It]=this.createSegmentGroup(T,Fe,N,j)}),new dt(te,Ae)}createSegments(T,w,N,j){return w.map(te=>te.path.startsWith(":")?this.findPosParam(T,te,j):this.findOrReturn(te,N))}findPosParam(T,w,N){const j=N[w.path.substring(1)];if(!j)throw new a.vHH(4001,Bi);return j}findOrReturn(T,w){let N=0;for(const j of w){if(j.path===T.path)return w.splice(N),j;N++}return T}}class po{}class zr{constructor(T,w,N,j,te,Ae,Fe,It){this.injector=T,this.rootComponentType=w,this.config=N,this.urlTree=j,this.url=te,this.paramsInheritanceStrategy=Ae,this.relativeLinkResolution=Fe,this.urlSerializer=It}recognize(){const T=ii(this.urlTree.root,[],[],this.config.filter(w=>void 0===w.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,T,an).pipe((0,Be.U)(w=>{if(null===w)return null;const N=new ts([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},an,this.rootComponentType,null,this.urlTree.root,-1,{}),j=new pi(N,w),te=new ms(this.url,j);return this.inheritParamsAndData(te._root),te}))}inheritParamsAndData(T){const w=T.value,N=No(w,this.paramsInheritanceStrategy);w.params=Object.freeze(N.params),w.data=Object.freeze(N.data),T.children.forEach(j=>this.inheritParamsAndData(j))}processSegmentGroup(T,w,N,j){return 0===N.segments.length&&N.hasChildren()?this.processChildren(T,w,N):this.processSegment(T,w,N,N.segments,j)}processChildren(T,w,N){return(0,ne.D)(Object.keys(N.children)).pipe(Te(j=>{const te=N.children[j],Ae=ws(w,j);return this.processSegmentGroup(T,Ae,te,j)}),(0,$e.R)((j,te)=>j&&te?(j.push(...te),j):null),function Qn(S,T=!1){return w=>w.lift(new Rn(S,T))}(j=>null!==j),(0,Nt.d)(null),In(),(0,Be.U)(j=>{if(null===j)return null;const te=ca(j);return function _a(S){S.sort((T,w)=>T.value.outlet===an?-1:w.value.outlet===an?1:T.value.outlet.localeCompare(w.value.outlet))}(te),te}))}processSegment(T,w,N,j,te){return(0,ne.D)(w).pipe(Te(Ae=>{var Fe;return this.processSegmentAgainstRoute(null!==(Fe=Ae._injector)&&void 0!==Fe?Fe:T,Ae,N,j,te)}),(0,Ce.P)(Ae=>!!Ae),Gt(Ae=>{if(Co(Ae))return Qs(N,j,te)?(0,Y.of)([]):(0,Y.of)(null);throw Ae}))}processSegmentAgainstRoute(T,w,N,j,te){var Ae,Fe;if(w.redirectTo||!ho(w,N,j,te))return(0,Y.of)(null);let It;if("**"===w.path){const O=j.length>0?$n(j).parameters:{},U=js(N)+j.length,Q=new ts(j,O,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,wn(w),Gi(w),null!==(Fe=null!==(Ae=w.component)&&void 0!==Ae?Ae:w._loadedComponent)&&void 0!==Fe?Fe:null,w,vi(N),U,En(w),U);It=(0,Y.of)({snapshot:Q,consumedSegments:[],remainingSegments:[]})}else It=$r(N,w,j,T).pipe((0,Be.U)(({matched:O,consumedSegments:U,remainingSegments:Q,parameters:fe})=>{var Ye,wt;if(!O)return null;const Ht=js(N)+U.length;return{snapshot:new ts(U,fe,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,wn(w),Gi(w),null!==(wt=null!==(Ye=w.component)&&void 0!==Ye?Ye:w._loadedComponent)&&void 0!==wt?wt:null,w,vi(N),Ht,En(w),Ht),consumedSegments:U,remainingSegments:Q}}));return It.pipe((0,ht.w)(O=>{var U,Q;if(null===O)return(0,Y.of)(null);const{snapshot:fe,consumedSegments:Ye,remainingSegments:wt}=O;T=null!==(U=w._injector)&&void 0!==U?U:T;const Ht=null!==(Q=w._loadedInjector)&&void 0!==Q?Q:T,sn=function ko(S){return S.children?S.children:S.loadChildren?S._loadedRoutes:[]}(w),{segmentGroup:Vn,slicedSegments:pr}=ii(N,Ye,wt,sn.filter(Fn=>void 0===Fn.redirectTo),this.relativeLinkResolution);if(0===pr.length&&Vn.hasChildren())return this.processChildren(Ht,sn,Vn).pipe((0,Be.U)(Fn=>null===Fn?null:[new pi(fe,Fn)]));if(0===sn.length&&0===pr.length)return(0,Y.of)([new pi(fe,[])]);const Ar=Gi(w)===te;return this.processSegment(Ht,sn,Vn,pr,Ar?an:te).pipe((0,Be.U)(Fn=>null===Fn?null:[new pi(fe,Fn)]))}))}}function io(S){const T=S.value.routeConfig;return T&&""===T.path&&void 0===T.redirectTo}function ca(S){const T=[],w=new Set;for(const N of S){if(!io(N)){T.push(N);continue}const j=T.find(te=>N.value.routeConfig===te.value.routeConfig);void 0!==j?(j.children.push(...N.children),w.add(j)):T.push(N)}for(const N of w){const j=ca(N.children);T.push(new pi(N.value,j))}return T.filter(N=>!w.has(N))}function vi(S){let T=S;for(;T._sourceSegment;)T=T._sourceSegment;return T}function js(S){var T,w;let N=S,j=null!==(T=N._segmentIndexShift)&&void 0!==T?T:0;for(;N._sourceSegment;)N=N._sourceSegment,j+=null!==(w=N._segmentIndexShift)&&void 0!==w?w:0;return j-1}function wn(S){return S.data||{}}function En(S){return S.resolve||{}}function Ea(S){return"string"==typeof S.title||null===S.title}function Fo(S){return(0,ht.w)(T=>{const w=S(T);return w?(0,ne.D)(w).pipe((0,Be.U)(()=>T)):(0,Y.of)(T)})}let Qo=(()=>{class S{buildTitle(w){var N;let j,te=w.root;for(;void 0!==te;)j=null!==(N=this.getResolvedTitleForRoute(te))&&void 0!==N?N:j,te=te.children.find(Ae=>Ae.outlet===an);return j}getResolvedTitleForRoute(w){return w.data[fr]}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=a.Yz7({token:S,factory:function(){return(0,a.f3M)(Xo)},providedIn:"root"}),S})(),Xo=(()=>{class S extends Qo{constructor(w){super(),this.title=w}updateTitle(w){const N=this.buildTitle(w);void 0!==N&&this.title.setTitle(N)}}return S.\u0275fac=function(w){return new(w||S)(a.LFG(Cr.Dx))},S.\u0275prov=a.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();class Jo{}class hu extends class Oa{shouldDetach(T){return!1}store(T,w){}shouldAttach(T){return!1}retrieve(T){return null}shouldReuseRoute(T,w){return T.routeConfig===w.routeConfig}}{}const da=new a.OlP("",{providedIn:"root",factory:()=>({})}),Ia=new a.OlP("ROUTES");let ll=(()=>{class S{constructor(w,N){this.injector=w,this.compiler=N,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(w){if(this.componentLoaders.get(w))return this.componentLoaders.get(w);if(w._loadedComponent)return(0,Y.of)(w._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(w);const N=si(w.loadComponent()).pipe((0,lt.b)(te=>{this.onLoadEndListener&&this.onLoadEndListener(w),w._loadedComponent=te}),Wt(()=>{this.componentLoaders.delete(w)})),j=new vt.c(N,()=>new mt.xQ).pipe((0,tr.x)());return this.componentLoaders.set(w,j),j}loadChildren(w,N){if(this.childrenLoaders.get(N))return this.childrenLoaders.get(N);if(N._loadedRoutes)return(0,Y.of)({routes:N._loadedRoutes,injector:N._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(N);const te=this.loadModuleFactoryOrRoutes(N.loadChildren).pipe((0,Be.U)(Fe=>{this.onLoadEndListener&&this.onLoadEndListener(N);let It,O,U=!1;Array.isArray(Fe)?O=Fe:(It=Fe.create(w).injector,O=Pr(It.get(Ia,[],a.XFs.Self|a.XFs.Optional)));return{routes:O.map(bo),injector:It}}),Wt(()=>{this.childrenLoaders.delete(N)})),Ae=new vt.c(te,()=>new mt.xQ).pipe((0,tr.x)());return this.childrenLoaders.set(N,Ae),Ae}loadModuleFactoryOrRoutes(w){return si(w()).pipe((0,oe.zg)(N=>N instanceof a.YKP||Array.isArray(N)?(0,Y.of)(N):(0,ne.D)(this.compiler.compileModuleAsync(N))))}}return S.\u0275fac=function(w){return new(w||S)(a.LFG(a.zs3),a.LFG(a.Sil))},S.\u0275prov=a.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();class Mi{}class er{shouldProcessUrl(T){return!0}extract(T){return T}merge(T,w){return T}}function Qr(S){throw S}function go(S,T,w){return T.parse("/")}const _i={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},dn={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function ta(){var S,T;const w=(0,a.f3M)(_r),N=(0,a.f3M)(Vr),j=(0,a.f3M)(xt.Ye),te=(0,a.f3M)(a.zs3),Ae=(0,a.f3M)(a.Sil),Fe=null!==(S=(0,a.f3M)(Ia,{optional:!0}))&&void 0!==S?S:[],It=null!==(T=(0,a.f3M)(da,{optional:!0}))&&void 0!==T?T:{},O=(0,a.f3M)(Xo),U=(0,a.f3M)(Qo,{optional:!0}),Q=(0,a.f3M)(Mi,{optional:!0}),fe=(0,a.f3M)(Jo,{optional:!0}),Ye=new di(null,w,N,j,te,Ae,Pr(Fe));return Q&&(Ye.urlHandlingStrategy=Q),fe&&(Ye.routeReuseStrategy=fe),Ye.titleStrategy=null!=U?U:O,function wa(S,T){S.errorHandler&&(T.errorHandler=S.errorHandler),S.malformedUriErrorHandler&&(T.malformedUriErrorHandler=S.malformedUriErrorHandler),S.onSameUrlNavigation&&(T.onSameUrlNavigation=S.onSameUrlNavigation),S.paramsInheritanceStrategy&&(T.paramsInheritanceStrategy=S.paramsInheritanceStrategy),S.relativeLinkResolution&&(T.relativeLinkResolution=S.relativeLinkResolution),S.urlUpdateStrategy&&(T.urlUpdateStrategy=S.urlUpdateStrategy),S.canceledNavigationResolution&&(T.canceledNavigationResolution=S.canceledNavigationResolution)}(It,Ye),Ye}let di=(()=>{class S{constructor(w,N,j,te,Ae,Fe,It){this.rootComponentType=w,this.urlSerializer=N,this.rootContexts=j,this.location=te,this.config=It,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new mt.xQ,this.errorHandler=Qr,this.malformedUriErrorHandler=go,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,Y.of)(void 0),this.urlHandlingStrategy=new er,this.routeReuseStrategy=new hu,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=Ae.get(ll),this.configLoader.onLoadEndListener=fe=>this.triggerEvent(new Zr(fe)),this.configLoader.onLoadStartListener=fe=>this.triggerEvent(new Ji(fe)),this.ngModule=Ae.get(a.h0i),this.console=Ae.get(a.c2e);const Q=Ae.get(a.R0b);this.isNgZoneEnabled=Q instanceof a.R0b&&a.R0b.isInAngularZone(),this.resetConfig(It),this.currentUrlTree=function Yr(){return new He(new dt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Es(this.currentUrlTree,this.rootComponentType),this.transitions=new Pe.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var w;return null===(w=this.location.getState())||void 0===w?void 0:w.\u0275routerPageId}setupNavigations(w){const N=this.events;return w.pipe((0,ve.h)(j=>0!==j.id),(0,Be.U)(j=>Object.assign(Object.assign({},j),{extractedUrl:this.urlHandlingStrategy.extract(j.rawUrl)})),(0,ht.w)(j=>{let te=!1,Ae=!1;return(0,Y.of)(j).pipe((0,lt.b)(Fe=>{this.currentNavigation={id:Fe.id,initialUrl:Fe.rawUrl,extractedUrl:Fe.extractedUrl,trigger:Fe.source,extras:Fe.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,ht.w)(Fe=>{const It=this.browserUrlTree.toString(),O=!this.navigated||Fe.extractedUrl.toString()!==It||It!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||O)&&this.urlHandlingStrategy.shouldProcessUrl(Fe.rawUrl))return So(Fe.source)&&(this.browserUrlTree=Fe.extractedUrl),(0,Y.of)(Fe).pipe((0,ht.w)(Q=>{const fe=this.transitions.getValue();return N.next(new en(Q.id,this.serializeUrl(Q.extractedUrl),Q.source,Q.restoredState)),fe!==this.transitions.getValue()?Re.E:Promise.resolve(Q)}),function fo(S,T,w,N){return(0,ht.w)(j=>function Ha(S,T,w,N,j){return new Ma(S,T,w,N,j).apply()}(S,T,w,j.extractedUrl,N).pipe((0,Be.U)(te=>Object.assign(Object.assign({},j),{urlAfterRedirects:te}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,lt.b)(Q=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:Q.urlAfterRedirects}),j.urlAfterRedirects=Q.urlAfterRedirects}),function Hs(S,T,w,N,j,te){return(0,oe.zg)(Ae=>function Wl(S,T,w,N,j,te,Ae="emptyOnly",Fe="legacy"){return new zr(S,T,w,N,j,Ae,Fe,te).recognize().pipe((0,ht.w)(It=>null===It?function du(S){return new et.y(T=>T.error(S))}(new po):(0,Y.of)(It)))}(S,T,w,Ae.urlAfterRedirects,N.serialize(Ae.urlAfterRedirects),N,j,te).pipe((0,Be.U)(Fe=>Object.assign(Object.assign({},Ae),{targetSnapshot:Fe}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,lt.b)(Q=>{if(j.targetSnapshot=Q.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!Q.extras.skipLocationChange){const Ye=this.urlHandlingStrategy.merge(Q.urlAfterRedirects,Q.rawUrl);this.setBrowserUrl(Ye,Q)}this.browserUrlTree=Q.urlAfterRedirects}const fe=new Br(Q.id,this.serializeUrl(Q.extractedUrl),this.serializeUrl(Q.urlAfterRedirects),Q.targetSnapshot);N.next(fe)}));if(O&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:fe,extractedUrl:Ye,source:wt,restoredState:Ht,extras:sn}=Fe,Vn=new en(fe,this.serializeUrl(Ye),wt,Ht);N.next(Vn);const pr=Es(Ye,this.rootComponentType).snapshot;return j=Object.assign(Object.assign({},Fe),{targetSnapshot:pr,urlAfterRedirects:Ye,extras:Object.assign(Object.assign({},sn),{skipLocationChange:!1,replaceUrl:!1})}),(0,Y.of)(j)}return this.rawUrlTree=Fe.rawUrl,Fe.resolve(null),Re.E}),(0,lt.b)(Fe=>{const It=new Rs(Fe.id,this.serializeUrl(Fe.extractedUrl),this.serializeUrl(Fe.urlAfterRedirects),Fe.targetSnapshot);this.triggerEvent(It)}),(0,Be.U)(Fe=>j=Object.assign(Object.assign({},Fe),{guards:P(Fe.targetSnapshot,Fe.currentSnapshot,this.rootContexts)})),function ua(S,T){return(0,oe.zg)(w=>{const{targetSnapshot:N,currentSnapshot:j,guards:{canActivateChecks:te,canDeactivateChecks:Ae}}=w;return 0===Ae.length&&0===te.length?(0,Y.of)(Object.assign(Object.assign({},w),{guardsResult:!0})):function F(S,T,w,N){return(0,ne.D)(S).pipe((0,oe.zg)(j=>function kt(S,T,w,N,j){const te=T&&T.routeConfig?T.routeConfig.canDeactivate:null;if(!te||0===te.length)return(0,Y.of)(!0);const Ae=te.map(Fe=>{var It;const O=null!==(It=As(T))&&void 0!==It?It:j,U=V(Fe,O);return si(function bs(S){return S&&Zn(S.canDeactivate)}(U)?U.canDeactivate(S,T,w,N):O.runInContext(()=>U(S,T,w,N))).pipe((0,Ce.P)())});return(0,Y.of)(Ae).pipe(Zs())}(j.component,j.route,w,T,N)),(0,Ce.P)(j=>!0!==j,!0))}(Ae,N,j,S).pipe((0,oe.zg)(Fe=>Fe&&function ni(S){return"boolean"==typeof S}(Fe)?function Z(S,T,w,N){return(0,ne.D)(T).pipe(Te(j=>(0,st.z)(function re(S,T){return null!==S&&T&&T(new Os(S)),(0,Y.of)(!0)}(j.route.parent,N),function $(S,T){return null!==S&&T&&T(new es(S)),(0,Y.of)(!0)}(j.route,N),function St(S,T,w){const N=T[T.length-1],te=T.slice(0,T.length-1).reverse().map(Ae=>function E(S){const T=S.routeConfig?S.routeConfig.canActivateChild:null;return T&&0!==T.length?{node:S,guards:T}:null}(Ae)).filter(Ae=>null!==Ae).map(Ae=>De(()=>{const Fe=Ae.guards.map(It=>{var O;const U=null!==(O=As(Ae.node))&&void 0!==O?O:w,Q=V(It,U);return si(function ns(S){return S&&Zn(S.canActivateChild)}(Q)?Q.canActivateChild(N,S):U.runInContext(()=>Q(N,S))).pipe((0,Ce.P)())});return(0,Y.of)(Fe).pipe(Zs())}));return(0,Y.of)(te).pipe(Zs())}(S,j.path,w),function ke(S,T,w){const N=T.routeConfig?T.routeConfig.canActivate:null;if(!N||0===N.length)return(0,Y.of)(!0);const j=N.map(te=>De(()=>{var Ae;const Fe=null!==(Ae=As(T))&&void 0!==Ae?Ae:w,It=V(te,Fe);return si(function ci(S){return S&&Zn(S.canActivate)}(It)?It.canActivate(T,S):Fe.runInContext(()=>It(T,S))).pipe((0,Ce.P)())}));return(0,Y.of)(j).pipe(Zs())}(S,j.route,w))),(0,Ce.P)(j=>!0!==j,!0))}(N,te,S,T):(0,Y.of)(Fe)),(0,Be.U)(Fe=>Object.assign(Object.assign({},w),{guardsResult:Fe})))})}(this.ngModule.injector,Fe=>this.triggerEvent(Fe)),(0,lt.b)(Fe=>{if(j.guardsResult=Fe.guardsResult,Fr(Fe.guardsResult))throw ls(0,Fe.guardsResult);const It=new Sr(Fe.id,this.serializeUrl(Fe.extractedUrl),this.serializeUrl(Fe.urlAfterRedirects),Fe.targetSnapshot,!!Fe.guardsResult);this.triggerEvent(It)}),(0,ve.h)(Fe=>!!Fe.guardsResult||(this.restoreHistory(Fe),this.cancelNavigationTransition(Fe,"",3),!1)),Fo(Fe=>{if(Fe.guards.canActivateChecks.length)return(0,Y.of)(Fe).pipe((0,lt.b)(It=>{const O=new Ir(It.id,this.serializeUrl(It.extractedUrl),this.serializeUrl(It.urlAfterRedirects),It.targetSnapshot);this.triggerEvent(O)}),(0,ht.w)(It=>{let O=!1;return(0,Y.of)(It).pipe(function cn(S,T){return(0,oe.zg)(w=>{const{targetSnapshot:N,guards:{canActivateChecks:j}}=w;if(!j.length)return(0,Y.of)(w);let te=0;return(0,ne.D)(j).pipe(Te(Ae=>function Pt(S,T,w,N){const j=S.routeConfig,te=S._resolve;return void 0!==(null==j?void 0:j.title)&&!Ea(j)&&(te[fr]=j.title),function Qt(S,T,w,N){const j=function Ni(S){return[...Object.keys(S),...Object.getOwnPropertySymbols(S)]}(S);if(0===j.length)return(0,Y.of)({});const te={};return(0,ne.D)(j).pipe((0,oe.zg)(Ae=>function Ra(S,T,w,N){var j;const te=null!==(j=As(T))&&void 0!==j?j:N,Ae=V(S,te);return si(Ae.resolve?Ae.resolve(T,w):te.runInContext(()=>Ae(T,w)))}(S[Ae],T,w,N).pipe((0,Ce.P)(),(0,lt.b)(Fe=>{te[Ae]=Fe}))),Qe(1),function cr(S){return T=>T.lift(new Hn(S))}(te),Gt(Ae=>Co(Ae)?Re.E:(0,me._)(Ae)))}(te,S,T,N).pipe((0,Be.U)(Ae=>(S._resolvedData=Ae,S.data=No(S,w).resolve,j&&Ea(j)&&(S.data[fr]=j.title),null)))}(Ae.route,N,S,T)),(0,lt.b)(()=>te++),Qe(1),(0,oe.zg)(Ae=>te===j.length?(0,Y.of)(w):Re.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,lt.b)({next:()=>O=!0,complete:()=>{O||(this.restoreHistory(It),this.cancelNavigationTransition(It,"",2))}}))}),(0,lt.b)(It=>{const O=new Xn(It.id,this.serializeUrl(It.extractedUrl),this.serializeUrl(It.urlAfterRedirects),It.targetSnapshot);this.triggerEvent(O)}))}),Fo(Fe=>{const It=O=>{var U;const Q=[];(null===(U=O.routeConfig)||void 0===U?void 0:U.loadComponent)&&!O.routeConfig._loadedComponent&&Q.push(this.configLoader.loadComponent(O.routeConfig).pipe((0,lt.b)(fe=>{O.component=fe}),(0,Be.U)(()=>{})));for(const fe of O.children)Q.push(...It(fe));return Q};return ie(It(Fe.targetSnapshot.root)).pipe((0,Nt.d)(),(0,ye.q)(1))}),Fo(()=>this.afterPreactivation()),(0,Be.U)(Fe=>{const It=function yi(S,T,w){const N=nr(S,T._root,w?w._root:void 0);return new ps(N,T)}(this.routeReuseStrategy,Fe.targetSnapshot,Fe.currentRouterState);return j=Object.assign(Object.assign({},Fe),{targetRouterState:It})}),(0,lt.b)(Fe=>{this.currentUrlTree=Fe.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(Fe.urlAfterRedirects,Fe.rawUrl),this.routerState=Fe.targetRouterState,"deferred"===this.urlUpdateStrategy&&(Fe.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,Fe),this.browserUrlTree=Fe.urlAfterRedirects)}),((S,T,w)=>(0,Be.U)(N=>(new B(T,N.targetRouterState,N.currentRouterState,w).activate(S),N)))(this.rootContexts,this.routeReuseStrategy,Fe=>this.triggerEvent(Fe)),(0,lt.b)({next(){te=!0},complete(){te=!0}}),Wt(()=>{var Fe;te||Ae||this.cancelNavigationTransition(j,"",1),(null===(Fe=this.currentNavigation)||void 0===Fe?void 0:Fe.id)===j.id&&(this.currentNavigation=null)}),Gt(Fe=>{var It;if(Ae=!0,Is(Fe)){us(Fe)||(this.navigated=!0,this.restoreHistory(j,!0));const O=new qn(j.id,this.serializeUrl(j.extractedUrl),Fe.message,Fe.cancellationCode);if(N.next(O),us(Fe)){const U=this.urlHandlingStrategy.merge(Fe.url,this.rawUrlTree),Q={skipLocationChange:j.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||So(j.source)};this.scheduleNavigation(U,"imperative",null,Q,{resolve:j.resolve,reject:j.reject,promise:j.promise})}else j.resolve(!1)}else{this.restoreHistory(j,!0);const O=new ui(j.id,this.serializeUrl(j.extractedUrl),Fe,null!==(It=j.targetSnapshot)&&void 0!==It?It:void 0);N.next(O);try{j.resolve(this.errorHandler(Fe))}catch(U){j.reject(U)}}return Re.E}))}))}resetRootComponentType(w){this.rootComponentType=w,this.routerState.root.component=this.rootComponentType}setTransition(w){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),w))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(w=>{const N="popstate"===w.type?"popstate":"hashchange";"popstate"===N&&setTimeout(()=>{var j;const te={replaceUrl:!0},Ae=null!==(j=w.state)&&void 0!==j&&j.navigationId?w.state:null;if(Ae){const It=Object.assign({},Ae);delete It.navigationId,delete It.\u0275routerPageId,0!==Object.keys(It).length&&(te.state=It)}const Fe=this.parseUrl(w.url);this.scheduleNavigation(Fe,N,Ae,te)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(w){this.events.next(w)}resetConfig(w){this.config=w.map(bo),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(w,N={}){const{relativeTo:j,queryParams:te,fragment:Ae,queryParamsHandling:Fe,preserveFragment:It}=N,O=j||this.routerState.root,U=It?this.currentUrlTree.fragment:Ae;let Q=null;switch(Fe){case"merge":Q=Object.assign(Object.assign({},this.currentUrlTree.queryParams),te);break;case"preserve":Q=this.currentUrlTree.queryParams;break;default:Q=te||null}return null!==Q&&(Q=this.removeEmptyProps(Q)),Li(O,this.currentUrlTree,w,Q,null!=U?U:null)}navigateByUrl(w,N={skipLocationChange:!1}){const j=Fr(w)?w:this.parseUrl(w),te=this.urlHandlingStrategy.merge(j,this.rawUrlTree);return this.scheduleNavigation(te,"imperative",null,N)}navigate(w,N={skipLocationChange:!1}){return function ba(S){for(let T=0;T<S.length;T++){if(null==S[T])throw new a.vHH(4008,false)}}(w),this.navigateByUrl(this.createUrlTree(w,N),N)}serializeUrl(w){return this.urlSerializer.serialize(w)}parseUrl(w){let N;try{N=this.urlSerializer.parse(w)}catch(j){N=this.malformedUriErrorHandler(j,this.urlSerializer,w)}return N}isActive(w,N){let j;if(j=!0===N?Object.assign({},_i):!1===N?Object.assign({},dn):N,Fr(w))return $t(this.currentUrlTree,w,j);const te=this.parseUrl(w);return $t(this.currentUrlTree,te,j)}removeEmptyProps(w){return Object.keys(w).reduce((N,j)=>{const te=w[j];return null!=te&&(N[j]=te),N},{})}processNavigations(){this.navigations.subscribe(w=>{var N;this.navigated=!0,this.lastSuccessfulId=w.id,this.currentPageId=w.targetPageId,this.events.next(new Sn(w.id,this.serializeUrl(w.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,null===(N=this.titleStrategy)||void 0===N||N.updateTitle(this.routerState.snapshot),w.resolve(!0)},w=>{this.console.warn(`Unhandled Navigation Error: ${w}`)})}scheduleNavigation(w,N,j,te,Ae){var Fe,It;if(this.disposed)return Promise.resolve(!1);let O,U,Q;Ae?(O=Ae.resolve,U=Ae.reject,Q=Ae.promise):Q=new Promise((wt,Ht)=>{O=wt,U=Ht});const fe=++this.navigationId;let Ye;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(j=this.location.getState()),Ye=j&&j.\u0275routerPageId?j.\u0275routerPageId:te.replaceUrl||te.skipLocationChange?null!==(Fe=this.browserPageId)&&void 0!==Fe?Fe:0:(null!==(It=this.browserPageId)&&void 0!==It?It:0)+1):Ye=0,this.setTransition({id:fe,targetPageId:Ye,source:N,restoredState:j,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:w,extras:te,resolve:O,reject:U,promise:Q,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),Q.catch(wt=>Promise.reject(wt))}setBrowserUrl(w,N){const j=this.urlSerializer.serialize(w),te=Object.assign(Object.assign({},N.extras.state),this.generateNgRouterState(N.id,N.targetPageId));this.location.isCurrentPathEqualTo(j)||N.extras.replaceUrl?this.location.replaceState(j,"",te):this.location.go(j,"",te)}restoreHistory(w,N=!1){var j,te;if("computed"===this.canceledNavigationResolution){const Ae=this.currentPageId-w.targetPageId;"popstate"!==w.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(j=this.currentNavigation)||void 0===j?void 0:j.finalUrl)||0===Ae?this.currentUrlTree===(null===(te=this.currentNavigation)||void 0===te?void 0:te.finalUrl)&&0===Ae&&(this.resetState(w),this.browserUrlTree=w.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(Ae)}else"replace"===this.canceledNavigationResolution&&(N&&this.resetState(w),this.resetUrlToCurrentUrlTree())}resetState(w){this.routerState=w.currentRouterState,this.currentUrlTree=w.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,w.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(w,N,j){const te=new qn(w.id,this.serializeUrl(w.extractedUrl),N,j);this.triggerEvent(te),w.resolve(!1)}generateNgRouterState(w,N){return"computed"===this.canceledNavigationResolution?{navigationId:w,\u0275routerPageId:N}:{navigationId:w}}}return S.\u0275fac=function(w){a.$Z()},S.\u0275prov=a.Yz7({token:S,factory:function(){return ta()},providedIn:"root"}),S})();function So(S){return"imperative"!==S}let Di=(()=>{class S{constructor(w,N,j,te,Ae){this.router=w,this.route=N,this.tabIndexAttribute=j,this.renderer=te,this.el=Ae,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new mt.xQ,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(w){this._preserveFragment=(0,a.D6c)(w)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(w){this._skipLocationChange=(0,a.D6c)(w)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(w){this._replaceUrl=(0,a.D6c)(w)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(w){if(null!=this.tabIndexAttribute)return;const N=this.renderer,j=this.el.nativeElement;null!==w?N.setAttribute(j,"tabindex",w):N.removeAttribute(j,"tabindex")}ngOnChanges(w){this.onChanges.next(this)}set routerLink(w){null!=w?(this.commands=Array.isArray(w)?w:[w],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return S.\u0275fac=function(w){return new(w||S)(a.Y36(di),a.Y36(Ci),a.$8M("tabindex"),a.Y36(a.Qsj),a.Y36(a.SBq))},S.\u0275dir=a.lG2({type:S,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(w,N){1&w&&a.NdJ("click",function(){return N.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[a.TTD]}),S})();class To{}let pu=(()=>{class S{preload(w,N){return N().pipe(Gt(()=>(0,Y.of)(null)))}}return S.\u0275fac=function(w){return new(w||S)},S.\u0275prov=a.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})(),gu=(()=>{class S{constructor(w,N,j,te,Ae){this.router=w,this.injector=j,this.preloadingStrategy=te,this.loader=Ae}setUpPreloading(){this.subscription=this.router.events.pipe((0,ve.h)(w=>w instanceof Sn),Te(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(w,N){var j,te,Ae;const Fe=[];for(const It of N){It.providers&&!It._injector&&(It._injector=(0,a.MMx)(It.providers,w,`Route: ${It.path}`));const O=null!==(j=It._injector)&&void 0!==j?j:w,U=null!==(te=It._loadedInjector)&&void 0!==te?te:O;It.loadChildren&&!It._loadedRoutes&&void 0===It.canLoad||It.loadComponent&&!It._loadedComponent?Fe.push(this.preloadConfig(O,It)):(It.children||It._loadedRoutes)&&Fe.push(this.processRoutes(U,null!==(Ae=It.children)&&void 0!==Ae?Ae:It._loadedRoutes))}return(0,ne.D)(Fe).pipe((0,Jn.J)())}preloadConfig(w,N){return this.preloadingStrategy.preload(N,()=>{let j;j=N.loadChildren&&void 0===N.canLoad?this.loader.loadChildren(w,N):(0,Y.of)(null);const te=j.pipe((0,oe.zg)(Ae=>{var Fe;return null===Ae?(0,Y.of)(void 0):(N._loadedRoutes=Ae.routes,N._loadedInjector=Ae.injector,this.processRoutes(null!==(Fe=Ae.injector)&&void 0!==Fe?Fe:w,Ae.routes))}));if(N.loadComponent&&!N._loadedComponent){const Ae=this.loader.loadComponent(N);return(0,ne.D)([te,Ae]).pipe((0,Jn.J)())}return te})}}return S.\u0275fac=function(w){return new(w||S)(a.LFG(di),a.LFG(a.Sil),a.LFG(a.lqb),a.LFG(To),a.LFG(ll))},S.\u0275prov=a.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();const Ao=new a.OlP("");let Kl=(()=>{class S{constructor(w,N,j={}){this.router=w,this.viewportScroller=N,this.options=j,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},j.scrollPositionRestoration=j.scrollPositionRestoration||"disabled",j.anchorScrolling=j.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(w=>{w instanceof en?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=w.navigationTrigger,this.restoredId=w.restoredState?w.restoredState.navigationId:0):w instanceof Sn&&(this.lastId=w.id,this.scheduleScrollEvent(w,this.router.parseUrl(w.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(w=>{w instanceof Tr&&(w.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(w.position):w.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(w.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(w,N){this.router.triggerEvent(new Tr(w,"popstate"===this.lastSource?this.store[this.restoredId]:null,N))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return S.\u0275fac=function(w){a.$Z()},S.\u0275prov=a.Yz7({token:S,factory:S.\u0275fac}),S})();function mo(S,T){return{\u0275kind:S,\u0275providers:T}}function Ca(S){return[{provide:Ia,multi:!0,useValue:S}]}function yo(){const S=(0,a.f3M)(a.zs3);return T=>{var w,N;const j=S.get(a.z2F);if(T!==j.components[0])return;const te=S.get(di),Ae=S.get(xs);1===S.get(Ga)&&te.initialNavigation(),null===(w=S.get(oo,null,a.XFs.Optional))||void 0===w||w.setUpPreloading(),null===(N=S.get(Ao,null,a.XFs.Optional))||void 0===N||N.init(),te.resetRootComponentType(j.componentTypes[0]),Ae.next(),Ae.complete()}}const xs=new a.OlP("",{factory:()=>new mt.xQ}),Ga=new a.OlP("",{providedIn:"root",factory:()=>1});const oo=new a.OlP("");function Ja(S){return mo(0,[{provide:oo,useExisting:gu},{provide:To,useExisting:S}])}const Ms=new a.OlP("ROUTER_FORROOT_GUARD"),ds=[xt.Ye,{provide:_r,useClass:Rr},{provide:di,useFactory:ta},Vr,{provide:Ci,useFactory:function so(S){return S.routerState.root},deps:[di]},ll];function Xr(){return new a.PXZ("Router",di)}let mu=(()=>{class S{constructor(w){}static forRoot(w,N){return{ngModule:S,providers:[ds,[],Ca(w),{provide:Ms,useFactory:_s,deps:[[di,new a.FiY,new a.tp0]]},{provide:da,useValue:N||{}},null!=N&&N.useHash?{provide:xt.S$,useClass:xt.Do}:{provide:xt.S$,useClass:xt.b0},{provide:Ao,useFactory:()=>{const S=(0,a.f3M)(di),T=(0,a.f3M)(xt.EM),w=(0,a.f3M)(da);return w.scrollOffset&&T.setOffset(w.scrollOffset),new Kl(S,T,w)}},null!=N&&N.preloadingStrategy?Ja(N.preloadingStrategy).\u0275providers:[],{provide:a.PXZ,multi:!0,useFactory:Xr},null!=N&&N.initialNavigation?el(N):[],[{provide:Vo,useFactory:yo},{provide:a.tb,multi:!0,useExisting:Vo}]]}}static forChild(w){return{ngModule:S,providers:[Ca(w)]}}}return S.\u0275fac=function(w){return new(w||S)(a.LFG(Ms,8))},S.\u0275mod=a.oAB({type:S}),S.\u0275inj=a.cJS({imports:[Po]}),S})();function _s(S){return"guarded"}function el(S){return["disabled"===S.initialNavigation?mo(3,[{provide:a.ip1,multi:!0,useFactory:()=>{const T=(0,a.f3M)(di);return()=>{T.setUpLocationChangeListener()}}},{provide:Ga,useValue:2}]).\u0275providers:[],"enabledBlocking"===S.initialNavigation?mo(2,[{provide:Ga,useValue:0},{provide:a.ip1,multi:!0,deps:[a.zs3],useFactory:T=>{const w=T.get(xt.V_,Promise.resolve());let N=!1;return()=>w.then(()=>new Promise(te=>{const Ae=T.get(di),Fe=T.get(xs);(function j(te){T.get(di).events.pipe((0,ve.h)(Fe=>Fe instanceof Sn||Fe instanceof qn||Fe instanceof ui),(0,Be.U)(Fe=>Fe instanceof Sn||Fe instanceof qn&&(0===Fe.code||1===Fe.code)&&null),(0,ve.h)(Fe=>null!==Fe),(0,ye.q)(1)).subscribe(()=>{te()})})(()=>{te(!0),N=!0}),Ae.afterPreactivation=()=>(te(!0),N||Fe.closed?(0,Y.of)(void 0):Fe),Ae.initialNavigation()}))}}]).\u0275providers:[]]}const Vo=new a.OlP("")},3942:(tn,ot,H)=>{"use strict";H.d(ot,{Z:()=>st});var a=H(2090),ne=H(4859),Y=H(9681),Pe=H(1877);class Le{constructor(Re,De){this._delegate=Re,this.firebase=De,(0,Y._addComponent)(Re,new ne.wA("app-compat",()=>this,"PUBLIC")),this.container=Re.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Re){this._delegate.automaticDataCollectionEnabled=Re}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Re=>{this._delegate.checkDestroyed(),Re()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,Y.deleteApp)(this._delegate)))}_getService(Re,De=Y._DEFAULT_ENTRY_NAME){var ct;this._delegate.checkDestroyed();const me=this._delegate.container.getProvider(Re);return!me.isInitialized()&&"EXPLICIT"===(null===(ct=me.getComponent())||void 0===ct?void 0:ct.instantiationMode)&&me.initialize(),me.getImmediate({identifier:De})}_removeServiceInstance(Re,De=Y._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Re).clearInstance(De)}_addComponent(Re){(0,Y._addComponent)(this._delegate,Re)}_addOrOverwriteComponent(Re){(0,Y._addOrOverwriteComponent)(this._delegate,Re)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ee=new a.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ce=function be(){const et=function pe(et){const Re={},De={__esModule:!0,initializeApp:function vt(ht,ye={}){const Oe=Y.initializeApp(ht,ye);if((0,a.r3)(Re,Oe.name))return Re[Oe.name];const ve=new et(Oe,De);return Re[Oe.name]=ve,ve},app:me,registerVersion:Y.registerVersion,setLogLevel:Y.setLogLevel,onLog:Y.onLog,apps:null,SDK_VERSION:Y.SDK_VERSION,INTERNAL:{registerComponent:function xt(ht){const ye=ht.name,Oe=ye.replace("-compat","");if(Y._registerComponent(ht)&&"PUBLIC"===ht.type){const ve=(oe=me())=>{if("function"!=typeof oe[Oe])throw Ee.create("invalid-app-argument",{appName:ye});return oe[Oe]()};void 0!==ht.serviceProps&&(0,a.ZB)(ve,ht.serviceProps),De[Oe]=ve,et.prototype[Oe]=function(...oe){return this._getService.bind(this,ye).apply(this,ht.multipleInstances?oe:[])}}return"PUBLIC"===ht.type?De[Oe]:null},removeApp:function ct(ht){delete Re[ht]},useAsService:function Be(ht,ye){return"serverAuth"===ye?null:ye},modularAPIs:Y}};function me(ht){if(!(0,a.r3)(Re,ht=ht||Y._DEFAULT_ENTRY_NAME))throw Ee.create("no-app",{appName:ht});return Re[ht]}return De.default=De,Object.defineProperty(De,"apps",{get:function mt(){return Object.keys(Re).map(ht=>Re[ht])}}),me.App=et,De}(Le);return et.INTERNAL=Object.assign(Object.assign({},et.INTERNAL),{createFirebaseNamespace:be,extendNamespace:function Re(De){(0,a.ZB)(et,De)},createSubscribe:a.ne,ErrorFactory:a.LL,deepExtend:a.ZB}),et}(),de=new Pe.Yd("@firebase/app-compat");if((0,a.jU)()&&void 0!==self.firebase){de.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const et=self.firebase.SDK_VERSION;et&&et.indexOf("LITE")>=0&&de.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const st=ce;!function Ge(et){(0,Y.registerVersion)("@firebase/app-compat","0.1.39",et)}()},9681:(tn,ot,H)=>{"use strict";H.r(ot),H.d(ot,{FirebaseError:()=>Pe.ZR,SDK_VERSION:()=>Wn,_DEFAULT_ENTRY_NAME:()=>at,_addComponent:()=>Qe,_addOrOverwriteComponent:()=>ft,_apps:()=>Ue,_clearComponents:()=>bn,_components:()=>Je,_getProvider:()=>Vt,_registerComponent:()=>pt,_removeServiceInstance:()=>Nt,deleteApp:()=>mr,getApp:()=>Hn,getApps:()=>or,initializeApp:()=>cr,onLog:()=>Nr,registerVersion:()=>rr,setLogLevel:()=>tr});var a=H(5861),ne=H(4859),Y=H(1877),Pe=H(2090),Le=H(8766);class he{constructor($t){this.container=$t}getPlatformInfoString(){return this.container.getProviders().map(ln=>{if(function Ee(mn){const $t=mn.getComponent();return"VERSION"===(null==$t?void 0:$t.type)}(ln)){const kn=ln.getImmediate();return`${kn.library}/${kn.version}`}return null}).filter(ln=>ln).join(" ")}}const pe="@firebase/app",ce=new Y.Yd("@firebase/app"),at="[DEFAULT]",$e={[pe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ue=new Map,Je=new Map;function Qe(mn,$t){try{mn.container.addComponent($t)}catch(ln){ce.debug(`Component ${$t.name} failed to register with FirebaseApp ${mn.name}`,ln)}}function ft(mn,$t){mn.container.addOrOverwriteComponent($t)}function pt(mn){const $t=mn.name;if(Je.has($t))return ce.debug(`There were multiple attempts to register component ${$t}.`),!1;Je.set($t,mn);for(const ln of Ue.values())Qe(ln,mn);return!0}function Vt(mn,$t){const ln=mn.container.getProvider("heartbeat").getImmediate({optional:!0});return ln&&ln.triggerHeartbeat(),mn.container.getProvider($t)}function Nt(mn,$t,ln=at){Vt(mn,$t).clearInstance(ln)}function bn(){Je.clear()}const Qn=new Pe.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Rn{constructor($t,ln,kn){this._isDeleted=!1,this._options=Object.assign({},$t),this._config=Object.assign({},ln),this._name=ln.name,this._automaticDataCollectionEnabled=ln.automaticDataCollectionEnabled,this._container=kn,this.container.addComponent(new ne.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled($t){this.checkDestroyed(),this._automaticDataCollectionEnabled=$t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted($t){this._isDeleted=$t}checkDestroyed(){if(this.isDeleted)throw Qn.create("app-deleted",{appName:this._name})}}const Wn="9.14.0";function cr(mn,$t={}){let ln=mn;"object"!=typeof $t&&($t={name:$t});const kn=Object.assign({name:at,automaticDataCollectionEnabled:!1},$t),Cn=kn.name;if("string"!=typeof Cn||!Cn)throw Qn.create("bad-app-name",{appName:String(Cn)});if(ln||(ln=(0,Pe.aH)()),!ln)throw Qn.create("no-options");const On=Ue.get(Cn);if(On){if((0,Pe.vZ)(ln,On.options)&&(0,Pe.vZ)(kn,On.config))return On;throw Qn.create("duplicate-app",{appName:Cn})}const je=new ne.H0(Cn);for(const He of Je.values())je.addComponent(He);const Ne=new Rn(ln,kn,je);return Ue.set(Cn,Ne),Ne}function Hn(mn=at){const $t=Ue.get(mn);if(!$t&&mn===at)return cr();if(!$t)throw Qn.create("no-app",{appName:mn});return $t}function or(){return Array.from(Ue.values())}function mr(mn){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,a.Z)(function*(mn){const $t=mn.name;Ue.has($t)&&(Ue.delete($t),yield Promise.all(mn.container.getProviders().map(ln=>ln.delete())),mn.isDeleted=!0)})).apply(this,arguments)}function rr(mn,$t,ln){var kn;let Cn=null!==(kn=$e[mn])&&void 0!==kn?kn:mn;ln&&(Cn+=`-${ln}`);const On=Cn.match(/\s|\//),je=$t.match(/\s|\//);if(On||je){const Ne=[`Unable to register library "${Cn}" with version "${$t}":`];return On&&Ne.push(`library name "${Cn}" contains illegal characters (whitespace or "/")`),On&&je&&Ne.push("and"),je&&Ne.push(`version name "${$t}" contains illegal characters (whitespace or "/")`),void ce.warn(Ne.join(" "))}pt(new ne.wA(`${Cn}-version`,()=>({library:Cn,version:$t}),"VERSION"))}function Nr(mn,$t){if(null!==mn&&"function"!=typeof mn)throw Qn.create("invalid-log-argument");(0,Y.Am)(mn,$t)}function tr(mn){(0,Y.Ub)(mn)}const an="firebase-heartbeat-store";let fr=null;function Tn(){return fr||(fr=(0,Le.X3)("firebase-heartbeat-database",1,{upgrade:(mn,$t)=>{0===$t&&mn.createObjectStore(an)}}).catch(mn=>{throw Qn.create("idb-open",{originalErrorMessage:mn.message})})),fr}function Tt(){return(Tt=(0,a.Z)(function*(mn){var $t;try{return(yield Tn()).transaction(an).objectStore(an).get(Dr(mn))}catch(ln){if(ln instanceof Pe.ZR)ce.warn(ln.message);else{const kn=Qn.create("idb-get",{originalErrorMessage:null===($t=ln)||void 0===$t?void 0:$t.message});ce.warn(kn.message)}}})).apply(this,arguments)}function yr(mn,$t){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,a.Z)(function*(mn,$t){var ln;try{const Cn=(yield Tn()).transaction(an,"readwrite");return yield Cn.objectStore(an).put($t,Dr(mn)),Cn.done}catch(kn){if(kn instanceof Pe.ZR)ce.warn(kn.message);else{const Cn=Qn.create("idb-set",{originalErrorMessage:null===(ln=kn)||void 0===ln?void 0:ln.message});ce.warn(Cn.message)}}})).apply(this,arguments)}function Dr(mn){return`${mn.name}!${mn.options.appId}`}class ji{constructor($t){this.container=$t,this._heartbeatsCache=null;const ln=this.container.getProvider("app").getImmediate();this._storage=new ir(ln),this._heartbeatsCachePromise=this._storage.read().then(kn=>(this._heartbeatsCache=kn,kn))}triggerHeartbeat(){var $t=this;return(0,a.Z)(function*(){const kn=$t.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Cn=Ln();if(null===$t._heartbeatsCache&&($t._heartbeatsCache=yield $t._heartbeatsCachePromise),$t._heartbeatsCache.lastSentHeartbeatDate!==Cn&&!$t._heartbeatsCache.heartbeats.some(On=>On.date===Cn))return $t._heartbeatsCache.heartbeats.push({date:Cn,agent:kn}),$t._heartbeatsCache.heartbeats=$t._heartbeatsCache.heartbeats.filter(On=>{const je=new Date(On.date).valueOf();return Date.now()-je<=2592e6}),$t._storage.overwrite($t._heartbeatsCache)})()}getHeartbeatsHeader(){var $t=this;return(0,a.Z)(function*(){if(null===$t._heartbeatsCache&&(yield $t._heartbeatsCachePromise),null===$t._heartbeatsCache||0===$t._heartbeatsCache.heartbeats.length)return"";const ln=Ln(),{heartbeatsToSend:kn,unsentEntries:Cn}=function si(mn,$t=1024){const ln=[];let kn=mn.slice();for(const Cn of mn){const On=ln.find(je=>je.agent===Cn.agent);if(On){if(On.dates.push(Cn.date),Yr(ln)>$t){On.dates.pop();break}}else if(ln.push({agent:Cn.agent,dates:[Cn.date]}),Yr(ln)>$t){ln.pop();break}kn=kn.slice(1)}return{heartbeatsToSend:ln,unsentEntries:kn}}($t._heartbeatsCache.heartbeats),On=(0,Pe.L)(JSON.stringify({version:2,heartbeats:kn}));return $t._heartbeatsCache.lastSentHeartbeatDate=ln,Cn.length>0?($t._heartbeatsCache.heartbeats=Cn,yield $t._storage.overwrite($t._heartbeatsCache)):($t._heartbeatsCache.heartbeats=[],$t._storage.overwrite($t._heartbeatsCache)),On})()}}function Ln(){return(new Date).toISOString().substring(0,10)}class ir{constructor($t){this.app=$t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,a.Z)(function*(){return!!(0,Pe.hl)()&&(0,Pe.eu)().then(()=>!0).catch(()=>!1)})()}read(){var $t=this;return(0,a.Z)(function*(){return(yield $t._canUseIndexedDBPromise)&&(yield function gn(mn){return Tt.apply(this,arguments)}($t.app))||{heartbeats:[]}})()}overwrite($t){var ln=this;return(0,a.Z)(function*(){var kn;if(yield ln._canUseIndexedDBPromise){const On=yield ln.read();return yr(ln.app,{lastSentHeartbeatDate:null!==(kn=$t.lastSentHeartbeatDate)&&void 0!==kn?kn:On.lastSentHeartbeatDate,heartbeats:$t.heartbeats})}})()}add($t){var ln=this;return(0,a.Z)(function*(){var kn;if(yield ln._canUseIndexedDBPromise){const On=yield ln.read();return yr(ln.app,{lastSentHeartbeatDate:null!==(kn=$t.lastSentHeartbeatDate)&&void 0!==kn?kn:On.lastSentHeartbeatDate,heartbeats:[...On.heartbeats,...$t.heartbeats]})}})()}}function Yr(mn){return(0,Pe.L)(JSON.stringify({version:2,heartbeats:mn})).length}!function ei(mn){pt(new ne.wA("platform-logger",$t=>new he($t),"PRIVATE")),pt(new ne.wA("heartbeat",$t=>new ji($t),"PRIVATE")),rr(pe,"0.8.4",mn),rr(pe,"0.8.4","esm2017"),rr("fire-js","")}("")},4859:(tn,ot,H)=>{"use strict";H.d(ot,{H0:()=>pe,wA:()=>Y,zt:()=>Le});var a=H(5861),ne=H(2090);class Y{constructor(ce,de,ie){this.name=ce,this.instanceFactory=de,this.type=ie,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ce){return this.instantiationMode=ce,this}setMultipleInstances(ce){return this.multipleInstances=ce,this}setServiceProps(ce){return this.serviceProps=ce,this}setInstanceCreatedCallback(ce){return this.onInstanceCreated=ce,this}}const Pe="[DEFAULT]";class Le{constructor(ce,de){this.name=ce,this.container=de,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ce){const de=this.normalizeInstanceIdentifier(ce);if(!this.instancesDeferred.has(de)){const ie=new ne.BH;if(this.instancesDeferred.set(de,ie),this.isInitialized(de)||this.shouldAutoInitialize())try{const Ie=this.getOrInitializeService({instanceIdentifier:de});Ie&&ie.resolve(Ie)}catch(Ie){}}return this.instancesDeferred.get(de).promise}getImmediate(ce){var de;const ie=this.normalizeInstanceIdentifier(null==ce?void 0:ce.identifier),Ie=null!==(de=null==ce?void 0:ce.optional)&&void 0!==de&&de;if(!this.isInitialized(ie)&&!this.shouldAutoInitialize()){if(Ie)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ie})}catch(Ge){if(Ie)return null;throw Ge}}getComponent(){return this.component}setComponent(ce){if(ce.name!==this.name)throw Error(`Mismatching Component ${ce.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ce,this.shouldAutoInitialize()){if(function Ee(be){return"EAGER"===be.instantiationMode}(ce))try{this.getOrInitializeService({instanceIdentifier:Pe})}catch(de){}for(const[de,ie]of this.instancesDeferred.entries()){const Ie=this.normalizeInstanceIdentifier(de);try{const Ge=this.getOrInitializeService({instanceIdentifier:Ie});ie.resolve(Ge)}catch(Ge){}}}}clearInstance(ce=Pe){this.instancesDeferred.delete(ce),this.instancesOptions.delete(ce),this.instances.delete(ce)}delete(){var ce=this;return(0,a.Z)(function*(){const de=Array.from(ce.instances.values());yield Promise.all([...de.filter(ie=>"INTERNAL"in ie).map(ie=>ie.INTERNAL.delete()),...de.filter(ie=>"_delete"in ie).map(ie=>ie._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ce=Pe){return this.instances.has(ce)}getOptions(ce=Pe){return this.instancesOptions.get(ce)||{}}initialize(ce={}){const{options:de={}}=ce,ie=this.normalizeInstanceIdentifier(ce.instanceIdentifier);if(this.isInitialized(ie))throw Error(`${this.name}(${ie}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ie=this.getOrInitializeService({instanceIdentifier:ie,options:de});for(const[Ge,st]of this.instancesDeferred.entries())ie===this.normalizeInstanceIdentifier(Ge)&&st.resolve(Ie);return Ie}onInit(ce,de){var ie;const Ie=this.normalizeInstanceIdentifier(de),Ge=null!==(ie=this.onInitCallbacks.get(Ie))&&void 0!==ie?ie:new Set;Ge.add(ce),this.onInitCallbacks.set(Ie,Ge);const st=this.instances.get(Ie);return st&&ce(st,Ie),()=>{Ge.delete(ce)}}invokeOnInitCallbacks(ce,de){const ie=this.onInitCallbacks.get(de);if(ie)for(const Ie of ie)try{Ie(ce,de)}catch(Ge){}}getOrInitializeService({instanceIdentifier:ce,options:de={}}){let ie=this.instances.get(ce);if(!ie&&this.component&&(ie=this.component.instanceFactory(this.container,{instanceIdentifier:(be=ce,be===Pe?void 0:be),options:de}),this.instances.set(ce,ie),this.instancesOptions.set(ce,de),this.invokeOnInitCallbacks(ie,ce),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ce,ie)}catch(Ie){}var be;return ie||null}normalizeInstanceIdentifier(ce=Pe){return this.component?this.component.multipleInstances?ce:Pe:ce}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class pe{constructor(ce){this.name=ce,this.providers=new Map}addComponent(ce){const de=this.getProvider(ce.name);if(de.isComponentSet())throw new Error(`Component ${ce.name} has already been registered with ${this.name}`);de.setComponent(ce)}addOrOverwriteComponent(ce){this.getProvider(ce.name).isComponentSet()&&this.providers.delete(ce.name),this.addComponent(ce)}getProvider(ce){if(this.providers.has(ce))return this.providers.get(ce);const de=new Le(ce,this);return this.providers.set(ce,de),de}getProviders(){return Array.from(this.providers.values())}}},1877:(tn,ot,H)=>{"use strict";H.d(ot,{Am:()=>be,Ub:()=>pe,Yd:()=>Ee,in:()=>ne});const a=[];var ne=(()=>{return(ce=ne||(ne={}))[ce.DEBUG=0]="DEBUG",ce[ce.VERBOSE=1]="VERBOSE",ce[ce.INFO=2]="INFO",ce[ce.WARN=3]="WARN",ce[ce.ERROR=4]="ERROR",ce[ce.SILENT=5]="SILENT",ne;var ce})();const Y={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},Pe=ne.INFO,Le={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},he=(ce,de,...ie)=>{if(de<ce.logLevel)return;const Ie=(new Date).toISOString(),Ge=Le[de];if(!Ge)throw new Error(`Attempted to log a message with an invalid logType (value: ${de})`);console[Ge](`[${Ie}]  ${ce.name}:`,...ie)};class Ee{constructor(de){this.name=de,this._logLevel=Pe,this._logHandler=he,this._userLogHandler=null,a.push(this)}get logLevel(){return this._logLevel}set logLevel(de){if(!(de in ne))throw new TypeError(`Invalid value "${de}" assigned to \`logLevel\``);this._logLevel=de}setLogLevel(de){this._logLevel="string"==typeof de?Y[de]:de}get logHandler(){return this._logHandler}set logHandler(de){if("function"!=typeof de)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=de}get userLogHandler(){return this._userLogHandler}set userLogHandler(de){this._userLogHandler=de}debug(...de){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...de),this._logHandler(this,ne.DEBUG,...de)}log(...de){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...de),this._logHandler(this,ne.VERBOSE,...de)}info(...de){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...de),this._logHandler(this,ne.INFO,...de)}warn(...de){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...de),this._logHandler(this,ne.WARN,...de)}error(...de){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...de),this._logHandler(this,ne.ERROR,...de)}}function pe(ce){a.forEach(de=>{de.setLogLevel(ce)})}function be(ce,de){for(const ie of a){let Ie=null;de&&de.level&&(Ie=Y[de.level]),ie.userLogHandler=null===ce?null:(Ge,st,...et)=>{const Re=et.map(De=>{if(null==De)return null;if("string"==typeof De)return De;if("number"==typeof De||"boolean"==typeof De)return De.toString();if(De instanceof Error)return De.message;try{return JSON.stringify(De)}catch(ct){return null}}).filter(De=>De).join(" ");st>=(null!=Ie?Ie:Ge.logLevel)&&ce({level:ne[st].toLowerCase(),message:Re,args:et,type:Ge.name})}}}},8766:(tn,ot,H)=>{"use strict";H.d(ot,{Lj:()=>vt,X3:()=>me});var a=H(5861);let Y,Pe;const Ee=new WeakMap,pe=new WeakMap,be=new WeakMap,ce=new WeakMap,de=new WeakMap;let Ge={get(ye,Oe,ve){if(ye instanceof IDBTransaction){if("done"===Oe)return pe.get(ye);if("objectStoreNames"===Oe)return ye.objectStoreNames||be.get(ye);if("store"===Oe)return ve.objectStoreNames[1]?void 0:ve.objectStore(ve.objectStoreNames[0])}return De(ye[Oe])},set:(ye,Oe,ve)=>(ye[Oe]=ve,!0),has:(ye,Oe)=>ye instanceof IDBTransaction&&("done"===Oe||"store"===Oe)||Oe in ye};function Re(ye){return"function"==typeof ye?function et(ye){return ye!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function he(){return Pe||(Pe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(ye)?function(...Oe){return ye.apply(ct(this),Oe),De(Ee.get(this))}:function(...Oe){return De(ye.apply(ct(this),Oe))}:function(Oe,...ve){const oe=ye.call(ct(this),Oe,...ve);return be.set(oe,Oe.sort?Oe.sort():[Oe]),De(oe)}}(ye):(ye instanceof IDBTransaction&&function Ie(ye){if(pe.has(ye))return;const Oe=new Promise((ve,oe)=>{const Ce=()=>{ye.removeEventListener("complete",Te),ye.removeEventListener("error",lt),ye.removeEventListener("abort",lt)},Te=()=>{ve(),Ce()},lt=()=>{oe(ye.error||new DOMException("AbortError","AbortError")),Ce()};ye.addEventListener("complete",Te),ye.addEventListener("error",lt),ye.addEventListener("abort",lt)});pe.set(ye,Oe)}(ye),((ye,Oe)=>Oe.some(ve=>ye instanceof ve))(ye,function Le(){return Y||(Y=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(ye,Ge):ye)}function De(ye){if(ye instanceof IDBRequest)return function ie(ye){const Oe=new Promise((ve,oe)=>{const Ce=()=>{ye.removeEventListener("success",Te),ye.removeEventListener("error",lt)},Te=()=>{ve(De(ye.result)),Ce()},lt=()=>{oe(ye.error),Ce()};ye.addEventListener("success",Te),ye.addEventListener("error",lt)});return Oe.then(ve=>{ve instanceof IDBCursor&&Ee.set(ve,ye)}).catch(()=>{}),de.set(Oe,ye),Oe}(ye);if(ce.has(ye))return ce.get(ye);const Oe=Re(ye);return Oe!==ye&&(ce.set(ye,Oe),de.set(Oe,ye)),Oe}const ct=ye=>de.get(ye);function me(ye,Oe,{blocked:ve,upgrade:oe,blocking:Ce,terminated:Te}={}){const lt=indexedDB.open(ye,Oe),J=De(lt);return oe&&lt.addEventListener("upgradeneeded",Gt=>{oe(De(lt.result),Gt.oldVersion,Gt.newVersion,De(lt.transaction))}),ve&&lt.addEventListener("blocked",()=>ve()),J.then(Gt=>{Te&&Gt.addEventListener("close",()=>Te()),Ce&&Gt.addEventListener("versionchange",()=>Ce())}).catch(()=>{}),J}function vt(ye,{blocked:Oe}={}){const ve=indexedDB.deleteDatabase(ye);return Oe&&ve.addEventListener("blocked",()=>Oe()),De(ve).then(()=>{})}const mt=["get","getKey","getAll","getAllKeys","count"],xt=["put","add","delete","clear"],Be=new Map;function ht(ye,Oe){if(!(ye instanceof IDBDatabase)||Oe in ye||"string"!=typeof Oe)return;if(Be.get(Oe))return Be.get(Oe);const ve=Oe.replace(/FromIndex$/,""),oe=Oe!==ve,Ce=xt.includes(ve);if(!(ve in(oe?IDBIndex:IDBObjectStore).prototype)||!Ce&&!mt.includes(ve))return;const Te=function(){var lt=(0,a.Z)(function*(J,...Gt){const bt=this.transaction(J,Ce?"readwrite":"readonly");let at=bt.store;return oe&&(at=at.index(Gt.shift())),(yield Promise.all([at[ve](...Gt),Ce&&bt.done]))[0]});return function(Gt){return lt.apply(this,arguments)}}();return Be.set(Oe,Te),Te}!function st(ye){Ge=ye(Ge)}(ye=>QE(ZE({},ye),{get:(Oe,ve,oe)=>ht(Oe,ve)||ye.get(Oe,ve,oe),has:(Oe,ve)=>!!ht(Oe,ve)||ye.has(Oe,ve)}))},5861:(tn,ot,H)=>{"use strict";function a(Y,Pe,Le,he,Ee,pe,be){try{var ce=Y[pe](be),de=ce.value}catch(ie){return void Le(ie)}ce.done?Pe(de):Promise.resolve(de).then(he,Ee)}function ne(Y){return function(){var Pe=this,Le=arguments;return new Promise(function(he,Ee){var pe=Y.apply(Pe,Le);function be(de){a(pe,he,Ee,be,ce,"next",de)}function ce(de){a(pe,he,Ee,be,ce,"throw",de)}be(void 0)})}}H.d(ot,{Z:()=>ne})}},tn=>{tn(tn.s=6439)}]);